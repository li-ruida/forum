<!DOCTYPE html><html lang="en"><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-140352188-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-140352188-1');</script><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="description" content="The CDN for vue-router"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/><meta name="timestamp" content="2023-01-08T10:11:53.475Z"/><link rel="shortcut icon" href="/favicon.ico"/><title>UNPKG - vue-router</title><script>window.Promise || document.write('\x3Cscript src="/es6-promise@4.2.5/dist/es6-promise.min.js">\x3C/script>\x3Cscript>ES6Promise.polyfill()\x3C/script>')</script><script>window.fetch || document.write('\x3Cscript src="/whatwg-fetch@3.0.0/dist/fetch.umd.js">\x3C/script>')</script><script>window.__DATA__ = {"packageName":"vue-router","packageVersion":"4.1.6","availableVersions":["0.4.0","0.5.0","0.5.1","0.5.2","0.6.0","0.6.1","0.6.2","0.7.0","0.7.1","0.7.2","0.7.3","0.7.4","0.7.5","0.7.6","0.7.7","0.7.8","0.7.9","0.7.10","0.7.11","0.7.12","0.7.13","2.0.0-beta.1","2.0.0-beta.2","2.0.0-beta.3","2.0.0-beta.4","2.0.0-rc.1","2.0.0-rc.2","2.0.0-rc.3","2.0.0-rc.4","2.0.0-rc.5","2.0.0-rc.6","2.0.0-rc.7","2.0.0","2.0.1","2.0.2","2.0.3","2.1.0","2.1.1","2.1.2","2.1.3","2.2.0","2.2.1","2.3.0","2.3.1","2.4.0","2.5.0","2.5.1","2.5.2","2.5.3","2.6.0","2.7.0","2.8.0","2.8.1","3.0.0","3.0.1","3.0.2","3.0.3","3.0.4","3.0.5","3.0.6","3.0.7","3.1.0","3.1.1","3.1.2","3.1.3","3.1.4","3.1.5","3.1.6","3.2.0","3.3.0","3.3.1","3.3.2","3.3.3","3.3.4","3.4.0","3.4.1","3.4.2","3.4.3","3.4.4","3.4.5","3.4.6","3.4.7","3.4.8","3.4.9","3.5.0","3.5.1","3.5.2","3.5.3","3.5.4","3.6.0","3.6.1","3.6.2","3.6.3","3.6.4","3.6.5","4.0.0-329e962","4.0.0-alpha.0","4.0.0-alpha.1","4.0.0-alpha.2","4.0.0-alpha.3","4.0.0-alpha.4","4.0.0-alpha.5","4.0.0-alpha.6","4.0.0-alpha.7","4.0.0-alpha.8","4.0.0-alpha.9","4.0.0-alpha.10","4.0.0-alpha.11","4.0.0-alpha.12","4.0.0-alpha.13","4.0.0-alpha.14","4.0.0-beta.1","4.0.0-beta.2","4.0.0-beta.3","4.0.0-beta.4","4.0.0-beta.5","4.0.0-beta.6","4.0.0-beta.7","4.0.0-beta.8","4.0.0-beta.9","4.0.0-beta.10","4.0.0-beta.11","4.0.0-beta.12","4.0.0-beta.13","4.0.0-rc.1","4.0.0-rc.2","4.0.0-rc.3","4.0.0-rc.4","4.0.0-rc.5","4.0.0-rc.6","4.0.0","4.0.1","4.0.2","4.0.3","4.0.4","4.0.5","4.0.6","4.0.7","4.0.8","4.0.9","4.0.10","4.0.11","4.0.12","4.0.13","4.0.14","4.0.15","4.0.16","4.1.0-4da5e55","4.1.0-51021cc","4.1.0-730eb15","4.1.0-9e62c00","4.1.0-aabe509","4.1.0-beta.0","4.1.0-beta.1","4.1.0-beta.2","4.1.0-c113369","4.1.0","4.1.1","4.1.2","4.1.3","4.1.4","4.1.5","4.1.6"],"filename":"/dist/vue-router.global.js","target":{"path":"/dist/vue-router.global.js","type":"file","details":{"contentType":"application/javascript","integrity":"sha384-e8Pi8v26F0Cjn6uDbUqbZELVEmyYYjiLePCnl4BtrtSYPaa7ciW8J7Drihc43hk/","language":"JavaScript","size":160289,"uri":null,"highlights":["<span class=\"code-comment\">/*!\n</span>","<span class=\"code-comment\">  * vue-router v4.1.6\n</span>","<span class=\"code-comment\">  * (c) 2022 Eduardo San Martin Morote\n</span>","<span class=\"code-comment\">  * @license MIT\n</span>","<span class=\"code-comment\">  */</span>\n","<span class=\"code-keyword\">var</span> VueRouter = (<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">exports, vue</span>) </span>{\n","<span class=\"code-meta\">  'use strict'</span>;\n","\n","  <span class=\"code-keyword\">const</span> isBrowser = <span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span> !== <span class=\"code-string\">'undefined'</span>;\n","\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isESModule</span>(<span class=\"code-params\">obj</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> obj.__esModule || obj[<span class=\"code-built_in\">Symbol</span>.toStringTag] === <span class=\"code-string\">'Module'</span>;\r\n","  }\r\n","  <span class=\"code-keyword\">const</span> assign = <span class=\"code-built_in\">Object</span>.assign;\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">applyToParams</span>(<span class=\"code-params\">fn, params</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> newParams = {};\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> key <span class=\"code-keyword\">in</span> params) {\r\n","          <span class=\"code-keyword\">const</span> value = params[key];\r\n","          newParams[key] = isArray(value)\r\n","              ? value.map(fn)\r\n","              : fn(value);\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> newParams;\r\n","  }\r\n","  <span class=\"code-keyword\">const</span> noop = <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> { };\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Typesafe alternative to Array.isArray\r\n</span>","<span class=\"code-comment\">   * https://github.com/microsoft/TypeScript/pull/48228\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-keyword\">const</span> isArray = <span class=\"code-built_in\">Array</span>.isArray;\n","\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">warn</span>(<span class=\"code-params\">msg</span>) </span>{\r\n","      <span class=\"code-comment\">// avoid using ...args as it breaks in older Edge builds</span>\r\n","      <span class=\"code-keyword\">const</span> args = <span class=\"code-built_in\">Array</span>.from(<span class=\"code-built_in\">arguments</span>).slice(<span class=\"code-number\">1</span>);\r\n","      <span class=\"code-built_in\">console</span>.warn.apply(<span class=\"code-built_in\">console</span>, [<span class=\"code-string\">'[Vue Router warn]: '</span> + msg].concat(args));\r\n","  }\n","\n","  <span class=\"code-keyword\">const</span> TRAILING_SLASH_RE = <span class=\"code-regexp\">/\\/$/</span>;\r\n","  <span class=\"code-keyword\">const</span> removeTrailingSlash = <span class=\"code-function\">(<span class=\"code-params\">path</span>) =&gt;</span> path.replace(TRAILING_SLASH_RE, <span class=\"code-string\">''</span>);\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Transforms a URI into a normalized history location\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param parseQuery\r\n</span>","<span class=\"code-comment\">   * @param location - URI to normalize\r\n</span>","<span class=\"code-comment\">   * @param currentLocation - current absolute location. Allows resolving relative\r\n</span>","<span class=\"code-comment\">   * paths. Must start with `/`. Defaults to `/`\r\n</span>","<span class=\"code-comment\">   * @returns a normalized history location\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">parseURL</span>(<span class=\"code-params\">parseQuery, location, currentLocation = <span class=\"code-string\">'/'</span></span>) </span>{\r\n","      <span class=\"code-keyword\">let</span> path, query = {}, searchString = <span class=\"code-string\">''</span>, hash = <span class=\"code-string\">''</span>;\r\n","      <span class=\"code-comment\">// Could use URL and URLSearchParams but IE 11 doesn't support it</span>\r\n","      <span class=\"code-comment\">// <span class=\"code-doctag\">TODO:</span> move to new URL()</span>\r\n","      <span class=\"code-keyword\">const</span> hashPos = location.indexOf(<span class=\"code-string\">'#'</span>);\r\n","      <span class=\"code-keyword\">let</span> searchPos = location.indexOf(<span class=\"code-string\">'?'</span>);\r\n","      <span class=\"code-comment\">// the hash appears before the search, so it's not part of the search string</span>\r\n","      <span class=\"code-keyword\">if</span> (hashPos &lt; searchPos &amp;&amp; hashPos &gt;= <span class=\"code-number\">0</span>) {\r\n","          searchPos = <span class=\"code-number\">-1</span>;\r\n","      }\r\n","      <span class=\"code-keyword\">if</span> (searchPos &gt; <span class=\"code-number\">-1</span>) {\r\n","          path = location.slice(<span class=\"code-number\">0</span>, searchPos);\r\n","          searchString = location.slice(searchPos + <span class=\"code-number\">1</span>, hashPos &gt; <span class=\"code-number\">-1</span> ? hashPos : location.length);\r\n","          query = parseQuery(searchString);\r\n","      }\r\n","      <span class=\"code-keyword\">if</span> (hashPos &gt; <span class=\"code-number\">-1</span>) {\r\n","          path = path || location.slice(<span class=\"code-number\">0</span>, hashPos);\r\n","          <span class=\"code-comment\">// keep the # character</span>\r\n","          hash = location.slice(hashPos, location.length);\r\n","      }\r\n","      <span class=\"code-comment\">// no search and no query</span>\r\n","      path = resolveRelativePath(path != <span class=\"code-literal\">null</span> ? path : location, currentLocation);\r\n","      <span class=\"code-comment\">// empty path means a relative query or hash `?foo=f`, `#thing`</span>\r\n","      <span class=\"code-keyword\">return</span> {\r\n","          fullPath: path + (searchString &amp;&amp; <span class=\"code-string\">'?'</span>) + searchString + hash,\r\n","          path,\r\n","          query,\r\n","          hash,\r\n","      };\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Stringifies a URL object\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param stringifyQuery\r\n</span>","<span class=\"code-comment\">   * @param location\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">stringifyURL</span>(<span class=\"code-params\">stringifyQuery, location</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> query = location.query ? stringifyQuery(location.query) : <span class=\"code-string\">''</span>;\r\n","      <span class=\"code-keyword\">return</span> location.path + (query &amp;&amp; <span class=\"code-string\">'?'</span>) + query + (location.hash || <span class=\"code-string\">''</span>);\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Strips off the base from the beginning of a location.pathname in a non-case-sensitive way.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param pathname - location.pathname\r\n</span>","<span class=\"code-comment\">   * @param base - base to strip off\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">stripBase</span>(<span class=\"code-params\">pathname, base</span>) </span>{\r\n","      <span class=\"code-comment\">// no base or base is not found at the beginning</span>\r\n","      <span class=\"code-keyword\">if</span> (!base || !pathname.toLowerCase().startsWith(base.toLowerCase()))\r\n","          <span class=\"code-keyword\">return</span> pathname;\r\n","      <span class=\"code-keyword\">return</span> pathname.slice(base.length) || <span class=\"code-string\">'/'</span>;\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Checks if two RouteLocation are equal. This means that both locations are\r\n</span>","<span class=\"code-comment\">   * pointing towards the same {@link RouteRecord} and that all `params`, `query`\r\n</span>","<span class=\"code-comment\">   * parameters and `hash` are the same\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param a - first {@link RouteLocation}\r\n</span>","<span class=\"code-comment\">   * @param b - second {@link RouteLocation}\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isSameRouteLocation</span>(<span class=\"code-params\">stringifyQuery, a, b</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> aLastIndex = a.matched.length - <span class=\"code-number\">1</span>;\r\n","      <span class=\"code-keyword\">const</span> bLastIndex = b.matched.length - <span class=\"code-number\">1</span>;\r\n","      <span class=\"code-keyword\">return</span> (aLastIndex &gt; <span class=\"code-number\">-1</span> &amp;&amp;\r\n","          aLastIndex === bLastIndex &amp;&amp;\r\n","          isSameRouteRecord(a.matched[aLastIndex], b.matched[bLastIndex]) &amp;&amp;\r\n","          isSameRouteLocationParams(a.params, b.params) &amp;&amp;\r\n","          stringifyQuery(a.query) === stringifyQuery(b.query) &amp;&amp;\r\n","          a.hash === b.hash);\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Check if two `RouteRecords` are equal. Takes into account aliases: they are\r\n</span>","<span class=\"code-comment\">   * considered equal to the `RouteRecord` they are aliasing.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param a - first {@link RouteRecord}\r\n</span>","<span class=\"code-comment\">   * @param b - second {@link RouteRecord}\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isSameRouteRecord</span>(<span class=\"code-params\">a, b</span>) </span>{\r\n","      <span class=\"code-comment\">// since the original record has an undefined value for aliasOf</span>\r\n","      <span class=\"code-comment\">// but all aliases point to the original record, this will always compare</span>\r\n","      <span class=\"code-comment\">// the original record</span>\r\n","      <span class=\"code-keyword\">return</span> (a.aliasOf || a) === (b.aliasOf || b);\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isSameRouteLocationParams</span>(<span class=\"code-params\">a, b</span>) </span>{\r\n","      <span class=\"code-keyword\">if</span> (<span class=\"code-built_in\">Object</span>.keys(a).length !== <span class=\"code-built_in\">Object</span>.keys(b).length)\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-literal\">false</span>;\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> key <span class=\"code-keyword\">in</span> a) {\r\n","          <span class=\"code-keyword\">if</span> (!isSameRouteLocationParamsValue(a[key], b[key]))\r\n","              <span class=\"code-keyword\">return</span> <span class=\"code-literal\">false</span>;\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> <span class=\"code-literal\">true</span>;\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isSameRouteLocationParamsValue</span>(<span class=\"code-params\">a, b</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> isArray(a)\r\n","          ? isEquivalentArray(a, b)\r\n","          : isArray(b)\r\n","              ? isEquivalentArray(b, a)\r\n","              : a === b;\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Check if two arrays are the same or if an array with one single entry is the\r\n</span>","<span class=\"code-comment\">   * same as another primitive value. Used to check query and parameters\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param a - array of values\r\n</span>","<span class=\"code-comment\">   * @param b - array of values or a single value\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isEquivalentArray</span>(<span class=\"code-params\">a, b</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> isArray(b)\r\n","          ? a.length === b.length &amp;&amp; a.every(<span class=\"code-function\">(<span class=\"code-params\">value, i</span>) =&gt;</span> value === b[i])\r\n","          : a.length === <span class=\"code-number\">1</span> &amp;&amp; a[<span class=\"code-number\">0</span>] === b;\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Resolves a relative path that starts with `.`.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param to - path location we are resolving\r\n</span>","<span class=\"code-comment\">   * @param from - currentLocation.path, should start with `/`\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">resolveRelativePath</span>(<span class=\"code-params\">to, from</span>) </span>{\r\n","      <span class=\"code-keyword\">if</span> (to.startsWith(<span class=\"code-string\">'/'</span>))\r\n","          <span class=\"code-keyword\">return</span> to;\r\n","      <span class=\"code-keyword\">if</span> (!<span class=\"code-keyword\">from</span>.startsWith(<span class=\"code-string\">'/'</span>)) {\r\n","          warn(<span class=\"code-string\">`Cannot resolve a relative location without an absolute path. Trying to resolve \"<span class=\"code-subst\">${to}</span>\" from \"<span class=\"code-subst\">${<span class=\"code-keyword\">from</span>}</span>\". It should look like \"/<span class=\"code-subst\">${<span class=\"code-keyword\">from</span>}</span>\".`</span>);\r\n","          <span class=\"code-keyword\">return</span> to;\r\n","      }\r\n","      <span class=\"code-keyword\">if</span> (!to)\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">from</span>;\r\n","      <span class=\"code-keyword\">const</span> fromSegments = <span class=\"code-keyword\">from</span>.split(<span class=\"code-string\">'/'</span>);\r\n","      <span class=\"code-keyword\">const</span> toSegments = to.split(<span class=\"code-string\">'/'</span>);\r\n","      <span class=\"code-keyword\">let</span> position = fromSegments.length - <span class=\"code-number\">1</span>;\r\n","      <span class=\"code-keyword\">let</span> toPosition;\r\n","      <span class=\"code-keyword\">let</span> segment;\r\n","      <span class=\"code-keyword\">for</span> (toPosition = <span class=\"code-number\">0</span>; toPosition &lt; toSegments.length; toPosition++) {\r\n","          segment = toSegments[toPosition];\r\n","          <span class=\"code-comment\">// we stay on the same position</span>\r\n","          <span class=\"code-keyword\">if</span> (segment === <span class=\"code-string\">'.'</span>)\r\n","              <span class=\"code-keyword\">continue</span>;\r\n","          <span class=\"code-comment\">// go up in the from array</span>\r\n","          <span class=\"code-keyword\">if</span> (segment === <span class=\"code-string\">'..'</span>) {\r\n","              <span class=\"code-comment\">// we can't go below zero, but we still need to increment toPosition</span>\r\n","              <span class=\"code-keyword\">if</span> (position &gt; <span class=\"code-number\">1</span>)\r\n","                  position--;\r\n","              <span class=\"code-comment\">// continue</span>\r\n","          }\r\n","          <span class=\"code-comment\">// we reached a non-relative path, we stop here</span>\r\n","          <span class=\"code-keyword\">else</span>\r\n","              <span class=\"code-keyword\">break</span>;\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> (fromSegments.slice(<span class=\"code-number\">0</span>, position).join(<span class=\"code-string\">'/'</span>) +\r\n","          <span class=\"code-string\">'/'</span> +\r\n","          toSegments\r\n","              <span class=\"code-comment\">// ensure we use at least the last element in the toSegments</span>\r\n","              .slice(toPosition - (toPosition === toSegments.length ? <span class=\"code-number\">1</span> : <span class=\"code-number\">0</span>))\r\n","              .join(<span class=\"code-string\">'/'</span>));\r\n","  }\n","\n","  <span class=\"code-keyword\">var</span> NavigationType;\r\n","  (<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">NavigationType</span>) </span>{\r\n","      NavigationType[<span class=\"code-string\">\"pop\"</span>] = <span class=\"code-string\">\"pop\"</span>;\r\n","      NavigationType[<span class=\"code-string\">\"push\"</span>] = <span class=\"code-string\">\"push\"</span>;\r\n","  })(NavigationType || (NavigationType = {}));\r\n","  <span class=\"code-keyword\">var</span> NavigationDirection;\r\n","  (<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">NavigationDirection</span>) </span>{\r\n","      NavigationDirection[<span class=\"code-string\">\"back\"</span>] = <span class=\"code-string\">\"back\"</span>;\r\n","      NavigationDirection[<span class=\"code-string\">\"forward\"</span>] = <span class=\"code-string\">\"forward\"</span>;\r\n","      NavigationDirection[<span class=\"code-string\">\"unknown\"</span>] = <span class=\"code-string\">\"\"</span>;\r\n","  })(NavigationDirection || (NavigationDirection = {}));\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Starting location for Histories\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-keyword\">const</span> START = <span class=\"code-string\">''</span>;\r\n","  <span class=\"code-comment\">// Generic utils</span>\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Normalizes a base by removing any trailing slash and reading the base tag if\r\n</span>","<span class=\"code-comment\">   * present.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param base - base to normalize\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">normalizeBase</span>(<span class=\"code-params\">base</span>) </span>{\r\n","      <span class=\"code-keyword\">if</span> (!base) {\r\n","          <span class=\"code-keyword\">if</span> (isBrowser) {\r\n","              <span class=\"code-comment\">// respect &lt;base&gt; tag</span>\r\n","              <span class=\"code-keyword\">const</span> baseEl = <span class=\"code-built_in\">document</span>.querySelector(<span class=\"code-string\">'base'</span>);\r\n","              base = (baseEl &amp;&amp; baseEl.getAttribute(<span class=\"code-string\">'href'</span>)) || <span class=\"code-string\">'/'</span>;\r\n","              <span class=\"code-comment\">// strip full URL origin</span>\r\n","              base = base.replace(<span class=\"code-regexp\">/^\\w+:\\/\\/[^\\/]+/</span>, <span class=\"code-string\">''</span>);\r\n","          }\r\n","          <span class=\"code-keyword\">else</span> {\r\n","              base = <span class=\"code-string\">'/'</span>;\r\n","          }\r\n","      }\r\n","      <span class=\"code-comment\">// ensure leading slash when it was removed by the regex above avoid leading</span>\r\n","      <span class=\"code-comment\">// slash with hash because the file could be read from the disk like file://</span>\r\n","      <span class=\"code-comment\">// and the leading slash would cause problems</span>\r\n","      <span class=\"code-keyword\">if</span> (base[<span class=\"code-number\">0</span>] !== <span class=\"code-string\">'/'</span> &amp;&amp; base[<span class=\"code-number\">0</span>] !== <span class=\"code-string\">'#'</span>)\r\n","          base = <span class=\"code-string\">'/'</span> + base;\r\n","      <span class=\"code-comment\">// remove the trailing slash so all other method can just do `base + fullPath`</span>\r\n","      <span class=\"code-comment\">// to build an href</span>\r\n","      <span class=\"code-keyword\">return</span> removeTrailingSlash(base);\r\n","  }\r\n","  <span class=\"code-comment\">// remove any character before the hash</span>\r\n","  <span class=\"code-keyword\">const</span> BEFORE_HASH_RE = <span class=\"code-regexp\">/^[^#]+#/</span>;\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">createHref</span>(<span class=\"code-params\">base, location</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> base.replace(BEFORE_HASH_RE, <span class=\"code-string\">'#'</span>) + location;\r\n","  }\n","\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">getElementPosition</span>(<span class=\"code-params\">el, offset</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> docRect = <span class=\"code-built_in\">document</span>.documentElement.getBoundingClientRect();\r\n","      <span class=\"code-keyword\">const</span> elRect = el.getBoundingClientRect();\r\n","      <span class=\"code-keyword\">return</span> {\r\n","          behavior: offset.behavior,\r\n","          left: elRect.left - docRect.left - (offset.left || <span class=\"code-number\">0</span>),\r\n","          top: elRect.top - docRect.top - (offset.top || <span class=\"code-number\">0</span>),\r\n","      };\r\n","  }\r\n","  <span class=\"code-keyword\">const</span> computeScrollPosition = <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> ({\r\n","      left: <span class=\"code-built_in\">window</span>.pageXOffset,\r\n","      top: <span class=\"code-built_in\">window</span>.pageYOffset,\r\n","  });\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">scrollToPosition</span>(<span class=\"code-params\">position</span>) </span>{\r\n","      <span class=\"code-keyword\">let</span> scrollToOptions;\r\n","      <span class=\"code-keyword\">if</span> (<span class=\"code-string\">'el'</span> <span class=\"code-keyword\">in</span> position) {\r\n","          <span class=\"code-keyword\">const</span> positionEl = position.el;\r\n","          <span class=\"code-keyword\">const</span> isIdSelector = <span class=\"code-keyword\">typeof</span> positionEl === <span class=\"code-string\">'string'</span> &amp;&amp; positionEl.startsWith(<span class=\"code-string\">'#'</span>);\r\n","          <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">           * `id`s can accept pretty much any characters, including CSS combinators\r\n</span>","<span class=\"code-comment\">           * like `&gt;` or `~`. It's still possible to retrieve elements using\r\n</span>","<span class=\"code-comment\">           * `document.getElementById('~')` but it needs to be escaped when using\r\n</span>","<span class=\"code-comment\">           * `document.querySelector('#\\\\~')` for it to be valid. The only\r\n</span>","<span class=\"code-comment\">           * requirements for `id`s are them to be unique on the page and to not be\r\n</span>","<span class=\"code-comment\">           * empty (`id=\"\"`). Because of that, when passing an id selector, it should\r\n</span>","<span class=\"code-comment\">           * be properly escaped for it to work with `querySelector`. We could check\r\n</span>","<span class=\"code-comment\">           * for the id selector to be simple (no CSS combinators `+ &gt;~`) but that\r\n</span>","<span class=\"code-comment\">           * would make things inconsistent since they are valid characters for an\r\n</span>","<span class=\"code-comment\">           * `id` but would need to be escaped when using `querySelector`, breaking\r\n</span>","<span class=\"code-comment\">           * their usage and ending up in no selector returned. Selectors need to be\r\n</span>","<span class=\"code-comment\">           * escaped:\r\n</span>","<span class=\"code-comment\">           *\r\n</span>","<span class=\"code-comment\">           * - `#1-thing` becomes `#\\31 -thing`\r\n</span>","<span class=\"code-comment\">           * - `#with~symbols` becomes `#with\\\\~symbols`\r\n</span>","<span class=\"code-comment\">           *\r\n</span>","<span class=\"code-comment\">           * - More information about  the topic can be found at\r\n</span>","<span class=\"code-comment\">           *   https://mathiasbynens.be/notes/html5-id-class.\r\n</span>","<span class=\"code-comment\">           * - Practical example: https://mathiasbynens.be/demo/html5-id\r\n</span>","<span class=\"code-comment\">           */</span>\r\n","          <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">typeof</span> position.el === <span class=\"code-string\">'string'</span>) {\r\n","              <span class=\"code-keyword\">if</span> (!isIdSelector || !<span class=\"code-built_in\">document</span>.getElementById(position.el.slice(<span class=\"code-number\">1</span>))) {\r\n","                  <span class=\"code-keyword\">try</span> {\r\n","                      <span class=\"code-keyword\">const</span> foundEl = <span class=\"code-built_in\">document</span>.querySelector(position.el);\r\n","                      <span class=\"code-keyword\">if</span> (isIdSelector &amp;&amp; foundEl) {\r\n","                          warn(<span class=\"code-string\">`The selector \"<span class=\"code-subst\">${position.el}</span>\" should be passed as \"el: document.querySelector('<span class=\"code-subst\">${position.el}</span>')\" because it starts with \"#\".`</span>);\r\n","                          <span class=\"code-comment\">// return to avoid other warnings</span>\r\n","                          <span class=\"code-keyword\">return</span>;\r\n","                      }\r\n","                  }\r\n","                  <span class=\"code-keyword\">catch</span> (err) {\r\n","                      warn(<span class=\"code-string\">`The selector \"<span class=\"code-subst\">${position.el}</span>\" is invalid. If you are using an id selector, make sure to escape it. You can find more information about escaping characters in selectors at https://mathiasbynens.be/notes/css-escapes or use CSS.escape (https://developer.mozilla.org/en-US/docs/Web/API/CSS/escape).`</span>);\r\n","                      <span class=\"code-comment\">// return to avoid other warnings</span>\r\n","                      <span class=\"code-keyword\">return</span>;\r\n","                  }\r\n","              }\r\n","          }\r\n","          <span class=\"code-keyword\">const</span> el = <span class=\"code-keyword\">typeof</span> positionEl === <span class=\"code-string\">'string'</span>\r\n","              ? isIdSelector\r\n","                  ? <span class=\"code-built_in\">document</span>.getElementById(positionEl.slice(<span class=\"code-number\">1</span>))\r\n","                  : <span class=\"code-built_in\">document</span>.querySelector(positionEl)\r\n","              : positionEl;\r\n","          <span class=\"code-keyword\">if</span> (!el) {\r\n","              warn(<span class=\"code-string\">`Couldn't find element using selector \"<span class=\"code-subst\">${position.el}</span>\" returned by scrollBehavior.`</span>);\r\n","              <span class=\"code-keyword\">return</span>;\r\n","          }\r\n","          scrollToOptions = getElementPosition(el, position);\r\n","      }\r\n","      <span class=\"code-keyword\">else</span> {\r\n","          scrollToOptions = position;\r\n","      }\r\n","      <span class=\"code-keyword\">if</span> (<span class=\"code-string\">'scrollBehavior'</span> <span class=\"code-keyword\">in</span> <span class=\"code-built_in\">document</span>.documentElement.style)\r\n","          <span class=\"code-built_in\">window</span>.scrollTo(scrollToOptions);\r\n","      <span class=\"code-keyword\">else</span> {\r\n","          <span class=\"code-built_in\">window</span>.scrollTo(scrollToOptions.left != <span class=\"code-literal\">null</span> ? scrollToOptions.left : <span class=\"code-built_in\">window</span>.pageXOffset, scrollToOptions.top != <span class=\"code-literal\">null</span> ? scrollToOptions.top : <span class=\"code-built_in\">window</span>.pageYOffset);\r\n","      }\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">getScrollKey</span>(<span class=\"code-params\">path, delta</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> position = history.state ? history.state.position - delta : <span class=\"code-number\">-1</span>;\r\n","      <span class=\"code-keyword\">return</span> position + path;\r\n","  }\r\n","  <span class=\"code-keyword\">const</span> scrollPositions = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Map</span>();\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">saveScrollPosition</span>(<span class=\"code-params\">key, scrollPosition</span>) </span>{\r\n","      scrollPositions.set(key, scrollPosition);\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">getSavedScrollPosition</span>(<span class=\"code-params\">key</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> scroll = scrollPositions.get(key);\r\n","      <span class=\"code-comment\">// consume it so it's not used again</span>\r\n","      scrollPositions.delete(key);\r\n","      <span class=\"code-keyword\">return</span> scroll;\r\n","  }\r\n","  <span class=\"code-comment\">// <span class=\"code-doctag\">TODO:</span> RFC about how to save scroll position</span>\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * ScrollBehavior instance used by the router to compute and restore the scroll\r\n</span>","<span class=\"code-comment\">   * position when navigating.\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-comment\">// export interface ScrollHandler&lt;ScrollPositionEntry extends HistoryStateValue, ScrollPosition extends ScrollPositionEntry&gt; {</span>\r\n","  <span class=\"code-comment\">//   // returns a scroll position that can be saved in history</span>\r\n","  <span class=\"code-comment\">//   compute(): ScrollPositionEntry</span>\r\n","  <span class=\"code-comment\">//   // can take an extended ScrollPositionEntry</span>\r\n","  <span class=\"code-comment\">//   scroll(position: ScrollPosition): void</span>\r\n","  <span class=\"code-comment\">// }</span>\r\n","  <span class=\"code-comment\">// export const scrollHandler: ScrollHandler&lt;ScrollPosition&gt; = {</span>\r\n","  <span class=\"code-comment\">//   compute: computeScroll,</span>\r\n","  <span class=\"code-comment\">//   scroll: scrollToPosition,</span>\r\n","  <span class=\"code-comment\">// }</span>\n","\n","  <span class=\"code-keyword\">let</span> createBaseLocation = <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> location.protocol + <span class=\"code-string\">'//'</span> + location.host;\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Creates a normalized history location from a window.location object\r\n</span>","<span class=\"code-comment\">   * @param location -\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">createCurrentLocation</span>(<span class=\"code-params\">base, location</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> { pathname, search, hash } = location;\r\n","      <span class=\"code-comment\">// allows hash bases like #, /#, #/, #!, #!/, /#!/, or even /folder#end</span>\r\n","      <span class=\"code-keyword\">const</span> hashPos = base.indexOf(<span class=\"code-string\">'#'</span>);\r\n","      <span class=\"code-keyword\">if</span> (hashPos &gt; <span class=\"code-number\">-1</span>) {\r\n","          <span class=\"code-keyword\">let</span> slicePos = hash.includes(base.slice(hashPos))\r\n","              ? base.slice(hashPos).length\r\n","              : <span class=\"code-number\">1</span>;\r\n","          <span class=\"code-keyword\">let</span> pathFromHash = hash.slice(slicePos);\r\n","          <span class=\"code-comment\">// prepend the starting slash to hash so the url starts with /#</span>\r\n","          <span class=\"code-keyword\">if</span> (pathFromHash[<span class=\"code-number\">0</span>] !== <span class=\"code-string\">'/'</span>)\r\n","              pathFromHash = <span class=\"code-string\">'/'</span> + pathFromHash;\r\n","          <span class=\"code-keyword\">return</span> stripBase(pathFromHash, <span class=\"code-string\">''</span>);\r\n","      }\r\n","      <span class=\"code-keyword\">const</span> path = stripBase(pathname, base);\r\n","      <span class=\"code-keyword\">return</span> path + search + hash;\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">useHistoryListeners</span>(<span class=\"code-params\">base, historyState, currentLocation, replace</span>) </span>{\r\n","      <span class=\"code-keyword\">let</span> listeners = [];\r\n","      <span class=\"code-keyword\">let</span> teardowns = [];\r\n","      <span class=\"code-comment\">// <span class=\"code-doctag\">TODO:</span> should it be a stack? a Dict. Check if the popstate listener</span>\r\n","      <span class=\"code-comment\">// can trigger twice</span>\r\n","      <span class=\"code-keyword\">let</span> pauseState = <span class=\"code-literal\">null</span>;\r\n","      <span class=\"code-keyword\">const</span> popStateHandler = <span class=\"code-function\">(<span class=\"code-params\">{ state, }</span>) =&gt;</span> {\r\n","          <span class=\"code-keyword\">const</span> to = createCurrentLocation(base, location);\r\n","          <span class=\"code-keyword\">const</span> <span class=\"code-keyword\">from</span> = currentLocation.value;\r\n","          <span class=\"code-keyword\">const</span> fromState = historyState.value;\r\n","          <span class=\"code-keyword\">let</span> delta = <span class=\"code-number\">0</span>;\r\n","          <span class=\"code-keyword\">if</span> (state) {\r\n","              currentLocation.value = to;\r\n","              historyState.value = state;\r\n","              <span class=\"code-comment\">// ignore the popstate and reset the pauseState</span>\r\n","              <span class=\"code-keyword\">if</span> (pauseState &amp;&amp; pauseState === <span class=\"code-keyword\">from</span>) {\r\n","                  pauseState = <span class=\"code-literal\">null</span>;\r\n","                  <span class=\"code-keyword\">return</span>;\r\n","              }\r\n","              delta = fromState ? state.position - fromState.position : <span class=\"code-number\">0</span>;\r\n","          }\r\n","          <span class=\"code-keyword\">else</span> {\r\n","              replace(to);\r\n","          }\r\n","          <span class=\"code-comment\">// console.log({ deltaFromCurrent })</span>\r\n","          <span class=\"code-comment\">// Here we could also revert the navigation by calling history.go(-delta)</span>\r\n","          <span class=\"code-comment\">// this listener will have to be adapted to not trigger again and to wait for the url</span>\r\n","          <span class=\"code-comment\">// to be updated before triggering the listeners. Some kind of validation function would also</span>\r\n","          <span class=\"code-comment\">// need to be passed to the listeners so the navigation can be accepted</span>\r\n","          <span class=\"code-comment\">// call all listeners</span>\r\n","          listeners.forEach(<span class=\"code-function\"><span class=\"code-params\">listener</span> =&gt;</span> {\r\n","              listener(currentLocation.value, <span class=\"code-keyword\">from</span>, {\r\n","                  delta,\r\n","                  type: NavigationType.pop,\r\n","                  direction: delta\r\n","                      ? delta &gt; <span class=\"code-number\">0</span>\r\n","                          ? NavigationDirection.forward\r\n","                          : NavigationDirection.back\r\n","                      : NavigationDirection.unknown,\r\n","              });\r\n","          });\r\n","      };\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">pauseListeners</span>(<span class=\"code-params\"></span>) </span>{\r\n","          pauseState = currentLocation.value;\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">listen</span>(<span class=\"code-params\">callback</span>) </span>{\r\n","          <span class=\"code-comment\">// set up the listener and prepare teardown callbacks</span>\r\n","          listeners.push(callback);\r\n","          <span class=\"code-keyword\">const</span> teardown = <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","              <span class=\"code-keyword\">const</span> index = listeners.indexOf(callback);\r\n","              <span class=\"code-keyword\">if</span> (index &gt; <span class=\"code-number\">-1</span>)\r\n","                  listeners.splice(index, <span class=\"code-number\">1</span>);\r\n","          };\r\n","          teardowns.push(teardown);\r\n","          <span class=\"code-keyword\">return</span> teardown;\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">beforeUnloadListener</span>(<span class=\"code-params\"></span>) </span>{\r\n","          <span class=\"code-keyword\">const</span> { history } = <span class=\"code-built_in\">window</span>;\r\n","          <span class=\"code-keyword\">if</span> (!history.state)\r\n","              <span class=\"code-keyword\">return</span>;\r\n","          history.replaceState(assign({}, history.state, { <span class=\"code-attr\">scroll</span>: computeScrollPosition() }), <span class=\"code-string\">''</span>);\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">destroy</span>(<span class=\"code-params\"></span>) </span>{\r\n","          <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> teardown <span class=\"code-keyword\">of</span> teardowns)\r\n","              teardown();\r\n","          teardowns = [];\r\n","          <span class=\"code-built_in\">window</span>.removeEventListener(<span class=\"code-string\">'popstate'</span>, popStateHandler);\r\n","          <span class=\"code-built_in\">window</span>.removeEventListener(<span class=\"code-string\">'beforeunload'</span>, beforeUnloadListener);\r\n","      }\r\n","      <span class=\"code-comment\">// set up the listeners and prepare teardown callbacks</span>\r\n","      <span class=\"code-built_in\">window</span>.addEventListener(<span class=\"code-string\">'popstate'</span>, popStateHandler);\r\n","      <span class=\"code-built_in\">window</span>.addEventListener(<span class=\"code-string\">'beforeunload'</span>, beforeUnloadListener);\r\n","      <span class=\"code-keyword\">return</span> {\r\n","          pauseListeners,\r\n","          listen,\r\n","          destroy,\r\n","      };\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Creates a state object\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">buildState</span>(<span class=\"code-params\">back, current, forward, replaced = false, computeScroll = false</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> {\r\n","          back,\r\n","          current,\r\n","          forward,\r\n","          replaced,\r\n","          position: <span class=\"code-built_in\">window</span>.history.length,\r\n","          scroll: computeScroll ? computeScrollPosition() : <span class=\"code-literal\">null</span>,\r\n","      };\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">useHistoryStateNavigation</span>(<span class=\"code-params\">base</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> { history, location } = <span class=\"code-built_in\">window</span>;\r\n","      <span class=\"code-comment\">// private variables</span>\r\n","      <span class=\"code-keyword\">const</span> currentLocation = {\r\n","          value: createCurrentLocation(base, location),\r\n","      };\r\n","      <span class=\"code-keyword\">const</span> historyState = { <span class=\"code-attr\">value</span>: history.state };\r\n","      <span class=\"code-comment\">// build current history entry as this is a fresh navigation</span>\r\n","      <span class=\"code-keyword\">if</span> (!historyState.value) {\r\n","          changeLocation(currentLocation.value, {\r\n","              back: <span class=\"code-literal\">null</span>,\r\n","              current: currentLocation.value,\r\n","              forward: <span class=\"code-literal\">null</span>,\r\n","              <span class=\"code-comment\">// the length is off by one, we need to decrease it</span>\r\n","              position: history.length - <span class=\"code-number\">1</span>,\r\n","              replaced: <span class=\"code-literal\">true</span>,\r\n","              <span class=\"code-comment\">// don't add a scroll as the user may have an anchor, and we want</span>\r\n","              <span class=\"code-comment\">// scrollBehavior to be triggered without a saved position</span>\r\n","              scroll: <span class=\"code-literal\">null</span>,\r\n","          }, <span class=\"code-literal\">true</span>);\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">changeLocation</span>(<span class=\"code-params\">to, state, replace</span>) </span>{\r\n","          <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">           * if a base tag is provided, and we are on a normal domain, we have to\r\n</span>","<span class=\"code-comment\">           * respect the provided `base` attribute because pushState() will use it and\r\n</span>","<span class=\"code-comment\">           * potentially erase anything before the `#` like at\r\n</span>","<span class=\"code-comment\">           * https://github.com/vuejs/router/issues/685 where a base of\r\n</span>","<span class=\"code-comment\">           * `/folder/#` but a base of `/` would erase the `/folder/` section. If\r\n</span>","<span class=\"code-comment\">           * there is no host, the `&lt;base&gt;` tag makes no sense and if there isn't a\r\n</span>","<span class=\"code-comment\">           * base tag we can just use everything after the `#`.\r\n</span>","<span class=\"code-comment\">           */</span>\r\n","          <span class=\"code-keyword\">const</span> hashIndex = base.indexOf(<span class=\"code-string\">'#'</span>);\r\n","          <span class=\"code-keyword\">const</span> url = hashIndex &gt; <span class=\"code-number\">-1</span>\r\n","              ? (location.host &amp;&amp; <span class=\"code-built_in\">document</span>.querySelector(<span class=\"code-string\">'base'</span>)\r\n","                  ? base\r\n","                  : base.slice(hashIndex)) + to\r\n","              : createBaseLocation() + base + to;\r\n","          <span class=\"code-keyword\">try</span> {\r\n","              <span class=\"code-comment\">// BROWSER QUIRK</span>\r\n","              <span class=\"code-comment\">// <span class=\"code-doctag\">NOTE:</span> Safari throws a SecurityError when calling this function 100 times in 30 seconds</span>\r\n","              history[replace ? <span class=\"code-string\">'replaceState'</span> : <span class=\"code-string\">'pushState'</span>](state, <span class=\"code-string\">''</span>, url);\r\n","              historyState.value = state;\r\n","          }\r\n","          <span class=\"code-keyword\">catch</span> (err) {\r\n","              {\r\n","                  warn(<span class=\"code-string\">'Error with push/replace State'</span>, err);\r\n","              }\r\n","              <span class=\"code-comment\">// Force the navigation, this also resets the call count</span>\r\n","              location[replace ? <span class=\"code-string\">'replace'</span> : <span class=\"code-string\">'assign'</span>](url);\r\n","          }\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">replace</span>(<span class=\"code-params\">to, data</span>) </span>{\r\n","          <span class=\"code-keyword\">const</span> state = assign({}, history.state, buildState(historyState.value.back, \r\n","          <span class=\"code-comment\">// keep back and forward entries but override current position</span>\r\n","          to, historyState.value.forward, <span class=\"code-literal\">true</span>), data, { <span class=\"code-attr\">position</span>: historyState.value.position });\r\n","          changeLocation(to, state, <span class=\"code-literal\">true</span>);\r\n","          currentLocation.value = to;\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">push</span>(<span class=\"code-params\">to, data</span>) </span>{\r\n","          <span class=\"code-comment\">// Add to current entry the information of where we are going</span>\r\n","          <span class=\"code-comment\">// as well as saving the current position</span>\r\n","          <span class=\"code-keyword\">const</span> currentState = assign({}, \r\n","          <span class=\"code-comment\">// use current history state to gracefully handle a wrong call to</span>\r\n","          <span class=\"code-comment\">// history.replaceState</span>\r\n","          <span class=\"code-comment\">// https://github.com/vuejs/router/issues/366</span>\r\n","          historyState.value, history.state, {\r\n","              forward: to,\r\n","              scroll: computeScrollPosition(),\r\n","          });\r\n","          <span class=\"code-keyword\">if</span> (!history.state) {\r\n","              warn(<span class=\"code-string\">`history.state seems to have been manually replaced without preserving the necessary values. Make sure to preserve existing history state if you are manually calling history.replaceState:\\n\\n`</span> +\r\n","                  <span class=\"code-string\">`history.replaceState(history.state, '', url)\\n\\n`</span> +\r\n","                  <span class=\"code-string\">`You can find more information at https://next.router.vuejs.org/guide/migration/#usage-of-history-state.`</span>);\r\n","          }\r\n","          changeLocation(currentState.current, currentState, <span class=\"code-literal\">true</span>);\r\n","          <span class=\"code-keyword\">const</span> state = assign({}, buildState(currentLocation.value, to, <span class=\"code-literal\">null</span>), { <span class=\"code-attr\">position</span>: currentState.position + <span class=\"code-number\">1</span> }, data);\r\n","          changeLocation(to, state, <span class=\"code-literal\">false</span>);\r\n","          currentLocation.value = to;\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> {\r\n","          location: currentLocation,\r\n","          state: historyState,\r\n","          push,\r\n","          replace,\r\n","      };\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Creates an HTML5 history. Most common history for single page applications.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param base -\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">createWebHistory</span>(<span class=\"code-params\">base</span>) </span>{\r\n","      base = normalizeBase(base);\r\n","      <span class=\"code-keyword\">const</span> historyNavigation = useHistoryStateNavigation(base);\r\n","      <span class=\"code-keyword\">const</span> historyListeners = useHistoryListeners(base, historyNavigation.state, historyNavigation.location, historyNavigation.replace);\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">go</span>(<span class=\"code-params\">delta, triggerListeners = true</span>) </span>{\r\n","          <span class=\"code-keyword\">if</span> (!triggerListeners)\r\n","              historyListeners.pauseListeners();\r\n","          history.go(delta);\r\n","      }\r\n","      <span class=\"code-keyword\">const</span> routerHistory = assign({\r\n","          <span class=\"code-comment\">// it's overridden right after</span>\r\n","          location: <span class=\"code-string\">''</span>,\r\n","          base,\r\n","          go,\r\n","          createHref: createHref.bind(<span class=\"code-literal\">null</span>, base),\r\n","      }, historyNavigation, historyListeners);\r\n","      <span class=\"code-built_in\">Object</span>.defineProperty(routerHistory, <span class=\"code-string\">'location'</span>, {\r\n","          enumerable: <span class=\"code-literal\">true</span>,\r\n","          <span class=\"code-keyword\">get</span>: () =&gt; historyNavigation.location.value,\r\n","      });\r\n","      Object.defineProperty(routerHistory, 'state', {\r\n","          enumerable: <span class=\"code-literal\">true</span>,\r\n","          <span class=\"code-keyword\">get</span>: () =&gt; historyNavigation.state.value,\r\n","      });\r\n","      return routerHistory;\r\n","  }\n","\n","  /**\r\n","   * Creates an in-memory based history. The main purpose of this history is to handle SSR. It starts in a special location that is nowhere.\r\n","   * It's up to the user to replace that location with the starter location by either calling `router.push` or `router.replace`.\r\n","   *\r\n","   * @param base - Base applied to all urls, defaults to '/'\r\n","   * @returns a history object that can be passed to the router <span class=\"code-keyword\">constructor</span>\r\n","   */\r\n","  function createMemoryHistory(base = '') {\r\n","      <span class=\"code-keyword\">let</span> listeners = [];\r\n","      <span class=\"code-keyword\">let</span> queue = [START];\r\n","      <span class=\"code-keyword\">let</span> position = <span class=\"code-number\">0</span>;\r\n","      base = normalizeBase(base);\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">setLocation</span>(<span class=\"code-params\">location</span>) </span>{\r\n","          position++;\r\n","          <span class=\"code-keyword\">if</span> (position === queue.length) {\r\n","              <span class=\"code-comment\">// we are at the end, we can simply append a new entry</span>\r\n","              queue.push(location);\r\n","          }\r\n","          <span class=\"code-keyword\">else</span> {\r\n","              <span class=\"code-comment\">// we are in the middle, we remove everything from here in the queue</span>\r\n","              queue.splice(position);\r\n","              queue.push(location);\r\n","          }\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">triggerListeners</span>(<span class=\"code-params\">to, from, { direction, delta }</span>) </span>{\r\n","          <span class=\"code-keyword\">const</span> info = {\r\n","              direction,\r\n","              delta,\r\n","              type: NavigationType.pop,\r\n","          };\r\n","          <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> callback <span class=\"code-keyword\">of</span> listeners) {\r\n","              callback(to, <span class=\"code-keyword\">from</span>, info);\r\n","          }\r\n","      }\r\n","      <span class=\"code-keyword\">const</span> routerHistory = {\r\n","          <span class=\"code-comment\">// rewritten by Object.defineProperty</span>\r\n","          location: START,\r\n","          <span class=\"code-comment\">// <span class=\"code-doctag\">TODO:</span> should be kept in queue</span>\r\n","          state: {},\r\n","          base,\r\n","          createHref: createHref.bind(<span class=\"code-literal\">null</span>, base),\r\n","          replace(to) {\r\n","              <span class=\"code-comment\">// remove current entry and decrement position</span>\r\n","              queue.splice(position--, <span class=\"code-number\">1</span>);\r\n","              setLocation(to);\r\n","          },\r\n","          push(to, data) {\r\n","              setLocation(to);\r\n","          },\r\n","          listen(callback) {\r\n","              listeners.push(callback);\r\n","              <span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","                  <span class=\"code-keyword\">const</span> index = listeners.indexOf(callback);\r\n","                  <span class=\"code-keyword\">if</span> (index &gt; <span class=\"code-number\">-1</span>)\r\n","                      listeners.splice(index, <span class=\"code-number\">1</span>);\r\n","              };\r\n","          },\r\n","          destroy() {\r\n","              listeners = [];\r\n","              queue = [START];\r\n","              position = <span class=\"code-number\">0</span>;\r\n","          },\r\n","          go(delta, shouldTrigger = <span class=\"code-literal\">true</span>) {\r\n","              <span class=\"code-keyword\">const</span> <span class=\"code-keyword\">from</span> = <span class=\"code-keyword\">this</span>.location;\r\n","              <span class=\"code-keyword\">const</span> direction = \r\n","              <span class=\"code-comment\">// we are considering delta === 0 going forward, but in abstract mode</span>\r\n","              <span class=\"code-comment\">// using 0 for the delta doesn't make sense like it does in html5 where</span>\r\n","              <span class=\"code-comment\">// it reloads the page</span>\r\n","              delta &lt; <span class=\"code-number\">0</span> ? NavigationDirection.back : NavigationDirection.forward;\r\n","              position = <span class=\"code-built_in\">Math</span>.max(<span class=\"code-number\">0</span>, <span class=\"code-built_in\">Math</span>.min(position + delta, queue.length - <span class=\"code-number\">1</span>));\r\n","              <span class=\"code-keyword\">if</span> (shouldTrigger) {\r\n","                  triggerListeners(<span class=\"code-keyword\">this</span>.location, <span class=\"code-keyword\">from</span>, {\r\n","                      direction,\r\n","                      delta,\r\n","                  });\r\n","              }\r\n","          },\r\n","      };\r\n","      <span class=\"code-built_in\">Object</span>.defineProperty(routerHistory, <span class=\"code-string\">'location'</span>, {\r\n","          enumerable: <span class=\"code-literal\">true</span>,\r\n","          <span class=\"code-keyword\">get</span>: () =&gt; queue[position],\r\n","      });\r\n","      return routerHistory;\r\n","  }\n","\n","  /**\r\n","   * Creates a hash history. Useful for web applications with no host (e.g. `file://`) or when configuring a server to\r\n","   * handle any URL is not possible.\r\n","   *\r\n","   * @param base - optional base to provide. Defaults to `location.pathname + location.search` If there is a `&lt;base&gt;` tag\r\n","   * in the `head`, its value will be ignored in favor of this parameter **but note it affects all the history.pushState()\r\n","   * calls**, meaning that if you use a `&lt;base&gt;` tag, it's `href` value **has to match this parameter** (ignoring anything\r\n","   * after the `#`).\r\n","   *\r\n","   * @example\r\n","   * ```js\r\n","   * // at https://example.com/folder\r\n","   * createWebHashHistory() // gives a url of `https://example.com/folder#`\r\n","   * createWebHashHistory('/folder/') // gives a url of `https://example.com/folder/#`\r\n","   * // if the `#` is provided in the base, it won't be added by `createWebHashHistory`\r\n","   * createWebHashHistory('/folder/#/app/') // gives a url of `https://example.com/folder/#/app/`\r\n","   * // you should avoid doing this because it changes the original url and breaks copying urls\r\n","   * createWebHashHistory('/other-folder/') // gives a url of `https://example.com/other-folder/#`\r\n","   *\r\n","   * // at file:///usr/etc/folder/index.html\r\n","   * // for locations with no `host`, the base is ignored\r\n","   * createWebHashHistory('/iAmIgnored') // gives a url of `file:///usr/etc/folder/index.html#`\r\n","   * ```\r\n","   */\r\n","  function createWebHashHistory(base) {\r\n","      <span class=\"code-comment\">// Make sure this implementation is fine in terms of encoding, specially for IE11</span>\r\n","      <span class=\"code-comment\">// for `file://`, directly use the pathname and ignore the base</span>\r\n","      <span class=\"code-comment\">// location.pathname contains an initial `/` even at the root: `https://example.com`</span>\r\n","      base = location.host ? base || location.pathname + location.search : <span class=\"code-string\">''</span>;\r\n","      <span class=\"code-comment\">// allow the user to provide a `#` in the middle: `/base/#/app`</span>\r\n","      <span class=\"code-keyword\">if</span> (!base.includes(<span class=\"code-string\">'#'</span>))\r\n","          base += <span class=\"code-string\">'#'</span>;\r\n","      <span class=\"code-keyword\">if</span> (!base.endsWith(<span class=\"code-string\">'#/'</span>) &amp;&amp; !base.endsWith(<span class=\"code-string\">'#'</span>)) {\r\n","          warn(<span class=\"code-string\">`A hash base must end with a \"#\":\\n\"<span class=\"code-subst\">${base}</span>\" should be \"<span class=\"code-subst\">${base.replace(<span class=\"code-regexp\">/#.*$/</span>, <span class=\"code-string\">'#'</span>)}</span>\".`</span>);\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> createWebHistory(base);\r\n","  }\n","\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isRouteLocation</span>(<span class=\"code-params\">route</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">typeof</span> route === <span class=\"code-string\">'string'</span> || (route &amp;&amp; <span class=\"code-keyword\">typeof</span> route === <span class=\"code-string\">'object'</span>);\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isRouteName</span>(<span class=\"code-params\">name</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">typeof</span> name === <span class=\"code-string\">'string'</span> || <span class=\"code-keyword\">typeof</span> name === <span class=\"code-string\">'symbol'</span>;\r\n","  }\n","\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Initial route location where the router is. Can be used in navigation guards\r\n</span>","<span class=\"code-comment\">   * to differentiate the initial navigation.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @example\r\n</span>","<span class=\"code-comment\">   * ```js\r\n</span>","<span class=\"code-comment\">   * import { START_LOCATION } from 'vue-router'\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * router.beforeEach((to, from) =&gt; {\r\n</span>","<span class=\"code-comment\">   *   if (from === START_LOCATION) {\r\n</span>","<span class=\"code-comment\">   *     // initial navigation\r\n</span>","<span class=\"code-comment\">   *   }\r\n</span>","<span class=\"code-comment\">   * })\r\n</span>","<span class=\"code-comment\">   * ```\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-keyword\">const</span> START_LOCATION_NORMALIZED = {\r\n","      path: <span class=\"code-string\">'/'</span>,\r\n","      name: <span class=\"code-literal\">undefined</span>,\r\n","      params: {},\r\n","      query: {},\r\n","      hash: <span class=\"code-string\">''</span>,\r\n","      fullPath: <span class=\"code-string\">'/'</span>,\r\n","      matched: [],\r\n","      meta: {},\r\n","      redirectedFrom: <span class=\"code-literal\">undefined</span>,\r\n","  };\n","\n","  <span class=\"code-keyword\">const</span> NavigationFailureSymbol = <span class=\"code-built_in\">Symbol</span>(<span class=\"code-string\">'navigation failure'</span> );\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Enumeration with all possible types for navigation failures. Can be passed to\r\n</span>","<span class=\"code-comment\">   * {@link isNavigationFailure} to check for specific failures.\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  exports.NavigationFailureType = <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;\r\n","  (<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">NavigationFailureType</span>) </span>{\r\n","      <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">       * An aborted navigation is a navigation that failed because a navigation\r\n</span>","<span class=\"code-comment\">       * guard returned `false` or called `next(false)`\r\n</span>","<span class=\"code-comment\">       */</span>\r\n","      NavigationFailureType[NavigationFailureType[<span class=\"code-string\">\"aborted\"</span>] = <span class=\"code-number\">4</span>] = <span class=\"code-string\">\"aborted\"</span>;\r\n","      <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">       * A cancelled navigation is a navigation that failed because a more recent\r\n</span>","<span class=\"code-comment\">       * navigation finished started (not necessarily finished).\r\n</span>","<span class=\"code-comment\">       */</span>\r\n","      NavigationFailureType[NavigationFailureType[<span class=\"code-string\">\"cancelled\"</span>] = <span class=\"code-number\">8</span>] = <span class=\"code-string\">\"cancelled\"</span>;\r\n","      <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">       * A duplicated navigation is a navigation that failed because it was\r\n</span>","<span class=\"code-comment\">       * initiated while already being at the exact same location.\r\n</span>","<span class=\"code-comment\">       */</span>\r\n","      NavigationFailureType[NavigationFailureType[<span class=\"code-string\">\"duplicated\"</span>] = <span class=\"code-number\">16</span>] = <span class=\"code-string\">\"duplicated\"</span>;\r\n","  })(exports.NavigationFailureType || (exports.NavigationFailureType = {}));\r\n","  <span class=\"code-comment\">// DEV only debug messages</span>\r\n","  <span class=\"code-keyword\">const</span> ErrorTypeMessages = {\r\n","      [<span class=\"code-number\">1</span> <span class=\"code-comment\">/* ErrorTypes.MATCHER_NOT_FOUND */</span>]({ location, currentLocation }) {\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-string\">`No match for\\n <span class=\"code-subst\">${<span class=\"code-built_in\">JSON</span>.stringify(location)}</span><span class=\"code-subst\">${currentLocation\r\n</span></span>","<span class=\"code-string\"><span class=\"code-subst\">            ? <span class=\"code-string\">'\\nwhile being at\\n'</span> + <span class=\"code-built_in\">JSON</span>.stringify(currentLocation)\r\n</span></span>","<span class=\"code-string\"><span class=\"code-subst\">            : <span class=\"code-string\">''</span>}</span>`</span>;\r\n","      },\r\n","      [<span class=\"code-number\">2</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_GUARD_REDIRECT */</span>]({ <span class=\"code-keyword\">from</span>, to, }) {\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-string\">`Redirected from \"<span class=\"code-subst\">${<span class=\"code-keyword\">from</span>.fullPath}</span>\" to \"<span class=\"code-subst\">${stringifyRoute(to)}</span>\" via a navigation guard.`</span>;\r\n","      },\r\n","      [<span class=\"code-number\">4</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_ABORTED */</span>]({ <span class=\"code-keyword\">from</span>, to }) {\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-string\">`Navigation aborted from \"<span class=\"code-subst\">${<span class=\"code-keyword\">from</span>.fullPath}</span>\" to \"<span class=\"code-subst\">${to.fullPath}</span>\" via a navigation guard.`</span>;\r\n","      },\r\n","      [<span class=\"code-number\">8</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_CANCELLED */</span>]({ <span class=\"code-keyword\">from</span>, to }) {\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-string\">`Navigation cancelled from \"<span class=\"code-subst\">${<span class=\"code-keyword\">from</span>.fullPath}</span>\" to \"<span class=\"code-subst\">${to.fullPath}</span>\" with a new navigation.`</span>;\r\n","      },\r\n","      [<span class=\"code-number\">16</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_DUPLICATED */</span>]({ <span class=\"code-keyword\">from</span>, to }) {\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-string\">`Avoided redundant navigation to current location: \"<span class=\"code-subst\">${<span class=\"code-keyword\">from</span>.fullPath}</span>\".`</span>;\r\n","      },\r\n","  };\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">createRouterError</span>(<span class=\"code-params\">type, params</span>) </span>{\r\n","      <span class=\"code-comment\">// keep full error messages in cjs versions</span>\r\n","      {\r\n","          <span class=\"code-keyword\">return</span> assign(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(ErrorTypeMessages[type](params)), {\r\n","              type,\r\n","              [NavigationFailureSymbol]: <span class=\"code-literal\">true</span>,\r\n","          }, params);\r\n","      }\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isNavigationFailure</span>(<span class=\"code-params\">error, type</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> (error <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">Error</span> &amp;&amp;\r\n","          NavigationFailureSymbol <span class=\"code-keyword\">in</span> error &amp;&amp;\r\n","          (type == <span class=\"code-literal\">null</span> || !!(error.type &amp; type)));\r\n","  }\r\n","  <span class=\"code-keyword\">const</span> propertiesToLog = [<span class=\"code-string\">'params'</span>, <span class=\"code-string\">'query'</span>, <span class=\"code-string\">'hash'</span>];\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">stringifyRoute</span>(<span class=\"code-params\">to</span>) </span>{\r\n","      <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">typeof</span> to === <span class=\"code-string\">'string'</span>)\r\n","          <span class=\"code-keyword\">return</span> to;\r\n","      <span class=\"code-keyword\">if</span> (<span class=\"code-string\">'path'</span> <span class=\"code-keyword\">in</span> to)\r\n","          <span class=\"code-keyword\">return</span> to.path;\r\n","      <span class=\"code-keyword\">const</span> location = {};\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> key <span class=\"code-keyword\">of</span> propertiesToLog) {\r\n","          <span class=\"code-keyword\">if</span> (key <span class=\"code-keyword\">in</span> to)\r\n","              location[key] = to[key];\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> <span class=\"code-built_in\">JSON</span>.stringify(location, <span class=\"code-literal\">null</span>, <span class=\"code-number\">2</span>);\r\n","  }\n","\n","  <span class=\"code-comment\">// default pattern for a param: non-greedy everything but /</span>\r\n","  <span class=\"code-keyword\">const</span> BASE_PARAM_PATTERN = <span class=\"code-string\">'[^/]+?'</span>;\r\n","  <span class=\"code-keyword\">const</span> BASE_PATH_PARSER_OPTIONS = {\r\n","      sensitive: <span class=\"code-literal\">false</span>,\r\n","      strict: <span class=\"code-literal\">false</span>,\r\n","      start: <span class=\"code-literal\">true</span>,\r\n","      end: <span class=\"code-literal\">true</span>,\r\n","  };\r\n","  <span class=\"code-comment\">// Special Regex characters that must be escaped in static tokens</span>\r\n","  <span class=\"code-keyword\">const</span> REGEX_CHARS_RE = <span class=\"code-regexp\">/[.+*?^${}()[\\]/\\\\]/g</span>;\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Creates a path parser from an array of Segments (a segment is an array of Tokens)\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param segments - array of segments returned by tokenizePath\r\n</span>","<span class=\"code-comment\">   * @param extraOptions - optional options for the regexp\r\n</span>","<span class=\"code-comment\">   * @returns a PathParser\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">tokensToParser</span>(<span class=\"code-params\">segments, extraOptions</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> options = assign({}, BASE_PATH_PARSER_OPTIONS, extraOptions);\r\n","      <span class=\"code-comment\">// the amount of scores is the same as the length of segments except for the root segment \"/\"</span>\r\n","      <span class=\"code-keyword\">const</span> score = [];\r\n","      <span class=\"code-comment\">// the regexp as a string</span>\r\n","      <span class=\"code-keyword\">let</span> pattern = options.start ? <span class=\"code-string\">'^'</span> : <span class=\"code-string\">''</span>;\r\n","      <span class=\"code-comment\">// extracted keys</span>\r\n","      <span class=\"code-keyword\">const</span> keys = [];\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> segment <span class=\"code-keyword\">of</span> segments) {\r\n","          <span class=\"code-comment\">// the root segment needs special treatment</span>\r\n","          <span class=\"code-keyword\">const</span> segmentScores = segment.length ? [] : [<span class=\"code-number\">90</span> <span class=\"code-comment\">/* PathScore.Root */</span>];\r\n","          <span class=\"code-comment\">// allow trailing slash</span>\r\n","          <span class=\"code-keyword\">if</span> (options.strict &amp;&amp; !segment.length)\r\n","              pattern += <span class=\"code-string\">'/'</span>;\r\n","          <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">let</span> tokenIndex = <span class=\"code-number\">0</span>; tokenIndex &lt; segment.length; tokenIndex++) {\r\n","              <span class=\"code-keyword\">const</span> token = segment[tokenIndex];\r\n","              <span class=\"code-comment\">// resets the score if we are inside a sub-segment /:a-other-:b</span>\r\n","              <span class=\"code-keyword\">let</span> subSegmentScore = <span class=\"code-number\">40</span> <span class=\"code-comment\">/* PathScore.Segment */</span> +\r\n","                  (options.sensitive ? <span class=\"code-number\">0.25</span> <span class=\"code-comment\">/* PathScore.BonusCaseSensitive */</span> : <span class=\"code-number\">0</span>);\r\n","              <span class=\"code-keyword\">if</span> (token.type === <span class=\"code-number\">0</span> <span class=\"code-comment\">/* TokenType.Static */</span>) {\r\n","                  <span class=\"code-comment\">// prepend the slash if we are starting a new segment</span>\r\n","                  <span class=\"code-keyword\">if</span> (!tokenIndex)\r\n","                      pattern += <span class=\"code-string\">'/'</span>;\r\n","                  pattern += token.value.replace(REGEX_CHARS_RE, <span class=\"code-string\">'\\\\$&amp;'</span>);\r\n","                  subSegmentScore += <span class=\"code-number\">40</span> <span class=\"code-comment\">/* PathScore.Static */</span>;\r\n","              }\r\n","              <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (token.type === <span class=\"code-number\">1</span> <span class=\"code-comment\">/* TokenType.Param */</span>) {\r\n","                  <span class=\"code-keyword\">const</span> { value, repeatable, optional, regexp } = token;\r\n","                  keys.push({\r\n","                      name: value,\r\n","                      repeatable,\r\n","                      optional,\r\n","                  });\r\n","                  <span class=\"code-keyword\">const</span> re = regexp ? regexp : BASE_PARAM_PATTERN;\r\n","                  <span class=\"code-comment\">// the user provided a custom regexp /:id(\\\\d+)</span>\r\n","                  <span class=\"code-keyword\">if</span> (re !== BASE_PARAM_PATTERN) {\r\n","                      subSegmentScore += <span class=\"code-number\">10</span> <span class=\"code-comment\">/* PathScore.BonusCustomRegExp */</span>;\r\n","                      <span class=\"code-comment\">// make sure the regexp is valid before using it</span>\r\n","                      <span class=\"code-keyword\">try</span> {\r\n","                          <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">RegExp</span>(<span class=\"code-string\">`(<span class=\"code-subst\">${re}</span>)`</span>);\r\n","                      }\r\n","                      <span class=\"code-keyword\">catch</span> (err) {\r\n","                          <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">`Invalid custom RegExp for param \"<span class=\"code-subst\">${value}</span>\" (<span class=\"code-subst\">${re}</span>): `</span> +\r\n","                              err.message);\r\n","                      }\r\n","                  }\r\n","                  <span class=\"code-comment\">// when we repeat we must take care of the repeating leading slash</span>\r\n","                  <span class=\"code-keyword\">let</span> subPattern = repeatable ? <span class=\"code-string\">`((?:<span class=\"code-subst\">${re}</span>)(?:/(?:<span class=\"code-subst\">${re}</span>))*)`</span> : <span class=\"code-string\">`(<span class=\"code-subst\">${re}</span>)`</span>;\r\n","                  <span class=\"code-comment\">// prepend the slash if we are starting a new segment</span>\r\n","                  <span class=\"code-keyword\">if</span> (!tokenIndex)\r\n","                      subPattern =\r\n","                          <span class=\"code-comment\">// avoid an optional / if there are more segments e.g. /:p?-static</span>\r\n","                          <span class=\"code-comment\">// or /:p?-:p2</span>\r\n","                          optional &amp;&amp; segment.length &lt; <span class=\"code-number\">2</span>\r\n","                              ? <span class=\"code-string\">`(?:/<span class=\"code-subst\">${subPattern}</span>)`</span>\r\n","                              : <span class=\"code-string\">'/'</span> + subPattern;\r\n","                  <span class=\"code-keyword\">if</span> (optional)\r\n","                      subPattern += <span class=\"code-string\">'?'</span>;\r\n","                  pattern += subPattern;\r\n","                  subSegmentScore += <span class=\"code-number\">20</span> <span class=\"code-comment\">/* PathScore.Dynamic */</span>;\r\n","                  <span class=\"code-keyword\">if</span> (optional)\r\n","                      subSegmentScore += <span class=\"code-number\">-8</span> <span class=\"code-comment\">/* PathScore.BonusOptional */</span>;\r\n","                  <span class=\"code-keyword\">if</span> (repeatable)\r\n","                      subSegmentScore += <span class=\"code-number\">-20</span> <span class=\"code-comment\">/* PathScore.BonusRepeatable */</span>;\r\n","                  <span class=\"code-keyword\">if</span> (re === <span class=\"code-string\">'.*'</span>)\r\n","                      subSegmentScore += <span class=\"code-number\">-50</span> <span class=\"code-comment\">/* PathScore.BonusWildcard */</span>;\r\n","              }\r\n","              segmentScores.push(subSegmentScore);\r\n","          }\r\n","          <span class=\"code-comment\">// an empty array like /home/ -&gt; [[{home}], []]</span>\r\n","          <span class=\"code-comment\">// if (!segment.length) pattern += '/'</span>\r\n","          score.push(segmentScores);\r\n","      }\r\n","      <span class=\"code-comment\">// only apply the strict bonus to the last score</span>\r\n","      <span class=\"code-keyword\">if</span> (options.strict &amp;&amp; options.end) {\r\n","          <span class=\"code-keyword\">const</span> i = score.length - <span class=\"code-number\">1</span>;\r\n","          score[i][score[i].length - <span class=\"code-number\">1</span>] += <span class=\"code-number\">0.7000000000000001</span> <span class=\"code-comment\">/* PathScore.BonusStrict */</span>;\r\n","      }\r\n","      <span class=\"code-comment\">// <span class=\"code-doctag\">TODO:</span> dev only warn double trailing slash</span>\r\n","      <span class=\"code-keyword\">if</span> (!options.strict)\r\n","          pattern += <span class=\"code-string\">'/?'</span>;\r\n","      <span class=\"code-keyword\">if</span> (options.end)\r\n","          pattern += <span class=\"code-string\">'$'</span>;\r\n","      <span class=\"code-comment\">// allow paths like /dynamic to only match dynamic or dynamic/... but not dynamic_something_else</span>\r\n","      <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (options.strict)\r\n","          pattern += <span class=\"code-string\">'(?:/|$)'</span>;\r\n","      <span class=\"code-keyword\">const</span> re = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">RegExp</span>(pattern, options.sensitive ? <span class=\"code-string\">''</span> : <span class=\"code-string\">'i'</span>);\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">parse</span>(<span class=\"code-params\">path</span>) </span>{\r\n","          <span class=\"code-keyword\">const</span> match = path.match(re);\r\n","          <span class=\"code-keyword\">const</span> params = {};\r\n","          <span class=\"code-keyword\">if</span> (!match)\r\n","              <span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;\r\n","          <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">let</span> i = <span class=\"code-number\">1</span>; i &lt; match.length; i++) {\r\n","              <span class=\"code-keyword\">const</span> value = match[i] || <span class=\"code-string\">''</span>;\r\n","              <span class=\"code-keyword\">const</span> key = keys[i - <span class=\"code-number\">1</span>];\r\n","              params[key.name] = value &amp;&amp; key.repeatable ? value.split(<span class=\"code-string\">'/'</span>) : value;\r\n","          }\r\n","          <span class=\"code-keyword\">return</span> params;\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">stringify</span>(<span class=\"code-params\">params</span>) </span>{\r\n","          <span class=\"code-keyword\">let</span> path = <span class=\"code-string\">''</span>;\r\n","          <span class=\"code-comment\">// for optional parameters to allow to be empty</span>\r\n","          <span class=\"code-keyword\">let</span> avoidDuplicatedSlash = <span class=\"code-literal\">false</span>;\r\n","          <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> segment <span class=\"code-keyword\">of</span> segments) {\r\n","              <span class=\"code-keyword\">if</span> (!avoidDuplicatedSlash || !path.endsWith(<span class=\"code-string\">'/'</span>))\r\n","                  path += <span class=\"code-string\">'/'</span>;\r\n","              avoidDuplicatedSlash = <span class=\"code-literal\">false</span>;\r\n","              <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> token <span class=\"code-keyword\">of</span> segment) {\r\n","                  <span class=\"code-keyword\">if</span> (token.type === <span class=\"code-number\">0</span> <span class=\"code-comment\">/* TokenType.Static */</span>) {\r\n","                      path += token.value;\r\n","                  }\r\n","                  <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (token.type === <span class=\"code-number\">1</span> <span class=\"code-comment\">/* TokenType.Param */</span>) {\r\n","                      <span class=\"code-keyword\">const</span> { value, repeatable, optional } = token;\r\n","                      <span class=\"code-keyword\">const</span> param = value <span class=\"code-keyword\">in</span> params ? params[value] : <span class=\"code-string\">''</span>;\r\n","                      <span class=\"code-keyword\">if</span> (isArray(param) &amp;&amp; !repeatable) {\r\n","                          <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">`Provided param \"<span class=\"code-subst\">${value}</span>\" is an array but it is not repeatable (* or + modifiers)`</span>);\r\n","                      }\r\n","                      <span class=\"code-keyword\">const</span> text = isArray(param)\r\n","                          ? param.join(<span class=\"code-string\">'/'</span>)\r\n","                          : param;\r\n","                      <span class=\"code-keyword\">if</span> (!text) {\r\n","                          <span class=\"code-keyword\">if</span> (optional) {\r\n","                              <span class=\"code-comment\">// if we have more than one optional param like /:a?-static we don't need to care about the optional param</span>\r\n","                              <span class=\"code-keyword\">if</span> (segment.length &lt; <span class=\"code-number\">2</span>) {\r\n","                                  <span class=\"code-comment\">// remove the last slash as we could be at the end</span>\r\n","                                  <span class=\"code-keyword\">if</span> (path.endsWith(<span class=\"code-string\">'/'</span>))\r\n","                                      path = path.slice(<span class=\"code-number\">0</span>, <span class=\"code-number\">-1</span>);\r\n","                                  <span class=\"code-comment\">// do not append a slash on the next iteration</span>\r\n","                                  <span class=\"code-keyword\">else</span>\r\n","                                      avoidDuplicatedSlash = <span class=\"code-literal\">true</span>;\r\n","                              }\r\n","                          }\r\n","                          <span class=\"code-keyword\">else</span>\r\n","                              <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">`Missing required param \"<span class=\"code-subst\">${value}</span>\"`</span>);\r\n","                      }\r\n","                      path += text;\r\n","                  }\r\n","              }\r\n","          }\r\n","          <span class=\"code-comment\">// avoid empty path when we have multiple optional params</span>\r\n","          <span class=\"code-keyword\">return</span> path || <span class=\"code-string\">'/'</span>;\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> {\r\n","          re,\r\n","          score,\r\n","          keys,\r\n","          parse,\r\n","          stringify,\r\n","      };\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Compares an array of numbers as used in PathParser.score and returns a\r\n</span>","<span class=\"code-comment\">   * number. This function can be used to `sort` an array\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param a - first array of numbers\r\n</span>","<span class=\"code-comment\">   * @param b - second array of numbers\r\n</span>","<span class=\"code-comment\">   * @returns 0 if both are equal, &lt; 0 if a should be sorted first, &gt; 0 if b\r\n</span>","<span class=\"code-comment\">   * should be sorted first\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">compareScoreArray</span>(<span class=\"code-params\">a, b</span>) </span>{\r\n","      <span class=\"code-keyword\">let</span> i = <span class=\"code-number\">0</span>;\r\n","      <span class=\"code-keyword\">while</span> (i &lt; a.length &amp;&amp; i &lt; b.length) {\r\n","          <span class=\"code-keyword\">const</span> diff = b[i] - a[i];\r\n","          <span class=\"code-comment\">// only keep going if diff === 0</span>\r\n","          <span class=\"code-keyword\">if</span> (diff)\r\n","              <span class=\"code-keyword\">return</span> diff;\r\n","          i++;\r\n","      }\r\n","      <span class=\"code-comment\">// if the last subsegment was Static, the shorter segments should be sorted first</span>\r\n","      <span class=\"code-comment\">// otherwise sort the longest segment first</span>\r\n","      <span class=\"code-keyword\">if</span> (a.length &lt; b.length) {\r\n","          <span class=\"code-keyword\">return</span> a.length === <span class=\"code-number\">1</span> &amp;&amp; a[<span class=\"code-number\">0</span>] === <span class=\"code-number\">40</span> <span class=\"code-comment\">/* PathScore.Static */</span> + <span class=\"code-number\">40</span> <span class=\"code-comment\">/* PathScore.Segment */</span>\r\n","              ? <span class=\"code-number\">-1</span>\r\n","              : <span class=\"code-number\">1</span>;\r\n","      }\r\n","      <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (a.length &gt; b.length) {\r\n","          <span class=\"code-keyword\">return</span> b.length === <span class=\"code-number\">1</span> &amp;&amp; b[<span class=\"code-number\">0</span>] === <span class=\"code-number\">40</span> <span class=\"code-comment\">/* PathScore.Static */</span> + <span class=\"code-number\">40</span> <span class=\"code-comment\">/* PathScore.Segment */</span>\r\n","              ? <span class=\"code-number\">1</span>\r\n","              : <span class=\"code-number\">-1</span>;\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Compare function that can be used with `sort` to sort an array of PathParser\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param a - first PathParser\r\n</span>","<span class=\"code-comment\">   * @param b - second PathParser\r\n</span>","<span class=\"code-comment\">   * @returns 0 if both are equal, &lt; 0 if a should be sorted first, &gt; 0 if b\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">comparePathParserScore</span>(<span class=\"code-params\">a, b</span>) </span>{\r\n","      <span class=\"code-keyword\">let</span> i = <span class=\"code-number\">0</span>;\r\n","      <span class=\"code-keyword\">const</span> aScore = a.score;\r\n","      <span class=\"code-keyword\">const</span> bScore = b.score;\r\n","      <span class=\"code-keyword\">while</span> (i &lt; aScore.length &amp;&amp; i &lt; bScore.length) {\r\n","          <span class=\"code-keyword\">const</span> comp = compareScoreArray(aScore[i], bScore[i]);\r\n","          <span class=\"code-comment\">// do not return if both are equal</span>\r\n","          <span class=\"code-keyword\">if</span> (comp)\r\n","              <span class=\"code-keyword\">return</span> comp;\r\n","          i++;\r\n","      }\r\n","      <span class=\"code-keyword\">if</span> (<span class=\"code-built_in\">Math</span>.abs(bScore.length - aScore.length) === <span class=\"code-number\">1</span>) {\r\n","          <span class=\"code-keyword\">if</span> (isLastScoreNegative(aScore))\r\n","              <span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>;\r\n","          <span class=\"code-keyword\">if</span> (isLastScoreNegative(bScore))\r\n","              <span class=\"code-keyword\">return</span> <span class=\"code-number\">-1</span>;\r\n","      }\r\n","      <span class=\"code-comment\">// if a and b share the same score entries but b has more, sort b first</span>\r\n","      <span class=\"code-keyword\">return</span> bScore.length - aScore.length;\r\n","      <span class=\"code-comment\">// this is the ternary version</span>\r\n","      <span class=\"code-comment\">// return aScore.length &lt; bScore.length</span>\r\n","      <span class=\"code-comment\">//   ? 1</span>\r\n","      <span class=\"code-comment\">//   : aScore.length &gt; bScore.length</span>\r\n","      <span class=\"code-comment\">//   ? -1</span>\r\n","      <span class=\"code-comment\">//   : 0</span>\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * This allows detecting splats at the end of a path: /home/:id(.*)*\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param score - score to check\r\n</span>","<span class=\"code-comment\">   * @returns true if the last entry is negative\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isLastScoreNegative</span>(<span class=\"code-params\">score</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> last = score[score.length - <span class=\"code-number\">1</span>];\r\n","      <span class=\"code-keyword\">return</span> score.length &gt; <span class=\"code-number\">0</span> &amp;&amp; last[last.length - <span class=\"code-number\">1</span>] &lt; <span class=\"code-number\">0</span>;\r\n","  }\n","\n","  <span class=\"code-keyword\">const</span> ROOT_TOKEN = {\r\n","      type: <span class=\"code-number\">0</span> <span class=\"code-comment\">/* TokenType.Static */</span>,\r\n","      value: <span class=\"code-string\">''</span>,\r\n","  };\r\n","  <span class=\"code-keyword\">const</span> VALID_PARAM_RE = <span class=\"code-regexp\">/[a-zA-Z0-9_]/</span>;\r\n","  <span class=\"code-comment\">// After some profiling, the cache seems to be unnecessary because tokenizePath</span>\r\n","  <span class=\"code-comment\">// (the slowest part of adding a route) is very fast</span>\r\n","  <span class=\"code-comment\">// const tokenCache = new Map&lt;string, Token[][]&gt;()</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">tokenizePath</span>(<span class=\"code-params\">path</span>) </span>{\r\n","      <span class=\"code-keyword\">if</span> (!path)\r\n","          <span class=\"code-keyword\">return</span> [[]];\r\n","      <span class=\"code-keyword\">if</span> (path === <span class=\"code-string\">'/'</span>)\r\n","          <span class=\"code-keyword\">return</span> [[ROOT_TOKEN]];\r\n","      <span class=\"code-keyword\">if</span> (!path.startsWith(<span class=\"code-string\">'/'</span>)) {\r\n","          <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">`Route paths should start with a \"/\": \"<span class=\"code-subst\">${path}</span>\" should be \"/<span class=\"code-subst\">${path}</span>\".`</span>\r\n","              );\r\n","      }\r\n","      <span class=\"code-comment\">// if (tokenCache.has(path)) return tokenCache.get(path)!</span>\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">crash</span>(<span class=\"code-params\">message</span>) </span>{\r\n","          <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">`ERR (<span class=\"code-subst\">${state}</span>)/\"<span class=\"code-subst\">${buffer}</span>\": <span class=\"code-subst\">${message}</span>`</span>);\r\n","      }\r\n","      <span class=\"code-keyword\">let</span> state = <span class=\"code-number\">0</span> <span class=\"code-comment\">/* TokenizerState.Static */</span>;\r\n","      <span class=\"code-keyword\">let</span> previousState = state;\r\n","      <span class=\"code-keyword\">const</span> tokens = [];\r\n","      <span class=\"code-comment\">// the segment will always be valid because we get into the initial state</span>\r\n","      <span class=\"code-comment\">// with the leading /</span>\r\n","      <span class=\"code-keyword\">let</span> segment;\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">finalizeSegment</span>(<span class=\"code-params\"></span>) </span>{\r\n","          <span class=\"code-keyword\">if</span> (segment)\r\n","              tokens.push(segment);\r\n","          segment = [];\r\n","      }\r\n","      <span class=\"code-comment\">// index on the path</span>\r\n","      <span class=\"code-keyword\">let</span> i = <span class=\"code-number\">0</span>;\r\n","      <span class=\"code-comment\">// char at index</span>\r\n","      <span class=\"code-keyword\">let</span> char;\r\n","      <span class=\"code-comment\">// buffer of the value read</span>\r\n","      <span class=\"code-keyword\">let</span> buffer = <span class=\"code-string\">''</span>;\r\n","      <span class=\"code-comment\">// custom regexp for a param</span>\r\n","      <span class=\"code-keyword\">let</span> customRe = <span class=\"code-string\">''</span>;\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">consumeBuffer</span>(<span class=\"code-params\"></span>) </span>{\r\n","          <span class=\"code-keyword\">if</span> (!buffer)\r\n","              <span class=\"code-keyword\">return</span>;\r\n","          <span class=\"code-keyword\">if</span> (state === <span class=\"code-number\">0</span> <span class=\"code-comment\">/* TokenizerState.Static */</span>) {\r\n","              segment.push({\r\n","                  type: <span class=\"code-number\">0</span> <span class=\"code-comment\">/* TokenType.Static */</span>,\r\n","                  value: buffer,\r\n","              });\r\n","          }\r\n","          <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (state === <span class=\"code-number\">1</span> <span class=\"code-comment\">/* TokenizerState.Param */</span> ||\r\n","              state === <span class=\"code-number\">2</span> <span class=\"code-comment\">/* TokenizerState.ParamRegExp */</span> ||\r\n","              state === <span class=\"code-number\">3</span> <span class=\"code-comment\">/* TokenizerState.ParamRegExpEnd */</span>) {\r\n","              <span class=\"code-keyword\">if</span> (segment.length &gt; <span class=\"code-number\">1</span> &amp;&amp; (char === <span class=\"code-string\">'*'</span> || char === <span class=\"code-string\">'+'</span>))\r\n","                  crash(<span class=\"code-string\">`A repeatable param (<span class=\"code-subst\">${buffer}</span>) must be alone in its segment. eg: '/:ids+.`</span>);\r\n","              segment.push({\r\n","                  type: <span class=\"code-number\">1</span> <span class=\"code-comment\">/* TokenType.Param */</span>,\r\n","                  value: buffer,\r\n","                  regexp: customRe,\r\n","                  repeatable: char === <span class=\"code-string\">'*'</span> || char === <span class=\"code-string\">'+'</span>,\r\n","                  optional: char === <span class=\"code-string\">'*'</span> || char === <span class=\"code-string\">'?'</span>,\r\n","              });\r\n","          }\r\n","          <span class=\"code-keyword\">else</span> {\r\n","              crash(<span class=\"code-string\">'Invalid state to consume buffer'</span>);\r\n","          }\r\n","          buffer = <span class=\"code-string\">''</span>;\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">addCharToBuffer</span>(<span class=\"code-params\"></span>) </span>{\r\n","          buffer += char;\r\n","      }\r\n","      <span class=\"code-keyword\">while</span> (i &lt; path.length) {\r\n","          char = path[i++];\r\n","          <span class=\"code-keyword\">if</span> (char === <span class=\"code-string\">'\\\\'</span> &amp;&amp; state !== <span class=\"code-number\">2</span> <span class=\"code-comment\">/* TokenizerState.ParamRegExp */</span>) {\r\n","              previousState = state;\r\n","              state = <span class=\"code-number\">4</span> <span class=\"code-comment\">/* TokenizerState.EscapeNext */</span>;\r\n","              <span class=\"code-keyword\">continue</span>;\r\n","          }\r\n","          <span class=\"code-keyword\">switch</span> (state) {\r\n","              <span class=\"code-keyword\">case</span> <span class=\"code-number\">0</span> <span class=\"code-comment\">/* TokenizerState.Static */</span>:\r\n","                  <span class=\"code-keyword\">if</span> (char === <span class=\"code-string\">'/'</span>) {\r\n","                      <span class=\"code-keyword\">if</span> (buffer) {\r\n","                          consumeBuffer();\r\n","                      }\r\n","                      finalizeSegment();\r\n","                  }\r\n","                  <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (char === <span class=\"code-string\">':'</span>) {\r\n","                      consumeBuffer();\r\n","                      state = <span class=\"code-number\">1</span> <span class=\"code-comment\">/* TokenizerState.Param */</span>;\r\n","                  }\r\n","                  <span class=\"code-keyword\">else</span> {\r\n","                      addCharToBuffer();\r\n","                  }\r\n","                  <span class=\"code-keyword\">break</span>;\r\n","              <span class=\"code-keyword\">case</span> <span class=\"code-number\">4</span> <span class=\"code-comment\">/* TokenizerState.EscapeNext */</span>:\r\n","                  addCharToBuffer();\r\n","                  state = previousState;\r\n","                  <span class=\"code-keyword\">break</span>;\r\n","              <span class=\"code-keyword\">case</span> <span class=\"code-number\">1</span> <span class=\"code-comment\">/* TokenizerState.Param */</span>:\r\n","                  <span class=\"code-keyword\">if</span> (char === <span class=\"code-string\">'('</span>) {\r\n","                      state = <span class=\"code-number\">2</span> <span class=\"code-comment\">/* TokenizerState.ParamRegExp */</span>;\r\n","                  }\r\n","                  <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (VALID_PARAM_RE.test(char)) {\r\n","                      addCharToBuffer();\r\n","                  }\r\n","                  <span class=\"code-keyword\">else</span> {\r\n","                      consumeBuffer();\r\n","                      state = <span class=\"code-number\">0</span> <span class=\"code-comment\">/* TokenizerState.Static */</span>;\r\n","                      <span class=\"code-comment\">// go back one character if we were not modifying</span>\r\n","                      <span class=\"code-keyword\">if</span> (char !== <span class=\"code-string\">'*'</span> &amp;&amp; char !== <span class=\"code-string\">'?'</span> &amp;&amp; char !== <span class=\"code-string\">'+'</span>)\r\n","                          i--;\r\n","                  }\r\n","                  <span class=\"code-keyword\">break</span>;\r\n","              <span class=\"code-keyword\">case</span> <span class=\"code-number\">2</span> <span class=\"code-comment\">/* TokenizerState.ParamRegExp */</span>:\r\n","                  <span class=\"code-comment\">// <span class=\"code-doctag\">TODO:</span> is it worth handling nested regexp? like :p(?:prefix_([^/]+)_suffix)</span>\r\n","                  <span class=\"code-comment\">// it already works by escaping the closing )</span>\r\n","                  <span class=\"code-comment\">// https://paths.esm.dev/?p=AAMeJbiAwQEcDKbAoAAkP60PG2R6QAvgNaA6AFACM2ABuQBB#</span>\r\n","                  <span class=\"code-comment\">// is this really something people need since you can also write</span>\r\n","                  <span class=\"code-comment\">// /prefix_:p()_suffix</span>\r\n","                  <span class=\"code-keyword\">if</span> (char === <span class=\"code-string\">')'</span>) {\r\n","                      <span class=\"code-comment\">// handle the escaped )</span>\r\n","                      <span class=\"code-keyword\">if</span> (customRe[customRe.length - <span class=\"code-number\">1</span>] == <span class=\"code-string\">'\\\\'</span>)\r\n","                          customRe = customRe.slice(<span class=\"code-number\">0</span>, <span class=\"code-number\">-1</span>) + char;\r\n","                      <span class=\"code-keyword\">else</span>\r\n","                          state = <span class=\"code-number\">3</span> <span class=\"code-comment\">/* TokenizerState.ParamRegExpEnd */</span>;\r\n","                  }\r\n","                  <span class=\"code-keyword\">else</span> {\r\n","                      customRe += char;\r\n","                  }\r\n","                  <span class=\"code-keyword\">break</span>;\r\n","              <span class=\"code-keyword\">case</span> <span class=\"code-number\">3</span> <span class=\"code-comment\">/* TokenizerState.ParamRegExpEnd */</span>:\r\n","                  <span class=\"code-comment\">// same as finalizing a param</span>\r\n","                  consumeBuffer();\r\n","                  state = <span class=\"code-number\">0</span> <span class=\"code-comment\">/* TokenizerState.Static */</span>;\r\n","                  <span class=\"code-comment\">// go back one character if we were not modifying</span>\r\n","                  <span class=\"code-keyword\">if</span> (char !== <span class=\"code-string\">'*'</span> &amp;&amp; char !== <span class=\"code-string\">'?'</span> &amp;&amp; char !== <span class=\"code-string\">'+'</span>)\r\n","                      i--;\r\n","                  customRe = <span class=\"code-string\">''</span>;\r\n","                  <span class=\"code-keyword\">break</span>;\r\n","              <span class=\"code-keyword\">default</span>:\r\n","                  crash(<span class=\"code-string\">'Unknown state'</span>);\r\n","                  <span class=\"code-keyword\">break</span>;\r\n","          }\r\n","      }\r\n","      <span class=\"code-keyword\">if</span> (state === <span class=\"code-number\">2</span> <span class=\"code-comment\">/* TokenizerState.ParamRegExp */</span>)\r\n","          crash(<span class=\"code-string\">`Unfinished custom RegExp for param \"<span class=\"code-subst\">${buffer}</span>\"`</span>);\r\n","      consumeBuffer();\r\n","      finalizeSegment();\r\n","      <span class=\"code-comment\">// tokenCache.set(path, tokens)</span>\r\n","      <span class=\"code-keyword\">return</span> tokens;\r\n","  }\n","\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">createRouteRecordMatcher</span>(<span class=\"code-params\">record, parent, options</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> parser = tokensToParser(tokenizePath(record.path), options);\r\n","      <span class=\"code-comment\">// warn against params with the same name</span>\r\n","      {\r\n","          <span class=\"code-keyword\">const</span> existingKeys = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Set</span>();\r\n","          <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> key <span class=\"code-keyword\">of</span> parser.keys) {\r\n","              <span class=\"code-keyword\">if</span> (existingKeys.has(key.name))\r\n","                  warn(<span class=\"code-string\">`Found duplicated params with name \"<span class=\"code-subst\">${key.name}</span>\" for path \"<span class=\"code-subst\">${record.path}</span>\". Only the last one will be available on \"$route.params\".`</span>);\r\n","              existingKeys.add(key.name);\r\n","          }\r\n","      }\r\n","      <span class=\"code-keyword\">const</span> matcher = assign(parser, {\r\n","          record,\r\n","          parent,\r\n","          <span class=\"code-comment\">// these needs to be populated by the parent</span>\r\n","          children: [],\r\n","          alias: [],\r\n","      });\r\n","      <span class=\"code-keyword\">if</span> (parent) {\r\n","          <span class=\"code-comment\">// both are aliases or both are not aliases</span>\r\n","          <span class=\"code-comment\">// we don't want to mix them because the order is used when</span>\r\n","          <span class=\"code-comment\">// passing originalRecord in Matcher.addRoute</span>\r\n","          <span class=\"code-keyword\">if</span> (!matcher.record.aliasOf === !parent.record.aliasOf)\r\n","              parent.children.push(matcher);\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> matcher;\r\n","  }\n","\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Creates a Router Matcher.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @internal\r\n</span>","<span class=\"code-comment\">   * @param routes - array of initial routes\r\n</span>","<span class=\"code-comment\">   * @param globalOptions - global route options\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">createRouterMatcher</span>(<span class=\"code-params\">routes, globalOptions</span>) </span>{\r\n","      <span class=\"code-comment\">// normalized ordered array of matchers</span>\r\n","      <span class=\"code-keyword\">const</span> matchers = [];\r\n","      <span class=\"code-keyword\">const</span> matcherMap = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Map</span>();\r\n","      globalOptions = mergeOptions({ <span class=\"code-attr\">strict</span>: <span class=\"code-literal\">false</span>, <span class=\"code-attr\">end</span>: <span class=\"code-literal\">true</span>, <span class=\"code-attr\">sensitive</span>: <span class=\"code-literal\">false</span> }, globalOptions);\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">getRecordMatcher</span>(<span class=\"code-params\">name</span>) </span>{\r\n","          <span class=\"code-keyword\">return</span> matcherMap.get(name);\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">addRoute</span>(<span class=\"code-params\">record, parent, originalRecord</span>) </span>{\r\n","          <span class=\"code-comment\">// used later on to remove by name</span>\r\n","          <span class=\"code-keyword\">const</span> isRootAdd = !originalRecord;\r\n","          <span class=\"code-keyword\">const</span> mainNormalizedRecord = normalizeRouteRecord(record);\r\n","          {\r\n","              checkChildMissingNameWithEmptyPath(mainNormalizedRecord, parent);\r\n","          }\r\n","          <span class=\"code-comment\">// we might be the child of an alias</span>\r\n","          mainNormalizedRecord.aliasOf = originalRecord &amp;&amp; originalRecord.record;\r\n","          <span class=\"code-keyword\">const</span> options = mergeOptions(globalOptions, record);\r\n","          <span class=\"code-comment\">// generate an array of records to correctly handle aliases</span>\r\n","          <span class=\"code-keyword\">const</span> normalizedRecords = [\r\n","              mainNormalizedRecord,\r\n","          ];\r\n","          <span class=\"code-keyword\">if</span> (<span class=\"code-string\">'alias'</span> <span class=\"code-keyword\">in</span> record) {\r\n","              <span class=\"code-keyword\">const</span> aliases = <span class=\"code-keyword\">typeof</span> record.alias === <span class=\"code-string\">'string'</span> ? [record.alias] : record.alias;\r\n","              <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> alias <span class=\"code-keyword\">of</span> aliases) {\r\n","                  normalizedRecords.push(assign({}, mainNormalizedRecord, {\r\n","                      <span class=\"code-comment\">// this allows us to hold a copy of the `components` option</span>\r\n","                      <span class=\"code-comment\">// so that async components cache is hold on the original record</span>\r\n","                      components: originalRecord\r\n","                          ? originalRecord.record.components\r\n","                          : mainNormalizedRecord.components,\r\n","                      path: alias,\r\n","                      <span class=\"code-comment\">// we might be the child of an alias</span>\r\n","                      aliasOf: originalRecord\r\n","                          ? originalRecord.record\r\n","                          : mainNormalizedRecord,\r\n","                      <span class=\"code-comment\">// the aliases are always of the same kind as the original since they</span>\r\n","                      <span class=\"code-comment\">// are defined on the same record</span>\r\n","                  }));\r\n","              }\r\n","          }\r\n","          <span class=\"code-keyword\">let</span> matcher;\r\n","          <span class=\"code-keyword\">let</span> originalMatcher;\r\n","          <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> normalizedRecord <span class=\"code-keyword\">of</span> normalizedRecords) {\r\n","              <span class=\"code-keyword\">const</span> { path } = normalizedRecord;\r\n","              <span class=\"code-comment\">// Build up the path for nested routes if the child isn't an absolute</span>\r\n","              <span class=\"code-comment\">// route. Only add the / delimiter if the child path isn't empty and if the</span>\r\n","              <span class=\"code-comment\">// parent path doesn't have a trailing slash</span>\r\n","              <span class=\"code-keyword\">if</span> (parent &amp;&amp; path[<span class=\"code-number\">0</span>] !== <span class=\"code-string\">'/'</span>) {\r\n","                  <span class=\"code-keyword\">const</span> parentPath = parent.record.path;\r\n","                  <span class=\"code-keyword\">const</span> connectingSlash = parentPath[parentPath.length - <span class=\"code-number\">1</span>] === <span class=\"code-string\">'/'</span> ? <span class=\"code-string\">''</span> : <span class=\"code-string\">'/'</span>;\r\n","                  normalizedRecord.path =\r\n","                      parent.record.path + (path &amp;&amp; connectingSlash + path);\r\n","              }\r\n","              <span class=\"code-keyword\">if</span> (normalizedRecord.path === <span class=\"code-string\">'*'</span>) {\r\n","                  <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">'Catch all routes (\"*\") must now be defined using a param with a custom regexp.\\n'</span> +\r\n","                      <span class=\"code-string\">'See more at https://next.router.vuejs.org/guide/migration/#removed-star-or-catch-all-routes.'</span>);\r\n","              }\r\n","              <span class=\"code-comment\">// create the object beforehand, so it can be passed to children</span>\r\n","              matcher = createRouteRecordMatcher(normalizedRecord, parent, options);\r\n","              <span class=\"code-keyword\">if</span> (parent &amp;&amp; path[<span class=\"code-number\">0</span>] === <span class=\"code-string\">'/'</span>)\r\n","                  checkMissingParamsInAbsolutePath(matcher, parent);\r\n","              <span class=\"code-comment\">// if we are an alias we must tell the original record that we exist,</span>\r\n","              <span class=\"code-comment\">// so we can be removed</span>\r\n","              <span class=\"code-keyword\">if</span> (originalRecord) {\r\n","                  originalRecord.alias.push(matcher);\r\n","                  {\r\n","                      checkSameParams(originalRecord, matcher);\r\n","                  }\r\n","              }\r\n","              <span class=\"code-keyword\">else</span> {\r\n","                  <span class=\"code-comment\">// otherwise, the first record is the original and others are aliases</span>\r\n","                  originalMatcher = originalMatcher || matcher;\r\n","                  <span class=\"code-keyword\">if</span> (originalMatcher !== matcher)\r\n","                      originalMatcher.alias.push(matcher);\r\n","                  <span class=\"code-comment\">// remove the route if named and only for the top record (avoid in nested calls)</span>\r\n","                  <span class=\"code-comment\">// this works because the original record is the first one</span>\r\n","                  <span class=\"code-keyword\">if</span> (isRootAdd &amp;&amp; record.name &amp;&amp; !isAliasRecord(matcher))\r\n","                      removeRoute(record.name);\r\n","              }\r\n","              <span class=\"code-keyword\">if</span> (mainNormalizedRecord.children) {\r\n","                  <span class=\"code-keyword\">const</span> children = mainNormalizedRecord.children;\r\n","                  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">let</span> i = <span class=\"code-number\">0</span>; i &lt; children.length; i++) {\r\n","                      addRoute(children[i], matcher, originalRecord &amp;&amp; originalRecord.children[i]);\r\n","                  }\r\n","              }\r\n","              <span class=\"code-comment\">// if there was no original record, then the first one was not an alias and all</span>\r\n","              <span class=\"code-comment\">// other aliases (if any) need to reference this record when adding children</span>\r\n","              originalRecord = originalRecord || matcher;\r\n","              <span class=\"code-comment\">// <span class=\"code-doctag\">TODO:</span> add normalized records for more flexibility</span>\r\n","              <span class=\"code-comment\">// if (parent &amp;&amp; isAliasRecord(originalRecord)) {</span>\r\n","              <span class=\"code-comment\">//   parent.children.push(originalRecord)</span>\r\n","              <span class=\"code-comment\">// }</span>\r\n","              <span class=\"code-comment\">// Avoid adding a record that doesn't display anything. This allows passing through records without a component to</span>\r\n","              <span class=\"code-comment\">// not be reached and pass through the catch all route</span>\r\n","              <span class=\"code-keyword\">if</span> ((matcher.record.components &amp;&amp;\r\n","                  <span class=\"code-built_in\">Object</span>.keys(matcher.record.components).length) ||\r\n","                  matcher.record.name ||\r\n","                  matcher.record.redirect) {\r\n","                  insertMatcher(matcher);\r\n","              }\r\n","          }\r\n","          <span class=\"code-keyword\">return</span> originalMatcher\r\n","              ? <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","                  <span class=\"code-comment\">// since other matchers are aliases, they should be removed by the original matcher</span>\r\n","                  removeRoute(originalMatcher);\r\n","              }\r\n","              : noop;\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">removeRoute</span>(<span class=\"code-params\">matcherRef</span>) </span>{\r\n","          <span class=\"code-keyword\">if</span> (isRouteName(matcherRef)) {\r\n","              <span class=\"code-keyword\">const</span> matcher = matcherMap.get(matcherRef);\r\n","              <span class=\"code-keyword\">if</span> (matcher) {\r\n","                  matcherMap.delete(matcherRef);\r\n","                  matchers.splice(matchers.indexOf(matcher), <span class=\"code-number\">1</span>);\r\n","                  matcher.children.forEach(removeRoute);\r\n","                  matcher.alias.forEach(removeRoute);\r\n","              }\r\n","          }\r\n","          <span class=\"code-keyword\">else</span> {\r\n","              <span class=\"code-keyword\">const</span> index = matchers.indexOf(matcherRef);\r\n","              <span class=\"code-keyword\">if</span> (index &gt; <span class=\"code-number\">-1</span>) {\r\n","                  matchers.splice(index, <span class=\"code-number\">1</span>);\r\n","                  <span class=\"code-keyword\">if</span> (matcherRef.record.name)\r\n","                      matcherMap.delete(matcherRef.record.name);\r\n","                  matcherRef.children.forEach(removeRoute);\r\n","                  matcherRef.alias.forEach(removeRoute);\r\n","              }\r\n","          }\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">getRoutes</span>(<span class=\"code-params\"></span>) </span>{\r\n","          <span class=\"code-keyword\">return</span> matchers;\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">insertMatcher</span>(<span class=\"code-params\">matcher</span>) </span>{\r\n","          <span class=\"code-keyword\">let</span> i = <span class=\"code-number\">0</span>;\r\n","          <span class=\"code-keyword\">while</span> (i &lt; matchers.length &amp;&amp;\r\n","              comparePathParserScore(matcher, matchers[i]) &gt;= <span class=\"code-number\">0</span> &amp;&amp;\r\n","              <span class=\"code-comment\">// Adding children with empty path should still appear before the parent</span>\r\n","              <span class=\"code-comment\">// https://github.com/vuejs/router/issues/1124</span>\r\n","              (matcher.record.path !== matchers[i].record.path ||\r\n","                  !isRecordChildOf(matcher, matchers[i])))\r\n","              i++;\r\n","          matchers.splice(i, <span class=\"code-number\">0</span>, matcher);\r\n","          <span class=\"code-comment\">// only add the original record to the name map</span>\r\n","          <span class=\"code-keyword\">if</span> (matcher.record.name &amp;&amp; !isAliasRecord(matcher))\r\n","              matcherMap.set(matcher.record.name, matcher);\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">resolve</span>(<span class=\"code-params\">location, currentLocation</span>) </span>{\r\n","          <span class=\"code-keyword\">let</span> matcher;\r\n","          <span class=\"code-keyword\">let</span> params = {};\r\n","          <span class=\"code-keyword\">let</span> path;\r\n","          <span class=\"code-keyword\">let</span> name;\r\n","          <span class=\"code-keyword\">if</span> (<span class=\"code-string\">'name'</span> <span class=\"code-keyword\">in</span> location &amp;&amp; location.name) {\r\n","              matcher = matcherMap.get(location.name);\r\n","              <span class=\"code-keyword\">if</span> (!matcher)\r\n","                  <span class=\"code-keyword\">throw</span> createRouterError(<span class=\"code-number\">1</span> <span class=\"code-comment\">/* ErrorTypes.MATCHER_NOT_FOUND */</span>, {\r\n","                      location,\r\n","                  });\r\n","              <span class=\"code-comment\">// warn if the user is passing invalid params so they can debug it better when they get removed</span>\r\n","              {\r\n","                  <span class=\"code-keyword\">const</span> invalidParams = <span class=\"code-built_in\">Object</span>.keys(location.params || {}).filter(<span class=\"code-function\"><span class=\"code-params\">paramName</span> =&gt;</span> !matcher.keys.find(<span class=\"code-function\"><span class=\"code-params\">k</span> =&gt;</span> k.name === paramName));\r\n","                  <span class=\"code-keyword\">if</span> (invalidParams.length) {\r\n","                      warn(<span class=\"code-string\">`Discarded invalid param(s) \"<span class=\"code-subst\">${invalidParams.join(<span class=\"code-string\">'\", \"'</span>)}</span>\" when navigating. See https://github.com/vuejs/router/blob/main/packages/router/CHANGELOG.md#414-2022-08-22 for more details.`</span>);\r\n","                  }\r\n","              }\r\n","              name = matcher.record.name;\r\n","              params = assign(\r\n","              <span class=\"code-comment\">// paramsFromLocation is a new object</span>\r\n","              paramsFromLocation(currentLocation.params, \r\n","              <span class=\"code-comment\">// only keep params that exist in the resolved location</span>\r\n","              <span class=\"code-comment\">// <span class=\"code-doctag\">TODO:</span> only keep optional params coming from a parent record</span>\r\n","              matcher.keys.filter(<span class=\"code-function\"><span class=\"code-params\">k</span> =&gt;</span> !k.optional).map(<span class=\"code-function\"><span class=\"code-params\">k</span> =&gt;</span> k.name)), \r\n","              <span class=\"code-comment\">// discard any existing params in the current location that do not exist here</span>\r\n","              <span class=\"code-comment\">// #1497 this ensures better active/exact matching</span>\r\n","              location.params &amp;&amp;\r\n","                  paramsFromLocation(location.params, matcher.keys.map(<span class=\"code-function\"><span class=\"code-params\">k</span> =&gt;</span> k.name)));\r\n","              <span class=\"code-comment\">// throws if cannot be stringified</span>\r\n","              path = matcher.stringify(params);\r\n","          }\r\n","          <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (<span class=\"code-string\">'path'</span> <span class=\"code-keyword\">in</span> location) {\r\n","              <span class=\"code-comment\">// no need to resolve the path with the matcher as it was provided</span>\r\n","              <span class=\"code-comment\">// this also allows the user to control the encoding</span>\r\n","              path = location.path;\r\n","              <span class=\"code-keyword\">if</span> (!path.startsWith(<span class=\"code-string\">'/'</span>)) {\r\n","                  warn(<span class=\"code-string\">`The Matcher cannot resolve relative paths but received \"<span class=\"code-subst\">${path}</span>\". Unless you directly called \\`matcher.resolve(\"<span class=\"code-subst\">${path}</span>\")\\`, this is probably a bug in vue-router. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/router.`</span>);\r\n","              }\r\n","              matcher = matchers.find(<span class=\"code-function\"><span class=\"code-params\">m</span> =&gt;</span> m.re.test(path));\r\n","              <span class=\"code-comment\">// matcher should have a value after the loop</span>\r\n","              <span class=\"code-keyword\">if</span> (matcher) {\r\n","                  <span class=\"code-comment\">// we know the matcher works because we tested the regexp</span>\r\n","                  params = matcher.parse(path);\r\n","                  name = matcher.record.name;\r\n","              }\r\n","              <span class=\"code-comment\">// location is a relative path</span>\r\n","          }\r\n","          <span class=\"code-keyword\">else</span> {\r\n","              <span class=\"code-comment\">// match by name or path of current route</span>\r\n","              matcher = currentLocation.name\r\n","                  ? matcherMap.get(currentLocation.name)\r\n","                  : matchers.find(<span class=\"code-function\"><span class=\"code-params\">m</span> =&gt;</span> m.re.test(currentLocation.path));\r\n","              <span class=\"code-keyword\">if</span> (!matcher)\r\n","                  <span class=\"code-keyword\">throw</span> createRouterError(<span class=\"code-number\">1</span> <span class=\"code-comment\">/* ErrorTypes.MATCHER_NOT_FOUND */</span>, {\r\n","                      location,\r\n","                      currentLocation,\r\n","                  });\r\n","              name = matcher.record.name;\r\n","              <span class=\"code-comment\">// since we are navigating to the same location, we don't need to pick the</span>\r\n","              <span class=\"code-comment\">// params like when `name` is provided</span>\r\n","              params = assign({}, currentLocation.params, location.params);\r\n","              path = matcher.stringify(params);\r\n","          }\r\n","          <span class=\"code-keyword\">const</span> matched = [];\r\n","          <span class=\"code-keyword\">let</span> parentMatcher = matcher;\r\n","          <span class=\"code-keyword\">while</span> (parentMatcher) {\r\n","              <span class=\"code-comment\">// reversed order so parents are at the beginning</span>\r\n","              matched.unshift(parentMatcher.record);\r\n","              parentMatcher = parentMatcher.parent;\r\n","          }\r\n","          <span class=\"code-keyword\">return</span> {\r\n","              name,\r\n","              path,\r\n","              params,\r\n","              matched,\r\n","              meta: mergeMetaFields(matched),\r\n","          };\r\n","      }\r\n","      <span class=\"code-comment\">// add initial routes</span>\r\n","      routes.forEach(<span class=\"code-function\"><span class=\"code-params\">route</span> =&gt;</span> addRoute(route));\r\n","      <span class=\"code-keyword\">return</span> { addRoute, resolve, removeRoute, getRoutes, getRecordMatcher };\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">paramsFromLocation</span>(<span class=\"code-params\">params, keys</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> newParams = {};\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> key <span class=\"code-keyword\">of</span> keys) {\r\n","          <span class=\"code-keyword\">if</span> (key <span class=\"code-keyword\">in</span> params)\r\n","              newParams[key] = params[key];\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> newParams;\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Normalizes a RouteRecordRaw. Creates a copy\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param record\r\n</span>","<span class=\"code-comment\">   * @returns the normalized version\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">normalizeRouteRecord</span>(<span class=\"code-params\">record</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> {\r\n","          path: record.path,\r\n","          redirect: record.redirect,\r\n","          name: record.name,\r\n","          meta: record.meta || {},\r\n","          aliasOf: <span class=\"code-literal\">undefined</span>,\r\n","          beforeEnter: record.beforeEnter,\r\n","          props: normalizeRecordProps(record),\r\n","          children: record.children || [],\r\n","          instances: {},\r\n","          leaveGuards: <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Set</span>(),\r\n","          updateGuards: <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Set</span>(),\r\n","          enterCallbacks: {},\r\n","          components: <span class=\"code-string\">'components'</span> <span class=\"code-keyword\">in</span> record\r\n","              ? record.components || <span class=\"code-literal\">null</span>\r\n","              : record.component &amp;&amp; { <span class=\"code-attr\">default</span>: record.component },\r\n","      };\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Normalize the optional `props` in a record to always be an object similar to\r\n</span>","<span class=\"code-comment\">   * components. Also accept a boolean for components.\r\n</span>","<span class=\"code-comment\">   * @param record\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">normalizeRecordProps</span>(<span class=\"code-params\">record</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> propsObject = {};\r\n","      <span class=\"code-comment\">// props does not exist on redirect records, but we can set false directly</span>\r\n","      <span class=\"code-keyword\">const</span> props = record.props || <span class=\"code-literal\">false</span>;\r\n","      <span class=\"code-keyword\">if</span> (<span class=\"code-string\">'component'</span> <span class=\"code-keyword\">in</span> record) {\r\n","          propsObject.default = props;\r\n","      }\r\n","      <span class=\"code-keyword\">else</span> {\r\n","          <span class=\"code-comment\">// <span class=\"code-doctag\">NOTE:</span> we could also allow a function to be applied to every component.</span>\r\n","          <span class=\"code-comment\">// Would need user feedback for use cases</span>\r\n","          <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> name <span class=\"code-keyword\">in</span> record.components)\r\n","              propsObject[name] = <span class=\"code-keyword\">typeof</span> props === <span class=\"code-string\">'boolean'</span> ? props : props[name];\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> propsObject;\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Checks if a record or any of its parent is an alias\r\n</span>","<span class=\"code-comment\">   * @param record\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isAliasRecord</span>(<span class=\"code-params\">record</span>) </span>{\r\n","      <span class=\"code-keyword\">while</span> (record) {\r\n","          <span class=\"code-keyword\">if</span> (record.record.aliasOf)\r\n","              <span class=\"code-keyword\">return</span> <span class=\"code-literal\">true</span>;\r\n","          record = record.parent;\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> <span class=\"code-literal\">false</span>;\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Merge meta fields of an array of records\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param matched - array of matched records\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">mergeMetaFields</span>(<span class=\"code-params\">matched</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> matched.reduce(<span class=\"code-function\">(<span class=\"code-params\">meta, record</span>) =&gt;</span> assign(meta, record.meta), {});\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">mergeOptions</span>(<span class=\"code-params\">defaults, partialOptions</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> options = {};\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> key <span class=\"code-keyword\">in</span> defaults) {\r\n","          options[key] = key <span class=\"code-keyword\">in</span> partialOptions ? partialOptions[key] : defaults[key];\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> options;\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isSameParam</span>(<span class=\"code-params\">a, b</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> (a.name === b.name &amp;&amp;\r\n","          a.optional === b.optional &amp;&amp;\r\n","          a.repeatable === b.repeatable);\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Check if a path and its alias have the same required params\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param a - original record\r\n</span>","<span class=\"code-comment\">   * @param b - alias record\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">checkSameParams</span>(<span class=\"code-params\">a, b</span>) </span>{\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> key <span class=\"code-keyword\">of</span> a.keys) {\r\n","          <span class=\"code-keyword\">if</span> (!key.optional &amp;&amp; !b.keys.find(isSameParam.bind(<span class=\"code-literal\">null</span>, key)))\r\n","              <span class=\"code-keyword\">return</span> warn(<span class=\"code-string\">`Alias \"<span class=\"code-subst\">${b.record.path}</span>\" and the original record: \"<span class=\"code-subst\">${a.record.path}</span>\" must have the exact same param named \"<span class=\"code-subst\">${key.name}</span>\"`</span>);\r\n","      }\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> key <span class=\"code-keyword\">of</span> b.keys) {\r\n","          <span class=\"code-keyword\">if</span> (!key.optional &amp;&amp; !a.keys.find(isSameParam.bind(<span class=\"code-literal\">null</span>, key)))\r\n","              <span class=\"code-keyword\">return</span> warn(<span class=\"code-string\">`Alias \"<span class=\"code-subst\">${b.record.path}</span>\" and the original record: \"<span class=\"code-subst\">${a.record.path}</span>\" must have the exact same param named \"<span class=\"code-subst\">${key.name}</span>\"`</span>);\r\n","      }\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * A route with a name and a child with an empty path without a name should warn when adding the route\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param mainNormalizedRecord - RouteRecordNormalized\r\n</span>","<span class=\"code-comment\">   * @param parent - RouteRecordMatcher\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">checkChildMissingNameWithEmptyPath</span>(<span class=\"code-params\">mainNormalizedRecord, parent</span>) </span>{\r\n","      <span class=\"code-keyword\">if</span> (parent &amp;&amp;\r\n","          parent.record.name &amp;&amp;\r\n","          !mainNormalizedRecord.name &amp;&amp;\r\n","          !mainNormalizedRecord.path) {\r\n","          warn(<span class=\"code-string\">`The route named \"<span class=\"code-subst\">${<span class=\"code-built_in\">String</span>(parent.record.name)}</span>\" has a child without a name and an empty path. Using that name won't render the empty path child so you probably want to move the name to the child instead. If this is intentional, add a name to the child route to remove the warning.`</span>);\r\n","      }\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">checkMissingParamsInAbsolutePath</span>(<span class=\"code-params\">record, parent</span>) </span>{\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> key <span class=\"code-keyword\">of</span> parent.keys) {\r\n","          <span class=\"code-keyword\">if</span> (!record.keys.find(isSameParam.bind(<span class=\"code-literal\">null</span>, key)))\r\n","              <span class=\"code-keyword\">return</span> warn(<span class=\"code-string\">`Absolute path \"<span class=\"code-subst\">${record.record.path}</span>\" must have the exact same param named \"<span class=\"code-subst\">${key.name}</span>\" as its parent \"<span class=\"code-subst\">${parent.record.path}</span>\".`</span>);\r\n","      }\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isRecordChildOf</span>(<span class=\"code-params\">record, parent</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> parent.children.some(<span class=\"code-function\"><span class=\"code-params\">child</span> =&gt;</span> child === record || isRecordChildOf(record, child));\r\n","  }\n","\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Encoding Rules \u2423 = Space Path: \u2423 \" &lt; &gt; # ? { } Query: \u2423 \" &lt; &gt; # &amp; = Hash: \u2423 \"\r\n</span>","<span class=\"code-comment\">   * &lt; &gt; `\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * On top of that, the RFC3986 (https://tools.ietf.org/html/rfc3986#section-2.2)\r\n</span>","<span class=\"code-comment\">   * defines some extra characters to be encoded. Most browsers do not encode them\r\n</span>","<span class=\"code-comment\">   * in encodeURI https://github.com/whatwg/url/issues/369, so it may be safer to\r\n</span>","<span class=\"code-comment\">   * also encode `!'()*`. Leaving un-encoded only ASCII alphanumeric(`a-zA-Z0-9`)\r\n</span>","<span class=\"code-comment\">   * plus `-._~`. This extra safety should be applied to query by patching the\r\n</span>","<span class=\"code-comment\">   * string returned by encodeURIComponent encodeURI also encodes `[\\]^`. `\\`\r\n</span>","<span class=\"code-comment\">   * should be encoded to avoid ambiguity. Browsers (IE, FF, C) transform a `\\`\r\n</span>","<span class=\"code-comment\">   * into a `/` if directly typed in. The _backtick_ (`````) should also be\r\n</span>","<span class=\"code-comment\">   * encoded everywhere because some browsers like FF encode it when directly\r\n</span>","<span class=\"code-comment\">   * written while others don't. Safari and IE don't encode ``\"&lt;&gt;{}``` in hash.\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-comment\">// const EXTRA_RESERVED_RE = /[!'()*]/g</span>\r\n","  <span class=\"code-comment\">// const encodeReservedReplacer = (c: string) =&gt; '%' + c.charCodeAt(0).toString(16)</span>\r\n","  <span class=\"code-keyword\">const</span> HASH_RE = <span class=\"code-regexp\">/#/g</span>; <span class=\"code-comment\">// %23</span>\r\n","  <span class=\"code-keyword\">const</span> AMPERSAND_RE = <span class=\"code-regexp\">/&amp;/g</span>; <span class=\"code-comment\">// %26</span>\r\n","  <span class=\"code-keyword\">const</span> SLASH_RE = <span class=\"code-regexp\">/\\//g</span>; <span class=\"code-comment\">// %2F</span>\r\n","  <span class=\"code-keyword\">const</span> EQUAL_RE = <span class=\"code-regexp\">/=/g</span>; <span class=\"code-comment\">// %3D</span>\r\n","  <span class=\"code-keyword\">const</span> IM_RE = <span class=\"code-regexp\">/\\?/g</span>; <span class=\"code-comment\">// %3F</span>\r\n","  <span class=\"code-keyword\">const</span> PLUS_RE = <span class=\"code-regexp\">/\\+/g</span>; <span class=\"code-comment\">// %2B</span>\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * <span class=\"code-doctag\">NOTE:</span> It's not clear to me if we should encode the + symbol in queries, it\r\n</span>","<span class=\"code-comment\">   * seems to be less flexible than not doing so and I can't find out the legacy\r\n</span>","<span class=\"code-comment\">   * systems requiring this for regular requests like text/html. In the standard,\r\n</span>","<span class=\"code-comment\">   * the encoding of the plus character is only mentioned for\r\n</span>","<span class=\"code-comment\">   * application/x-www-form-urlencoded\r\n</span>","<span class=\"code-comment\">   * (https://url.spec.whatwg.org/#urlencoded-parsing) and most browsers seems lo\r\n</span>","<span class=\"code-comment\">   * leave the plus character as is in queries. To be more flexible, we allow the\r\n</span>","<span class=\"code-comment\">   * plus character on the query, but it can also be manually encoded by the user.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * Resources:\r\n</span>","<span class=\"code-comment\">   * - https://url.spec.whatwg.org/#urlencoded-parsing\r\n</span>","<span class=\"code-comment\">   * - https://stackoverflow.com/questions/1634271/url-encoding-the-space-character-or-20\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-keyword\">const</span> ENC_BRACKET_OPEN_RE = <span class=\"code-regexp\">/%5B/g</span>; <span class=\"code-comment\">// [</span>\r\n","  <span class=\"code-keyword\">const</span> ENC_BRACKET_CLOSE_RE = <span class=\"code-regexp\">/%5D/g</span>; <span class=\"code-comment\">// ]</span>\r\n","  <span class=\"code-keyword\">const</span> ENC_CARET_RE = <span class=\"code-regexp\">/%5E/g</span>; <span class=\"code-comment\">// ^</span>\r\n","  <span class=\"code-keyword\">const</span> ENC_BACKTICK_RE = <span class=\"code-regexp\">/%60/g</span>; <span class=\"code-comment\">// `</span>\r\n","  <span class=\"code-keyword\">const</span> ENC_CURLY_OPEN_RE = <span class=\"code-regexp\">/%7B/g</span>; <span class=\"code-comment\">// {</span>\r\n","  <span class=\"code-keyword\">const</span> ENC_PIPE_RE = <span class=\"code-regexp\">/%7C/g</span>; <span class=\"code-comment\">// |</span>\r\n","  <span class=\"code-keyword\">const</span> ENC_CURLY_CLOSE_RE = <span class=\"code-regexp\">/%7D/g</span>; <span class=\"code-comment\">// }</span>\r\n","  <span class=\"code-keyword\">const</span> ENC_SPACE_RE = <span class=\"code-regexp\">/%20/g</span>; <span class=\"code-comment\">// }</span>\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Encode characters that need to be encoded on the path, search and hash\r\n</span>","<span class=\"code-comment\">   * sections of the URL.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @internal\r\n</span>","<span class=\"code-comment\">   * @param text - string to encode\r\n</span>","<span class=\"code-comment\">   * @returns encoded string\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">commonEncode</span>(<span class=\"code-params\">text</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> <span class=\"code-built_in\">encodeURI</span>(<span class=\"code-string\">''</span> + text)\r\n","          .replace(ENC_PIPE_RE, <span class=\"code-string\">'|'</span>)\r\n","          .replace(ENC_BRACKET_OPEN_RE, <span class=\"code-string\">'['</span>)\r\n","          .replace(ENC_BRACKET_CLOSE_RE, <span class=\"code-string\">']'</span>);\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Encode characters that need to be encoded on the hash section of the URL.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param text - string to encode\r\n</span>","<span class=\"code-comment\">   * @returns encoded string\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">encodeHash</span>(<span class=\"code-params\">text</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> commonEncode(text)\r\n","          .replace(ENC_CURLY_OPEN_RE, <span class=\"code-string\">'{'</span>)\r\n","          .replace(ENC_CURLY_CLOSE_RE, <span class=\"code-string\">'}'</span>)\r\n","          .replace(ENC_CARET_RE, <span class=\"code-string\">'^'</span>);\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Encode characters that need to be encoded query values on the query\r\n</span>","<span class=\"code-comment\">   * section of the URL.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param text - string to encode\r\n</span>","<span class=\"code-comment\">   * @returns encoded string\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">encodeQueryValue</span>(<span class=\"code-params\">text</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> (commonEncode(text)\r\n","          <span class=\"code-comment\">// Encode the space as +, encode the + to differentiate it from the space</span>\r\n","          .replace(PLUS_RE, <span class=\"code-string\">'%2B'</span>)\r\n","          .replace(ENC_SPACE_RE, <span class=\"code-string\">'+'</span>)\r\n","          .replace(HASH_RE, <span class=\"code-string\">'%23'</span>)\r\n","          .replace(AMPERSAND_RE, <span class=\"code-string\">'%26'</span>)\r\n","          .replace(ENC_BACKTICK_RE, <span class=\"code-string\">'`'</span>)\r\n","          .replace(ENC_CURLY_OPEN_RE, <span class=\"code-string\">'{'</span>)\r\n","          .replace(ENC_CURLY_CLOSE_RE, <span class=\"code-string\">'}'</span>)\r\n","          .replace(ENC_CARET_RE, <span class=\"code-string\">'^'</span>));\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Like `encodeQueryValue` but also encodes the `=` character.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param text - string to encode\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">encodeQueryKey</span>(<span class=\"code-params\">text</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> encodeQueryValue(text).replace(EQUAL_RE, <span class=\"code-string\">'%3D'</span>);\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Encode characters that need to be encoded on the path section of the URL.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param text - string to encode\r\n</span>","<span class=\"code-comment\">   * @returns encoded string\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">encodePath</span>(<span class=\"code-params\">text</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> commonEncode(text).replace(HASH_RE, <span class=\"code-string\">'%23'</span>).replace(IM_RE, <span class=\"code-string\">'%3F'</span>);\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Encode characters that need to be encoded on the path section of the URL as a\r\n</span>","<span class=\"code-comment\">   * param. This function encodes everything {@link encodePath} does plus the\r\n</span>","<span class=\"code-comment\">   * slash (`/`) character. If `text` is `null` or `undefined`, returns an empty\r\n</span>","<span class=\"code-comment\">   * string instead.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param text - string to encode\r\n</span>","<span class=\"code-comment\">   * @returns encoded string\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">encodeParam</span>(<span class=\"code-params\">text</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> text == <span class=\"code-literal\">null</span> ? <span class=\"code-string\">''</span> : encodePath(text).replace(SLASH_RE, <span class=\"code-string\">'%2F'</span>);\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Decode text using `decodeURIComponent`. Returns the original text if it\r\n</span>","<span class=\"code-comment\">   * fails.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param text - string to decode\r\n</span>","<span class=\"code-comment\">   * @returns decoded string\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">decode</span>(<span class=\"code-params\">text</span>) </span>{\r\n","      <span class=\"code-keyword\">try</span> {\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-built_in\">decodeURIComponent</span>(<span class=\"code-string\">''</span> + text);\r\n","      }\r\n","      <span class=\"code-keyword\">catch</span> (err) {\r\n","          warn(<span class=\"code-string\">`Error decoding \"<span class=\"code-subst\">${text}</span>\". Using original value`</span>);\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> <span class=\"code-string\">''</span> + text;\r\n","  }\n","\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Transforms a queryString into a {@link LocationQuery} object. Accept both, a\r\n</span>","<span class=\"code-comment\">   * version with the leading `?` and without Should work as URLSearchParams\r\n</span>","<span class=\"code-comment\">\n</span>","<span class=\"code-comment\">   * @internal\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param search - search string to parse\r\n</span>","<span class=\"code-comment\">   * @returns a query object\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">parseQuery</span>(<span class=\"code-params\">search</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> query = {};\r\n","      <span class=\"code-comment\">// avoid creating an object with an empty key and empty value</span>\r\n","      <span class=\"code-comment\">// because of split('&amp;')</span>\r\n","      <span class=\"code-keyword\">if</span> (search === <span class=\"code-string\">''</span> || search === <span class=\"code-string\">'?'</span>)\r\n","          <span class=\"code-keyword\">return</span> query;\r\n","      <span class=\"code-keyword\">const</span> hasLeadingIM = search[<span class=\"code-number\">0</span>] === <span class=\"code-string\">'?'</span>;\r\n","      <span class=\"code-keyword\">const</span> searchParams = (hasLeadingIM ? search.slice(<span class=\"code-number\">1</span>) : search).split(<span class=\"code-string\">'&amp;'</span>);\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">let</span> i = <span class=\"code-number\">0</span>; i &lt; searchParams.length; ++i) {\r\n","          <span class=\"code-comment\">// pre decode the + into space</span>\r\n","          <span class=\"code-keyword\">const</span> searchParam = searchParams[i].replace(PLUS_RE, <span class=\"code-string\">' '</span>);\r\n","          <span class=\"code-comment\">// allow the = character</span>\r\n","          <span class=\"code-keyword\">const</span> eqPos = searchParam.indexOf(<span class=\"code-string\">'='</span>);\r\n","          <span class=\"code-keyword\">const</span> key = decode(eqPos &lt; <span class=\"code-number\">0</span> ? searchParam : searchParam.slice(<span class=\"code-number\">0</span>, eqPos));\r\n","          <span class=\"code-keyword\">const</span> value = eqPos &lt; <span class=\"code-number\">0</span> ? <span class=\"code-literal\">null</span> : decode(searchParam.slice(eqPos + <span class=\"code-number\">1</span>));\r\n","          <span class=\"code-keyword\">if</span> (key <span class=\"code-keyword\">in</span> query) {\r\n","              <span class=\"code-comment\">// an extra variable for ts types</span>\r\n","              <span class=\"code-keyword\">let</span> currentValue = query[key];\r\n","              <span class=\"code-keyword\">if</span> (!isArray(currentValue)) {\r\n","                  currentValue = query[key] = [currentValue];\r\n","              }\r\n","              currentValue.push(value);\r\n","          }\r\n","          <span class=\"code-keyword\">else</span> {\r\n","              query[key] = value;\r\n","          }\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> query;\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Stringifies a {@link LocationQueryRaw} object. Like `URLSearchParams`, it\r\n</span>","<span class=\"code-comment\">   * doesn't prepend a `?`\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @internal\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param query - query object to stringify\r\n</span>","<span class=\"code-comment\">   * @returns string version of the query without the leading `?`\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">stringifyQuery</span>(<span class=\"code-params\">query</span>) </span>{\r\n","      <span class=\"code-keyword\">let</span> search = <span class=\"code-string\">''</span>;\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">let</span> key <span class=\"code-keyword\">in</span> query) {\r\n","          <span class=\"code-keyword\">const</span> value = query[key];\r\n","          key = encodeQueryKey(key);\r\n","          <span class=\"code-keyword\">if</span> (value == <span class=\"code-literal\">null</span>) {\r\n","              <span class=\"code-comment\">// only null adds the value</span>\r\n","              <span class=\"code-keyword\">if</span> (value !== <span class=\"code-literal\">undefined</span>) {\r\n","                  search += (search.length ? <span class=\"code-string\">'&amp;'</span> : <span class=\"code-string\">''</span>) + key;\r\n","              }\r\n","              <span class=\"code-keyword\">continue</span>;\r\n","          }\r\n","          <span class=\"code-comment\">// keep null values</span>\r\n","          <span class=\"code-keyword\">const</span> values = isArray(value)\r\n","              ? value.map(<span class=\"code-function\"><span class=\"code-params\">v</span> =&gt;</span> v &amp;&amp; encodeQueryValue(v))\r\n","              : [value &amp;&amp; encodeQueryValue(value)];\r\n","          values.forEach(<span class=\"code-function\"><span class=\"code-params\">value</span> =&gt;</span> {\r\n","              <span class=\"code-comment\">// skip undefined values in arrays as if they were not present</span>\r\n","              <span class=\"code-comment\">// smaller code than using filter</span>\r\n","              <span class=\"code-keyword\">if</span> (value !== <span class=\"code-literal\">undefined</span>) {\r\n","                  <span class=\"code-comment\">// only append &amp; with non-empty search</span>\r\n","                  search += (search.length ? <span class=\"code-string\">'&amp;'</span> : <span class=\"code-string\">''</span>) + key;\r\n","                  <span class=\"code-keyword\">if</span> (value != <span class=\"code-literal\">null</span>)\r\n","                      search += <span class=\"code-string\">'='</span> + value;\r\n","              }\r\n","          });\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> search;\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Transforms a {@link LocationQueryRaw} into a {@link LocationQuery} by casting\r\n</span>","<span class=\"code-comment\">   * numbers into strings, removing keys with an undefined value and replacing\r\n</span>","<span class=\"code-comment\">   * undefined with null in arrays\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param query - query object to normalize\r\n</span>","<span class=\"code-comment\">   * @returns a normalized query object\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">normalizeQuery</span>(<span class=\"code-params\">query</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> normalizedQuery = {};\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> key <span class=\"code-keyword\">in</span> query) {\r\n","          <span class=\"code-keyword\">const</span> value = query[key];\r\n","          <span class=\"code-keyword\">if</span> (value !== <span class=\"code-literal\">undefined</span>) {\r\n","              normalizedQuery[key] = isArray(value)\r\n","                  ? value.map(<span class=\"code-function\"><span class=\"code-params\">v</span> =&gt;</span> (v == <span class=\"code-literal\">null</span> ? <span class=\"code-literal\">null</span> : <span class=\"code-string\">''</span> + v))\r\n","                  : value == <span class=\"code-literal\">null</span>\r\n","                      ? value\r\n","                      : <span class=\"code-string\">''</span> + value;\r\n","          }\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> normalizedQuery;\r\n","  }\n","\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * RouteRecord being rendered by the closest ancestor Router View. Used for\r\n</span>","<span class=\"code-comment\">   * `onBeforeRouteUpdate` and `onBeforeRouteLeave`. rvlm stands for Router View\r\n</span>","<span class=\"code-comment\">   * Location Matched\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @internal\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-keyword\">const</span> matchedRouteKey = <span class=\"code-built_in\">Symbol</span>(<span class=\"code-string\">'router view location matched'</span> );\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Allows overriding the router view depth to control which component in\r\n</span>","<span class=\"code-comment\">   * `matched` is rendered. rvd stands for Router View Depth\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @internal\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-keyword\">const</span> viewDepthKey = <span class=\"code-built_in\">Symbol</span>(<span class=\"code-string\">'router view depth'</span> );\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Allows overriding the router instance returned by `useRouter` in tests. r\r\n</span>","<span class=\"code-comment\">   * stands for router\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @internal\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-keyword\">const</span> routerKey = <span class=\"code-built_in\">Symbol</span>(<span class=\"code-string\">'router'</span> );\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Allows overriding the current route returned by `useRoute` in tests. rl\r\n</span>","<span class=\"code-comment\">   * stands for route location\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @internal\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-keyword\">const</span> routeLocationKey = <span class=\"code-built_in\">Symbol</span>(<span class=\"code-string\">'route location'</span> );\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Allows overriding the current route used by router-view. Internally this is\r\n</span>","<span class=\"code-comment\">   * used when the `route` prop is passed.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @internal\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-keyword\">const</span> routerViewLocationKey = <span class=\"code-built_in\">Symbol</span>(<span class=\"code-string\">'router view location'</span> );\n","\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Create a list of callbacks that can be reset. Used to create before and after navigation guards list\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">useCallbacks</span>(<span class=\"code-params\"></span>) </span>{\r\n","      <span class=\"code-keyword\">let</span> handlers = [];\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">add</span>(<span class=\"code-params\">handler</span>) </span>{\r\n","          handlers.push(handler);\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","              <span class=\"code-keyword\">const</span> i = handlers.indexOf(handler);\r\n","              <span class=\"code-keyword\">if</span> (i &gt; <span class=\"code-number\">-1</span>)\r\n","                  handlers.splice(i, <span class=\"code-number\">1</span>);\r\n","          };\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">reset</span>(<span class=\"code-params\"></span>) </span>{\r\n","          handlers = [];\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> {\r\n","          add,\r\n","          list: <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> handlers,\r\n","          reset,\r\n","      };\r\n","  }\n","\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">registerGuard</span>(<span class=\"code-params\">record, name, guard</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> removeFromList = <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","          record[name].delete(guard);\r\n","      };\r\n","      vue.onUnmounted(removeFromList);\r\n","      vue.onDeactivated(removeFromList);\r\n","      vue.onActivated(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","          record[name].add(guard);\r\n","      });\r\n","      record[name].add(guard);\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Add a navigation guard that triggers whenever the component for the current\r\n</span>","<span class=\"code-comment\">   * location is about to be left. Similar to {@link beforeRouteLeave} but can be\r\n</span>","<span class=\"code-comment\">   * used in any component. The guard is removed when the component is unmounted.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param leaveGuard - {@link NavigationGuard}\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">onBeforeRouteLeave</span>(<span class=\"code-params\">leaveGuard</span>) </span>{\r\n","      <span class=\"code-keyword\">if</span> (!vue.getCurrentInstance()) {\r\n","          warn(<span class=\"code-string\">'getCurrentInstance() returned null. onBeforeRouteLeave() must be called at the top of a setup function'</span>);\r\n","          <span class=\"code-keyword\">return</span>;\r\n","      }\r\n","      <span class=\"code-keyword\">const</span> activeRecord = vue.inject(matchedRouteKey, \r\n","      <span class=\"code-comment\">// to avoid warning</span>\r\n","      {}).value;\r\n","      <span class=\"code-keyword\">if</span> (!activeRecord) {\r\n","          warn(<span class=\"code-string\">'No active route record was found when calling `onBeforeRouteLeave()`. Make sure you call this function inside a component child of &lt;router-view&gt;. Maybe you called it inside of App.vue?'</span>);\r\n","          <span class=\"code-keyword\">return</span>;\r\n","      }\r\n","      registerGuard(activeRecord, <span class=\"code-string\">'leaveGuards'</span>, leaveGuard);\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Add a navigation guard that triggers whenever the current location is about\r\n</span>","<span class=\"code-comment\">   * to be updated. Similar to {@link beforeRouteUpdate} but can be used in any\r\n</span>","<span class=\"code-comment\">   * component. The guard is removed when the component is unmounted.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param updateGuard - {@link NavigationGuard}\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">onBeforeRouteUpdate</span>(<span class=\"code-params\">updateGuard</span>) </span>{\r\n","      <span class=\"code-keyword\">if</span> (!vue.getCurrentInstance()) {\r\n","          warn(<span class=\"code-string\">'getCurrentInstance() returned null. onBeforeRouteUpdate() must be called at the top of a setup function'</span>);\r\n","          <span class=\"code-keyword\">return</span>;\r\n","      }\r\n","      <span class=\"code-keyword\">const</span> activeRecord = vue.inject(matchedRouteKey, \r\n","      <span class=\"code-comment\">// to avoid warning</span>\r\n","      {}).value;\r\n","      <span class=\"code-keyword\">if</span> (!activeRecord) {\r\n","          warn(<span class=\"code-string\">'No active route record was found when calling `onBeforeRouteUpdate()`. Make sure you call this function inside a component child of &lt;router-view&gt;. Maybe you called it inside of App.vue?'</span>);\r\n","          <span class=\"code-keyword\">return</span>;\r\n","      }\r\n","      registerGuard(activeRecord, <span class=\"code-string\">'updateGuards'</span>, updateGuard);\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">guardToPromiseFn</span>(<span class=\"code-params\">guard, to, from, record, name</span>) </span>{\r\n","      <span class=\"code-comment\">// keep a reference to the enterCallbackArray to prevent pushing callbacks if a new navigation took place</span>\r\n","      <span class=\"code-keyword\">const</span> enterCallbackArray = record &amp;&amp;\r\n","          <span class=\"code-comment\">// name is defined if record is because of the function overload</span>\r\n","          (record.enterCallbacks[name] = record.enterCallbacks[name] || []);\r\n","      <span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Promise</span>(<span class=\"code-function\">(<span class=\"code-params\">resolve, reject</span>) =&gt;</span> {\r\n","          <span class=\"code-keyword\">const</span> next = <span class=\"code-function\">(<span class=\"code-params\">valid</span>) =&gt;</span> {\r\n","              <span class=\"code-keyword\">if</span> (valid === <span class=\"code-literal\">false</span>) {\r\n","                  reject(createRouterError(<span class=\"code-number\">4</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_ABORTED */</span>, {\r\n","                      <span class=\"code-keyword\">from</span>,\r\n","                      to,\r\n","                  }));\r\n","              }\r\n","              <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (valid <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">Error</span>) {\r\n","                  reject(valid);\r\n","              }\r\n","              <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (isRouteLocation(valid)) {\r\n","                  reject(createRouterError(<span class=\"code-number\">2</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_GUARD_REDIRECT */</span>, {\r\n","                      <span class=\"code-keyword\">from</span>: to,\r\n","                      to: valid,\r\n","                  }));\r\n","              }\r\n","              <span class=\"code-keyword\">else</span> {\r\n","                  <span class=\"code-keyword\">if</span> (enterCallbackArray &amp;&amp;\r\n","                      <span class=\"code-comment\">// since enterCallbackArray is truthy, both record and name also are</span>\r\n","                      record.enterCallbacks[name] === enterCallbackArray &amp;&amp;\r\n","                      <span class=\"code-keyword\">typeof</span> valid === <span class=\"code-string\">'function'</span>) {\r\n","                      enterCallbackArray.push(valid);\r\n","                  }\r\n","                  resolve();\r\n","              }\r\n","          };\r\n","          <span class=\"code-comment\">// wrapping with Promise.resolve allows it to work with both async and sync guards</span>\r\n","          <span class=\"code-keyword\">const</span> guardReturn = guard.call(record &amp;&amp; record.instances[name], to, <span class=\"code-keyword\">from</span>, canOnlyBeCalledOnce(next, to, <span class=\"code-keyword\">from</span>) );\r\n","          <span class=\"code-keyword\">let</span> guardCall = <span class=\"code-built_in\">Promise</span>.resolve(guardReturn);\r\n","          <span class=\"code-keyword\">if</span> (guard.length &lt; <span class=\"code-number\">3</span>)\r\n","              guardCall = guardCall.then(next);\r\n","          <span class=\"code-keyword\">if</span> (guard.length &gt; <span class=\"code-number\">2</span>) {\r\n","              <span class=\"code-keyword\">const</span> message = <span class=\"code-string\">`The \"next\" callback was never called inside of <span class=\"code-subst\">${guard.name ? <span class=\"code-string\">'\"'</span> + guard.name + <span class=\"code-string\">'\"'</span> : <span class=\"code-string\">''</span>}</span>:\\n<span class=\"code-subst\">${guard.toString()}</span>\\n. If you are returning a value instead of calling \"next\", make sure to remove the \"next\" parameter from your function.`</span>;\r\n","              <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">typeof</span> guardReturn === <span class=\"code-string\">'object'</span> &amp;&amp; <span class=\"code-string\">'then'</span> <span class=\"code-keyword\">in</span> guardReturn) {\r\n","                  guardCall = guardCall.then(<span class=\"code-function\"><span class=\"code-params\">resolvedValue</span> =&gt;</span> {\r\n","                      <span class=\"code-comment\">// @ts-expect-error: _called is added at canOnlyBeCalledOnce</span>\r\n","                      <span class=\"code-keyword\">if</span> (!next._called) {\r\n","                          warn(message);\r\n","                          <span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Promise</span>.reject(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">'Invalid navigation guard'</span>));\r\n","                      }\r\n","                      <span class=\"code-keyword\">return</span> resolvedValue;\r\n","                  });\r\n","              }\r\n","              <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (guardReturn !== <span class=\"code-literal\">undefined</span>) {\r\n","                  <span class=\"code-comment\">// @ts-expect-error: _called is added at canOnlyBeCalledOnce</span>\r\n","                  <span class=\"code-keyword\">if</span> (!next._called) {\r\n","                      warn(message);\r\n","                      reject(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">'Invalid navigation guard'</span>));\r\n","                      <span class=\"code-keyword\">return</span>;\r\n","                  }\r\n","              }\r\n","          }\r\n","          guardCall.catch(<span class=\"code-function\"><span class=\"code-params\">err</span> =&gt;</span> reject(err));\r\n","      });\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">canOnlyBeCalledOnce</span>(<span class=\"code-params\">next, to, from</span>) </span>{\r\n","      <span class=\"code-keyword\">let</span> called = <span class=\"code-number\">0</span>;\r\n","      <span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\r\n","          <span class=\"code-keyword\">if</span> (called++ === <span class=\"code-number\">1</span>)\r\n","              warn(<span class=\"code-string\">`The \"next\" callback was called more than once in one navigation guard when going from \"<span class=\"code-subst\">${<span class=\"code-keyword\">from</span>.fullPath}</span>\" to \"<span class=\"code-subst\">${to.fullPath}</span>\". It should be called exactly one time in each navigation guard. This will fail in production.`</span>);\r\n","          <span class=\"code-comment\">// @ts-expect-error: we put it in the original one because it's easier to check</span>\r\n","          next._called = <span class=\"code-literal\">true</span>;\r\n","          <span class=\"code-keyword\">if</span> (called === <span class=\"code-number\">1</span>)\r\n","              next.apply(<span class=\"code-literal\">null</span>, <span class=\"code-built_in\">arguments</span>);\r\n","      };\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">extractComponentsGuards</span>(<span class=\"code-params\">matched, guardType, to, from</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> guards = [];\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> record <span class=\"code-keyword\">of</span> matched) {\r\n","          <span class=\"code-keyword\">if</span> (!record.components &amp;&amp; !record.children.length) {\r\n","              warn(<span class=\"code-string\">`Record with path \"<span class=\"code-subst\">${record.path}</span>\" is either missing a \"component(s)\"`</span> +\r\n","                  <span class=\"code-string\">` or \"children\" property.`</span>);\r\n","          }\r\n","          <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> name <span class=\"code-keyword\">in</span> record.components) {\r\n","              <span class=\"code-keyword\">let</span> rawComponent = record.components[name];\r\n","              {\r\n","                  <span class=\"code-keyword\">if</span> (!rawComponent ||\r\n","                      (<span class=\"code-keyword\">typeof</span> rawComponent !== <span class=\"code-string\">'object'</span> &amp;&amp;\r\n","                          <span class=\"code-keyword\">typeof</span> rawComponent !== <span class=\"code-string\">'function'</span>)) {\r\n","                      warn(<span class=\"code-string\">`Component \"<span class=\"code-subst\">${name}</span>\" in record with path \"<span class=\"code-subst\">${record.path}</span>\" is not`</span> +\r\n","                          <span class=\"code-string\">` a valid component. Received \"<span class=\"code-subst\">${<span class=\"code-built_in\">String</span>(rawComponent)}</span>\".`</span>);\r\n","                      <span class=\"code-comment\">// throw to ensure we stop here but warn to ensure the message isn't</span>\r\n","                      <span class=\"code-comment\">// missed by the user</span>\r\n","                      <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">'Invalid route component'</span>);\r\n","                  }\r\n","                  <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (<span class=\"code-string\">'then'</span> <span class=\"code-keyword\">in</span> rawComponent) {\r\n","                      <span class=\"code-comment\">// warn if user wrote import('/component.vue') instead of () =&gt;</span>\r\n","                      <span class=\"code-comment\">// import('./component.vue')</span>\r\n","                      warn(<span class=\"code-string\">`Component \"<span class=\"code-subst\">${name}</span>\" in record with path \"<span class=\"code-subst\">${record.path}</span>\" is a `</span> +\r\n","                          <span class=\"code-string\">`Promise instead of a function that returns a Promise. Did you `</span> +\r\n","                          <span class=\"code-string\">`write \"import('./MyPage.vue')\" instead of `</span> +\r\n","                          <span class=\"code-string\">`\"() =&gt; import('./MyPage.vue')\" ? This will break in `</span> +\r\n","                          <span class=\"code-string\">`production if not fixed.`</span>);\r\n","                      <span class=\"code-keyword\">const</span> promise = rawComponent;\r\n","                      rawComponent = <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> promise;\r\n","                  }\r\n","                  <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (rawComponent.__asyncLoader &amp;&amp;\r\n","                      <span class=\"code-comment\">// warn only once per component</span>\r\n","                      !rawComponent.__warnedDefineAsync) {\r\n","                      rawComponent.__warnedDefineAsync = <span class=\"code-literal\">true</span>;\r\n","                      warn(<span class=\"code-string\">`Component \"<span class=\"code-subst\">${name}</span>\" in record with path \"<span class=\"code-subst\">${record.path}</span>\" is defined `</span> +\r\n","                          <span class=\"code-string\">`using \"defineAsyncComponent()\". `</span> +\r\n","                          <span class=\"code-string\">`Write \"() =&gt; import('./MyPage.vue')\" instead of `</span> +\r\n","                          <span class=\"code-string\">`\"defineAsyncComponent(() =&gt; import('./MyPage.vue'))\".`</span>);\r\n","                  }\r\n","              }\r\n","              <span class=\"code-comment\">// skip update and leave guards if the route component is not mounted</span>\r\n","              <span class=\"code-keyword\">if</span> (guardType !== <span class=\"code-string\">'beforeRouteEnter'</span> &amp;&amp; !record.instances[name])\r\n","                  <span class=\"code-keyword\">continue</span>;\r\n","              <span class=\"code-keyword\">if</span> (isRouteComponent(rawComponent)) {\r\n","                  <span class=\"code-comment\">// __vccOpts is added by vue-class-component and contain the regular options</span>\r\n","                  <span class=\"code-keyword\">const</span> options = rawComponent.__vccOpts || rawComponent;\r\n","                  <span class=\"code-keyword\">const</span> guard = options[guardType];\r\n","                  guard &amp;&amp; guards.push(guardToPromiseFn(guard, to, <span class=\"code-keyword\">from</span>, record, name));\r\n","              }\r\n","              <span class=\"code-keyword\">else</span> {\r\n","                  <span class=\"code-comment\">// start requesting the chunk already</span>\r\n","                  <span class=\"code-keyword\">let</span> componentPromise = rawComponent();\r\n","                  <span class=\"code-keyword\">if</span> (!(<span class=\"code-string\">'catch'</span> <span class=\"code-keyword\">in</span> componentPromise)) {\r\n","                      warn(<span class=\"code-string\">`Component \"<span class=\"code-subst\">${name}</span>\" in record with path \"<span class=\"code-subst\">${record.path}</span>\" is a function that does not return a Promise. If you were passing a functional component, make sure to add a \"displayName\" to the component. This will break in production if not fixed.`</span>);\r\n","                      componentPromise = <span class=\"code-built_in\">Promise</span>.resolve(componentPromise);\r\n","                  }\r\n","                  guards.push(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> componentPromise.then(<span class=\"code-function\"><span class=\"code-params\">resolved</span> =&gt;</span> {\r\n","                      <span class=\"code-keyword\">if</span> (!resolved)\r\n","                          <span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Promise</span>.reject(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">`Couldn't resolve component \"<span class=\"code-subst\">${name}</span>\" at \"<span class=\"code-subst\">${record.path}</span>\"`</span>));\r\n","                      <span class=\"code-keyword\">const</span> resolvedComponent = isESModule(resolved)\r\n","                          ? resolved.default\r\n","                          : resolved;\r\n","                      <span class=\"code-comment\">// replace the function with the resolved component</span>\r\n","                      <span class=\"code-comment\">// cannot be null or undefined because we went into the for loop</span>\r\n","                      record.components[name] = resolvedComponent;\r\n","                      <span class=\"code-comment\">// __vccOpts is added by vue-class-component and contain the regular options</span>\r\n","                      <span class=\"code-keyword\">const</span> options = resolvedComponent.__vccOpts || resolvedComponent;\r\n","                      <span class=\"code-keyword\">const</span> guard = options[guardType];\r\n","                      <span class=\"code-keyword\">return</span> guard &amp;&amp; guardToPromiseFn(guard, to, <span class=\"code-keyword\">from</span>, record, name)();\r\n","                  }));\r\n","              }\r\n","          }\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> guards;\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Allows differentiating lazy components from functional components and vue-class-component\r\n</span>","<span class=\"code-comment\">   * @internal\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param component\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isRouteComponent</span>(<span class=\"code-params\">component</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> (<span class=\"code-keyword\">typeof</span> component === <span class=\"code-string\">'object'</span> ||\r\n","          <span class=\"code-string\">'displayName'</span> <span class=\"code-keyword\">in</span> component ||\r\n","          <span class=\"code-string\">'props'</span> <span class=\"code-keyword\">in</span> component ||\r\n","          <span class=\"code-string\">'__vccOpts'</span> <span class=\"code-keyword\">in</span> component);\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Ensures a route is loaded, so it can be passed as o prop to `&lt;RouterView&gt;`.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param route - resolved route to load\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">loadRouteLocation</span>(<span class=\"code-params\">route</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> route.matched.every(<span class=\"code-function\"><span class=\"code-params\">record</span> =&gt;</span> record.redirect)\r\n","          ? <span class=\"code-built_in\">Promise</span>.reject(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">'Cannot load a route that redirects.'</span>))\r\n","          : <span class=\"code-built_in\">Promise</span>.all(route.matched.map(<span class=\"code-function\"><span class=\"code-params\">record</span> =&gt;</span> record.components &amp;&amp;\r\n","              <span class=\"code-built_in\">Promise</span>.all(<span class=\"code-built_in\">Object</span>.keys(record.components).reduce(<span class=\"code-function\">(<span class=\"code-params\">promises, name</span>) =&gt;</span> {\r\n","                  <span class=\"code-keyword\">const</span> rawComponent = record.components[name];\r\n","                  <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">typeof</span> rawComponent === <span class=\"code-string\">'function'</span> &amp;&amp;\r\n","                      !(<span class=\"code-string\">'displayName'</span> <span class=\"code-keyword\">in</span> rawComponent)) {\r\n","                      promises.push(rawComponent().then(<span class=\"code-function\"><span class=\"code-params\">resolved</span> =&gt;</span> {\r\n","                          <span class=\"code-keyword\">if</span> (!resolved)\r\n","                              <span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Promise</span>.reject(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">`Couldn't resolve component \"<span class=\"code-subst\">${name}</span>\" at \"<span class=\"code-subst\">${record.path}</span>\". Ensure you passed a function that returns a promise.`</span>));\r\n","                          <span class=\"code-keyword\">const</span> resolvedComponent = isESModule(resolved)\r\n","                              ? resolved.default\r\n","                              : resolved;\r\n","                          <span class=\"code-comment\">// replace the function with the resolved component</span>\r\n","                          <span class=\"code-comment\">// cannot be null or undefined because we went into the for loop</span>\r\n","                          record.components[name] = resolvedComponent;\r\n","                          <span class=\"code-keyword\">return</span>;\r\n","                      }));\r\n","                  }\r\n","                  <span class=\"code-keyword\">return</span> promises;\r\n","              }, [])))).then(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> route);\r\n","  }\n","\n","  <span class=\"code-comment\">// <span class=\"code-doctag\">TODO:</span> we could allow currentRoute as a prop to expose `isActive` and</span>\r\n","  <span class=\"code-comment\">// `isExactActive` behavior should go through an RFC</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">useLink</span>(<span class=\"code-params\">props</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> router = vue.inject(routerKey);\r\n","      <span class=\"code-keyword\">const</span> currentRoute = vue.inject(routeLocationKey);\r\n","      <span class=\"code-keyword\">const</span> route = vue.computed(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> router.resolve(vue.unref(props.to)));\r\n","      <span class=\"code-keyword\">const</span> activeRecordIndex = vue.computed(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","          <span class=\"code-keyword\">const</span> { matched } = route.value;\r\n","          <span class=\"code-keyword\">const</span> { length } = matched;\r\n","          <span class=\"code-keyword\">const</span> routeMatched = matched[length - <span class=\"code-number\">1</span>];\r\n","          <span class=\"code-keyword\">const</span> currentMatched = currentRoute.matched;\r\n","          <span class=\"code-keyword\">if</span> (!routeMatched || !currentMatched.length)\r\n","              <span class=\"code-keyword\">return</span> <span class=\"code-number\">-1</span>;\r\n","          <span class=\"code-keyword\">const</span> index = currentMatched.findIndex(isSameRouteRecord.bind(<span class=\"code-literal\">null</span>, routeMatched));\r\n","          <span class=\"code-keyword\">if</span> (index &gt; <span class=\"code-number\">-1</span>)\r\n","              <span class=\"code-keyword\">return</span> index;\r\n","          <span class=\"code-comment\">// possible parent record</span>\r\n","          <span class=\"code-keyword\">const</span> parentRecordPath = getOriginalPath(matched[length - <span class=\"code-number\">2</span>]);\r\n","          <span class=\"code-keyword\">return</span> (\r\n","          <span class=\"code-comment\">// we are dealing with nested routes</span>\r\n","          length &gt; <span class=\"code-number\">1</span> &amp;&amp;\r\n","              <span class=\"code-comment\">// if the parent and matched route have the same path, this link is</span>\r\n","              <span class=\"code-comment\">// referring to the empty child. Or we currently are on a different</span>\r\n","              <span class=\"code-comment\">// child of the same parent</span>\r\n","              getOriginalPath(routeMatched) === parentRecordPath &amp;&amp;\r\n","              <span class=\"code-comment\">// avoid comparing the child with its parent</span>\r\n","              currentMatched[currentMatched.length - <span class=\"code-number\">1</span>].path !== parentRecordPath\r\n","              ? currentMatched.findIndex(isSameRouteRecord.bind(<span class=\"code-literal\">null</span>, matched[length - <span class=\"code-number\">2</span>]))\r\n","              : index);\r\n","      });\r\n","      <span class=\"code-keyword\">const</span> isActive = vue.computed(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> activeRecordIndex.value &gt; <span class=\"code-number\">-1</span> &amp;&amp;\r\n","          includesParams(currentRoute.params, route.value.params));\r\n","      <span class=\"code-keyword\">const</span> isExactActive = vue.computed(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> activeRecordIndex.value &gt; <span class=\"code-number\">-1</span> &amp;&amp;\r\n","          activeRecordIndex.value === currentRoute.matched.length - <span class=\"code-number\">1</span> &amp;&amp;\r\n","          isSameRouteLocationParams(currentRoute.params, route.value.params));\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">navigate</span>(<span class=\"code-params\">e = {}</span>) </span>{\r\n","          <span class=\"code-keyword\">if</span> (guardEvent(e)) {\r\n","              <span class=\"code-keyword\">return</span> router[vue.unref(props.replace) ? <span class=\"code-string\">'replace'</span> : <span class=\"code-string\">'push'</span>](vue.unref(props.to)\r\n","              <span class=\"code-comment\">// avoid uncaught errors are they are logged anyway</span>\r\n","              ).catch(noop);\r\n","          }\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Promise</span>.resolve();\r\n","      }\r\n","      <span class=\"code-comment\">// devtools only</span>\r\n","      <span class=\"code-keyword\">if</span> (isBrowser) {\r\n","          <span class=\"code-keyword\">const</span> instance = vue.getCurrentInstance();\r\n","          <span class=\"code-keyword\">if</span> (instance) {\r\n","              <span class=\"code-keyword\">const</span> linkContextDevtools = {\r\n","                  route: route.value,\r\n","                  isActive: isActive.value,\r\n","                  isExactActive: isExactActive.value,\r\n","              };\r\n","              <span class=\"code-comment\">// @ts-expect-error: this is internal</span>\r\n","              instance.__vrl_devtools = instance.__vrl_devtools || [];\r\n","              <span class=\"code-comment\">// @ts-expect-error: this is internal</span>\r\n","              instance.__vrl_devtools.push(linkContextDevtools);\r\n","              vue.watchEffect(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","                  linkContextDevtools.route = route.value;\r\n","                  linkContextDevtools.isActive = isActive.value;\r\n","                  linkContextDevtools.isExactActive = isExactActive.value;\r\n","              }, { <span class=\"code-attr\">flush</span>: <span class=\"code-string\">'post'</span> });\r\n","          }\r\n","      }\r\n","      <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">       * <span class=\"code-doctag\">NOTE:</span> update {@link _RouterLinkI}'s `$slots` type when updating this\r\n</span>","<span class=\"code-comment\">       */</span>\r\n","      <span class=\"code-keyword\">return</span> {\r\n","          route,\r\n","          href: vue.computed(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> route.value.href),\r\n","          isActive,\r\n","          isExactActive,\r\n","          navigate,\r\n","      };\r\n","  }\r\n","  <span class=\"code-keyword\">const</span> RouterLinkImpl = <span class=\"code-comment\">/*#__PURE__*/</span> vue.defineComponent({\r\n","      name: <span class=\"code-string\">'RouterLink'</span>,\r\n","      compatConfig: { <span class=\"code-attr\">MODE</span>: <span class=\"code-number\">3</span> },\r\n","      props: {\r\n","          to: {\r\n","              type: [<span class=\"code-built_in\">String</span>, <span class=\"code-built_in\">Object</span>],\r\n","              required: <span class=\"code-literal\">true</span>,\r\n","          },\r\n","          replace: <span class=\"code-built_in\">Boolean</span>,\r\n","          activeClass: <span class=\"code-built_in\">String</span>,\r\n","          <span class=\"code-comment\">// inactiveClass: String,</span>\r\n","          exactActiveClass: <span class=\"code-built_in\">String</span>,\r\n","          custom: <span class=\"code-built_in\">Boolean</span>,\r\n","          ariaCurrentValue: {\r\n","              type: <span class=\"code-built_in\">String</span>,\r\n","              <span class=\"code-keyword\">default</span>: <span class=\"code-string\">'page'</span>,\r\n","          },\r\n","      },\r\n","      useLink,\r\n","      setup(props, { slots }) {\r\n","          <span class=\"code-keyword\">const</span> link = vue.reactive(useLink(props));\r\n","          <span class=\"code-keyword\">const</span> { options } = vue.inject(routerKey);\r\n","          <span class=\"code-keyword\">const</span> elClass = vue.computed(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> ({\r\n","              [getLinkClass(props.activeClass, options.linkActiveClass, <span class=\"code-string\">'router-link-active'</span>)]: link.isActive,\r\n","              <span class=\"code-comment\">// [getLinkClass(</span>\r\n","              <span class=\"code-comment\">//   props.inactiveClass,</span>\r\n","              <span class=\"code-comment\">//   options.linkInactiveClass,</span>\r\n","              <span class=\"code-comment\">//   'router-link-inactive'</span>\r\n","              <span class=\"code-comment\">// )]: !link.isExactActive,</span>\r\n","              [getLinkClass(props.exactActiveClass, options.linkExactActiveClass, <span class=\"code-string\">'router-link-exact-active'</span>)]: link.isExactActive,\r\n","          }));\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","              <span class=\"code-keyword\">const</span> children = slots.default &amp;&amp; slots.default(link);\r\n","              <span class=\"code-keyword\">return</span> props.custom\r\n","                  ? children\r\n","                  : vue.h(<span class=\"code-string\">'a'</span>, {\r\n","                      <span class=\"code-string\">'aria-current'</span>: link.isExactActive\r\n","                          ? props.ariaCurrentValue\r\n","                          : <span class=\"code-literal\">null</span>,\r\n","                      href: link.href,\r\n","                      <span class=\"code-comment\">// this would override user added attrs but Vue will still add</span>\r\n","                      <span class=\"code-comment\">// the listener, so we end up triggering both</span>\r\n","                      onClick: link.navigate,\r\n","                      class: elClass.value,\r\n","                  }, children);\r\n","          };\r\n","      },\r\n","  });\r\n","  <span class=\"code-comment\">// export the public type for h/tsx inference</span>\r\n","  <span class=\"code-comment\">// also to avoid inline import() in generated d.ts files</span>\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Component to render a link that triggers a navigation on click.\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-keyword\">const</span> RouterLink = RouterLinkImpl;\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">guardEvent</span>(<span class=\"code-params\">e</span>) </span>{\r\n","      <span class=\"code-comment\">// don't redirect with control keys</span>\r\n","      <span class=\"code-keyword\">if</span> (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey)\r\n","          <span class=\"code-keyword\">return</span>;\r\n","      <span class=\"code-comment\">// don't redirect when preventDefault called</span>\r\n","      <span class=\"code-keyword\">if</span> (e.defaultPrevented)\r\n","          <span class=\"code-keyword\">return</span>;\r\n","      <span class=\"code-comment\">// don't redirect on right click</span>\r\n","      <span class=\"code-keyword\">if</span> (e.button !== <span class=\"code-literal\">undefined</span> &amp;&amp; e.button !== <span class=\"code-number\">0</span>)\r\n","          <span class=\"code-keyword\">return</span>;\r\n","      <span class=\"code-comment\">// don't redirect if `target=\"_blank\"`</span>\r\n","      <span class=\"code-comment\">// @ts-expect-error getAttribute does exist</span>\r\n","      <span class=\"code-keyword\">if</span> (e.currentTarget &amp;&amp; e.currentTarget.getAttribute) {\r\n","          <span class=\"code-comment\">// @ts-expect-error getAttribute exists</span>\r\n","          <span class=\"code-keyword\">const</span> target = e.currentTarget.getAttribute(<span class=\"code-string\">'target'</span>);\r\n","          <span class=\"code-keyword\">if</span> (<span class=\"code-regexp\">/\\b_blank\\b/i</span>.test(target))\r\n","              <span class=\"code-keyword\">return</span>;\r\n","      }\r\n","      <span class=\"code-comment\">// this may be a Weex event which doesn't have this method</span>\r\n","      <span class=\"code-keyword\">if</span> (e.preventDefault)\r\n","          e.preventDefault();\r\n","      <span class=\"code-keyword\">return</span> <span class=\"code-literal\">true</span>;\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">includesParams</span>(<span class=\"code-params\">outer, inner</span>) </span>{\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> key <span class=\"code-keyword\">in</span> inner) {\r\n","          <span class=\"code-keyword\">const</span> innerValue = inner[key];\r\n","          <span class=\"code-keyword\">const</span> outerValue = outer[key];\r\n","          <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">typeof</span> innerValue === <span class=\"code-string\">'string'</span>) {\r\n","              <span class=\"code-keyword\">if</span> (innerValue !== outerValue)\r\n","                  <span class=\"code-keyword\">return</span> <span class=\"code-literal\">false</span>;\r\n","          }\r\n","          <span class=\"code-keyword\">else</span> {\r\n","              <span class=\"code-keyword\">if</span> (!isArray(outerValue) ||\r\n","                  outerValue.length !== innerValue.length ||\r\n","                  innerValue.some(<span class=\"code-function\">(<span class=\"code-params\">value, i</span>) =&gt;</span> value !== outerValue[i]))\r\n","                  <span class=\"code-keyword\">return</span> <span class=\"code-literal\">false</span>;\r\n","          }\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> <span class=\"code-literal\">true</span>;\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Get the original path value of a record by following its aliasOf\r\n</span>","<span class=\"code-comment\">   * @param record\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">getOriginalPath</span>(<span class=\"code-params\">record</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> record ? (record.aliasOf ? record.aliasOf.path : record.path) : <span class=\"code-string\">''</span>;\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Utility class to get the active class based on defaults.\r\n</span>","<span class=\"code-comment\">   * @param propClass\r\n</span>","<span class=\"code-comment\">   * @param globalClass\r\n</span>","<span class=\"code-comment\">   * @param defaultClass\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-keyword\">const</span> getLinkClass = <span class=\"code-function\">(<span class=\"code-params\">propClass, globalClass, defaultClass</span>) =&gt;</span> propClass != <span class=\"code-literal\">null</span>\r\n","      ? propClass\r\n","      : globalClass != <span class=\"code-literal\">null</span>\r\n","          ? globalClass\r\n","          : defaultClass;\n","\n","  <span class=\"code-keyword\">const</span> RouterViewImpl = <span class=\"code-comment\">/*#__PURE__*/</span> vue.defineComponent({\r\n","      name: <span class=\"code-string\">'RouterView'</span>,\r\n","      <span class=\"code-comment\">// #674 we manually inherit them</span>\r\n","      inheritAttrs: <span class=\"code-literal\">false</span>,\r\n","      props: {\r\n","          name: {\r\n","              type: <span class=\"code-built_in\">String</span>,\r\n","              <span class=\"code-keyword\">default</span>: <span class=\"code-string\">'default'</span>,\r\n","          },\r\n","          route: <span class=\"code-built_in\">Object</span>,\r\n","      },\r\n","      <span class=\"code-comment\">// Better compat for @vue/compat users</span>\r\n","      <span class=\"code-comment\">// https://github.com/vuejs/router/issues/1315</span>\r\n","      compatConfig: { <span class=\"code-attr\">MODE</span>: <span class=\"code-number\">3</span> },\r\n","      setup(props, { attrs, slots }) {\r\n","          warnDeprecatedUsage();\r\n","          <span class=\"code-keyword\">const</span> injectedRoute = vue.inject(routerViewLocationKey);\r\n","          <span class=\"code-keyword\">const</span> routeToDisplay = vue.computed(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> props.route || injectedRoute.value);\r\n","          <span class=\"code-keyword\">const</span> injectedDepth = vue.inject(viewDepthKey, <span class=\"code-number\">0</span>);\r\n","          <span class=\"code-comment\">// The depth changes based on empty components option, which allows passthrough routes e.g. routes with children</span>\r\n","          <span class=\"code-comment\">// that are used to reuse the `path` property</span>\r\n","          <span class=\"code-keyword\">const</span> depth = vue.computed(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","              <span class=\"code-keyword\">let</span> initialDepth = vue.unref(injectedDepth);\r\n","              <span class=\"code-keyword\">const</span> { matched } = routeToDisplay.value;\r\n","              <span class=\"code-keyword\">let</span> matchedRoute;\r\n","              <span class=\"code-keyword\">while</span> ((matchedRoute = matched[initialDepth]) &amp;&amp;\r\n","                  !matchedRoute.components) {\r\n","                  initialDepth++;\r\n","              }\r\n","              <span class=\"code-keyword\">return</span> initialDepth;\r\n","          });\r\n","          <span class=\"code-keyword\">const</span> matchedRouteRef = vue.computed(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> routeToDisplay.value.matched[depth.value]);\r\n","          vue.provide(viewDepthKey, vue.computed(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> depth.value + <span class=\"code-number\">1</span>));\r\n","          vue.provide(matchedRouteKey, matchedRouteRef);\r\n","          vue.provide(routerViewLocationKey, routeToDisplay);\r\n","          <span class=\"code-keyword\">const</span> viewRef = vue.ref();\r\n","          <span class=\"code-comment\">// watch at the same time the component instance, the route record we are</span>\r\n","          <span class=\"code-comment\">// rendering, and the name</span>\r\n","          vue.watch(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> [viewRef.value, matchedRouteRef.value, props.name], ([instance, to, name], [oldInstance, <span class=\"code-keyword\">from</span>, oldName]) =&gt; {\r\n","              <span class=\"code-comment\">// copy reused instances</span>\r\n","              <span class=\"code-keyword\">if</span> (to) {\r\n","                  <span class=\"code-comment\">// this will update the instance for new instances as well as reused</span>\r\n","                  <span class=\"code-comment\">// instances when navigating to a new route</span>\r\n","                  to.instances[name] = instance;\r\n","                  <span class=\"code-comment\">// the component instance is reused for a different route or name, so</span>\r\n","                  <span class=\"code-comment\">// we copy any saved update or leave guards. With async setup, the</span>\r\n","                  <span class=\"code-comment\">// mounting component will mount before the matchedRoute changes,</span>\r\n","                  <span class=\"code-comment\">// making instance === oldInstance, so we check if guards have been</span>\r\n","                  <span class=\"code-comment\">// added before. This works because we remove guards when</span>\r\n","                  <span class=\"code-comment\">// unmounting/deactivating components</span>\r\n","                  <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">from</span> &amp;&amp; <span class=\"code-keyword\">from</span> !== to &amp;&amp; instance &amp;&amp; instance === oldInstance) {\r\n","                      <span class=\"code-keyword\">if</span> (!to.leaveGuards.size) {\r\n","                          to.leaveGuards = <span class=\"code-keyword\">from</span>.leaveGuards;\r\n","                      }\r\n","                      <span class=\"code-keyword\">if</span> (!to.updateGuards.size) {\r\n","                          to.updateGuards = <span class=\"code-keyword\">from</span>.updateGuards;\r\n","                      }\r\n","                  }\r\n","              }\r\n","              <span class=\"code-comment\">// trigger beforeRouteEnter next callbacks</span>\r\n","              <span class=\"code-keyword\">if</span> (instance &amp;&amp;\r\n","                  to &amp;&amp;\r\n","                  <span class=\"code-comment\">// if there is no instance but to and from are the same this might be</span>\r\n","                  <span class=\"code-comment\">// the first visit</span>\r\n","                  (!<span class=\"code-keyword\">from</span> || !isSameRouteRecord(to, <span class=\"code-keyword\">from</span>) || !oldInstance)) {\r\n","                  (to.enterCallbacks[name] || []).forEach(<span class=\"code-function\"><span class=\"code-params\">callback</span> =&gt;</span> callback(instance));\r\n","              }\r\n","          }, { <span class=\"code-attr\">flush</span>: <span class=\"code-string\">'post'</span> });\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","              <span class=\"code-keyword\">const</span> route = routeToDisplay.value;\r\n","              <span class=\"code-comment\">// we need the value at the time we render because when we unmount, we</span>\r\n","              <span class=\"code-comment\">// navigated to a different location so the value is different</span>\r\n","              <span class=\"code-keyword\">const</span> currentName = props.name;\r\n","              <span class=\"code-keyword\">const</span> matchedRoute = matchedRouteRef.value;\r\n","              <span class=\"code-keyword\">const</span> ViewComponent = matchedRoute &amp;&amp; matchedRoute.components[currentName];\r\n","              <span class=\"code-keyword\">if</span> (!ViewComponent) {\r\n","                  <span class=\"code-keyword\">return</span> normalizeSlot(slots.default, { <span class=\"code-attr\">Component</span>: ViewComponent, route });\r\n","              }\r\n","              <span class=\"code-comment\">// props from route configuration</span>\r\n","              <span class=\"code-keyword\">const</span> routePropsOption = matchedRoute.props[currentName];\r\n","              <span class=\"code-keyword\">const</span> routeProps = routePropsOption\r\n","                  ? routePropsOption === <span class=\"code-literal\">true</span>\r\n","                      ? route.params\r\n","                      : <span class=\"code-keyword\">typeof</span> routePropsOption === <span class=\"code-string\">'function'</span>\r\n","                          ? routePropsOption(route)\r\n","                          : routePropsOption\r\n","                  : <span class=\"code-literal\">null</span>;\r\n","              <span class=\"code-keyword\">const</span> onVnodeUnmounted = <span class=\"code-function\"><span class=\"code-params\">vnode</span> =&gt;</span> {\r\n","                  <span class=\"code-comment\">// remove the instance reference to prevent leak</span>\r\n","                  <span class=\"code-keyword\">if</span> (vnode.component.isUnmounted) {\r\n","                      matchedRoute.instances[currentName] = <span class=\"code-literal\">null</span>;\r\n","                  }\r\n","              };\r\n","              <span class=\"code-keyword\">const</span> component = vue.h(ViewComponent, assign({}, routeProps, attrs, {\r\n","                  onVnodeUnmounted,\r\n","                  ref: viewRef,\r\n","              }));\r\n","              <span class=\"code-keyword\">if</span> (isBrowser &amp;&amp;\r\n","                  component.ref) {\r\n","                  <span class=\"code-comment\">// <span class=\"code-doctag\">TODO:</span> can display if it's an alias, its props</span>\r\n","                  <span class=\"code-keyword\">const</span> info = {\r\n","                      depth: depth.value,\r\n","                      name: matchedRoute.name,\r\n","                      path: matchedRoute.path,\r\n","                      meta: matchedRoute.meta,\r\n","                  };\r\n","                  <span class=\"code-keyword\">const</span> internalInstances = isArray(component.ref)\r\n","                      ? component.ref.map(<span class=\"code-function\"><span class=\"code-params\">r</span> =&gt;</span> r.i)\r\n","                      : [component.ref.i];\r\n","                  internalInstances.forEach(<span class=\"code-function\"><span class=\"code-params\">instance</span> =&gt;</span> {\r\n","                      <span class=\"code-comment\">// @ts-expect-error</span>\r\n","                      instance.__vrv_devtools = info;\r\n","                  });\r\n","              }\r\n","              <span class=\"code-keyword\">return</span> (\r\n","              <span class=\"code-comment\">// pass the vnode to the slot as a prop.</span>\r\n","              <span class=\"code-comment\">// h and &lt;component :is=\"...\"&gt; both accept vnodes</span>\r\n","              normalizeSlot(slots.default, { <span class=\"code-attr\">Component</span>: component, route }) ||\r\n","                  component);\r\n","          };\r\n","      },\r\n","  });\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">normalizeSlot</span>(<span class=\"code-params\">slot, data</span>) </span>{\r\n","      <span class=\"code-keyword\">if</span> (!slot)\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;\r\n","      <span class=\"code-keyword\">const</span> slotContent = slot(data);\r\n","      <span class=\"code-keyword\">return</span> slotContent.length === <span class=\"code-number\">1</span> ? slotContent[<span class=\"code-number\">0</span>] : slotContent;\r\n","  }\r\n","  <span class=\"code-comment\">// export the public type for h/tsx inference</span>\r\n","  <span class=\"code-comment\">// also to avoid inline import() in generated d.ts files</span>\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Component to display the current route the user is at.\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-keyword\">const</span> RouterView = RouterViewImpl;\r\n","  <span class=\"code-comment\">// warn against deprecated usage with &lt;transition&gt; &amp; &lt;keep-alive&gt;</span>\r\n","  <span class=\"code-comment\">// due to functional component being no longer eager in Vue 3</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">warnDeprecatedUsage</span>(<span class=\"code-params\"></span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> instance = vue.getCurrentInstance();\r\n","      <span class=\"code-keyword\">const</span> parentName = instance.parent &amp;&amp; instance.parent.type.name;\r\n","      <span class=\"code-keyword\">if</span> (parentName &amp;&amp;\r\n","          (parentName === <span class=\"code-string\">'KeepAlive'</span> || parentName.includes(<span class=\"code-string\">'Transition'</span>))) {\r\n","          <span class=\"code-keyword\">const</span> comp = parentName === <span class=\"code-string\">'KeepAlive'</span> ? <span class=\"code-string\">'keep-alive'</span> : <span class=\"code-string\">'transition'</span>;\r\n","          warn(<span class=\"code-string\">`&lt;router-view&gt; can no longer be used directly inside &lt;transition&gt; or &lt;keep-alive&gt;.\\n`</span> +\r\n","              <span class=\"code-string\">`Use slot props instead:\\n\\n`</span> +\r\n","              <span class=\"code-string\">`&lt;router-view v-slot=\"{ Component }\"&gt;\\n`</span> +\r\n","              <span class=\"code-string\">`  &lt;<span class=\"code-subst\">${comp}</span>&gt;\\n`</span> +\r\n","              <span class=\"code-string\">`    &lt;component :is=\"Component\" /&gt;\\n`</span> +\r\n","              <span class=\"code-string\">`  &lt;/<span class=\"code-subst\">${comp}</span>&gt;\\n`</span> +\r\n","              <span class=\"code-string\">`&lt;/router-view&gt;`</span>);\r\n","      }\r\n","  }\n","\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">getDevtoolsGlobalHook</span>(<span class=\"code-params\"></span>) </span>{\n","      <span class=\"code-keyword\">return</span> getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__;\n","  }\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">getTarget</span>(<span class=\"code-params\"></span>) </span>{\n","      <span class=\"code-comment\">// @ts-ignore</span>\n","      <span class=\"code-keyword\">return</span> (<span class=\"code-keyword\">typeof</span> navigator !== <span class=\"code-string\">'undefined'</span> &amp;&amp; <span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span> !== <span class=\"code-string\">'undefined'</span>)\n","          ? <span class=\"code-built_in\">window</span>\n","          : <span class=\"code-keyword\">typeof</span> global !== <span class=\"code-string\">'undefined'</span>\n","              ? global\n","              : {};\n","  }\n","  <span class=\"code-keyword\">const</span> isProxyAvailable = <span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">Proxy</span> === <span class=\"code-string\">'function'</span>;\n","\n","  <span class=\"code-keyword\">const</span> HOOK_SETUP = <span class=\"code-string\">'devtools-plugin:setup'</span>;\n","  <span class=\"code-keyword\">const</span> HOOK_PLUGIN_SETTINGS_SET = <span class=\"code-string\">'plugin:settings:set'</span>;\n","\n","  <span class=\"code-keyword\">let</span> supported;\n","  <span class=\"code-keyword\">let</span> perf;\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isPerformanceSupported</span>(<span class=\"code-params\"></span>) </span>{\n","      <span class=\"code-keyword\">var</span> _a;\n","      <span class=\"code-keyword\">if</span> (supported !== <span class=\"code-literal\">undefined</span>) {\n","          <span class=\"code-keyword\">return</span> supported;\n","      }\n","      <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span> !== <span class=\"code-string\">'undefined'</span> &amp;&amp; <span class=\"code-built_in\">window</span>.performance) {\n","          supported = <span class=\"code-literal\">true</span>;\n","          perf = <span class=\"code-built_in\">window</span>.performance;\n","      }\n","      <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">typeof</span> global !== <span class=\"code-string\">'undefined'</span> &amp;&amp; ((_a = global.perf_hooks) === <span class=\"code-literal\">null</span> || _a === <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span> ? <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span> : _a.performance)) {\n","          supported = <span class=\"code-literal\">true</span>;\n","          perf = global.perf_hooks.performance;\n","      }\n","      <span class=\"code-keyword\">else</span> {\n","          supported = <span class=\"code-literal\">false</span>;\n","      }\n","      <span class=\"code-keyword\">return</span> supported;\n","  }\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">now</span>(<span class=\"code-params\"></span>) </span>{\n","      <span class=\"code-keyword\">return</span> isPerformanceSupported() ? perf.now() : <span class=\"code-built_in\">Date</span>.now();\n","  }\n","\n","  <span class=\"code-class\"><span class=\"code-keyword\">class</span> <span class=\"code-title\">ApiProxy</span> </span>{\n","      <span class=\"code-keyword\">constructor</span>(plugin, hook) {\n","          <span class=\"code-keyword\">this</span>.target = <span class=\"code-literal\">null</span>;\n","          <span class=\"code-keyword\">this</span>.targetQueue = [];\n","          <span class=\"code-keyword\">this</span>.onQueue = [];\n","          <span class=\"code-keyword\">this</span>.plugin = plugin;\n","          <span class=\"code-keyword\">this</span>.hook = hook;\n","          <span class=\"code-keyword\">const</span> defaultSettings = {};\n","          <span class=\"code-keyword\">if</span> (plugin.settings) {\n","              <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> id <span class=\"code-keyword\">in</span> plugin.settings) {\n","                  <span class=\"code-keyword\">const</span> item = plugin.settings[id];\n","                  defaultSettings[id] = item.defaultValue;\n","              }\n","          }\n","          <span class=\"code-keyword\">const</span> localSettingsSaveId = <span class=\"code-string\">`__vue-devtools-plugin-settings__<span class=\"code-subst\">${plugin.id}</span>`</span>;\n","          <span class=\"code-keyword\">let</span> currentSettings = <span class=\"code-built_in\">Object</span>.assign({}, defaultSettings);\n","          <span class=\"code-keyword\">try</span> {\n","              <span class=\"code-keyword\">const</span> raw = localStorage.getItem(localSettingsSaveId);\n","              <span class=\"code-keyword\">const</span> data = <span class=\"code-built_in\">JSON</span>.parse(raw);\n","              <span class=\"code-built_in\">Object</span>.assign(currentSettings, data);\n","          }\n","          <span class=\"code-keyword\">catch</span> (e) {\n","              <span class=\"code-comment\">// noop</span>\n","          }\n","          <span class=\"code-keyword\">this</span>.fallbacks = {\n","              getSettings() {\n","                  <span class=\"code-keyword\">return</span> currentSettings;\n","              },\n","              setSettings(value) {\n","                  <span class=\"code-keyword\">try</span> {\n","                      localStorage.setItem(localSettingsSaveId, <span class=\"code-built_in\">JSON</span>.stringify(value));\n","                  }\n","                  <span class=\"code-keyword\">catch</span> (e) {\n","                      <span class=\"code-comment\">// noop</span>\n","                  }\n","                  currentSettings = value;\n","              },\n","              now() {\n","                  <span class=\"code-keyword\">return</span> now();\n","              },\n","          };\n","          <span class=\"code-keyword\">if</span> (hook) {\n","              hook.on(HOOK_PLUGIN_SETTINGS_SET, (pluginId, value) =&gt; {\n","                  <span class=\"code-keyword\">if</span> (pluginId === <span class=\"code-keyword\">this</span>.plugin.id) {\n","                      <span class=\"code-keyword\">this</span>.fallbacks.setSettings(value);\n","                  }\n","              });\n","          }\n","          <span class=\"code-keyword\">this</span>.proxiedOn = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Proxy</span>({}, {\n","              <span class=\"code-keyword\">get</span>: (_target, prop) =&gt; {\n","                  <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>.target) {\n","                      <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.target.on[prop];\n","                  }\n","                  <span class=\"code-keyword\">else</span> {\n","                      <span class=\"code-keyword\">return</span> <span class=\"code-function\">(<span class=\"code-params\">...args</span>) =&gt;</span> {\n","                          <span class=\"code-keyword\">this</span>.onQueue.push({\n","                              method: prop,\n","                              args,\n","                          });\n","                      };\n","                  }\n","              },\n","          });\n","          <span class=\"code-keyword\">this</span>.proxiedTarget = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Proxy</span>({}, {\n","              <span class=\"code-keyword\">get</span>: (_target, prop) =&gt; {\n","                  <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>.target) {\n","                      <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.target[prop];\n","                  }\n","                  <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (prop === <span class=\"code-string\">'on'</span>) {\n","                      <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.proxiedOn;\n","                  }\n","                  <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (<span class=\"code-built_in\">Object</span>.keys(<span class=\"code-keyword\">this</span>.fallbacks).includes(prop)) {\n","                      <span class=\"code-keyword\">return</span> <span class=\"code-function\">(<span class=\"code-params\">...args</span>) =&gt;</span> {\n","                          <span class=\"code-keyword\">this</span>.targetQueue.push({\n","                              method: prop,\n","                              args,\n","                              resolve: <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> { },\n","                          });\n","                          <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.fallbacks[prop](...args);\n","                      };\n","                  }\n","                  <span class=\"code-keyword\">else</span> {\n","                      <span class=\"code-keyword\">return</span> <span class=\"code-function\">(<span class=\"code-params\">...args</span>) =&gt;</span> {\n","                          <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Promise</span>(<span class=\"code-function\"><span class=\"code-params\">resolve</span> =&gt;</span> {\n","                              <span class=\"code-keyword\">this</span>.targetQueue.push({\n","                                  method: prop,\n","                                  args,\n","                                  resolve,\n","                              });\n","                          });\n","                      };\n","                  }\n","              },\n","          });\n","      }\n","      <span class=\"code-keyword\">async</span> setRealTarget(target) {\n","          <span class=\"code-keyword\">this</span>.target = target;\n","          <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> item <span class=\"code-keyword\">of</span> <span class=\"code-keyword\">this</span>.onQueue) {\n","              <span class=\"code-keyword\">this</span>.target.on[item.method](...item.args);\n","          }\n","          <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> item <span class=\"code-keyword\">of</span> <span class=\"code-keyword\">this</span>.targetQueue) {\n","              item.resolve(<span class=\"code-keyword\">await</span> <span class=\"code-keyword\">this</span>.target[item.method](...item.args));\n","          }\n","      }\n","  }\n","\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">setupDevtoolsPlugin</span>(<span class=\"code-params\">pluginDescriptor, setupFn</span>) </span>{\n","      <span class=\"code-keyword\">const</span> descriptor = pluginDescriptor;\n","      <span class=\"code-keyword\">const</span> target = getTarget();\n","      <span class=\"code-keyword\">const</span> hook = getDevtoolsGlobalHook();\n","      <span class=\"code-keyword\">const</span> enableProxy = isProxyAvailable &amp;&amp; descriptor.enableEarlyProxy;\n","      <span class=\"code-keyword\">if</span> (hook &amp;&amp; (target.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__ || !enableProxy)) {\n","          hook.emit(HOOK_SETUP, pluginDescriptor, setupFn);\n","      }\n","      <span class=\"code-keyword\">else</span> {\n","          <span class=\"code-keyword\">const</span> proxy = enableProxy ? <span class=\"code-keyword\">new</span> ApiProxy(descriptor, hook) : <span class=\"code-literal\">null</span>;\n","          <span class=\"code-keyword\">const</span> list = target.__VUE_DEVTOOLS_PLUGINS__ = target.__VUE_DEVTOOLS_PLUGINS__ || [];\n","          list.push({\n","              pluginDescriptor: descriptor,\n","              setupFn,\n","              proxy,\n","          });\n","          <span class=\"code-keyword\">if</span> (proxy)\n","              setupFn(proxy.proxiedTarget);\n","      }\n","  }\n","\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Copies a route location and removes any problematic properties that cannot be shown in devtools (e.g. Vue instances).\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param routeLocation - routeLocation to format\r\n</span>","<span class=\"code-comment\">   * @param tooltip - optional tooltip\r\n</span>","<span class=\"code-comment\">   * @returns a copy of the routeLocation\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">formatRouteLocation</span>(<span class=\"code-params\">routeLocation, tooltip</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> copy = assign({}, routeLocation, {\r\n","          <span class=\"code-comment\">// remove variables that can contain vue instances</span>\r\n","          matched: routeLocation.matched.map(<span class=\"code-function\"><span class=\"code-params\">matched</span> =&gt;</span> omit(matched, [<span class=\"code-string\">'instances'</span>, <span class=\"code-string\">'children'</span>, <span class=\"code-string\">'aliasOf'</span>])),\r\n","      });\r\n","      <span class=\"code-keyword\">return</span> {\r\n","          _custom: {\r\n","              type: <span class=\"code-literal\">null</span>,\r\n","              readOnly: <span class=\"code-literal\">true</span>,\r\n","              display: routeLocation.fullPath,\r\n","              tooltip,\r\n","              value: copy,\r\n","          },\r\n","      };\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">formatDisplay</span>(<span class=\"code-params\">display</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> {\r\n","          _custom: {\r\n","              display,\r\n","          },\r\n","      };\r\n","  }\r\n","  <span class=\"code-comment\">// to support multiple router instances</span>\r\n","  <span class=\"code-keyword\">let</span> routerId = <span class=\"code-number\">0</span>;\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">addDevtools</span>(<span class=\"code-params\">app, router, matcher</span>) </span>{\r\n","      <span class=\"code-comment\">// Take over router.beforeEach and afterEach</span>\r\n","      <span class=\"code-comment\">// make sure we are not registering the devtool twice</span>\r\n","      <span class=\"code-keyword\">if</span> (router.__hasDevtools)\r\n","          <span class=\"code-keyword\">return</span>;\r\n","      router.__hasDevtools = <span class=\"code-literal\">true</span>;\r\n","      <span class=\"code-comment\">// increment to support multiple router instances</span>\r\n","      <span class=\"code-keyword\">const</span> id = routerId++;\r\n","      setupDevtoolsPlugin({\r\n","          id: <span class=\"code-string\">'org.vuejs.router'</span> + (id ? <span class=\"code-string\">'.'</span> + id : <span class=\"code-string\">''</span>),\r\n","          label: <span class=\"code-string\">'Vue Router'</span>,\r\n","          packageName: <span class=\"code-string\">'vue-router'</span>,\r\n","          homepage: <span class=\"code-string\">'https://router.vuejs.org'</span>,\r\n","          logo: <span class=\"code-string\">'https://router.vuejs.org/logo.png'</span>,\r\n","          componentStateTypes: [<span class=\"code-string\">'Routing'</span>],\r\n","          app,\r\n","      }, api =&gt; {\r\n","          <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">typeof</span> api.now !== <span class=\"code-string\">'function'</span>) {\r\n","              <span class=\"code-built_in\">console</span>.warn(<span class=\"code-string\">'[Vue Router]: You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.'</span>);\r\n","          }\r\n","          <span class=\"code-comment\">// display state added by the router</span>\r\n","          api.on.inspectComponent(<span class=\"code-function\">(<span class=\"code-params\">payload, ctx</span>) =&gt;</span> {\r\n","              <span class=\"code-keyword\">if</span> (payload.instanceData) {\r\n","                  payload.instanceData.state.push({\r\n","                      type: <span class=\"code-string\">'Routing'</span>,\r\n","                      key: <span class=\"code-string\">'$route'</span>,\r\n","                      editable: <span class=\"code-literal\">false</span>,\r\n","                      value: formatRouteLocation(router.currentRoute.value, <span class=\"code-string\">'Current Route'</span>),\r\n","                  });\r\n","              }\r\n","          });\r\n","          <span class=\"code-comment\">// mark router-link as active and display tags on router views</span>\r\n","          api.on.visitComponentTree(<span class=\"code-function\">(<span class=\"code-params\">{ treeNode: node, componentInstance }</span>) =&gt;</span> {\r\n","              <span class=\"code-keyword\">if</span> (componentInstance.__vrv_devtools) {\r\n","                  <span class=\"code-keyword\">const</span> info = componentInstance.__vrv_devtools;\r\n","                  node.tags.push({\r\n","                      label: (info.name ? <span class=\"code-string\">`<span class=\"code-subst\">${info.name.toString()}</span>: `</span> : <span class=\"code-string\">''</span>) + info.path,\r\n","                      textColor: <span class=\"code-number\">0</span>,\r\n","                      tooltip: <span class=\"code-string\">'This component is rendered by &amp;lt;router-view&amp;gt;'</span>,\r\n","                      backgroundColor: PINK_500,\r\n","                  });\r\n","              }\r\n","              <span class=\"code-comment\">// if multiple useLink are used</span>\r\n","              <span class=\"code-keyword\">if</span> (isArray(componentInstance.__vrl_devtools)) {\r\n","                  componentInstance.__devtoolsApi = api;\r\n","                  componentInstance.__vrl_devtools.forEach(<span class=\"code-function\"><span class=\"code-params\">devtoolsData</span> =&gt;</span> {\r\n","                      <span class=\"code-keyword\">let</span> backgroundColor = ORANGE_400;\r\n","                      <span class=\"code-keyword\">let</span> tooltip = <span class=\"code-string\">''</span>;\r\n","                      <span class=\"code-keyword\">if</span> (devtoolsData.isExactActive) {\r\n","                          backgroundColor = LIME_500;\r\n","                          tooltip = <span class=\"code-string\">'This is exactly active'</span>;\r\n","                      }\r\n","                      <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (devtoolsData.isActive) {\r\n","                          backgroundColor = BLUE_600;\r\n","                          tooltip = <span class=\"code-string\">'This link is active'</span>;\r\n","                      }\r\n","                      node.tags.push({\r\n","                          label: devtoolsData.route.path,\r\n","                          textColor: <span class=\"code-number\">0</span>,\r\n","                          tooltip,\r\n","                          backgroundColor,\r\n","                      });\r\n","                  });\r\n","              }\r\n","          });\r\n","          vue.watch(router.currentRoute, () =&gt; {\r\n","              <span class=\"code-comment\">// refresh active state</span>\r\n","              refreshRoutesView();\r\n","              api.notifyComponentUpdate();\r\n","              api.sendInspectorTree(routerInspectorId);\r\n","              api.sendInspectorState(routerInspectorId);\r\n","          });\r\n","          <span class=\"code-keyword\">const</span> navigationsLayerId = <span class=\"code-string\">'router:navigations:'</span> + id;\r\n","          api.addTimelineLayer({\r\n","              id: navigationsLayerId,\r\n","              label: <span class=\"code-string\">`Router<span class=\"code-subst\">${id ? <span class=\"code-string\">' '</span> + id : <span class=\"code-string\">''</span>}</span> Navigations`</span>,\r\n","              color: <span class=\"code-number\">0x40a8c4</span>,\r\n","          });\r\n","          <span class=\"code-comment\">// const errorsLayerId = 'router:errors'</span>\r\n","          <span class=\"code-comment\">// api.addTimelineLayer({</span>\r\n","          <span class=\"code-comment\">//   id: errorsLayerId,</span>\r\n","          <span class=\"code-comment\">//   label: 'Router Errors',</span>\r\n","          <span class=\"code-comment\">//   color: 0xea5455,</span>\r\n","          <span class=\"code-comment\">// })</span>\r\n","          router.onError(<span class=\"code-function\">(<span class=\"code-params\">error, to</span>) =&gt;</span> {\r\n","              api.addTimelineEvent({\r\n","                  layerId: navigationsLayerId,\r\n","                  event: {\r\n","                      title: <span class=\"code-string\">'Error during Navigation'</span>,\r\n","                      subtitle: to.fullPath,\r\n","                      logType: <span class=\"code-string\">'error'</span>,\r\n","                      time: api.now(),\r\n","                      data: { error },\r\n","                      groupId: to.meta.__navigationId,\r\n","                  },\r\n","              });\r\n","          });\r\n","          <span class=\"code-comment\">// attached to `meta` and used to group events</span>\r\n","          <span class=\"code-keyword\">let</span> navigationId = <span class=\"code-number\">0</span>;\r\n","          router.beforeEach(<span class=\"code-function\">(<span class=\"code-params\">to, <span class=\"code-keyword\">from</span></span>) =&gt;</span> {\r\n","              <span class=\"code-keyword\">const</span> data = {\r\n","                  guard: formatDisplay(<span class=\"code-string\">'beforeEach'</span>),\r\n","                  <span class=\"code-keyword\">from</span>: formatRouteLocation(<span class=\"code-keyword\">from</span>, <span class=\"code-string\">'Current Location during this navigation'</span>),\r\n","                  to: formatRouteLocation(to, <span class=\"code-string\">'Target location'</span>),\r\n","              };\r\n","              <span class=\"code-comment\">// Used to group navigations together, hide from devtools</span>\r\n","              <span class=\"code-built_in\">Object</span>.defineProperty(to.meta, <span class=\"code-string\">'__navigationId'</span>, {\r\n","                  value: navigationId++,\r\n","              });\r\n","              api.addTimelineEvent({\r\n","                  layerId: navigationsLayerId,\r\n","                  event: {\r\n","                      time: api.now(),\r\n","                      title: <span class=\"code-string\">'Start of navigation'</span>,\r\n","                      subtitle: to.fullPath,\r\n","                      data,\r\n","                      groupId: to.meta.__navigationId,\r\n","                  },\r\n","              });\r\n","          });\r\n","          router.afterEach(<span class=\"code-function\">(<span class=\"code-params\">to, <span class=\"code-keyword\">from</span>, failure</span>) =&gt;</span> {\r\n","              <span class=\"code-keyword\">const</span> data = {\r\n","                  guard: formatDisplay(<span class=\"code-string\">'afterEach'</span>),\r\n","              };\r\n","              <span class=\"code-keyword\">if</span> (failure) {\r\n","                  data.failure = {\r\n","                      _custom: {\r\n","                          type: <span class=\"code-built_in\">Error</span>,\r\n","                          readOnly: <span class=\"code-literal\">true</span>,\r\n","                          display: failure ? failure.message : <span class=\"code-string\">''</span>,\r\n","                          tooltip: <span class=\"code-string\">'Navigation Failure'</span>,\r\n","                          value: failure,\r\n","                      },\r\n","                  };\r\n","                  data.status = formatDisplay(<span class=\"code-string\">'\u274C'</span>);\r\n","              }\r\n","              <span class=\"code-keyword\">else</span> {\r\n","                  data.status = formatDisplay(<span class=\"code-string\">'\u2705'</span>);\r\n","              }\r\n","              <span class=\"code-comment\">// we set here to have the right order</span>\r\n","              data.from = formatRouteLocation(<span class=\"code-keyword\">from</span>, <span class=\"code-string\">'Current Location during this navigation'</span>);\r\n","              data.to = formatRouteLocation(to, <span class=\"code-string\">'Target location'</span>);\r\n","              api.addTimelineEvent({\r\n","                  layerId: navigationsLayerId,\r\n","                  event: {\r\n","                      title: <span class=\"code-string\">'End of navigation'</span>,\r\n","                      subtitle: to.fullPath,\r\n","                      time: api.now(),\r\n","                      data,\r\n","                      logType: failure ? <span class=\"code-string\">'warning'</span> : <span class=\"code-string\">'default'</span>,\r\n","                      groupId: to.meta.__navigationId,\r\n","                  },\r\n","              });\r\n","          });\r\n","          <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">           * Inspector of Existing routes\r\n</span>","<span class=\"code-comment\">           */</span>\r\n","          <span class=\"code-keyword\">const</span> routerInspectorId = <span class=\"code-string\">'router-inspector:'</span> + id;\r\n","          api.addInspector({\r\n","              id: routerInspectorId,\r\n","              label: <span class=\"code-string\">'Routes'</span> + (id ? <span class=\"code-string\">' '</span> + id : <span class=\"code-string\">''</span>),\r\n","              icon: <span class=\"code-string\">'book'</span>,\r\n","              treeFilterPlaceholder: <span class=\"code-string\">'Search routes'</span>,\r\n","          });\r\n","          <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">refreshRoutesView</span>(<span class=\"code-params\"></span>) </span>{\r\n","              <span class=\"code-comment\">// the routes view isn't active</span>\r\n","              <span class=\"code-keyword\">if</span> (!activeRoutesPayload)\r\n","                  <span class=\"code-keyword\">return</span>;\r\n","              <span class=\"code-keyword\">const</span> payload = activeRoutesPayload;\r\n","              <span class=\"code-comment\">// children routes will appear as nested</span>\r\n","              <span class=\"code-keyword\">let</span> routes = matcher.getRoutes().filter(<span class=\"code-function\"><span class=\"code-params\">route</span> =&gt;</span> !route.parent);\r\n","              <span class=\"code-comment\">// reset match state to false</span>\r\n","              routes.forEach(resetMatchStateOnRouteRecord);\r\n","              <span class=\"code-comment\">// apply a match state if there is a payload</span>\r\n","              <span class=\"code-keyword\">if</span> (payload.filter) {\r\n","                  routes = routes.filter(<span class=\"code-function\"><span class=\"code-params\">route</span> =&gt;</span> \r\n","                  <span class=\"code-comment\">// save matches state based on the payload</span>\r\n","                  isRouteMatching(route, payload.filter.toLowerCase()));\r\n","              }\r\n","              <span class=\"code-comment\">// mark active routes</span>\r\n","              routes.forEach(<span class=\"code-function\"><span class=\"code-params\">route</span> =&gt;</span> markRouteRecordActive(route, router.currentRoute.value));\r\n","              payload.rootNodes = routes.map(formatRouteRecordForInspector);\r\n","          }\r\n","          <span class=\"code-keyword\">let</span> activeRoutesPayload;\r\n","          api.on.getInspectorTree(<span class=\"code-function\"><span class=\"code-params\">payload</span> =&gt;</span> {\r\n","              activeRoutesPayload = payload;\r\n","              <span class=\"code-keyword\">if</span> (payload.app === app &amp;&amp; payload.inspectorId === routerInspectorId) {\r\n","                  refreshRoutesView();\r\n","              }\r\n","          });\r\n","          <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">           * Display information about the currently selected route record\r\n</span>","<span class=\"code-comment\">           */</span>\r\n","          api.on.getInspectorState(<span class=\"code-function\"><span class=\"code-params\">payload</span> =&gt;</span> {\r\n","              <span class=\"code-keyword\">if</span> (payload.app === app &amp;&amp; payload.inspectorId === routerInspectorId) {\r\n","                  <span class=\"code-keyword\">const</span> routes = matcher.getRoutes();\r\n","                  <span class=\"code-keyword\">const</span> route = routes.find(<span class=\"code-function\"><span class=\"code-params\">route</span> =&gt;</span> route.record.__vd_id === payload.nodeId);\r\n","                  <span class=\"code-keyword\">if</span> (route) {\r\n","                      payload.state = {\r\n","                          options: formatRouteRecordMatcherForStateInspector(route),\r\n","                      };\r\n","                  }\r\n","              }\r\n","          });\r\n","          api.sendInspectorTree(routerInspectorId);\r\n","          api.sendInspectorState(routerInspectorId);\r\n","      });\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">modifierForKey</span>(<span class=\"code-params\">key</span>) </span>{\r\n","      <span class=\"code-keyword\">if</span> (key.optional) {\r\n","          <span class=\"code-keyword\">return</span> key.repeatable ? <span class=\"code-string\">'*'</span> : <span class=\"code-string\">'?'</span>;\r\n","      }\r\n","      <span class=\"code-keyword\">else</span> {\r\n","          <span class=\"code-keyword\">return</span> key.repeatable ? <span class=\"code-string\">'+'</span> : <span class=\"code-string\">''</span>;\r\n","      }\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">formatRouteRecordMatcherForStateInspector</span>(<span class=\"code-params\">route</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> { record } = route;\r\n","      <span class=\"code-keyword\">const</span> fields = [\r\n","          { <span class=\"code-attr\">editable</span>: <span class=\"code-literal\">false</span>, <span class=\"code-attr\">key</span>: <span class=\"code-string\">'path'</span>, <span class=\"code-attr\">value</span>: record.path },\r\n","      ];\r\n","      <span class=\"code-keyword\">if</span> (record.name != <span class=\"code-literal\">null</span>) {\r\n","          fields.push({\r\n","              editable: <span class=\"code-literal\">false</span>,\r\n","              key: <span class=\"code-string\">'name'</span>,\r\n","              value: record.name,\r\n","          });\r\n","      }\r\n","      fields.push({ <span class=\"code-attr\">editable</span>: <span class=\"code-literal\">false</span>, <span class=\"code-attr\">key</span>: <span class=\"code-string\">'regexp'</span>, <span class=\"code-attr\">value</span>: route.re });\r\n","      <span class=\"code-keyword\">if</span> (route.keys.length) {\r\n","          fields.push({\r\n","              editable: <span class=\"code-literal\">false</span>,\r\n","              key: <span class=\"code-string\">'keys'</span>,\r\n","              value: {\r\n","                  _custom: {\r\n","                      type: <span class=\"code-literal\">null</span>,\r\n","                      readOnly: <span class=\"code-literal\">true</span>,\r\n","                      display: route.keys\r\n","                          .map(<span class=\"code-function\"><span class=\"code-params\">key</span> =&gt;</span> <span class=\"code-string\">`<span class=\"code-subst\">${key.name}</span><span class=\"code-subst\">${modifierForKey(key)}</span>`</span>)\r\n","                          .join(<span class=\"code-string\">' '</span>),\r\n","                      tooltip: <span class=\"code-string\">'Param keys'</span>,\r\n","                      value: route.keys,\r\n","                  },\r\n","              },\r\n","          });\r\n","      }\r\n","      <span class=\"code-keyword\">if</span> (record.redirect != <span class=\"code-literal\">null</span>) {\r\n","          fields.push({\r\n","              editable: <span class=\"code-literal\">false</span>,\r\n","              key: <span class=\"code-string\">'redirect'</span>,\r\n","              value: record.redirect,\r\n","          });\r\n","      }\r\n","      <span class=\"code-keyword\">if</span> (route.alias.length) {\r\n","          fields.push({\r\n","              editable: <span class=\"code-literal\">false</span>,\r\n","              key: <span class=\"code-string\">'aliases'</span>,\r\n","              value: route.alias.map(<span class=\"code-function\"><span class=\"code-params\">alias</span> =&gt;</span> alias.record.path),\r\n","          });\r\n","      }\r\n","      <span class=\"code-keyword\">if</span> (<span class=\"code-built_in\">Object</span>.keys(route.record.meta).length) {\r\n","          fields.push({\r\n","              editable: <span class=\"code-literal\">false</span>,\r\n","              key: <span class=\"code-string\">'meta'</span>,\r\n","              value: route.record.meta,\r\n","          });\r\n","      }\r\n","      fields.push({\r\n","          key: <span class=\"code-string\">'score'</span>,\r\n","          editable: <span class=\"code-literal\">false</span>,\r\n","          value: {\r\n","              _custom: {\r\n","                  type: <span class=\"code-literal\">null</span>,\r\n","                  readOnly: <span class=\"code-literal\">true</span>,\r\n","                  display: route.score.map(<span class=\"code-function\"><span class=\"code-params\">score</span> =&gt;</span> score.join(<span class=\"code-string\">', '</span>)).join(<span class=\"code-string\">' | '</span>),\r\n","                  tooltip: <span class=\"code-string\">'Score used to sort routes'</span>,\r\n","                  value: route.score,\r\n","              },\r\n","          },\r\n","      });\r\n","      <span class=\"code-keyword\">return</span> fields;\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Extracted from tailwind palette\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-keyword\">const</span> PINK_500 = <span class=\"code-number\">0xec4899</span>;\r\n","  <span class=\"code-keyword\">const</span> BLUE_600 = <span class=\"code-number\">0x2563eb</span>;\r\n","  <span class=\"code-keyword\">const</span> LIME_500 = <span class=\"code-number\">0x84cc16</span>;\r\n","  <span class=\"code-keyword\">const</span> CYAN_400 = <span class=\"code-number\">0x22d3ee</span>;\r\n","  <span class=\"code-keyword\">const</span> ORANGE_400 = <span class=\"code-number\">0xfb923c</span>;\r\n","  <span class=\"code-comment\">// const GRAY_100 = 0xf4f4f5</span>\r\n","  <span class=\"code-keyword\">const</span> DARK = <span class=\"code-number\">0x666666</span>;\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">formatRouteRecordForInspector</span>(<span class=\"code-params\">route</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> tags = [];\r\n","      <span class=\"code-keyword\">const</span> { record } = route;\r\n","      <span class=\"code-keyword\">if</span> (record.name != <span class=\"code-literal\">null</span>) {\r\n","          tags.push({\r\n","              label: <span class=\"code-built_in\">String</span>(record.name),\r\n","              textColor: <span class=\"code-number\">0</span>,\r\n","              backgroundColor: CYAN_400,\r\n","          });\r\n","      }\r\n","      <span class=\"code-keyword\">if</span> (record.aliasOf) {\r\n","          tags.push({\r\n","              label: <span class=\"code-string\">'alias'</span>,\r\n","              textColor: <span class=\"code-number\">0</span>,\r\n","              backgroundColor: ORANGE_400,\r\n","          });\r\n","      }\r\n","      <span class=\"code-keyword\">if</span> (route.__vd_match) {\r\n","          tags.push({\r\n","              label: <span class=\"code-string\">'matches'</span>,\r\n","              textColor: <span class=\"code-number\">0</span>,\r\n","              backgroundColor: PINK_500,\r\n","          });\r\n","      }\r\n","      <span class=\"code-keyword\">if</span> (route.__vd_exactActive) {\r\n","          tags.push({\r\n","              label: <span class=\"code-string\">'exact'</span>,\r\n","              textColor: <span class=\"code-number\">0</span>,\r\n","              backgroundColor: LIME_500,\r\n","          });\r\n","      }\r\n","      <span class=\"code-keyword\">if</span> (route.__vd_active) {\r\n","          tags.push({\r\n","              label: <span class=\"code-string\">'active'</span>,\r\n","              textColor: <span class=\"code-number\">0</span>,\r\n","              backgroundColor: BLUE_600,\r\n","          });\r\n","      }\r\n","      <span class=\"code-keyword\">if</span> (record.redirect) {\r\n","          tags.push({\r\n","              label: <span class=\"code-keyword\">typeof</span> record.redirect === <span class=\"code-string\">'string'</span>\r\n","                  ? <span class=\"code-string\">`redirect: <span class=\"code-subst\">${record.redirect}</span>`</span>\r\n","                  : <span class=\"code-string\">'redirects'</span>,\r\n","              textColor: <span class=\"code-number\">0xffffff</span>,\r\n","              backgroundColor: DARK,\r\n","          });\r\n","      }\r\n","      <span class=\"code-comment\">// add an id to be able to select it. Using the `path` is not possible because</span>\r\n","      <span class=\"code-comment\">// empty path children would collide with their parents</span>\r\n","      <span class=\"code-keyword\">let</span> id = record.__vd_id;\r\n","      <span class=\"code-keyword\">if</span> (id == <span class=\"code-literal\">null</span>) {\r\n","          id = <span class=\"code-built_in\">String</span>(routeRecordId++);\r\n","          record.__vd_id = id;\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> {\r\n","          id,\r\n","          label: record.path,\r\n","          tags,\r\n","          children: route.children.map(formatRouteRecordForInspector),\r\n","      };\r\n","  }\r\n","  <span class=\"code-comment\">//  incremental id for route records and inspector state</span>\r\n","  <span class=\"code-keyword\">let</span> routeRecordId = <span class=\"code-number\">0</span>;\r\n","  <span class=\"code-keyword\">const</span> EXTRACT_REGEXP_RE = <span class=\"code-regexp\">/^\\/(.*)\\/([a-z]*)$/</span>;\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">markRouteRecordActive</span>(<span class=\"code-params\">route, currentRoute</span>) </span>{\r\n","      <span class=\"code-comment\">// no route will be active if matched is empty</span>\r\n","      <span class=\"code-comment\">// reset the matching state</span>\r\n","      <span class=\"code-keyword\">const</span> isExactActive = currentRoute.matched.length &amp;&amp;\r\n","          isSameRouteRecord(currentRoute.matched[currentRoute.matched.length - <span class=\"code-number\">1</span>], route.record);\r\n","      route.__vd_exactActive = route.__vd_active = isExactActive;\r\n","      <span class=\"code-keyword\">if</span> (!isExactActive) {\r\n","          route.__vd_active = currentRoute.matched.some(<span class=\"code-function\"><span class=\"code-params\">match</span> =&gt;</span> isSameRouteRecord(match, route.record));\r\n","      }\r\n","      route.children.forEach(<span class=\"code-function\"><span class=\"code-params\">childRoute</span> =&gt;</span> markRouteRecordActive(childRoute, currentRoute));\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">resetMatchStateOnRouteRecord</span>(<span class=\"code-params\">route</span>) </span>{\r\n","      route.__vd_match = <span class=\"code-literal\">false</span>;\r\n","      route.children.forEach(resetMatchStateOnRouteRecord);\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isRouteMatching</span>(<span class=\"code-params\">route, filter</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> found = <span class=\"code-built_in\">String</span>(route.re).match(EXTRACT_REGEXP_RE);\r\n","      route.__vd_match = <span class=\"code-literal\">false</span>;\r\n","      <span class=\"code-keyword\">if</span> (!found || found.length &lt; <span class=\"code-number\">3</span>) {\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-literal\">false</span>;\r\n","      }\r\n","      <span class=\"code-comment\">// use a regexp without $ at the end to match nested routes better</span>\r\n","      <span class=\"code-keyword\">const</span> nonEndingRE = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">RegExp</span>(found[<span class=\"code-number\">1</span>].replace(<span class=\"code-regexp\">/\\$$/</span>, <span class=\"code-string\">''</span>), found[<span class=\"code-number\">2</span>]);\r\n","      <span class=\"code-keyword\">if</span> (nonEndingRE.test(filter)) {\r\n","          <span class=\"code-comment\">// mark children as matches</span>\r\n","          route.children.forEach(<span class=\"code-function\"><span class=\"code-params\">child</span> =&gt;</span> isRouteMatching(child, filter));\r\n","          <span class=\"code-comment\">// exception case: `/`</span>\r\n","          <span class=\"code-keyword\">if</span> (route.record.path !== <span class=\"code-string\">'/'</span> || filter === <span class=\"code-string\">'/'</span>) {\r\n","              route.__vd_match = route.re.test(filter);\r\n","              <span class=\"code-keyword\">return</span> <span class=\"code-literal\">true</span>;\r\n","          }\r\n","          <span class=\"code-comment\">// hide the / route</span>\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-literal\">false</span>;\r\n","      }\r\n","      <span class=\"code-keyword\">const</span> path = route.record.path.toLowerCase();\r\n","      <span class=\"code-keyword\">const</span> decodedPath = decode(path);\r\n","      <span class=\"code-comment\">// also allow partial matching on the path</span>\r\n","      <span class=\"code-keyword\">if</span> (!filter.startsWith(<span class=\"code-string\">'/'</span>) &amp;&amp;\r\n","          (decodedPath.includes(filter) || path.includes(filter)))\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-literal\">true</span>;\r\n","      <span class=\"code-keyword\">if</span> (decodedPath.startsWith(filter) || path.startsWith(filter))\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-literal\">true</span>;\r\n","      <span class=\"code-keyword\">if</span> (route.record.name &amp;&amp; <span class=\"code-built_in\">String</span>(route.record.name).includes(filter))\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-literal\">true</span>;\r\n","      <span class=\"code-keyword\">return</span> route.children.some(<span class=\"code-function\"><span class=\"code-params\">child</span> =&gt;</span> isRouteMatching(child, filter));\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">omit</span>(<span class=\"code-params\">obj, keys</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> ret = {};\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> key <span class=\"code-keyword\">in</span> obj) {\r\n","          <span class=\"code-keyword\">if</span> (!keys.includes(key)) {\r\n","              <span class=\"code-comment\">// @ts-expect-error</span>\r\n","              ret[key] = obj[key];\r\n","          }\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> ret;\r\n","  }\n","\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Creates a Router instance that can be used by a Vue app.\r\n</span>","<span class=\"code-comment\">   *\r\n</span>","<span class=\"code-comment\">   * @param options - {@link RouterOptions}\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">createRouter</span>(<span class=\"code-params\">options</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> matcher = createRouterMatcher(options.routes, options);\r\n","      <span class=\"code-keyword\">const</span> parseQuery$<span class=\"code-number\">1</span> = options.parseQuery || parseQuery;\r\n","      <span class=\"code-keyword\">const</span> stringifyQuery$<span class=\"code-number\">1</span> = options.stringifyQuery || stringifyQuery;\r\n","      <span class=\"code-keyword\">const</span> routerHistory = options.history;\r\n","      <span class=\"code-keyword\">if</span> (!routerHistory)\r\n","          <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">'Provide the \"history\" option when calling \"createRouter()\":'</span> +\r\n","              <span class=\"code-string\">' https://next.router.vuejs.org/api/#history.'</span>);\r\n","      <span class=\"code-keyword\">const</span> beforeGuards = useCallbacks();\r\n","      <span class=\"code-keyword\">const</span> beforeResolveGuards = useCallbacks();\r\n","      <span class=\"code-keyword\">const</span> afterGuards = useCallbacks();\r\n","      <span class=\"code-keyword\">const</span> currentRoute = vue.shallowRef(START_LOCATION_NORMALIZED);\r\n","      <span class=\"code-keyword\">let</span> pendingLocation = START_LOCATION_NORMALIZED;\r\n","      <span class=\"code-comment\">// leave the scrollRestoration if no scrollBehavior is provided</span>\r\n","      <span class=\"code-keyword\">if</span> (isBrowser &amp;&amp; options.scrollBehavior &amp;&amp; <span class=\"code-string\">'scrollRestoration'</span> <span class=\"code-keyword\">in</span> history) {\r\n","          history.scrollRestoration = <span class=\"code-string\">'manual'</span>;\r\n","      }\r\n","      <span class=\"code-keyword\">const</span> normalizeParams = applyToParams.bind(<span class=\"code-literal\">null</span>, paramValue =&gt; <span class=\"code-string\">''</span> + paramValue);\r\n","      <span class=\"code-keyword\">const</span> encodeParams = applyToParams.bind(<span class=\"code-literal\">null</span>, encodeParam);\r\n","      <span class=\"code-keyword\">const</span> decodeParams = \r\n","      <span class=\"code-comment\">// @ts-expect-error: intentionally avoid the type check</span>\r\n","      applyToParams.bind(<span class=\"code-literal\">null</span>, decode);\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">addRoute</span>(<span class=\"code-params\">parentOrRoute, route</span>) </span>{\r\n","          <span class=\"code-keyword\">let</span> parent;\r\n","          <span class=\"code-keyword\">let</span> record;\r\n","          <span class=\"code-keyword\">if</span> (isRouteName(parentOrRoute)) {\r\n","              parent = matcher.getRecordMatcher(parentOrRoute);\r\n","              record = route;\r\n","          }\r\n","          <span class=\"code-keyword\">else</span> {\r\n","              record = parentOrRoute;\r\n","          }\r\n","          <span class=\"code-keyword\">return</span> matcher.addRoute(record, parent);\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">removeRoute</span>(<span class=\"code-params\">name</span>) </span>{\r\n","          <span class=\"code-keyword\">const</span> recordMatcher = matcher.getRecordMatcher(name);\r\n","          <span class=\"code-keyword\">if</span> (recordMatcher) {\r\n","              matcher.removeRoute(recordMatcher);\r\n","          }\r\n","          <span class=\"code-keyword\">else</span> {\r\n","              warn(<span class=\"code-string\">`Cannot remove non-existent route \"<span class=\"code-subst\">${<span class=\"code-built_in\">String</span>(name)}</span>\"`</span>);\r\n","          }\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">getRoutes</span>(<span class=\"code-params\"></span>) </span>{\r\n","          <span class=\"code-keyword\">return</span> matcher.getRoutes().map(<span class=\"code-function\"><span class=\"code-params\">routeMatcher</span> =&gt;</span> routeMatcher.record);\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">hasRoute</span>(<span class=\"code-params\">name</span>) </span>{\r\n","          <span class=\"code-keyword\">return</span> !!matcher.getRecordMatcher(name);\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">resolve</span>(<span class=\"code-params\">rawLocation, currentLocation</span>) </span>{\r\n","          <span class=\"code-comment\">// const objectLocation = routerLocationAsObject(rawLocation)</span>\r\n","          <span class=\"code-comment\">// we create a copy to modify it later</span>\r\n","          currentLocation = assign({}, currentLocation || currentRoute.value);\r\n","          <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">typeof</span> rawLocation === <span class=\"code-string\">'string'</span>) {\r\n","              <span class=\"code-keyword\">const</span> locationNormalized = parseURL(parseQuery$<span class=\"code-number\">1</span>, rawLocation, currentLocation.path);\r\n","              <span class=\"code-keyword\">const</span> matchedRoute = matcher.resolve({ <span class=\"code-attr\">path</span>: locationNormalized.path }, currentLocation);\r\n","              <span class=\"code-keyword\">const</span> href = routerHistory.createHref(locationNormalized.fullPath);\r\n","              {\r\n","                  <span class=\"code-keyword\">if</span> (href.startsWith(<span class=\"code-string\">'//'</span>))\r\n","                      warn(<span class=\"code-string\">`Location \"<span class=\"code-subst\">${rawLocation}</span>\" resolved to \"<span class=\"code-subst\">${href}</span>\". A resolved location cannot start with multiple slashes.`</span>);\r\n","                  <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (!matchedRoute.matched.length) {\r\n","                      warn(<span class=\"code-string\">`No match found for location with path \"<span class=\"code-subst\">${rawLocation}</span>\"`</span>);\r\n","                  }\r\n","              }\r\n","              <span class=\"code-comment\">// locationNormalized is always a new object</span>\r\n","              <span class=\"code-keyword\">return</span> assign(locationNormalized, matchedRoute, {\r\n","                  params: decodeParams(matchedRoute.params),\r\n","                  hash: decode(locationNormalized.hash),\r\n","                  redirectedFrom: <span class=\"code-literal\">undefined</span>,\r\n","                  href,\r\n","              });\r\n","          }\r\n","          <span class=\"code-keyword\">let</span> matcherLocation;\r\n","          <span class=\"code-comment\">// path could be relative in object as well</span>\r\n","          <span class=\"code-keyword\">if</span> (<span class=\"code-string\">'path'</span> <span class=\"code-keyword\">in</span> rawLocation) {\r\n","              <span class=\"code-keyword\">if</span> (<span class=\"code-string\">'params'</span> <span class=\"code-keyword\">in</span> rawLocation &amp;&amp;\r\n","                  !(<span class=\"code-string\">'name'</span> <span class=\"code-keyword\">in</span> rawLocation) &amp;&amp;\r\n","                  <span class=\"code-comment\">// @ts-expect-error: the type is never</span>\r\n","                  <span class=\"code-built_in\">Object</span>.keys(rawLocation.params).length) {\r\n","                  warn(<span class=\"code-string\">`Path \"<span class=\"code-subst\">${\r\n</span></span>","<span class=\"code-string\"><span class=\"code-subst\">                <span class=\"code-regexp\">//</span> @ts-expect-error: the type is never\r\n</span></span>","<span class=\"code-string\"><span class=\"code-subst\">                rawLocation.path}</span>\" was passed with params but they will be ignored. Use a named route alongside params instead.`</span>);\r\n","              }\r\n","              matcherLocation = assign({}, rawLocation, {\r\n","                  path: parseURL(parseQuery$<span class=\"code-number\">1</span>, rawLocation.path, currentLocation.path).path,\r\n","              });\r\n","          }\r\n","          <span class=\"code-keyword\">else</span> {\r\n","              <span class=\"code-comment\">// remove any nullish param</span>\r\n","              <span class=\"code-keyword\">const</span> targetParams = assign({}, rawLocation.params);\r\n","              <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> key <span class=\"code-keyword\">in</span> targetParams) {\r\n","                  <span class=\"code-keyword\">if</span> (targetParams[key] == <span class=\"code-literal\">null</span>) {\r\n","                      <span class=\"code-keyword\">delete</span> targetParams[key];\r\n","                  }\r\n","              }\r\n","              <span class=\"code-comment\">// pass encoded values to the matcher, so it can produce encoded path and fullPath</span>\r\n","              matcherLocation = assign({}, rawLocation, {\r\n","                  params: encodeParams(rawLocation.params),\r\n","              });\r\n","              <span class=\"code-comment\">// current location params are decoded, we need to encode them in case the</span>\r\n","              <span class=\"code-comment\">// matcher merges the params</span>\r\n","              currentLocation.params = encodeParams(currentLocation.params);\r\n","          }\r\n","          <span class=\"code-keyword\">const</span> matchedRoute = matcher.resolve(matcherLocation, currentLocation);\r\n","          <span class=\"code-keyword\">const</span> hash = rawLocation.hash || <span class=\"code-string\">''</span>;\r\n","          <span class=\"code-keyword\">if</span> (hash &amp;&amp; !hash.startsWith(<span class=\"code-string\">'#'</span>)) {\r\n","              warn(<span class=\"code-string\">`A \\`hash\\` should always start with the character \"#\". Replace \"<span class=\"code-subst\">${hash}</span>\" with \"#<span class=\"code-subst\">${hash}</span>\".`</span>);\r\n","          }\r\n","          <span class=\"code-comment\">// the matcher might have merged current location params, so</span>\r\n","          <span class=\"code-comment\">// we need to run the decoding again</span>\r\n","          matchedRoute.params = normalizeParams(decodeParams(matchedRoute.params));\r\n","          <span class=\"code-keyword\">const</span> fullPath = stringifyURL(stringifyQuery$<span class=\"code-number\">1</span>, assign({}, rawLocation, {\r\n","              hash: encodeHash(hash),\r\n","              path: matchedRoute.path,\r\n","          }));\r\n","          <span class=\"code-keyword\">const</span> href = routerHistory.createHref(fullPath);\r\n","          {\r\n","              <span class=\"code-keyword\">if</span> (href.startsWith(<span class=\"code-string\">'//'</span>)) {\r\n","                  warn(<span class=\"code-string\">`Location \"<span class=\"code-subst\">${rawLocation}</span>\" resolved to \"<span class=\"code-subst\">${href}</span>\". A resolved location cannot start with multiple slashes.`</span>);\r\n","              }\r\n","              <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (!matchedRoute.matched.length) {\r\n","                  warn(<span class=\"code-string\">`No match found for location with path \"<span class=\"code-subst\">${<span class=\"code-string\">'path'</span> <span class=\"code-keyword\">in</span> rawLocation ? rawLocation.path : rawLocation}</span>\"`</span>);\r\n","              }\r\n","          }\r\n","          <span class=\"code-keyword\">return</span> assign({\r\n","              fullPath,\r\n","              <span class=\"code-comment\">// keep the hash encoded so fullPath is effectively path + encodedQuery +</span>\r\n","              <span class=\"code-comment\">// hash</span>\r\n","              hash,\r\n","              query: \r\n","              <span class=\"code-comment\">// if the user is using a custom query lib like qs, we might have</span>\r\n","              <span class=\"code-comment\">// nested objects, so we keep the query as is, meaning it can contain</span>\r\n","              <span class=\"code-comment\">// numbers at `$route.query`, but at the point, the user will have to</span>\r\n","              <span class=\"code-comment\">// use their own type anyway.</span>\r\n","              <span class=\"code-comment\">// https://github.com/vuejs/router/issues/328#issuecomment-649481567</span>\r\n","              stringifyQuery$<span class=\"code-number\">1</span> === stringifyQuery\r\n","                  ? normalizeQuery(rawLocation.query)\r\n","                  : (rawLocation.query || {}),\r\n","          }, matchedRoute, {\r\n","              redirectedFrom: <span class=\"code-literal\">undefined</span>,\r\n","              href,\r\n","          });\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">locationAsObject</span>(<span class=\"code-params\">to</span>) </span>{\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">typeof</span> to === <span class=\"code-string\">'string'</span>\r\n","              ? parseURL(parseQuery$<span class=\"code-number\">1</span>, to, currentRoute.value.path)\r\n","              : assign({}, to);\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">checkCanceledNavigation</span>(<span class=\"code-params\">to, from</span>) </span>{\r\n","          <span class=\"code-keyword\">if</span> (pendingLocation !== to) {\r\n","              <span class=\"code-keyword\">return</span> createRouterError(<span class=\"code-number\">8</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_CANCELLED */</span>, {\r\n","                  <span class=\"code-keyword\">from</span>,\r\n","                  to,\r\n","              });\r\n","          }\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">push</span>(<span class=\"code-params\">to</span>) </span>{\r\n","          <span class=\"code-keyword\">return</span> pushWithRedirect(to);\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">replace</span>(<span class=\"code-params\">to</span>) </span>{\r\n","          <span class=\"code-keyword\">return</span> push(assign(locationAsObject(to), { <span class=\"code-attr\">replace</span>: <span class=\"code-literal\">true</span> }));\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">handleRedirectRecord</span>(<span class=\"code-params\">to</span>) </span>{\r\n","          <span class=\"code-keyword\">const</span> lastMatched = to.matched[to.matched.length - <span class=\"code-number\">1</span>];\r\n","          <span class=\"code-keyword\">if</span> (lastMatched &amp;&amp; lastMatched.redirect) {\r\n","              <span class=\"code-keyword\">const</span> { redirect } = lastMatched;\r\n","              <span class=\"code-keyword\">let</span> newTargetLocation = <span class=\"code-keyword\">typeof</span> redirect === <span class=\"code-string\">'function'</span> ? redirect(to) : redirect;\r\n","              <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">typeof</span> newTargetLocation === <span class=\"code-string\">'string'</span>) {\r\n","                  newTargetLocation =\r\n","                      newTargetLocation.includes(<span class=\"code-string\">'?'</span>) || newTargetLocation.includes(<span class=\"code-string\">'#'</span>)\r\n","                          ? (newTargetLocation = locationAsObject(newTargetLocation))\r\n","                          : <span class=\"code-comment\">// force empty params</span>\r\n","                              { <span class=\"code-attr\">path</span>: newTargetLocation };\r\n","                  <span class=\"code-comment\">// @ts-expect-error: force empty params when a string is passed to let</span>\r\n","                  <span class=\"code-comment\">// the router parse them again</span>\r\n","                  newTargetLocation.params = {};\r\n","              }\r\n","              <span class=\"code-keyword\">if</span> (!(<span class=\"code-string\">'path'</span> <span class=\"code-keyword\">in</span> newTargetLocation) &amp;&amp;\r\n","                  !(<span class=\"code-string\">'name'</span> <span class=\"code-keyword\">in</span> newTargetLocation)) {\r\n","                  warn(<span class=\"code-string\">`Invalid redirect found:\\n<span class=\"code-subst\">${<span class=\"code-built_in\">JSON</span>.stringify(newTargetLocation, <span class=\"code-literal\">null</span>, <span class=\"code-number\">2</span>)}</span>\\n when navigating to \"<span class=\"code-subst\">${to.fullPath}</span>\". A redirect must contain a name or path. This will break in production.`</span>);\r\n","                  <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">'Invalid redirect'</span>);\r\n","              }\r\n","              <span class=\"code-keyword\">return</span> assign({\r\n","                  query: to.query,\r\n","                  hash: to.hash,\r\n","                  <span class=\"code-comment\">// avoid transferring params if the redirect has a path</span>\r\n","                  params: <span class=\"code-string\">'path'</span> <span class=\"code-keyword\">in</span> newTargetLocation ? {} : to.params,\r\n","              }, newTargetLocation);\r\n","          }\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">pushWithRedirect</span>(<span class=\"code-params\">to, redirectedFrom</span>) </span>{\r\n","          <span class=\"code-keyword\">const</span> targetLocation = (pendingLocation = resolve(to));\r\n","          <span class=\"code-keyword\">const</span> <span class=\"code-keyword\">from</span> = currentRoute.value;\r\n","          <span class=\"code-keyword\">const</span> data = to.state;\r\n","          <span class=\"code-keyword\">const</span> force = to.force;\r\n","          <span class=\"code-comment\">// to could be a string where `replace` is a function</span>\r\n","          <span class=\"code-keyword\">const</span> replace = to.replace === <span class=\"code-literal\">true</span>;\r\n","          <span class=\"code-keyword\">const</span> shouldRedirect = handleRedirectRecord(targetLocation);\r\n","          <span class=\"code-keyword\">if</span> (shouldRedirect)\r\n","              <span class=\"code-keyword\">return</span> pushWithRedirect(assign(locationAsObject(shouldRedirect), {\r\n","                  state: <span class=\"code-keyword\">typeof</span> shouldRedirect === <span class=\"code-string\">'object'</span>\r\n","                      ? assign({}, data, shouldRedirect.state)\r\n","                      : data,\r\n","                  force,\r\n","                  replace,\r\n","              }), \r\n","              <span class=\"code-comment\">// keep original redirectedFrom if it exists</span>\r\n","              redirectedFrom || targetLocation);\r\n","          <span class=\"code-comment\">// if it was a redirect we already called `pushWithRedirect` above</span>\r\n","          <span class=\"code-keyword\">const</span> toLocation = targetLocation;\r\n","          toLocation.redirectedFrom = redirectedFrom;\r\n","          <span class=\"code-keyword\">let</span> failure;\r\n","          <span class=\"code-keyword\">if</span> (!force &amp;&amp; isSameRouteLocation(stringifyQuery$<span class=\"code-number\">1</span>, <span class=\"code-keyword\">from</span>, targetLocation)) {\r\n","              failure = createRouterError(<span class=\"code-number\">16</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_DUPLICATED */</span>, { <span class=\"code-attr\">to</span>: toLocation, <span class=\"code-keyword\">from</span> });\r\n","              <span class=\"code-comment\">// trigger scroll to allow scrolling to the same anchor</span>\r\n","              handleScroll(<span class=\"code-keyword\">from</span>, <span class=\"code-keyword\">from</span>, \r\n","              <span class=\"code-comment\">// this is a push, the only way for it to be triggered from a</span>\r\n","              <span class=\"code-comment\">// history.listen is with a redirect, which makes it become a push</span>\r\n","              <span class=\"code-literal\">true</span>, \r\n","              <span class=\"code-comment\">// This cannot be the first navigation because the initial location</span>\r\n","              <span class=\"code-comment\">// cannot be manually navigated to</span>\r\n","              <span class=\"code-literal\">false</span>);\r\n","          }\r\n","          <span class=\"code-keyword\">return</span> (failure ? <span class=\"code-built_in\">Promise</span>.resolve(failure) : navigate(toLocation, <span class=\"code-keyword\">from</span>))\r\n","              .catch(<span class=\"code-function\">(<span class=\"code-params\">error</span>) =&gt;</span> isNavigationFailure(error)\r\n","              ? <span class=\"code-comment\">// navigation redirects still mark the router as ready</span>\r\n","                  isNavigationFailure(error, <span class=\"code-number\">2</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_GUARD_REDIRECT */</span>)\r\n","                      ? error\r\n","                      : markAsReady(error) <span class=\"code-comment\">// also returns the error</span>\r\n","              : <span class=\"code-comment\">// reject any unknown error</span>\r\n","                  triggerError(error, toLocation, <span class=\"code-keyword\">from</span>))\r\n","              .then(<span class=\"code-function\">(<span class=\"code-params\">failure</span>) =&gt;</span> {\r\n","              <span class=\"code-keyword\">if</span> (failure) {\r\n","                  <span class=\"code-keyword\">if</span> (isNavigationFailure(failure, <span class=\"code-number\">2</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_GUARD_REDIRECT */</span>)) {\r\n","                      <span class=\"code-keyword\">if</span> (<span class=\"code-comment\">// we are redirecting to the same location we were already at</span>\r\n","                          isSameRouteLocation(stringifyQuery$<span class=\"code-number\">1</span>, resolve(failure.to), toLocation) &amp;&amp;\r\n","                          <span class=\"code-comment\">// and we have done it a couple of times</span>\r\n","                          redirectedFrom &amp;&amp;\r\n","                          <span class=\"code-comment\">// @ts-expect-error: added only in dev</span>\r\n","                          (redirectedFrom._count = redirectedFrom._count\r\n","                              ? <span class=\"code-comment\">// @ts-expect-error</span>\r\n","                                  redirectedFrom._count + <span class=\"code-number\">1</span>\r\n","                              : <span class=\"code-number\">1</span>) &gt; <span class=\"code-number\">10</span>) {\r\n","                          warn(<span class=\"code-string\">`Detected an infinite redirection in a navigation guard when going from \"<span class=\"code-subst\">${<span class=\"code-keyword\">from</span>.fullPath}</span>\" to \"<span class=\"code-subst\">${toLocation.fullPath}</span>\". Aborting to avoid a Stack Overflow. This will break in production if not fixed.`</span>);\r\n","                          <span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Promise</span>.reject(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">'Infinite redirect in navigation guard'</span>));\r\n","                      }\r\n","                      <span class=\"code-keyword\">return</span> pushWithRedirect(\r\n","                      <span class=\"code-comment\">// keep options</span>\r\n","                      assign({\r\n","                          <span class=\"code-comment\">// preserve an existing replacement but allow the redirect to override it</span>\r\n","                          replace,\r\n","                      }, locationAsObject(failure.to), {\r\n","                          state: <span class=\"code-keyword\">typeof</span> failure.to === <span class=\"code-string\">'object'</span>\r\n","                              ? assign({}, data, failure.to.state)\r\n","                              : data,\r\n","                          force,\r\n","                      }), \r\n","                      <span class=\"code-comment\">// preserve the original redirectedFrom if any</span>\r\n","                      redirectedFrom || toLocation);\r\n","                  }\r\n","              }\r\n","              <span class=\"code-keyword\">else</span> {\r\n","                  <span class=\"code-comment\">// if we fail we don't finalize the navigation</span>\r\n","                  failure = finalizeNavigation(toLocation, <span class=\"code-keyword\">from</span>, <span class=\"code-literal\">true</span>, replace, data);\r\n","              }\r\n","              triggerAfterEach(toLocation, <span class=\"code-keyword\">from</span>, failure);\r\n","              <span class=\"code-keyword\">return</span> failure;\r\n","          });\r\n","      }\r\n","      <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">       * Helper to reject and skip all navigation guards if a new navigation happened\r\n</span>","<span class=\"code-comment\">       * @param to\r\n</span>","<span class=\"code-comment\">       * @param from\r\n</span>","<span class=\"code-comment\">       */</span>\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">checkCanceledNavigationAndReject</span>(<span class=\"code-params\">to, from</span>) </span>{\r\n","          <span class=\"code-keyword\">const</span> error = checkCanceledNavigation(to, <span class=\"code-keyword\">from</span>);\r\n","          <span class=\"code-keyword\">return</span> error ? <span class=\"code-built_in\">Promise</span>.reject(error) : <span class=\"code-built_in\">Promise</span>.resolve();\r\n","      }\r\n","      <span class=\"code-comment\">// <span class=\"code-doctag\">TODO:</span> refactor the whole before guards by internally using router.beforeEach</span>\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">navigate</span>(<span class=\"code-params\">to, from</span>) </span>{\r\n","          <span class=\"code-keyword\">let</span> guards;\r\n","          <span class=\"code-keyword\">const</span> [leavingRecords, updatingRecords, enteringRecords] = extractChangingRecords(to, <span class=\"code-keyword\">from</span>);\r\n","          <span class=\"code-comment\">// all components here have been resolved once because we are leaving</span>\r\n","          guards = extractComponentsGuards(leavingRecords.reverse(), <span class=\"code-string\">'beforeRouteLeave'</span>, to, <span class=\"code-keyword\">from</span>);\r\n","          <span class=\"code-comment\">// leavingRecords is already reversed</span>\r\n","          <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> record <span class=\"code-keyword\">of</span> leavingRecords) {\r\n","              record.leaveGuards.forEach(<span class=\"code-function\"><span class=\"code-params\">guard</span> =&gt;</span> {\r\n","                  guards.push(guardToPromiseFn(guard, to, <span class=\"code-keyword\">from</span>));\r\n","              });\r\n","          }\r\n","          <span class=\"code-keyword\">const</span> canceledNavigationCheck = checkCanceledNavigationAndReject.bind(<span class=\"code-literal\">null</span>, to, <span class=\"code-keyword\">from</span>);\r\n","          guards.push(canceledNavigationCheck);\r\n","          <span class=\"code-comment\">// run the queue of per route beforeRouteLeave guards</span>\r\n","          <span class=\"code-keyword\">return</span> (runGuardQueue(guards)\r\n","              .then(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","              <span class=\"code-comment\">// check global guards beforeEach</span>\r\n","              guards = [];\r\n","              <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> guard <span class=\"code-keyword\">of</span> beforeGuards.list()) {\r\n","                  guards.push(guardToPromiseFn(guard, to, <span class=\"code-keyword\">from</span>));\r\n","              }\r\n","              guards.push(canceledNavigationCheck);\r\n","              <span class=\"code-keyword\">return</span> runGuardQueue(guards);\r\n","          })\r\n","              .then(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","              <span class=\"code-comment\">// check in components beforeRouteUpdate</span>\r\n","              guards = extractComponentsGuards(updatingRecords, <span class=\"code-string\">'beforeRouteUpdate'</span>, to, <span class=\"code-keyword\">from</span>);\r\n","              <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> record <span class=\"code-keyword\">of</span> updatingRecords) {\r\n","                  record.updateGuards.forEach(<span class=\"code-function\"><span class=\"code-params\">guard</span> =&gt;</span> {\r\n","                      guards.push(guardToPromiseFn(guard, to, <span class=\"code-keyword\">from</span>));\r\n","                  });\r\n","              }\r\n","              guards.push(canceledNavigationCheck);\r\n","              <span class=\"code-comment\">// run the queue of per route beforeEnter guards</span>\r\n","              <span class=\"code-keyword\">return</span> runGuardQueue(guards);\r\n","          })\r\n","              .then(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","              <span class=\"code-comment\">// check the route beforeEnter</span>\r\n","              guards = [];\r\n","              <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> record <span class=\"code-keyword\">of</span> to.matched) {\r\n","                  <span class=\"code-comment\">// do not trigger beforeEnter on reused views</span>\r\n","                  <span class=\"code-keyword\">if</span> (record.beforeEnter &amp;&amp; !<span class=\"code-keyword\">from</span>.matched.includes(record)) {\r\n","                      <span class=\"code-keyword\">if</span> (isArray(record.beforeEnter)) {\r\n","                          <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> beforeEnter <span class=\"code-keyword\">of</span> record.beforeEnter)\r\n","                              guards.push(guardToPromiseFn(beforeEnter, to, <span class=\"code-keyword\">from</span>));\r\n","                      }\r\n","                      <span class=\"code-keyword\">else</span> {\r\n","                          guards.push(guardToPromiseFn(record.beforeEnter, to, <span class=\"code-keyword\">from</span>));\r\n","                      }\r\n","                  }\r\n","              }\r\n","              guards.push(canceledNavigationCheck);\r\n","              <span class=\"code-comment\">// run the queue of per route beforeEnter guards</span>\r\n","              <span class=\"code-keyword\">return</span> runGuardQueue(guards);\r\n","          })\r\n","              .then(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","              <span class=\"code-comment\">// <span class=\"code-doctag\">NOTE:</span> at this point to.matched is normalized and does not contain any () =&gt; Promise&lt;Component&gt;</span>\r\n","              <span class=\"code-comment\">// clear existing enterCallbacks, these are added by extractComponentsGuards</span>\r\n","              to.matched.forEach(<span class=\"code-function\"><span class=\"code-params\">record</span> =&gt;</span> (record.enterCallbacks = {}));\r\n","              <span class=\"code-comment\">// check in-component beforeRouteEnter</span>\r\n","              guards = extractComponentsGuards(enteringRecords, <span class=\"code-string\">'beforeRouteEnter'</span>, to, <span class=\"code-keyword\">from</span>);\r\n","              guards.push(canceledNavigationCheck);\r\n","              <span class=\"code-comment\">// run the queue of per route beforeEnter guards</span>\r\n","              <span class=\"code-keyword\">return</span> runGuardQueue(guards);\r\n","          })\r\n","              .then(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> {\r\n","              <span class=\"code-comment\">// check global guards beforeResolve</span>\r\n","              guards = [];\r\n","              <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> guard <span class=\"code-keyword\">of</span> beforeResolveGuards.list()) {\r\n","                  guards.push(guardToPromiseFn(guard, to, <span class=\"code-keyword\">from</span>));\r\n","              }\r\n","              guards.push(canceledNavigationCheck);\r\n","              <span class=\"code-keyword\">return</span> runGuardQueue(guards);\r\n","          })\r\n","              <span class=\"code-comment\">// catch any navigation canceled</span>\r\n","              .catch(<span class=\"code-function\"><span class=\"code-params\">err</span> =&gt;</span> isNavigationFailure(err, <span class=\"code-number\">8</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_CANCELLED */</span>)\r\n","              ? err\r\n","              : <span class=\"code-built_in\">Promise</span>.reject(err)));\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">triggerAfterEach</span>(<span class=\"code-params\">to, from, failure</span>) </span>{\r\n","          <span class=\"code-comment\">// navigation is confirmed, call afterGuards</span>\r\n","          <span class=\"code-comment\">// <span class=\"code-doctag\">TODO:</span> wrap with error handlers</span>\r\n","          <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> guard <span class=\"code-keyword\">of</span> afterGuards.list())\r\n","              guard(to, <span class=\"code-keyword\">from</span>, failure);\r\n","      }\r\n","      <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">       * - Cleans up any navigation guards\r\n</span>","<span class=\"code-comment\">       * - Changes the url if necessary\r\n</span>","<span class=\"code-comment\">       * - Calls the scrollBehavior\r\n</span>","<span class=\"code-comment\">       */</span>\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">finalizeNavigation</span>(<span class=\"code-params\">toLocation, from, isPush, replace, data</span>) </span>{\r\n","          <span class=\"code-comment\">// a more recent navigation took place</span>\r\n","          <span class=\"code-keyword\">const</span> error = checkCanceledNavigation(toLocation, <span class=\"code-keyword\">from</span>);\r\n","          <span class=\"code-keyword\">if</span> (error)\r\n","              <span class=\"code-keyword\">return</span> error;\r\n","          <span class=\"code-comment\">// only consider as push if it's not the first navigation</span>\r\n","          <span class=\"code-keyword\">const</span> isFirstNavigation = <span class=\"code-keyword\">from</span> === START_LOCATION_NORMALIZED;\r\n","          <span class=\"code-keyword\">const</span> state = !isBrowser ? {} : history.state;\r\n","          <span class=\"code-comment\">// change URL only if the user did a push/replace and if it's not the initial navigation because</span>\r\n","          <span class=\"code-comment\">// it's just reflecting the url</span>\r\n","          <span class=\"code-keyword\">if</span> (isPush) {\r\n","              <span class=\"code-comment\">// on the initial navigation, we want to reuse the scroll position from</span>\r\n","              <span class=\"code-comment\">// history state if it exists</span>\r\n","              <span class=\"code-keyword\">if</span> (replace || isFirstNavigation)\r\n","                  routerHistory.replace(toLocation.fullPath, assign({\r\n","                      scroll: isFirstNavigation &amp;&amp; state &amp;&amp; state.scroll,\r\n","                  }, data));\r\n","              <span class=\"code-keyword\">else</span>\r\n","                  routerHistory.push(toLocation.fullPath, data);\r\n","          }\r\n","          <span class=\"code-comment\">// accept current navigation</span>\r\n","          currentRoute.value = toLocation;\r\n","          handleScroll(toLocation, <span class=\"code-keyword\">from</span>, isPush, isFirstNavigation);\r\n","          markAsReady();\r\n","      }\r\n","      <span class=\"code-keyword\">let</span> removeHistoryListener;\r\n","      <span class=\"code-comment\">// attach listener to history to trigger navigations</span>\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">setupListeners</span>(<span class=\"code-params\"></span>) </span>{\r\n","          <span class=\"code-comment\">// avoid setting up listeners twice due to an invalid first navigation</span>\r\n","          <span class=\"code-keyword\">if</span> (removeHistoryListener)\r\n","              <span class=\"code-keyword\">return</span>;\r\n","          removeHistoryListener = routerHistory.listen(<span class=\"code-function\">(<span class=\"code-params\">to, _from, info</span>) =&gt;</span> {\r\n","              <span class=\"code-keyword\">if</span> (!router.listening)\r\n","                  <span class=\"code-keyword\">return</span>;\r\n","              <span class=\"code-comment\">// cannot be a redirect route because it was in history</span>\r\n","              <span class=\"code-keyword\">const</span> toLocation = resolve(to);\r\n","              <span class=\"code-comment\">// due to dynamic routing, and to hash history with manual navigation</span>\r\n","              <span class=\"code-comment\">// (manually changing the url or calling history.hash = '#/somewhere'),</span>\r\n","              <span class=\"code-comment\">// there could be a redirect record in history</span>\r\n","              <span class=\"code-keyword\">const</span> shouldRedirect = handleRedirectRecord(toLocation);\r\n","              <span class=\"code-keyword\">if</span> (shouldRedirect) {\r\n","                  pushWithRedirect(assign(shouldRedirect, { <span class=\"code-attr\">replace</span>: <span class=\"code-literal\">true</span> }), toLocation).catch(noop);\r\n","                  <span class=\"code-keyword\">return</span>;\r\n","              }\r\n","              pendingLocation = toLocation;\r\n","              <span class=\"code-keyword\">const</span> <span class=\"code-keyword\">from</span> = currentRoute.value;\r\n","              <span class=\"code-comment\">// <span class=\"code-doctag\">TODO:</span> should be moved to web history?</span>\r\n","              <span class=\"code-keyword\">if</span> (isBrowser) {\r\n","                  saveScrollPosition(getScrollKey(<span class=\"code-keyword\">from</span>.fullPath, info.delta), computeScrollPosition());\r\n","              }\r\n","              navigate(toLocation, <span class=\"code-keyword\">from</span>)\r\n","                  .catch(<span class=\"code-function\">(<span class=\"code-params\">error</span>) =&gt;</span> {\r\n","                  <span class=\"code-keyword\">if</span> (isNavigationFailure(error, <span class=\"code-number\">4</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_ABORTED */</span> | <span class=\"code-number\">8</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_CANCELLED */</span>)) {\r\n","                      <span class=\"code-keyword\">return</span> error;\r\n","                  }\r\n","                  <span class=\"code-keyword\">if</span> (isNavigationFailure(error, <span class=\"code-number\">2</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_GUARD_REDIRECT */</span>)) {\r\n","                      <span class=\"code-comment\">// Here we could call if (info.delta) routerHistory.go(-info.delta,</span>\r\n","                      <span class=\"code-comment\">// false) but this is bug prone as we have no way to wait the</span>\r\n","                      <span class=\"code-comment\">// navigation to be finished before calling pushWithRedirect. Using</span>\r\n","                      <span class=\"code-comment\">// a setTimeout of 16ms seems to work but there is no guarantee for</span>\r\n","                      <span class=\"code-comment\">// it to work on every browser. So instead we do not restore the</span>\r\n","                      <span class=\"code-comment\">// history entry and trigger a new navigation as requested by the</span>\r\n","                      <span class=\"code-comment\">// navigation guard.</span>\r\n","                      <span class=\"code-comment\">// the error is already handled by router.push we just want to avoid</span>\r\n","                      <span class=\"code-comment\">// logging the error</span>\r\n","                      pushWithRedirect(error.to, toLocation\r\n","                      <span class=\"code-comment\">// avoid an uncaught rejection, let push call triggerError</span>\r\n","                      )\r\n","                          .then(<span class=\"code-function\"><span class=\"code-params\">failure</span> =&gt;</span> {\r\n","                          <span class=\"code-comment\">// manual change in hash history #916 ending up in the URL not</span>\r\n","                          <span class=\"code-comment\">// changing, but it was changed by the manual url change, so we</span>\r\n","                          <span class=\"code-comment\">// need to manually change it ourselves</span>\r\n","                          <span class=\"code-keyword\">if</span> (isNavigationFailure(failure, <span class=\"code-number\">4</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_ABORTED */</span> |\r\n","                              <span class=\"code-number\">16</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_DUPLICATED */</span>) &amp;&amp;\r\n","                              !info.delta &amp;&amp;\r\n","                              info.type === NavigationType.pop) {\r\n","                              routerHistory.go(<span class=\"code-number\">-1</span>, <span class=\"code-literal\">false</span>);\r\n","                          }\r\n","                      })\r\n","                          .catch(noop);\r\n","                      <span class=\"code-comment\">// avoid the then branch</span>\r\n","                      <span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Promise</span>.reject();\r\n","                  }\r\n","                  <span class=\"code-comment\">// do not restore history on unknown direction</span>\r\n","                  <span class=\"code-keyword\">if</span> (info.delta) {\r\n","                      routerHistory.go(-info.delta, <span class=\"code-literal\">false</span>);\r\n","                  }\r\n","                  <span class=\"code-comment\">// unrecognized error, transfer to the global handler</span>\r\n","                  <span class=\"code-keyword\">return</span> triggerError(error, toLocation, <span class=\"code-keyword\">from</span>);\r\n","              })\r\n","                  .then(<span class=\"code-function\">(<span class=\"code-params\">failure</span>) =&gt;</span> {\r\n","                  failure =\r\n","                      failure ||\r\n","                          finalizeNavigation(\r\n","                          <span class=\"code-comment\">// after navigation, all matched components are resolved</span>\r\n","                          toLocation, <span class=\"code-keyword\">from</span>, <span class=\"code-literal\">false</span>);\r\n","                  <span class=\"code-comment\">// revert the navigation</span>\r\n","                  <span class=\"code-keyword\">if</span> (failure) {\r\n","                      <span class=\"code-keyword\">if</span> (info.delta &amp;&amp;\r\n","                          <span class=\"code-comment\">// a new navigation has been triggered, so we do not want to revert, that will change the current history</span>\r\n","                          <span class=\"code-comment\">// entry while a different route is displayed</span>\r\n","                          !isNavigationFailure(failure, <span class=\"code-number\">8</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_CANCELLED */</span>)) {\r\n","                          routerHistory.go(-info.delta, <span class=\"code-literal\">false</span>);\r\n","                      }\r\n","                      <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (info.type === NavigationType.pop &amp;&amp;\r\n","                          isNavigationFailure(failure, <span class=\"code-number\">4</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_ABORTED */</span> | <span class=\"code-number\">16</span> <span class=\"code-comment\">/* ErrorTypes.NAVIGATION_DUPLICATED */</span>)) {\r\n","                          <span class=\"code-comment\">// manual change in hash history #916</span>\r\n","                          <span class=\"code-comment\">// it's like a push but lacks the information of the direction</span>\r\n","                          routerHistory.go(<span class=\"code-number\">-1</span>, <span class=\"code-literal\">false</span>);\r\n","                      }\r\n","                  }\r\n","                  triggerAfterEach(toLocation, <span class=\"code-keyword\">from</span>, failure);\r\n","              })\r\n","                  .catch(noop);\r\n","          });\r\n","      }\r\n","      <span class=\"code-comment\">// Initialization and Errors</span>\r\n","      <span class=\"code-keyword\">let</span> readyHandlers = useCallbacks();\r\n","      <span class=\"code-keyword\">let</span> errorHandlers = useCallbacks();\r\n","      <span class=\"code-keyword\">let</span> ready;\r\n","      <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">       * Trigger errorHandlers added via onError and throws the error as well\r\n</span>","<span class=\"code-comment\">       *\r\n</span>","<span class=\"code-comment\">       * @param error - error to throw\r\n</span>","<span class=\"code-comment\">       * @param to - location we were navigating to when the error happened\r\n</span>","<span class=\"code-comment\">       * @param from - location we were navigating from when the error happened\r\n</span>","<span class=\"code-comment\">       * @returns the error as a rejected promise\r\n</span>","<span class=\"code-comment\">       */</span>\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">triggerError</span>(<span class=\"code-params\">error, to, from</span>) </span>{\r\n","          markAsReady(error);\r\n","          <span class=\"code-keyword\">const</span> list = errorHandlers.list();\r\n","          <span class=\"code-keyword\">if</span> (list.length) {\r\n","              list.forEach(<span class=\"code-function\"><span class=\"code-params\">handler</span> =&gt;</span> handler(error, to, <span class=\"code-keyword\">from</span>));\r\n","          }\r\n","          <span class=\"code-keyword\">else</span> {\r\n","              {\r\n","                  warn(<span class=\"code-string\">'uncaught error during route navigation:'</span>);\r\n","              }\r\n","              <span class=\"code-built_in\">console</span>.error(error);\r\n","          }\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Promise</span>.reject(error);\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">isReady</span>(<span class=\"code-params\"></span>) </span>{\r\n","          <span class=\"code-keyword\">if</span> (ready &amp;&amp; currentRoute.value !== START_LOCATION_NORMALIZED)\r\n","              <span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Promise</span>.resolve();\r\n","          <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Promise</span>(<span class=\"code-function\">(<span class=\"code-params\">resolve, reject</span>) =&gt;</span> {\r\n","              readyHandlers.add([resolve, reject]);\r\n","          });\r\n","      }\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">markAsReady</span>(<span class=\"code-params\">err</span>) </span>{\r\n","          <span class=\"code-keyword\">if</span> (!ready) {\r\n","              <span class=\"code-comment\">// still not ready if an error happened</span>\r\n","              ready = !err;\r\n","              setupListeners();\r\n","              readyHandlers\r\n","                  .list()\r\n","                  .forEach(<span class=\"code-function\">(<span class=\"code-params\">[resolve, reject]</span>) =&gt;</span> (err ? reject(err) : resolve()));\r\n","              readyHandlers.reset();\r\n","          }\r\n","          <span class=\"code-keyword\">return</span> err;\r\n","      }\r\n","      <span class=\"code-comment\">// Scroll behavior</span>\r\n","      <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">handleScroll</span>(<span class=\"code-params\">to, from, isPush, isFirstNavigation</span>) </span>{\r\n","          <span class=\"code-keyword\">const</span> { scrollBehavior } = options;\r\n","          <span class=\"code-keyword\">if</span> (!isBrowser || !scrollBehavior)\r\n","              <span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Promise</span>.resolve();\r\n","          <span class=\"code-keyword\">const</span> scrollPosition = (!isPush &amp;&amp; getSavedScrollPosition(getScrollKey(to.fullPath, <span class=\"code-number\">0</span>))) ||\r\n","              ((isFirstNavigation || !isPush) &amp;&amp;\r\n","                  history.state &amp;&amp;\r\n","                  history.state.scroll) ||\r\n","              <span class=\"code-literal\">null</span>;\r\n","          <span class=\"code-keyword\">return</span> vue.nextTick()\r\n","              .then(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> scrollBehavior(to, <span class=\"code-keyword\">from</span>, scrollPosition))\r\n","              .then(<span class=\"code-function\"><span class=\"code-params\">position</span> =&gt;</span> position &amp;&amp; scrollToPosition(position))\r\n","              .catch(<span class=\"code-function\"><span class=\"code-params\">err</span> =&gt;</span> triggerError(err, to, <span class=\"code-keyword\">from</span>));\r\n","      }\r\n","      <span class=\"code-keyword\">const</span> go = <span class=\"code-function\">(<span class=\"code-params\">delta</span>) =&gt;</span> routerHistory.go(delta);\r\n","      <span class=\"code-keyword\">let</span> started;\r\n","      <span class=\"code-keyword\">const</span> installedApps = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Set</span>();\r\n","      <span class=\"code-keyword\">const</span> router = {\r\n","          currentRoute,\r\n","          listening: <span class=\"code-literal\">true</span>,\r\n","          addRoute,\r\n","          removeRoute,\r\n","          hasRoute,\r\n","          getRoutes,\r\n","          resolve,\r\n","          options,\r\n","          push,\r\n","          replace,\r\n","          go,\r\n","          back: <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> go(<span class=\"code-number\">-1</span>),\r\n","          forward: <span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> go(<span class=\"code-number\">1</span>),\r\n","          beforeEach: beforeGuards.add,\r\n","          beforeResolve: beforeResolveGuards.add,\r\n","          afterEach: afterGuards.add,\r\n","          onError: errorHandlers.add,\r\n","          isReady,\r\n","          install(app) {\r\n","              <span class=\"code-keyword\">const</span> router = <span class=\"code-keyword\">this</span>;\r\n","              app.component(<span class=\"code-string\">'RouterLink'</span>, RouterLink);\r\n","              app.component(<span class=\"code-string\">'RouterView'</span>, RouterView);\r\n","              app.config.globalProperties.$router = router;\r\n","              <span class=\"code-built_in\">Object</span>.defineProperty(app.config.globalProperties, <span class=\"code-string\">'$route'</span>, {\r\n","                  enumerable: <span class=\"code-literal\">true</span>,\r\n","                  <span class=\"code-keyword\">get</span>: () =&gt; vue.unref(currentRoute),\r\n","              });\r\n","              // this initial navigation is only necessary on client, on server it doesn't\r\n","              // make sense because it will create an extra unnecessary navigation and could\r\n","              // lead to problems\r\n","              if (isBrowser &amp;&amp;\r\n","                  // used for the initial navigation client side to avoid pushing\r\n","                  // multiple times when the router is used in multiple apps\r\n","                  !started &amp;&amp;\r\n","                  currentRoute.value === START_LOCATION_NORMALIZED) {\r\n","                  <span class=\"code-comment\">// see above</span>\r\n","                  started = <span class=\"code-literal\">true</span>;\r\n","                  push(routerHistory.location).catch(<span class=\"code-function\"><span class=\"code-params\">err</span> =&gt;</span> {\r\n","                      warn(<span class=\"code-string\">'Unexpected error when starting the router:'</span>, err);\r\n","                  });\r\n","              }\r\n","              <span class=\"code-keyword\">const</span> reactiveRoute = {};\r\n","              <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">const</span> key <span class=\"code-keyword\">in</span> START_LOCATION_NORMALIZED) {\r\n","                  <span class=\"code-comment\">// @ts-expect-error: the key matches</span>\r\n","                  reactiveRoute[key] = vue.computed(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> currentRoute.value[key]);\r\n","              }\r\n","              app.provide(routerKey, router);\r\n","              app.provide(routeLocationKey, vue.reactive(reactiveRoute));\r\n","              app.provide(routerViewLocationKey, currentRoute);\r\n","              <span class=\"code-keyword\">const</span> unmountApp = app.unmount;\r\n","              installedApps.add(app);\r\n","              app.unmount = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\r\n","                  installedApps.delete(app);\r\n","                  <span class=\"code-comment\">// the router is not attached to an app anymore</span>\r\n","                  <span class=\"code-keyword\">if</span> (installedApps.size &lt; <span class=\"code-number\">1</span>) {\r\n","                      <span class=\"code-comment\">// invalidate the current navigation</span>\r\n","                      pendingLocation = START_LOCATION_NORMALIZED;\r\n","                      removeHistoryListener &amp;&amp; removeHistoryListener();\r\n","                      removeHistoryListener = <span class=\"code-literal\">null</span>;\r\n","                      currentRoute.value = START_LOCATION_NORMALIZED;\r\n","                      started = <span class=\"code-literal\">false</span>;\r\n","                      ready = <span class=\"code-literal\">false</span>;\r\n","                  }\r\n","                  unmountApp();\r\n","              };\r\n","              <span class=\"code-comment\">// <span class=\"code-doctag\">TODO:</span> this probably needs to be updated so it can be used by vue-termui</span>\r\n","              <span class=\"code-keyword\">if</span> (isBrowser) {\r\n","                  addDevtools(app, router, matcher);\r\n","              }\r\n","          },\r\n","      };\r\n","      <span class=\"code-keyword\">return</span> router;\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">runGuardQueue</span>(<span class=\"code-params\">guards</span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> guards.reduce(<span class=\"code-function\">(<span class=\"code-params\">promise, guard</span>) =&gt;</span> promise.then(<span class=\"code-function\"><span class=\"code-params\">()</span> =&gt;</span> guard()), <span class=\"code-built_in\">Promise</span>.resolve());\r\n","  }\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">extractChangingRecords</span>(<span class=\"code-params\">to, from</span>) </span>{\r\n","      <span class=\"code-keyword\">const</span> leavingRecords = [];\r\n","      <span class=\"code-keyword\">const</span> updatingRecords = [];\r\n","      <span class=\"code-keyword\">const</span> enteringRecords = [];\r\n","      <span class=\"code-keyword\">const</span> len = <span class=\"code-built_in\">Math</span>.max(<span class=\"code-keyword\">from</span>.matched.length, to.matched.length);\r\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">let</span> i = <span class=\"code-number\">0</span>; i &lt; len; i++) {\r\n","          <span class=\"code-keyword\">const</span> recordFrom = <span class=\"code-keyword\">from</span>.matched[i];\r\n","          <span class=\"code-keyword\">if</span> (recordFrom) {\r\n","              <span class=\"code-keyword\">if</span> (to.matched.find(<span class=\"code-function\"><span class=\"code-params\">record</span> =&gt;</span> isSameRouteRecord(record, recordFrom)))\r\n","                  updatingRecords.push(recordFrom);\r\n","              <span class=\"code-keyword\">else</span>\r\n","                  leavingRecords.push(recordFrom);\r\n","          }\r\n","          <span class=\"code-keyword\">const</span> recordTo = to.matched[i];\r\n","          <span class=\"code-keyword\">if</span> (recordTo) {\r\n","              <span class=\"code-comment\">// the type doesn't matter because we are comparing per reference</span>\r\n","              <span class=\"code-keyword\">if</span> (!<span class=\"code-keyword\">from</span>.matched.find(<span class=\"code-function\"><span class=\"code-params\">record</span> =&gt;</span> isSameRouteRecord(record, recordTo))) {\r\n","                  enteringRecords.push(recordTo);\r\n","              }\r\n","          }\r\n","      }\r\n","      <span class=\"code-keyword\">return</span> [leavingRecords, updatingRecords, enteringRecords];\r\n","  }\n","\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Returns the router instance. Equivalent to using `$router` inside\r\n</span>","<span class=\"code-comment\">   * templates.\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">useRouter</span>(<span class=\"code-params\"></span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> vue.inject(routerKey);\r\n","  }\r\n","  <span class=\"code-comment\">/**\r\n</span>","<span class=\"code-comment\">   * Returns the current route location. Equivalent to using `$route` inside\r\n</span>","<span class=\"code-comment\">   * templates.\r\n</span>","<span class=\"code-comment\">   */</span>\r\n","  <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">useRoute</span>(<span class=\"code-params\"></span>) </span>{\r\n","      <span class=\"code-keyword\">return</span> vue.inject(routeLocationKey);\r\n","  }\n","\n","  exports.RouterLink = RouterLink;\n","  exports.RouterView = RouterView;\n","  exports.START_LOCATION = START_LOCATION_NORMALIZED;\n","  exports.createMemoryHistory = createMemoryHistory;\n","  exports.createRouter = createRouter;\n","  exports.createRouterMatcher = createRouterMatcher;\n","  exports.createWebHashHistory = createWebHashHistory;\n","  exports.createWebHistory = createWebHistory;\n","  exports.isNavigationFailure = isNavigationFailure;\n","  exports.loadRouteLocation = loadRouteLocation;\n","  exports.matchedRouteKey = matchedRouteKey;\n","  exports.onBeforeRouteLeave = onBeforeRouteLeave;\n","  exports.onBeforeRouteUpdate = onBeforeRouteUpdate;\n","  exports.parseQuery = parseQuery;\n","  exports.routeLocationKey = routeLocationKey;\n","  exports.routerKey = routerKey;\n","  exports.routerViewLocationKey = routerViewLocationKey;\n","  exports.stringifyQuery = stringifyQuery;\n","  exports.useLink = useLink;\n","  exports.useRoute = useRoute;\n","  exports.useRouter = useRouter;\n","  exports.viewDepthKey = viewDepthKey;\n","\n","  <span class=\"code-built_in\">Object</span>.defineProperty(exports, <span class=\"code-string\">'__esModule'</span>, { <span class=\"code-attr\">value</span>: <span class=\"code-literal\">true</span> });\n","\n","  <span class=\"code-keyword\">return</span> exports;\n","\n","})({}, Vue);\n",""]}}}</script></head><body><div id="root"><style data-emotion-css="gtfibm">html{box-sizing:border-box;}*,*:before,*:after{box-sizing:inherit;}html,body,#root{height:100%;margin:0;}body{font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;font-size:16px;line-height:1.5;overflow-wrap:break-word;background:white;color:black;}code{font-family:Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace;}th,td{padding:0;}select{font-size:inherit;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><style data-emotion-css="1r6h1r6">.code-listing{background:#fbfdff;color:#383a42;}.code-comment,.code-quote{color:#a0a1a7;font-style:italic;}.code-doctag,.code-keyword,.code-link,.code-formula{color:#a626a4;}.code-section,.code-name,.code-selector-tag,.code-deletion,.code-subst{color:#e45649;}.code-literal{color:#0184bb;}.code-string,.code-regexp,.code-addition,.code-attribute,.code-meta-string{color:#50a14f;}.code-built_in,.code-class .code-title{color:#c18401;}.code-attr,.code-variable,.code-template-variable,.code-type,.code-selector-class,.code-selector-attr,.code-selector-pseudo,.code-number{color:#986801;}.code-symbol,.code-bullet,.code-meta,.code-selector-id,.code-title{color:#4078f2;}.code-emphasis{font-style:italic;}.code-strong{font-weight:bold;}</style><style data-emotion-css="1c3h18e">.css-1c3h18e{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;}</style><div class="css-1c3h18e"><style data-emotion-css="1cfuj1t">.css-1cfuj1t{max-width:940px;padding:0 20px;margin:0 auto;}</style><div class="css-1cfuj1t"><style data-emotion-css="i51og3">.css-i51og3{margin-top:2rem;}</style><header class="css-i51og3"><style data-emotion-css="1y7u1xh">.css-1y7u1xh{text-align:center;font-size:3rem;-webkit-letter-spacing:0.05em;-moz-letter-spacing:0.05em;-ms-letter-spacing:0.05em;letter-spacing:0.05em;}</style><h1 class="css-1y7u1xh"><style data-emotion-css="1ydg16i">.css-1ydg16i{color:#000;-webkit-text-decoration:none;text-decoration:none;}</style><a href="/" class="css-1ydg16i">UNPKG</a></h1></header></div><div class="css-1cfuj1t"><style data-emotion-css="93o42g">.css-93o42g{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (max-width:700px){.css-93o42g{-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}</style><header class="css-93o42g"><style data-emotion-css="1dlpvgi">.css-1dlpvgi{font-size:1.5rem;font-weight:normal;-webkit-flex:1;-ms-flex:1;flex:1;word-break:break-all;}</style><h1 class="css-1dlpvgi"><nav><style data-emotion-css="xt128v">.css-xt128v{color:#0076ff;-webkit-text-decoration:none;text-decoration:none;}.css-xt128v:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="/browse/vue-router@4.1.6/" class="css-xt128v">vue-router</a><style data-emotion-css="lllnmq">.css-lllnmq{padding-left:5px;padding-right:5px;}</style><span class="css-lllnmq">/</span><a href="/browse/vue-router@4.1.6/dist/" class="css-xt128v">dist</a><span class="css-lllnmq">/</span><strong>vue-router.global.js</strong></nav></h1><style data-emotion-css="1nr3dab">.css-1nr3dab{margin-left:20px;}@media (max-width:700px){.css-1nr3dab{margin-left:0;margin-bottom:0;}}</style><p class="css-1nr3dab"><label>Version:<!-- --> <style data-emotion-css="un3bt6">.css-un3bt6{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;padding:4px 24px 4px 8px;font-weight:600;font-size:0.9em;color:#24292e;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-color:#eff3f6;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAAAXNSR0IArs4c6QAAARFJREFUKBVjZAACNS39RhBNKrh17WI9o4quoT3Dn78HSNUMUs/CzOTI/O7Vi4dCYpJ3/jP+92BkYGAlyiBGhm8MjIxJt65e3MQM0vDu9YvLYmISILYZELOBxHABRkaGr0yMzF23r12YDFIDNgDEePv65SEhEXENBkYGFSAXuyGMjF8Z/jOsvX3tYiFIDwgwQSgIaaijnvj/P8M5IO8HsjiY/f//D4b//88A1SQhywG9jQr09PS4v/1mPAeUUPzP8B8cJowMjL+Bqu6xMQmaXL164AuyDgwDQJLa2qYSP//9vARkCoMVMzK8YeVkNbh+9uxzMB+JwGoASF5Vx0jz/98/18BqmZi171w9D2EjaaYKEwAEK00XQLdJuwAAAABJRU5ErkJggg==);background-position:right 8px center;background-repeat:no-repeat;background-size:auto 25%;}.css-un3bt6:hover{background-color:#e6ebf1;border-color:rgba(27,31,35,.35);}.css-un3bt6:active{background-color:#e9ecef;border-color:rgba(27,31,35,.35);box-shadow:inset 0 0.15em 0.3em rgba(27,31,35,.15);}</style><select name="version" class="css-un3bt6"><option value="0.4.0">0.4.0</option><option value="0.5.0">0.5.0</option><option value="0.5.1">0.5.1</option><option value="0.5.2">0.5.2</option><option value="0.6.0">0.6.0</option><option value="0.6.1">0.6.1</option><option value="0.6.2">0.6.2</option><option value="0.7.0">0.7.0</option><option value="0.7.1">0.7.1</option><option value="0.7.2">0.7.2</option><option value="0.7.3">0.7.3</option><option value="0.7.4">0.7.4</option><option value="0.7.5">0.7.5</option><option value="0.7.6">0.7.6</option><option value="0.7.7">0.7.7</option><option value="0.7.8">0.7.8</option><option value="0.7.9">0.7.9</option><option value="0.7.10">0.7.10</option><option value="0.7.11">0.7.11</option><option value="0.7.12">0.7.12</option><option value="0.7.13">0.7.13</option><option value="2.0.0-beta.1">2.0.0-beta.1</option><option value="2.0.0-beta.2">2.0.0-beta.2</option><option value="2.0.0-beta.3">2.0.0-beta.3</option><option value="2.0.0-beta.4">2.0.0-beta.4</option><option value="2.0.0-rc.1">2.0.0-rc.1</option><option value="2.0.0-rc.2">2.0.0-rc.2</option><option value="2.0.0-rc.3">2.0.0-rc.3</option><option value="2.0.0-rc.4">2.0.0-rc.4</option><option value="2.0.0-rc.5">2.0.0-rc.5</option><option value="2.0.0-rc.6">2.0.0-rc.6</option><option value="2.0.0-rc.7">2.0.0-rc.7</option><option value="2.0.0">2.0.0</option><option value="2.0.1">2.0.1</option><option value="2.0.2">2.0.2</option><option value="2.0.3">2.0.3</option><option value="2.1.0">2.1.0</option><option value="2.1.1">2.1.1</option><option value="2.1.2">2.1.2</option><option value="2.1.3">2.1.3</option><option value="2.2.0">2.2.0</option><option value="2.2.1">2.2.1</option><option value="2.3.0">2.3.0</option><option value="2.3.1">2.3.1</option><option value="2.4.0">2.4.0</option><option value="2.5.0">2.5.0</option><option value="2.5.1">2.5.1</option><option value="2.5.2">2.5.2</option><option value="2.5.3">2.5.3</option><option value="2.6.0">2.6.0</option><option value="2.7.0">2.7.0</option><option value="2.8.0">2.8.0</option><option value="2.8.1">2.8.1</option><option value="3.0.0">3.0.0</option><option value="3.0.1">3.0.1</option><option value="3.0.2">3.0.2</option><option value="3.0.3">3.0.3</option><option value="3.0.4">3.0.4</option><option value="3.0.5">3.0.5</option><option value="3.0.6">3.0.6</option><option value="3.0.7">3.0.7</option><option value="3.1.0">3.1.0</option><option value="3.1.1">3.1.1</option><option value="3.1.2">3.1.2</option><option value="3.1.3">3.1.3</option><option value="3.1.4">3.1.4</option><option value="3.1.5">3.1.5</option><option value="3.1.6">3.1.6</option><option value="3.2.0">3.2.0</option><option value="3.3.0">3.3.0</option><option value="3.3.1">3.3.1</option><option value="3.3.2">3.3.2</option><option value="3.3.3">3.3.3</option><option value="3.3.4">3.3.4</option><option value="3.4.0">3.4.0</option><option value="3.4.1">3.4.1</option><option value="3.4.2">3.4.2</option><option value="3.4.3">3.4.3</option><option value="3.4.4">3.4.4</option><option value="3.4.5">3.4.5</option><option value="3.4.6">3.4.6</option><option value="3.4.7">3.4.7</option><option value="3.4.8">3.4.8</option><option value="3.4.9">3.4.9</option><option value="3.5.0">3.5.0</option><option value="3.5.1">3.5.1</option><option value="3.5.2">3.5.2</option><option value="3.5.3">3.5.3</option><option value="3.5.4">3.5.4</option><option value="3.6.0">3.6.0</option><option value="3.6.1">3.6.1</option><option value="3.6.2">3.6.2</option><option value="3.6.3">3.6.3</option><option value="3.6.4">3.6.4</option><option value="3.6.5">3.6.5</option><option value="4.0.0-329e962">4.0.0-329e962</option><option value="4.0.0-alpha.0">4.0.0-alpha.0</option><option value="4.0.0-alpha.1">4.0.0-alpha.1</option><option value="4.0.0-alpha.2">4.0.0-alpha.2</option><option value="4.0.0-alpha.3">4.0.0-alpha.3</option><option value="4.0.0-alpha.4">4.0.0-alpha.4</option><option value="4.0.0-alpha.5">4.0.0-alpha.5</option><option value="4.0.0-alpha.6">4.0.0-alpha.6</option><option value="4.0.0-alpha.7">4.0.0-alpha.7</option><option value="4.0.0-alpha.8">4.0.0-alpha.8</option><option value="4.0.0-alpha.9">4.0.0-alpha.9</option><option value="4.0.0-alpha.10">4.0.0-alpha.10</option><option value="4.0.0-alpha.11">4.0.0-alpha.11</option><option value="4.0.0-alpha.12">4.0.0-alpha.12</option><option value="4.0.0-alpha.13">4.0.0-alpha.13</option><option value="4.0.0-alpha.14">4.0.0-alpha.14</option><option value="4.0.0-beta.1">4.0.0-beta.1</option><option value="4.0.0-beta.2">4.0.0-beta.2</option><option value="4.0.0-beta.3">4.0.0-beta.3</option><option value="4.0.0-beta.4">4.0.0-beta.4</option><option value="4.0.0-beta.5">4.0.0-beta.5</option><option value="4.0.0-beta.6">4.0.0-beta.6</option><option value="4.0.0-beta.7">4.0.0-beta.7</option><option value="4.0.0-beta.8">4.0.0-beta.8</option><option value="4.0.0-beta.9">4.0.0-beta.9</option><option value="4.0.0-beta.10">4.0.0-beta.10</option><option value="4.0.0-beta.11">4.0.0-beta.11</option><option value="4.0.0-beta.12">4.0.0-beta.12</option><option value="4.0.0-beta.13">4.0.0-beta.13</option><option value="4.0.0-rc.1">4.0.0-rc.1</option><option value="4.0.0-rc.2">4.0.0-rc.2</option><option value="4.0.0-rc.3">4.0.0-rc.3</option><option value="4.0.0-rc.4">4.0.0-rc.4</option><option value="4.0.0-rc.5">4.0.0-rc.5</option><option value="4.0.0-rc.6">4.0.0-rc.6</option><option value="4.0.0">4.0.0</option><option value="4.0.1">4.0.1</option><option value="4.0.2">4.0.2</option><option value="4.0.3">4.0.3</option><option value="4.0.4">4.0.4</option><option value="4.0.5">4.0.5</option><option value="4.0.6">4.0.6</option><option value="4.0.7">4.0.7</option><option value="4.0.8">4.0.8</option><option value="4.0.9">4.0.9</option><option value="4.0.10">4.0.10</option><option value="4.0.11">4.0.11</option><option value="4.0.12">4.0.12</option><option value="4.0.13">4.0.13</option><option value="4.0.14">4.0.14</option><option value="4.0.15">4.0.15</option><option value="4.0.16">4.0.16</option><option value="4.1.0-4da5e55">4.1.0-4da5e55</option><option value="4.1.0-51021cc">4.1.0-51021cc</option><option value="4.1.0-730eb15">4.1.0-730eb15</option><option value="4.1.0-9e62c00">4.1.0-9e62c00</option><option value="4.1.0-aabe509">4.1.0-aabe509</option><option value="4.1.0-beta.0">4.1.0-beta.0</option><option value="4.1.0-beta.1">4.1.0-beta.1</option><option value="4.1.0-beta.2">4.1.0-beta.2</option><option value="4.1.0-c113369">4.1.0-c113369</option><option value="4.1.0">4.1.0</option><option value="4.1.1">4.1.1</option><option value="4.1.2">4.1.2</option><option value="4.1.3">4.1.3</option><option value="4.1.4">4.1.4</option><option value="4.1.5">4.1.5</option><option selected="" value="4.1.6">4.1.6</option></select></label></p></header></div><style data-emotion-css="107j3ms">.css-107j3ms{max-width:940px;padding:0 20px;margin:0 auto;}@media (max-width:700px){.css-107j3ms{padding:0;margin:0;}}</style><div class="css-107j3ms"><style data-emotion-css="q3frg4">.css-q3frg4{border:1px solid #dfe2e5;border-radius:3px;}@media (max-width:700px){.css-q3frg4{border-right-width:0;border-left-width:0;}}</style><div class="css-q3frg4"><style data-emotion-css="10o5omr">.css-10o5omr{padding:10px;background:#f6f8fa;color:#424242;border:1px solid #d1d5da;border-top-left-radius:3px;border-top-right-radius:3px;margin:-1px -1px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}@media (max-width:700px){.css-10o5omr{padding-right:20px;padding-left:20px;}}</style><div class="css-10o5omr"><span>160 kB</span><span>JavaScript</span><span><style data-emotion-css="18x593j">.css-18x593j{display:inline-block;margin-left:8px;padding:2px 8px;-webkit-text-decoration:none;text-decoration:none;font-weight:600;font-size:0.9rem;color:#24292e;background-color:#eff3f6;border:1px solid rgba(27,31,35,.2);border-radius:3px;}.css-18x593j:hover{background-color:#e6ebf1;border-color:rgba(27,31,35,.35);}.css-18x593j:active{background-color:#e9ecef;border-color:rgba(27,31,35,.35);box-shadow:inset 0 0.15em 0.3em rgba(27,31,35,.15);}</style><a href="/vue-router@4.1.6/dist/vue-router.global.js" class="css-18x593j">View Raw</a></span></div><style data-emotion-css="1i31ihw">.css-1i31ihw{overflow-x:auto;overflow-y:hidden;padding-top:5px;padding-bottom:5px;}</style><div class="code-listing css-1i31ihw"><style data-emotion-css="173nir8">.css-173nir8{border:none;border-collapse:collapse;border-spacing:0;}</style><table class="css-173nir8"><tbody><tr><style data-emotion-css="a4x74f">.css-a4x74f{padding-left:10px;padding-right:10px;color:rgba(27,31,35,.3);text-align:right;vertical-align:top;width:1%;min-width:50px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><td id="L1" class="css-a4x74f"><span>1</span></td><style data-emotion-css="1dcdqdg">.css-1dcdqdg{padding-left:10px;padding-right:10px;color:#24292e;white-space:pre;}</style><td id="LC1" class="css-1dcdqdg"><code><span class="code-comment">/*!
</span></code></td></tr><tr><td id="L2" class="css-a4x74f"><span>2</span></td><td id="LC2" class="css-1dcdqdg"><code><span class="code-comment">  * vue-router v4.1.6
</span></code></td></tr><tr><td id="L3" class="css-a4x74f"><span>3</span></td><td id="LC3" class="css-1dcdqdg"><code><span class="code-comment">  * (c) 2022 Eduardo San Martin Morote
</span></code></td></tr><tr><td id="L4" class="css-a4x74f"><span>4</span></td><td id="LC4" class="css-1dcdqdg"><code><span class="code-comment">  * @license MIT
</span></code></td></tr><tr><td id="L5" class="css-a4x74f"><span>5</span></td><td id="LC5" class="css-1dcdqdg"><code><span class="code-comment">  */</span>
</code></td></tr><tr><td id="L6" class="css-a4x74f"><span>6</span></td><td id="LC6" class="css-1dcdqdg"><code><span class="code-keyword">var</span> VueRouter = (<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">exports, vue</span>) </span>{
</code></td></tr><tr><td id="L7" class="css-a4x74f"><span>7</span></td><td id="LC7" class="css-1dcdqdg"><code><span class="code-meta">  'use strict'</span>;
</code></td></tr><tr><td id="L8" class="css-a4x74f"><span>8</span></td><td id="LC8" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L9" class="css-a4x74f"><span>9</span></td><td id="LC9" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> isBrowser = <span class="code-keyword">typeof</span> <span class="code-built_in">window</span> !== <span class="code-string">'undefined'</span>;
</code></td></tr><tr><td id="L10" class="css-a4x74f"><span>10</span></td><td id="LC10" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L11" class="css-a4x74f"><span>11</span></td><td id="LC11" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isESModule</span>(<span class="code-params">obj</span>) </span>{
</code></td></tr><tr><td id="L12" class="css-a4x74f"><span>12</span></td><td id="LC12" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> obj.__esModule || obj[<span class="code-built_in">Symbol</span>.toStringTag] === <span class="code-string">'Module'</span>;
</code></td></tr><tr><td id="L13" class="css-a4x74f"><span>13</span></td><td id="LC13" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L14" class="css-a4x74f"><span>14</span></td><td id="LC14" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> assign = <span class="code-built_in">Object</span>.assign;
</code></td></tr><tr><td id="L15" class="css-a4x74f"><span>15</span></td><td id="LC15" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">applyToParams</span>(<span class="code-params">fn, params</span>) </span>{
</code></td></tr><tr><td id="L16" class="css-a4x74f"><span>16</span></td><td id="LC16" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> newParams = {};
</code></td></tr><tr><td id="L17" class="css-a4x74f"><span>17</span></td><td id="LC17" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">const</span> key <span class="code-keyword">in</span> params) {
</code></td></tr><tr><td id="L18" class="css-a4x74f"><span>18</span></td><td id="LC18" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> value = params[key];
</code></td></tr><tr><td id="L19" class="css-a4x74f"><span>19</span></td><td id="LC19" class="css-1dcdqdg"><code>          newParams[key] = isArray(value)
</code></td></tr><tr><td id="L20" class="css-a4x74f"><span>20</span></td><td id="LC20" class="css-1dcdqdg"><code>              ? value.map(fn)
</code></td></tr><tr><td id="L21" class="css-a4x74f"><span>21</span></td><td id="LC21" class="css-1dcdqdg"><code>              : fn(value);
</code></td></tr><tr><td id="L22" class="css-a4x74f"><span>22</span></td><td id="LC22" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L23" class="css-a4x74f"><span>23</span></td><td id="LC23" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> newParams;
</code></td></tr><tr><td id="L24" class="css-a4x74f"><span>24</span></td><td id="LC24" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L25" class="css-a4x74f"><span>25</span></td><td id="LC25" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> noop = <span class="code-function"><span class="code-params">()</span> =&gt;</span> { };
</code></td></tr><tr><td id="L26" class="css-a4x74f"><span>26</span></td><td id="LC26" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L27" class="css-a4x74f"><span>27</span></td><td id="LC27" class="css-1dcdqdg"><code><span class="code-comment">   * Typesafe alternative to Array.isArray
</span></code></td></tr><tr><td id="L28" class="css-a4x74f"><span>28</span></td><td id="LC28" class="css-1dcdqdg"><code><span class="code-comment">   * https://github.com/microsoft/TypeScript/pull/48228
</span></code></td></tr><tr><td id="L29" class="css-a4x74f"><span>29</span></td><td id="LC29" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L30" class="css-a4x74f"><span>30</span></td><td id="LC30" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> isArray = <span class="code-built_in">Array</span>.isArray;
</code></td></tr><tr><td id="L31" class="css-a4x74f"><span>31</span></td><td id="LC31" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L32" class="css-a4x74f"><span>32</span></td><td id="LC32" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">warn</span>(<span class="code-params">msg</span>) </span>{
</code></td></tr><tr><td id="L33" class="css-a4x74f"><span>33</span></td><td id="LC33" class="css-1dcdqdg"><code>      <span class="code-comment">// avoid using ...args as it breaks in older Edge builds</span>
</code></td></tr><tr><td id="L34" class="css-a4x74f"><span>34</span></td><td id="LC34" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> args = <span class="code-built_in">Array</span>.from(<span class="code-built_in">arguments</span>).slice(<span class="code-number">1</span>);
</code></td></tr><tr><td id="L35" class="css-a4x74f"><span>35</span></td><td id="LC35" class="css-1dcdqdg"><code>      <span class="code-built_in">console</span>.warn.apply(<span class="code-built_in">console</span>, [<span class="code-string">'[Vue Router warn]: '</span> + msg].concat(args));
</code></td></tr><tr><td id="L36" class="css-a4x74f"><span>36</span></td><td id="LC36" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L37" class="css-a4x74f"><span>37</span></td><td id="LC37" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L38" class="css-a4x74f"><span>38</span></td><td id="LC38" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> TRAILING_SLASH_RE = <span class="code-regexp">/\/$/</span>;
</code></td></tr><tr><td id="L39" class="css-a4x74f"><span>39</span></td><td id="LC39" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> removeTrailingSlash = <span class="code-function">(<span class="code-params">path</span>) =&gt;</span> path.replace(TRAILING_SLASH_RE, <span class="code-string">''</span>);
</code></td></tr><tr><td id="L40" class="css-a4x74f"><span>40</span></td><td id="LC40" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L41" class="css-a4x74f"><span>41</span></td><td id="LC41" class="css-1dcdqdg"><code><span class="code-comment">   * Transforms a URI into a normalized history location
</span></code></td></tr><tr><td id="L42" class="css-a4x74f"><span>42</span></td><td id="LC42" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L43" class="css-a4x74f"><span>43</span></td><td id="LC43" class="css-1dcdqdg"><code><span class="code-comment">   * @param parseQuery
</span></code></td></tr><tr><td id="L44" class="css-a4x74f"><span>44</span></td><td id="LC44" class="css-1dcdqdg"><code><span class="code-comment">   * @param location - URI to normalize
</span></code></td></tr><tr><td id="L45" class="css-a4x74f"><span>45</span></td><td id="LC45" class="css-1dcdqdg"><code><span class="code-comment">   * @param currentLocation - current absolute location. Allows resolving relative
</span></code></td></tr><tr><td id="L46" class="css-a4x74f"><span>46</span></td><td id="LC46" class="css-1dcdqdg"><code><span class="code-comment">   * paths. Must start with `/`. Defaults to `/`
</span></code></td></tr><tr><td id="L47" class="css-a4x74f"><span>47</span></td><td id="LC47" class="css-1dcdqdg"><code><span class="code-comment">   * @returns a normalized history location
</span></code></td></tr><tr><td id="L48" class="css-a4x74f"><span>48</span></td><td id="LC48" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L49" class="css-a4x74f"><span>49</span></td><td id="LC49" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">parseURL</span>(<span class="code-params">parseQuery, location, currentLocation = <span class="code-string">'/'</span></span>) </span>{
</code></td></tr><tr><td id="L50" class="css-a4x74f"><span>50</span></td><td id="LC50" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> path, query = {}, searchString = <span class="code-string">''</span>, hash = <span class="code-string">''</span>;
</code></td></tr><tr><td id="L51" class="css-a4x74f"><span>51</span></td><td id="LC51" class="css-1dcdqdg"><code>      <span class="code-comment">// Could use URL and URLSearchParams but IE 11 doesn't support it</span>
</code></td></tr><tr><td id="L52" class="css-a4x74f"><span>52</span></td><td id="LC52" class="css-1dcdqdg"><code>      <span class="code-comment">// <span class="code-doctag">TODO:</span> move to new URL()</span>
</code></td></tr><tr><td id="L53" class="css-a4x74f"><span>53</span></td><td id="LC53" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> hashPos = location.indexOf(<span class="code-string">'#'</span>);
</code></td></tr><tr><td id="L54" class="css-a4x74f"><span>54</span></td><td id="LC54" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> searchPos = location.indexOf(<span class="code-string">'?'</span>);
</code></td></tr><tr><td id="L55" class="css-a4x74f"><span>55</span></td><td id="LC55" class="css-1dcdqdg"><code>      <span class="code-comment">// the hash appears before the search, so it's not part of the search string</span>
</code></td></tr><tr><td id="L56" class="css-a4x74f"><span>56</span></td><td id="LC56" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (hashPos &lt; searchPos &amp;&amp; hashPos &gt;= <span class="code-number">0</span>) {
</code></td></tr><tr><td id="L57" class="css-a4x74f"><span>57</span></td><td id="LC57" class="css-1dcdqdg"><code>          searchPos = <span class="code-number">-1</span>;
</code></td></tr><tr><td id="L58" class="css-a4x74f"><span>58</span></td><td id="LC58" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L59" class="css-a4x74f"><span>59</span></td><td id="LC59" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (searchPos &gt; <span class="code-number">-1</span>) {
</code></td></tr><tr><td id="L60" class="css-a4x74f"><span>60</span></td><td id="LC60" class="css-1dcdqdg"><code>          path = location.slice(<span class="code-number">0</span>, searchPos);
</code></td></tr><tr><td id="L61" class="css-a4x74f"><span>61</span></td><td id="LC61" class="css-1dcdqdg"><code>          searchString = location.slice(searchPos + <span class="code-number">1</span>, hashPos &gt; <span class="code-number">-1</span> ? hashPos : location.length);
</code></td></tr><tr><td id="L62" class="css-a4x74f"><span>62</span></td><td id="LC62" class="css-1dcdqdg"><code>          query = parseQuery(searchString);
</code></td></tr><tr><td id="L63" class="css-a4x74f"><span>63</span></td><td id="LC63" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L64" class="css-a4x74f"><span>64</span></td><td id="LC64" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (hashPos &gt; <span class="code-number">-1</span>) {
</code></td></tr><tr><td id="L65" class="css-a4x74f"><span>65</span></td><td id="LC65" class="css-1dcdqdg"><code>          path = path || location.slice(<span class="code-number">0</span>, hashPos);
</code></td></tr><tr><td id="L66" class="css-a4x74f"><span>66</span></td><td id="LC66" class="css-1dcdqdg"><code>          <span class="code-comment">// keep the # character</span>
</code></td></tr><tr><td id="L67" class="css-a4x74f"><span>67</span></td><td id="LC67" class="css-1dcdqdg"><code>          hash = location.slice(hashPos, location.length);
</code></td></tr><tr><td id="L68" class="css-a4x74f"><span>68</span></td><td id="LC68" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L69" class="css-a4x74f"><span>69</span></td><td id="LC69" class="css-1dcdqdg"><code>      <span class="code-comment">// no search and no query</span>
</code></td></tr><tr><td id="L70" class="css-a4x74f"><span>70</span></td><td id="LC70" class="css-1dcdqdg"><code>      path = resolveRelativePath(path != <span class="code-literal">null</span> ? path : location, currentLocation);
</code></td></tr><tr><td id="L71" class="css-a4x74f"><span>71</span></td><td id="LC71" class="css-1dcdqdg"><code>      <span class="code-comment">// empty path means a relative query or hash `?foo=f`, `#thing`</span>
</code></td></tr><tr><td id="L72" class="css-a4x74f"><span>72</span></td><td id="LC72" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> {
</code></td></tr><tr><td id="L73" class="css-a4x74f"><span>73</span></td><td id="LC73" class="css-1dcdqdg"><code>          fullPath: path + (searchString &amp;&amp; <span class="code-string">'?'</span>) + searchString + hash,
</code></td></tr><tr><td id="L74" class="css-a4x74f"><span>74</span></td><td id="LC74" class="css-1dcdqdg"><code>          path,
</code></td></tr><tr><td id="L75" class="css-a4x74f"><span>75</span></td><td id="LC75" class="css-1dcdqdg"><code>          query,
</code></td></tr><tr><td id="L76" class="css-a4x74f"><span>76</span></td><td id="LC76" class="css-1dcdqdg"><code>          hash,
</code></td></tr><tr><td id="L77" class="css-a4x74f"><span>77</span></td><td id="LC77" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L78" class="css-a4x74f"><span>78</span></td><td id="LC78" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L79" class="css-a4x74f"><span>79</span></td><td id="LC79" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L80" class="css-a4x74f"><span>80</span></td><td id="LC80" class="css-1dcdqdg"><code><span class="code-comment">   * Stringifies a URL object
</span></code></td></tr><tr><td id="L81" class="css-a4x74f"><span>81</span></td><td id="LC81" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L82" class="css-a4x74f"><span>82</span></td><td id="LC82" class="css-1dcdqdg"><code><span class="code-comment">   * @param stringifyQuery
</span></code></td></tr><tr><td id="L83" class="css-a4x74f"><span>83</span></td><td id="LC83" class="css-1dcdqdg"><code><span class="code-comment">   * @param location
</span></code></td></tr><tr><td id="L84" class="css-a4x74f"><span>84</span></td><td id="LC84" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L85" class="css-a4x74f"><span>85</span></td><td id="LC85" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">stringifyURL</span>(<span class="code-params">stringifyQuery, location</span>) </span>{
</code></td></tr><tr><td id="L86" class="css-a4x74f"><span>86</span></td><td id="LC86" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> query = location.query ? stringifyQuery(location.query) : <span class="code-string">''</span>;
</code></td></tr><tr><td id="L87" class="css-a4x74f"><span>87</span></td><td id="LC87" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> location.path + (query &amp;&amp; <span class="code-string">'?'</span>) + query + (location.hash || <span class="code-string">''</span>);
</code></td></tr><tr><td id="L88" class="css-a4x74f"><span>88</span></td><td id="LC88" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L89" class="css-a4x74f"><span>89</span></td><td id="LC89" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L90" class="css-a4x74f"><span>90</span></td><td id="LC90" class="css-1dcdqdg"><code><span class="code-comment">   * Strips off the base from the beginning of a location.pathname in a non-case-sensitive way.
</span></code></td></tr><tr><td id="L91" class="css-a4x74f"><span>91</span></td><td id="LC91" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L92" class="css-a4x74f"><span>92</span></td><td id="LC92" class="css-1dcdqdg"><code><span class="code-comment">   * @param pathname - location.pathname
</span></code></td></tr><tr><td id="L93" class="css-a4x74f"><span>93</span></td><td id="LC93" class="css-1dcdqdg"><code><span class="code-comment">   * @param base - base to strip off
</span></code></td></tr><tr><td id="L94" class="css-a4x74f"><span>94</span></td><td id="LC94" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L95" class="css-a4x74f"><span>95</span></td><td id="LC95" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">stripBase</span>(<span class="code-params">pathname, base</span>) </span>{
</code></td></tr><tr><td id="L96" class="css-a4x74f"><span>96</span></td><td id="LC96" class="css-1dcdqdg"><code>      <span class="code-comment">// no base or base is not found at the beginning</span>
</code></td></tr><tr><td id="L97" class="css-a4x74f"><span>97</span></td><td id="LC97" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!base || !pathname.toLowerCase().startsWith(base.toLowerCase()))
</code></td></tr><tr><td id="L98" class="css-a4x74f"><span>98</span></td><td id="LC98" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> pathname;
</code></td></tr><tr><td id="L99" class="css-a4x74f"><span>99</span></td><td id="LC99" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> pathname.slice(base.length) || <span class="code-string">'/'</span>;
</code></td></tr><tr><td id="L100" class="css-a4x74f"><span>100</span></td><td id="LC100" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L101" class="css-a4x74f"><span>101</span></td><td id="LC101" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L102" class="css-a4x74f"><span>102</span></td><td id="LC102" class="css-1dcdqdg"><code><span class="code-comment">   * Checks if two RouteLocation are equal. This means that both locations are
</span></code></td></tr><tr><td id="L103" class="css-a4x74f"><span>103</span></td><td id="LC103" class="css-1dcdqdg"><code><span class="code-comment">   * pointing towards the same {@link RouteRecord} and that all `params`, `query`
</span></code></td></tr><tr><td id="L104" class="css-a4x74f"><span>104</span></td><td id="LC104" class="css-1dcdqdg"><code><span class="code-comment">   * parameters and `hash` are the same
</span></code></td></tr><tr><td id="L105" class="css-a4x74f"><span>105</span></td><td id="LC105" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L106" class="css-a4x74f"><span>106</span></td><td id="LC106" class="css-1dcdqdg"><code><span class="code-comment">   * @param a - first {@link RouteLocation}
</span></code></td></tr><tr><td id="L107" class="css-a4x74f"><span>107</span></td><td id="LC107" class="css-1dcdqdg"><code><span class="code-comment">   * @param b - second {@link RouteLocation}
</span></code></td></tr><tr><td id="L108" class="css-a4x74f"><span>108</span></td><td id="LC108" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L109" class="css-a4x74f"><span>109</span></td><td id="LC109" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isSameRouteLocation</span>(<span class="code-params">stringifyQuery, a, b</span>) </span>{
</code></td></tr><tr><td id="L110" class="css-a4x74f"><span>110</span></td><td id="LC110" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> aLastIndex = a.matched.length - <span class="code-number">1</span>;
</code></td></tr><tr><td id="L111" class="css-a4x74f"><span>111</span></td><td id="LC111" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> bLastIndex = b.matched.length - <span class="code-number">1</span>;
</code></td></tr><tr><td id="L112" class="css-a4x74f"><span>112</span></td><td id="LC112" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> (aLastIndex &gt; <span class="code-number">-1</span> &amp;&amp;
</code></td></tr><tr><td id="L113" class="css-a4x74f"><span>113</span></td><td id="LC113" class="css-1dcdqdg"><code>          aLastIndex === bLastIndex &amp;&amp;
</code></td></tr><tr><td id="L114" class="css-a4x74f"><span>114</span></td><td id="LC114" class="css-1dcdqdg"><code>          isSameRouteRecord(a.matched[aLastIndex], b.matched[bLastIndex]) &amp;&amp;
</code></td></tr><tr><td id="L115" class="css-a4x74f"><span>115</span></td><td id="LC115" class="css-1dcdqdg"><code>          isSameRouteLocationParams(a.params, b.params) &amp;&amp;
</code></td></tr><tr><td id="L116" class="css-a4x74f"><span>116</span></td><td id="LC116" class="css-1dcdqdg"><code>          stringifyQuery(a.query) === stringifyQuery(b.query) &amp;&amp;
</code></td></tr><tr><td id="L117" class="css-a4x74f"><span>117</span></td><td id="LC117" class="css-1dcdqdg"><code>          a.hash === b.hash);
</code></td></tr><tr><td id="L118" class="css-a4x74f"><span>118</span></td><td id="LC118" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L119" class="css-a4x74f"><span>119</span></td><td id="LC119" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L120" class="css-a4x74f"><span>120</span></td><td id="LC120" class="css-1dcdqdg"><code><span class="code-comment">   * Check if two `RouteRecords` are equal. Takes into account aliases: they are
</span></code></td></tr><tr><td id="L121" class="css-a4x74f"><span>121</span></td><td id="LC121" class="css-1dcdqdg"><code><span class="code-comment">   * considered equal to the `RouteRecord` they are aliasing.
</span></code></td></tr><tr><td id="L122" class="css-a4x74f"><span>122</span></td><td id="LC122" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L123" class="css-a4x74f"><span>123</span></td><td id="LC123" class="css-1dcdqdg"><code><span class="code-comment">   * @param a - first {@link RouteRecord}
</span></code></td></tr><tr><td id="L124" class="css-a4x74f"><span>124</span></td><td id="LC124" class="css-1dcdqdg"><code><span class="code-comment">   * @param b - second {@link RouteRecord}
</span></code></td></tr><tr><td id="L125" class="css-a4x74f"><span>125</span></td><td id="LC125" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L126" class="css-a4x74f"><span>126</span></td><td id="LC126" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isSameRouteRecord</span>(<span class="code-params">a, b</span>) </span>{
</code></td></tr><tr><td id="L127" class="css-a4x74f"><span>127</span></td><td id="LC127" class="css-1dcdqdg"><code>      <span class="code-comment">// since the original record has an undefined value for aliasOf</span>
</code></td></tr><tr><td id="L128" class="css-a4x74f"><span>128</span></td><td id="LC128" class="css-1dcdqdg"><code>      <span class="code-comment">// but all aliases point to the original record, this will always compare</span>
</code></td></tr><tr><td id="L129" class="css-a4x74f"><span>129</span></td><td id="LC129" class="css-1dcdqdg"><code>      <span class="code-comment">// the original record</span>
</code></td></tr><tr><td id="L130" class="css-a4x74f"><span>130</span></td><td id="LC130" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> (a.aliasOf || a) === (b.aliasOf || b);
</code></td></tr><tr><td id="L131" class="css-a4x74f"><span>131</span></td><td id="LC131" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L132" class="css-a4x74f"><span>132</span></td><td id="LC132" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isSameRouteLocationParams</span>(<span class="code-params">a, b</span>) </span>{
</code></td></tr><tr><td id="L133" class="css-a4x74f"><span>133</span></td><td id="LC133" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (<span class="code-built_in">Object</span>.keys(a).length !== <span class="code-built_in">Object</span>.keys(b).length)
</code></td></tr><tr><td id="L134" class="css-a4x74f"><span>134</span></td><td id="LC134" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-literal">false</span>;
</code></td></tr><tr><td id="L135" class="css-a4x74f"><span>135</span></td><td id="LC135" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">const</span> key <span class="code-keyword">in</span> a) {
</code></td></tr><tr><td id="L136" class="css-a4x74f"><span>136</span></td><td id="LC136" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!isSameRouteLocationParamsValue(a[key], b[key]))
</code></td></tr><tr><td id="L137" class="css-a4x74f"><span>137</span></td><td id="LC137" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> <span class="code-literal">false</span>;
</code></td></tr><tr><td id="L138" class="css-a4x74f"><span>138</span></td><td id="LC138" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L139" class="css-a4x74f"><span>139</span></td><td id="LC139" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L140" class="css-a4x74f"><span>140</span></td><td id="LC140" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L141" class="css-a4x74f"><span>141</span></td><td id="LC141" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isSameRouteLocationParamsValue</span>(<span class="code-params">a, b</span>) </span>{
</code></td></tr><tr><td id="L142" class="css-a4x74f"><span>142</span></td><td id="LC142" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> isArray(a)
</code></td></tr><tr><td id="L143" class="css-a4x74f"><span>143</span></td><td id="LC143" class="css-1dcdqdg"><code>          ? isEquivalentArray(a, b)
</code></td></tr><tr><td id="L144" class="css-a4x74f"><span>144</span></td><td id="LC144" class="css-1dcdqdg"><code>          : isArray(b)
</code></td></tr><tr><td id="L145" class="css-a4x74f"><span>145</span></td><td id="LC145" class="css-1dcdqdg"><code>              ? isEquivalentArray(b, a)
</code></td></tr><tr><td id="L146" class="css-a4x74f"><span>146</span></td><td id="LC146" class="css-1dcdqdg"><code>              : a === b;
</code></td></tr><tr><td id="L147" class="css-a4x74f"><span>147</span></td><td id="LC147" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L148" class="css-a4x74f"><span>148</span></td><td id="LC148" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L149" class="css-a4x74f"><span>149</span></td><td id="LC149" class="css-1dcdqdg"><code><span class="code-comment">   * Check if two arrays are the same or if an array with one single entry is the
</span></code></td></tr><tr><td id="L150" class="css-a4x74f"><span>150</span></td><td id="LC150" class="css-1dcdqdg"><code><span class="code-comment">   * same as another primitive value. Used to check query and parameters
</span></code></td></tr><tr><td id="L151" class="css-a4x74f"><span>151</span></td><td id="LC151" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L152" class="css-a4x74f"><span>152</span></td><td id="LC152" class="css-1dcdqdg"><code><span class="code-comment">   * @param a - array of values
</span></code></td></tr><tr><td id="L153" class="css-a4x74f"><span>153</span></td><td id="LC153" class="css-1dcdqdg"><code><span class="code-comment">   * @param b - array of values or a single value
</span></code></td></tr><tr><td id="L154" class="css-a4x74f"><span>154</span></td><td id="LC154" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L155" class="css-a4x74f"><span>155</span></td><td id="LC155" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isEquivalentArray</span>(<span class="code-params">a, b</span>) </span>{
</code></td></tr><tr><td id="L156" class="css-a4x74f"><span>156</span></td><td id="LC156" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> isArray(b)
</code></td></tr><tr><td id="L157" class="css-a4x74f"><span>157</span></td><td id="LC157" class="css-1dcdqdg"><code>          ? a.length === b.length &amp;&amp; a.every(<span class="code-function">(<span class="code-params">value, i</span>) =&gt;</span> value === b[i])
</code></td></tr><tr><td id="L158" class="css-a4x74f"><span>158</span></td><td id="LC158" class="css-1dcdqdg"><code>          : a.length === <span class="code-number">1</span> &amp;&amp; a[<span class="code-number">0</span>] === b;
</code></td></tr><tr><td id="L159" class="css-a4x74f"><span>159</span></td><td id="LC159" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L160" class="css-a4x74f"><span>160</span></td><td id="LC160" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L161" class="css-a4x74f"><span>161</span></td><td id="LC161" class="css-1dcdqdg"><code><span class="code-comment">   * Resolves a relative path that starts with `.`.
</span></code></td></tr><tr><td id="L162" class="css-a4x74f"><span>162</span></td><td id="LC162" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L163" class="css-a4x74f"><span>163</span></td><td id="LC163" class="css-1dcdqdg"><code><span class="code-comment">   * @param to - path location we are resolving
</span></code></td></tr><tr><td id="L164" class="css-a4x74f"><span>164</span></td><td id="LC164" class="css-1dcdqdg"><code><span class="code-comment">   * @param from - currentLocation.path, should start with `/`
</span></code></td></tr><tr><td id="L165" class="css-a4x74f"><span>165</span></td><td id="LC165" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L166" class="css-a4x74f"><span>166</span></td><td id="LC166" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">resolveRelativePath</span>(<span class="code-params">to, from</span>) </span>{
</code></td></tr><tr><td id="L167" class="css-a4x74f"><span>167</span></td><td id="LC167" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (to.startsWith(<span class="code-string">'/'</span>))
</code></td></tr><tr><td id="L168" class="css-a4x74f"><span>168</span></td><td id="LC168" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> to;
</code></td></tr><tr><td id="L169" class="css-a4x74f"><span>169</span></td><td id="LC169" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!<span class="code-keyword">from</span>.startsWith(<span class="code-string">'/'</span>)) {
</code></td></tr><tr><td id="L170" class="css-a4x74f"><span>170</span></td><td id="LC170" class="css-1dcdqdg"><code>          warn(<span class="code-string">`Cannot resolve a relative location without an absolute path. Trying to resolve "<span class="code-subst">${to}</span>" from "<span class="code-subst">${<span class="code-keyword">from</span>}</span>". It should look like "/<span class="code-subst">${<span class="code-keyword">from</span>}</span>".`</span>);
</code></td></tr><tr><td id="L171" class="css-a4x74f"><span>171</span></td><td id="LC171" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> to;
</code></td></tr><tr><td id="L172" class="css-a4x74f"><span>172</span></td><td id="LC172" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L173" class="css-a4x74f"><span>173</span></td><td id="LC173" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!to)
</code></td></tr><tr><td id="L174" class="css-a4x74f"><span>174</span></td><td id="LC174" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-keyword">from</span>;
</code></td></tr><tr><td id="L175" class="css-a4x74f"><span>175</span></td><td id="LC175" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> fromSegments = <span class="code-keyword">from</span>.split(<span class="code-string">'/'</span>);
</code></td></tr><tr><td id="L176" class="css-a4x74f"><span>176</span></td><td id="LC176" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> toSegments = to.split(<span class="code-string">'/'</span>);
</code></td></tr><tr><td id="L177" class="css-a4x74f"><span>177</span></td><td id="LC177" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> position = fromSegments.length - <span class="code-number">1</span>;
</code></td></tr><tr><td id="L178" class="css-a4x74f"><span>178</span></td><td id="LC178" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> toPosition;
</code></td></tr><tr><td id="L179" class="css-a4x74f"><span>179</span></td><td id="LC179" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> segment;
</code></td></tr><tr><td id="L180" class="css-a4x74f"><span>180</span></td><td id="LC180" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (toPosition = <span class="code-number">0</span>; toPosition &lt; toSegments.length; toPosition++) {
</code></td></tr><tr><td id="L181" class="css-a4x74f"><span>181</span></td><td id="LC181" class="css-1dcdqdg"><code>          segment = toSegments[toPosition];
</code></td></tr><tr><td id="L182" class="css-a4x74f"><span>182</span></td><td id="LC182" class="css-1dcdqdg"><code>          <span class="code-comment">// we stay on the same position</span>
</code></td></tr><tr><td id="L183" class="css-a4x74f"><span>183</span></td><td id="LC183" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (segment === <span class="code-string">'.'</span>)
</code></td></tr><tr><td id="L184" class="css-a4x74f"><span>184</span></td><td id="LC184" class="css-1dcdqdg"><code>              <span class="code-keyword">continue</span>;
</code></td></tr><tr><td id="L185" class="css-a4x74f"><span>185</span></td><td id="LC185" class="css-1dcdqdg"><code>          <span class="code-comment">// go up in the from array</span>
</code></td></tr><tr><td id="L186" class="css-a4x74f"><span>186</span></td><td id="LC186" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (segment === <span class="code-string">'..'</span>) {
</code></td></tr><tr><td id="L187" class="css-a4x74f"><span>187</span></td><td id="LC187" class="css-1dcdqdg"><code>              <span class="code-comment">// we can't go below zero, but we still need to increment toPosition</span>
</code></td></tr><tr><td id="L188" class="css-a4x74f"><span>188</span></td><td id="LC188" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (position &gt; <span class="code-number">1</span>)
</code></td></tr><tr><td id="L189" class="css-a4x74f"><span>189</span></td><td id="LC189" class="css-1dcdqdg"><code>                  position--;
</code></td></tr><tr><td id="L190" class="css-a4x74f"><span>190</span></td><td id="LC190" class="css-1dcdqdg"><code>              <span class="code-comment">// continue</span>
</code></td></tr><tr><td id="L191" class="css-a4x74f"><span>191</span></td><td id="LC191" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L192" class="css-a4x74f"><span>192</span></td><td id="LC192" class="css-1dcdqdg"><code>          <span class="code-comment">// we reached a non-relative path, we stop here</span>
</code></td></tr><tr><td id="L193" class="css-a4x74f"><span>193</span></td><td id="LC193" class="css-1dcdqdg"><code>          <span class="code-keyword">else</span>
</code></td></tr><tr><td id="L194" class="css-a4x74f"><span>194</span></td><td id="LC194" class="css-1dcdqdg"><code>              <span class="code-keyword">break</span>;
</code></td></tr><tr><td id="L195" class="css-a4x74f"><span>195</span></td><td id="LC195" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L196" class="css-a4x74f"><span>196</span></td><td id="LC196" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> (fromSegments.slice(<span class="code-number">0</span>, position).join(<span class="code-string">'/'</span>) +
</code></td></tr><tr><td id="L197" class="css-a4x74f"><span>197</span></td><td id="LC197" class="css-1dcdqdg"><code>          <span class="code-string">'/'</span> +
</code></td></tr><tr><td id="L198" class="css-a4x74f"><span>198</span></td><td id="LC198" class="css-1dcdqdg"><code>          toSegments
</code></td></tr><tr><td id="L199" class="css-a4x74f"><span>199</span></td><td id="LC199" class="css-1dcdqdg"><code>              <span class="code-comment">// ensure we use at least the last element in the toSegments</span>
</code></td></tr><tr><td id="L200" class="css-a4x74f"><span>200</span></td><td id="LC200" class="css-1dcdqdg"><code>              .slice(toPosition - (toPosition === toSegments.length ? <span class="code-number">1</span> : <span class="code-number">0</span>))
</code></td></tr><tr><td id="L201" class="css-a4x74f"><span>201</span></td><td id="LC201" class="css-1dcdqdg"><code>              .join(<span class="code-string">'/'</span>));
</code></td></tr><tr><td id="L202" class="css-a4x74f"><span>202</span></td><td id="LC202" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L203" class="css-a4x74f"><span>203</span></td><td id="LC203" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L204" class="css-a4x74f"><span>204</span></td><td id="LC204" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> NavigationType;
</code></td></tr><tr><td id="L205" class="css-a4x74f"><span>205</span></td><td id="LC205" class="css-1dcdqdg"><code>  (<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">NavigationType</span>) </span>{
</code></td></tr><tr><td id="L206" class="css-a4x74f"><span>206</span></td><td id="LC206" class="css-1dcdqdg"><code>      NavigationType[<span class="code-string">"pop"</span>] = <span class="code-string">"pop"</span>;
</code></td></tr><tr><td id="L207" class="css-a4x74f"><span>207</span></td><td id="LC207" class="css-1dcdqdg"><code>      NavigationType[<span class="code-string">"push"</span>] = <span class="code-string">"push"</span>;
</code></td></tr><tr><td id="L208" class="css-a4x74f"><span>208</span></td><td id="LC208" class="css-1dcdqdg"><code>  })(NavigationType || (NavigationType = {}));
</code></td></tr><tr><td id="L209" class="css-a4x74f"><span>209</span></td><td id="LC209" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> NavigationDirection;
</code></td></tr><tr><td id="L210" class="css-a4x74f"><span>210</span></td><td id="LC210" class="css-1dcdqdg"><code>  (<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">NavigationDirection</span>) </span>{
</code></td></tr><tr><td id="L211" class="css-a4x74f"><span>211</span></td><td id="LC211" class="css-1dcdqdg"><code>      NavigationDirection[<span class="code-string">"back"</span>] = <span class="code-string">"back"</span>;
</code></td></tr><tr><td id="L212" class="css-a4x74f"><span>212</span></td><td id="LC212" class="css-1dcdqdg"><code>      NavigationDirection[<span class="code-string">"forward"</span>] = <span class="code-string">"forward"</span>;
</code></td></tr><tr><td id="L213" class="css-a4x74f"><span>213</span></td><td id="LC213" class="css-1dcdqdg"><code>      NavigationDirection[<span class="code-string">"unknown"</span>] = <span class="code-string">""</span>;
</code></td></tr><tr><td id="L214" class="css-a4x74f"><span>214</span></td><td id="LC214" class="css-1dcdqdg"><code>  })(NavigationDirection || (NavigationDirection = {}));
</code></td></tr><tr><td id="L215" class="css-a4x74f"><span>215</span></td><td id="LC215" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L216" class="css-a4x74f"><span>216</span></td><td id="LC216" class="css-1dcdqdg"><code><span class="code-comment">   * Starting location for Histories
</span></code></td></tr><tr><td id="L217" class="css-a4x74f"><span>217</span></td><td id="LC217" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L218" class="css-a4x74f"><span>218</span></td><td id="LC218" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> START = <span class="code-string">''</span>;
</code></td></tr><tr><td id="L219" class="css-a4x74f"><span>219</span></td><td id="LC219" class="css-1dcdqdg"><code>  <span class="code-comment">// Generic utils</span>
</code></td></tr><tr><td id="L220" class="css-a4x74f"><span>220</span></td><td id="LC220" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L221" class="css-a4x74f"><span>221</span></td><td id="LC221" class="css-1dcdqdg"><code><span class="code-comment">   * Normalizes a base by removing any trailing slash and reading the base tag if
</span></code></td></tr><tr><td id="L222" class="css-a4x74f"><span>222</span></td><td id="LC222" class="css-1dcdqdg"><code><span class="code-comment">   * present.
</span></code></td></tr><tr><td id="L223" class="css-a4x74f"><span>223</span></td><td id="LC223" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L224" class="css-a4x74f"><span>224</span></td><td id="LC224" class="css-1dcdqdg"><code><span class="code-comment">   * @param base - base to normalize
</span></code></td></tr><tr><td id="L225" class="css-a4x74f"><span>225</span></td><td id="LC225" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L226" class="css-a4x74f"><span>226</span></td><td id="LC226" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">normalizeBase</span>(<span class="code-params">base</span>) </span>{
</code></td></tr><tr><td id="L227" class="css-a4x74f"><span>227</span></td><td id="LC227" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!base) {
</code></td></tr><tr><td id="L228" class="css-a4x74f"><span>228</span></td><td id="LC228" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (isBrowser) {
</code></td></tr><tr><td id="L229" class="css-a4x74f"><span>229</span></td><td id="LC229" class="css-1dcdqdg"><code>              <span class="code-comment">// respect &lt;base&gt; tag</span>
</code></td></tr><tr><td id="L230" class="css-a4x74f"><span>230</span></td><td id="LC230" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> baseEl = <span class="code-built_in">document</span>.querySelector(<span class="code-string">'base'</span>);
</code></td></tr><tr><td id="L231" class="css-a4x74f"><span>231</span></td><td id="LC231" class="css-1dcdqdg"><code>              base = (baseEl &amp;&amp; baseEl.getAttribute(<span class="code-string">'href'</span>)) || <span class="code-string">'/'</span>;
</code></td></tr><tr><td id="L232" class="css-a4x74f"><span>232</span></td><td id="LC232" class="css-1dcdqdg"><code>              <span class="code-comment">// strip full URL origin</span>
</code></td></tr><tr><td id="L233" class="css-a4x74f"><span>233</span></td><td id="LC233" class="css-1dcdqdg"><code>              base = base.replace(<span class="code-regexp">/^\w+:\/\/[^\/]+/</span>, <span class="code-string">''</span>);
</code></td></tr><tr><td id="L234" class="css-a4x74f"><span>234</span></td><td id="LC234" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L235" class="css-a4x74f"><span>235</span></td><td id="LC235" class="css-1dcdqdg"><code>          <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L236" class="css-a4x74f"><span>236</span></td><td id="LC236" class="css-1dcdqdg"><code>              base = <span class="code-string">'/'</span>;
</code></td></tr><tr><td id="L237" class="css-a4x74f"><span>237</span></td><td id="LC237" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L238" class="css-a4x74f"><span>238</span></td><td id="LC238" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L239" class="css-a4x74f"><span>239</span></td><td id="LC239" class="css-1dcdqdg"><code>      <span class="code-comment">// ensure leading slash when it was removed by the regex above avoid leading</span>
</code></td></tr><tr><td id="L240" class="css-a4x74f"><span>240</span></td><td id="LC240" class="css-1dcdqdg"><code>      <span class="code-comment">// slash with hash because the file could be read from the disk like file://</span>
</code></td></tr><tr><td id="L241" class="css-a4x74f"><span>241</span></td><td id="LC241" class="css-1dcdqdg"><code>      <span class="code-comment">// and the leading slash would cause problems</span>
</code></td></tr><tr><td id="L242" class="css-a4x74f"><span>242</span></td><td id="LC242" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (base[<span class="code-number">0</span>] !== <span class="code-string">'/'</span> &amp;&amp; base[<span class="code-number">0</span>] !== <span class="code-string">'#'</span>)
</code></td></tr><tr><td id="L243" class="css-a4x74f"><span>243</span></td><td id="LC243" class="css-1dcdqdg"><code>          base = <span class="code-string">'/'</span> + base;
</code></td></tr><tr><td id="L244" class="css-a4x74f"><span>244</span></td><td id="LC244" class="css-1dcdqdg"><code>      <span class="code-comment">// remove the trailing slash so all other method can just do `base + fullPath`</span>
</code></td></tr><tr><td id="L245" class="css-a4x74f"><span>245</span></td><td id="LC245" class="css-1dcdqdg"><code>      <span class="code-comment">// to build an href</span>
</code></td></tr><tr><td id="L246" class="css-a4x74f"><span>246</span></td><td id="LC246" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> removeTrailingSlash(base);
</code></td></tr><tr><td id="L247" class="css-a4x74f"><span>247</span></td><td id="LC247" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L248" class="css-a4x74f"><span>248</span></td><td id="LC248" class="css-1dcdqdg"><code>  <span class="code-comment">// remove any character before the hash</span>
</code></td></tr><tr><td id="L249" class="css-a4x74f"><span>249</span></td><td id="LC249" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> BEFORE_HASH_RE = <span class="code-regexp">/^[^#]+#/</span>;
</code></td></tr><tr><td id="L250" class="css-a4x74f"><span>250</span></td><td id="LC250" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">createHref</span>(<span class="code-params">base, location</span>) </span>{
</code></td></tr><tr><td id="L251" class="css-a4x74f"><span>251</span></td><td id="LC251" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> base.replace(BEFORE_HASH_RE, <span class="code-string">'#'</span>) + location;
</code></td></tr><tr><td id="L252" class="css-a4x74f"><span>252</span></td><td id="LC252" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L253" class="css-a4x74f"><span>253</span></td><td id="LC253" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L254" class="css-a4x74f"><span>254</span></td><td id="LC254" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">getElementPosition</span>(<span class="code-params">el, offset</span>) </span>{
</code></td></tr><tr><td id="L255" class="css-a4x74f"><span>255</span></td><td id="LC255" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> docRect = <span class="code-built_in">document</span>.documentElement.getBoundingClientRect();
</code></td></tr><tr><td id="L256" class="css-a4x74f"><span>256</span></td><td id="LC256" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> elRect = el.getBoundingClientRect();
</code></td></tr><tr><td id="L257" class="css-a4x74f"><span>257</span></td><td id="LC257" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> {
</code></td></tr><tr><td id="L258" class="css-a4x74f"><span>258</span></td><td id="LC258" class="css-1dcdqdg"><code>          behavior: offset.behavior,
</code></td></tr><tr><td id="L259" class="css-a4x74f"><span>259</span></td><td id="LC259" class="css-1dcdqdg"><code>          left: elRect.left - docRect.left - (offset.left || <span class="code-number">0</span>),
</code></td></tr><tr><td id="L260" class="css-a4x74f"><span>260</span></td><td id="LC260" class="css-1dcdqdg"><code>          top: elRect.top - docRect.top - (offset.top || <span class="code-number">0</span>),
</code></td></tr><tr><td id="L261" class="css-a4x74f"><span>261</span></td><td id="LC261" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L262" class="css-a4x74f"><span>262</span></td><td id="LC262" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L263" class="css-a4x74f"><span>263</span></td><td id="LC263" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> computeScrollPosition = <span class="code-function"><span class="code-params">()</span> =&gt;</span> ({
</code></td></tr><tr><td id="L264" class="css-a4x74f"><span>264</span></td><td id="LC264" class="css-1dcdqdg"><code>      left: <span class="code-built_in">window</span>.pageXOffset,
</code></td></tr><tr><td id="L265" class="css-a4x74f"><span>265</span></td><td id="LC265" class="css-1dcdqdg"><code>      top: <span class="code-built_in">window</span>.pageYOffset,
</code></td></tr><tr><td id="L266" class="css-a4x74f"><span>266</span></td><td id="LC266" class="css-1dcdqdg"><code>  });
</code></td></tr><tr><td id="L267" class="css-a4x74f"><span>267</span></td><td id="LC267" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">scrollToPosition</span>(<span class="code-params">position</span>) </span>{
</code></td></tr><tr><td id="L268" class="css-a4x74f"><span>268</span></td><td id="LC268" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> scrollToOptions;
</code></td></tr><tr><td id="L269" class="css-a4x74f"><span>269</span></td><td id="LC269" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (<span class="code-string">'el'</span> <span class="code-keyword">in</span> position) {
</code></td></tr><tr><td id="L270" class="css-a4x74f"><span>270</span></td><td id="LC270" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> positionEl = position.el;
</code></td></tr><tr><td id="L271" class="css-a4x74f"><span>271</span></td><td id="LC271" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> isIdSelector = <span class="code-keyword">typeof</span> positionEl === <span class="code-string">'string'</span> &amp;&amp; positionEl.startsWith(<span class="code-string">'#'</span>);
</code></td></tr><tr><td id="L272" class="css-a4x74f"><span>272</span></td><td id="LC272" class="css-1dcdqdg"><code>          <span class="code-comment">/**
</span></code></td></tr><tr><td id="L273" class="css-a4x74f"><span>273</span></td><td id="LC273" class="css-1dcdqdg"><code><span class="code-comment">           * `id`s can accept pretty much any characters, including CSS combinators
</span></code></td></tr><tr><td id="L274" class="css-a4x74f"><span>274</span></td><td id="LC274" class="css-1dcdqdg"><code><span class="code-comment">           * like `&gt;` or `~`. It's still possible to retrieve elements using
</span></code></td></tr><tr><td id="L275" class="css-a4x74f"><span>275</span></td><td id="LC275" class="css-1dcdqdg"><code><span class="code-comment">           * `document.getElementById('~')` but it needs to be escaped when using
</span></code></td></tr><tr><td id="L276" class="css-a4x74f"><span>276</span></td><td id="LC276" class="css-1dcdqdg"><code><span class="code-comment">           * `document.querySelector('#\\~')` for it to be valid. The only
</span></code></td></tr><tr><td id="L277" class="css-a4x74f"><span>277</span></td><td id="LC277" class="css-1dcdqdg"><code><span class="code-comment">           * requirements for `id`s are them to be unique on the page and to not be
</span></code></td></tr><tr><td id="L278" class="css-a4x74f"><span>278</span></td><td id="LC278" class="css-1dcdqdg"><code><span class="code-comment">           * empty (`id=""`). Because of that, when passing an id selector, it should
</span></code></td></tr><tr><td id="L279" class="css-a4x74f"><span>279</span></td><td id="LC279" class="css-1dcdqdg"><code><span class="code-comment">           * be properly escaped for it to work with `querySelector`. We could check
</span></code></td></tr><tr><td id="L280" class="css-a4x74f"><span>280</span></td><td id="LC280" class="css-1dcdqdg"><code><span class="code-comment">           * for the id selector to be simple (no CSS combinators `+ &gt;~`) but that
</span></code></td></tr><tr><td id="L281" class="css-a4x74f"><span>281</span></td><td id="LC281" class="css-1dcdqdg"><code><span class="code-comment">           * would make things inconsistent since they are valid characters for an
</span></code></td></tr><tr><td id="L282" class="css-a4x74f"><span>282</span></td><td id="LC282" class="css-1dcdqdg"><code><span class="code-comment">           * `id` but would need to be escaped when using `querySelector`, breaking
</span></code></td></tr><tr><td id="L283" class="css-a4x74f"><span>283</span></td><td id="LC283" class="css-1dcdqdg"><code><span class="code-comment">           * their usage and ending up in no selector returned. Selectors need to be
</span></code></td></tr><tr><td id="L284" class="css-a4x74f"><span>284</span></td><td id="LC284" class="css-1dcdqdg"><code><span class="code-comment">           * escaped:
</span></code></td></tr><tr><td id="L285" class="css-a4x74f"><span>285</span></td><td id="LC285" class="css-1dcdqdg"><code><span class="code-comment">           *
</span></code></td></tr><tr><td id="L286" class="css-a4x74f"><span>286</span></td><td id="LC286" class="css-1dcdqdg"><code><span class="code-comment">           * - `#1-thing` becomes `#\31 -thing`
</span></code></td></tr><tr><td id="L287" class="css-a4x74f"><span>287</span></td><td id="LC287" class="css-1dcdqdg"><code><span class="code-comment">           * - `#with~symbols` becomes `#with\\~symbols`
</span></code></td></tr><tr><td id="L288" class="css-a4x74f"><span>288</span></td><td id="LC288" class="css-1dcdqdg"><code><span class="code-comment">           *
</span></code></td></tr><tr><td id="L289" class="css-a4x74f"><span>289</span></td><td id="LC289" class="css-1dcdqdg"><code><span class="code-comment">           * - More information about  the topic can be found at
</span></code></td></tr><tr><td id="L290" class="css-a4x74f"><span>290</span></td><td id="LC290" class="css-1dcdqdg"><code><span class="code-comment">           *   https://mathiasbynens.be/notes/html5-id-class.
</span></code></td></tr><tr><td id="L291" class="css-a4x74f"><span>291</span></td><td id="LC291" class="css-1dcdqdg"><code><span class="code-comment">           * - Practical example: https://mathiasbynens.be/demo/html5-id
</span></code></td></tr><tr><td id="L292" class="css-a4x74f"><span>292</span></td><td id="LC292" class="css-1dcdqdg"><code><span class="code-comment">           */</span>
</code></td></tr><tr><td id="L293" class="css-a4x74f"><span>293</span></td><td id="LC293" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (<span class="code-keyword">typeof</span> position.el === <span class="code-string">'string'</span>) {
</code></td></tr><tr><td id="L294" class="css-a4x74f"><span>294</span></td><td id="LC294" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (!isIdSelector || !<span class="code-built_in">document</span>.getElementById(position.el.slice(<span class="code-number">1</span>))) {
</code></td></tr><tr><td id="L295" class="css-a4x74f"><span>295</span></td><td id="LC295" class="css-1dcdqdg"><code>                  <span class="code-keyword">try</span> {
</code></td></tr><tr><td id="L296" class="css-a4x74f"><span>296</span></td><td id="LC296" class="css-1dcdqdg"><code>                      <span class="code-keyword">const</span> foundEl = <span class="code-built_in">document</span>.querySelector(position.el);
</code></td></tr><tr><td id="L297" class="css-a4x74f"><span>297</span></td><td id="LC297" class="css-1dcdqdg"><code>                      <span class="code-keyword">if</span> (isIdSelector &amp;&amp; foundEl) {
</code></td></tr><tr><td id="L298" class="css-a4x74f"><span>298</span></td><td id="LC298" class="css-1dcdqdg"><code>                          warn(<span class="code-string">`The selector "<span class="code-subst">${position.el}</span>" should be passed as "el: document.querySelector('<span class="code-subst">${position.el}</span>')" because it starts with "#".`</span>);
</code></td></tr><tr><td id="L299" class="css-a4x74f"><span>299</span></td><td id="LC299" class="css-1dcdqdg"><code>                          <span class="code-comment">// return to avoid other warnings</span>
</code></td></tr><tr><td id="L300" class="css-a4x74f"><span>300</span></td><td id="LC300" class="css-1dcdqdg"><code>                          <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L301" class="css-a4x74f"><span>301</span></td><td id="LC301" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L302" class="css-a4x74f"><span>302</span></td><td id="LC302" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L303" class="css-a4x74f"><span>303</span></td><td id="LC303" class="css-1dcdqdg"><code>                  <span class="code-keyword">catch</span> (err) {
</code></td></tr><tr><td id="L304" class="css-a4x74f"><span>304</span></td><td id="LC304" class="css-1dcdqdg"><code>                      warn(<span class="code-string">`The selector "<span class="code-subst">${position.el}</span>" is invalid. If you are using an id selector, make sure to escape it. You can find more information about escaping characters in selectors at https://mathiasbynens.be/notes/css-escapes or use CSS.escape (https://developer.mozilla.org/en-US/docs/Web/API/CSS/escape).`</span>);
</code></td></tr><tr><td id="L305" class="css-a4x74f"><span>305</span></td><td id="LC305" class="css-1dcdqdg"><code>                      <span class="code-comment">// return to avoid other warnings</span>
</code></td></tr><tr><td id="L306" class="css-a4x74f"><span>306</span></td><td id="LC306" class="css-1dcdqdg"><code>                      <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L307" class="css-a4x74f"><span>307</span></td><td id="LC307" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L308" class="css-a4x74f"><span>308</span></td><td id="LC308" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L309" class="css-a4x74f"><span>309</span></td><td id="LC309" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L310" class="css-a4x74f"><span>310</span></td><td id="LC310" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> el = <span class="code-keyword">typeof</span> positionEl === <span class="code-string">'string'</span>
</code></td></tr><tr><td id="L311" class="css-a4x74f"><span>311</span></td><td id="LC311" class="css-1dcdqdg"><code>              ? isIdSelector
</code></td></tr><tr><td id="L312" class="css-a4x74f"><span>312</span></td><td id="LC312" class="css-1dcdqdg"><code>                  ? <span class="code-built_in">document</span>.getElementById(positionEl.slice(<span class="code-number">1</span>))
</code></td></tr><tr><td id="L313" class="css-a4x74f"><span>313</span></td><td id="LC313" class="css-1dcdqdg"><code>                  : <span class="code-built_in">document</span>.querySelector(positionEl)
</code></td></tr><tr><td id="L314" class="css-a4x74f"><span>314</span></td><td id="LC314" class="css-1dcdqdg"><code>              : positionEl;
</code></td></tr><tr><td id="L315" class="css-a4x74f"><span>315</span></td><td id="LC315" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!el) {
</code></td></tr><tr><td id="L316" class="css-a4x74f"><span>316</span></td><td id="LC316" class="css-1dcdqdg"><code>              warn(<span class="code-string">`Couldn't find element using selector "<span class="code-subst">${position.el}</span>" returned by scrollBehavior.`</span>);
</code></td></tr><tr><td id="L317" class="css-a4x74f"><span>317</span></td><td id="LC317" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L318" class="css-a4x74f"><span>318</span></td><td id="LC318" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L319" class="css-a4x74f"><span>319</span></td><td id="LC319" class="css-1dcdqdg"><code>          scrollToOptions = getElementPosition(el, position);
</code></td></tr><tr><td id="L320" class="css-a4x74f"><span>320</span></td><td id="LC320" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L321" class="css-a4x74f"><span>321</span></td><td id="LC321" class="css-1dcdqdg"><code>      <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L322" class="css-a4x74f"><span>322</span></td><td id="LC322" class="css-1dcdqdg"><code>          scrollToOptions = position;
</code></td></tr><tr><td id="L323" class="css-a4x74f"><span>323</span></td><td id="LC323" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L324" class="css-a4x74f"><span>324</span></td><td id="LC324" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (<span class="code-string">'scrollBehavior'</span> <span class="code-keyword">in</span> <span class="code-built_in">document</span>.documentElement.style)
</code></td></tr><tr><td id="L325" class="css-a4x74f"><span>325</span></td><td id="LC325" class="css-1dcdqdg"><code>          <span class="code-built_in">window</span>.scrollTo(scrollToOptions);
</code></td></tr><tr><td id="L326" class="css-a4x74f"><span>326</span></td><td id="LC326" class="css-1dcdqdg"><code>      <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L327" class="css-a4x74f"><span>327</span></td><td id="LC327" class="css-1dcdqdg"><code>          <span class="code-built_in">window</span>.scrollTo(scrollToOptions.left != <span class="code-literal">null</span> ? scrollToOptions.left : <span class="code-built_in">window</span>.pageXOffset, scrollToOptions.top != <span class="code-literal">null</span> ? scrollToOptions.top : <span class="code-built_in">window</span>.pageYOffset);
</code></td></tr><tr><td id="L328" class="css-a4x74f"><span>328</span></td><td id="LC328" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L329" class="css-a4x74f"><span>329</span></td><td id="LC329" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L330" class="css-a4x74f"><span>330</span></td><td id="LC330" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">getScrollKey</span>(<span class="code-params">path, delta</span>) </span>{
</code></td></tr><tr><td id="L331" class="css-a4x74f"><span>331</span></td><td id="LC331" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> position = history.state ? history.state.position - delta : <span class="code-number">-1</span>;
</code></td></tr><tr><td id="L332" class="css-a4x74f"><span>332</span></td><td id="LC332" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> position + path;
</code></td></tr><tr><td id="L333" class="css-a4x74f"><span>333</span></td><td id="LC333" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L334" class="css-a4x74f"><span>334</span></td><td id="LC334" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> scrollPositions = <span class="code-keyword">new</span> <span class="code-built_in">Map</span>();
</code></td></tr><tr><td id="L335" class="css-a4x74f"><span>335</span></td><td id="LC335" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">saveScrollPosition</span>(<span class="code-params">key, scrollPosition</span>) </span>{
</code></td></tr><tr><td id="L336" class="css-a4x74f"><span>336</span></td><td id="LC336" class="css-1dcdqdg"><code>      scrollPositions.set(key, scrollPosition);
</code></td></tr><tr><td id="L337" class="css-a4x74f"><span>337</span></td><td id="LC337" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L338" class="css-a4x74f"><span>338</span></td><td id="LC338" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">getSavedScrollPosition</span>(<span class="code-params">key</span>) </span>{
</code></td></tr><tr><td id="L339" class="css-a4x74f"><span>339</span></td><td id="LC339" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> scroll = scrollPositions.get(key);
</code></td></tr><tr><td id="L340" class="css-a4x74f"><span>340</span></td><td id="LC340" class="css-1dcdqdg"><code>      <span class="code-comment">// consume it so it's not used again</span>
</code></td></tr><tr><td id="L341" class="css-a4x74f"><span>341</span></td><td id="LC341" class="css-1dcdqdg"><code>      scrollPositions.delete(key);
</code></td></tr><tr><td id="L342" class="css-a4x74f"><span>342</span></td><td id="LC342" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> scroll;
</code></td></tr><tr><td id="L343" class="css-a4x74f"><span>343</span></td><td id="LC343" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L344" class="css-a4x74f"><span>344</span></td><td id="LC344" class="css-1dcdqdg"><code>  <span class="code-comment">// <span class="code-doctag">TODO:</span> RFC about how to save scroll position</span>
</code></td></tr><tr><td id="L345" class="css-a4x74f"><span>345</span></td><td id="LC345" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L346" class="css-a4x74f"><span>346</span></td><td id="LC346" class="css-1dcdqdg"><code><span class="code-comment">   * ScrollBehavior instance used by the router to compute and restore the scroll
</span></code></td></tr><tr><td id="L347" class="css-a4x74f"><span>347</span></td><td id="LC347" class="css-1dcdqdg"><code><span class="code-comment">   * position when navigating.
</span></code></td></tr><tr><td id="L348" class="css-a4x74f"><span>348</span></td><td id="LC348" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L349" class="css-a4x74f"><span>349</span></td><td id="LC349" class="css-1dcdqdg"><code>  <span class="code-comment">// export interface ScrollHandler&lt;ScrollPositionEntry extends HistoryStateValue, ScrollPosition extends ScrollPositionEntry&gt; {</span>
</code></td></tr><tr><td id="L350" class="css-a4x74f"><span>350</span></td><td id="LC350" class="css-1dcdqdg"><code>  <span class="code-comment">//   // returns a scroll position that can be saved in history</span>
</code></td></tr><tr><td id="L351" class="css-a4x74f"><span>351</span></td><td id="LC351" class="css-1dcdqdg"><code>  <span class="code-comment">//   compute(): ScrollPositionEntry</span>
</code></td></tr><tr><td id="L352" class="css-a4x74f"><span>352</span></td><td id="LC352" class="css-1dcdqdg"><code>  <span class="code-comment">//   // can take an extended ScrollPositionEntry</span>
</code></td></tr><tr><td id="L353" class="css-a4x74f"><span>353</span></td><td id="LC353" class="css-1dcdqdg"><code>  <span class="code-comment">//   scroll(position: ScrollPosition): void</span>
</code></td></tr><tr><td id="L354" class="css-a4x74f"><span>354</span></td><td id="LC354" class="css-1dcdqdg"><code>  <span class="code-comment">// }</span>
</code></td></tr><tr><td id="L355" class="css-a4x74f"><span>355</span></td><td id="LC355" class="css-1dcdqdg"><code>  <span class="code-comment">// export const scrollHandler: ScrollHandler&lt;ScrollPosition&gt; = {</span>
</code></td></tr><tr><td id="L356" class="css-a4x74f"><span>356</span></td><td id="LC356" class="css-1dcdqdg"><code>  <span class="code-comment">//   compute: computeScroll,</span>
</code></td></tr><tr><td id="L357" class="css-a4x74f"><span>357</span></td><td id="LC357" class="css-1dcdqdg"><code>  <span class="code-comment">//   scroll: scrollToPosition,</span>
</code></td></tr><tr><td id="L358" class="css-a4x74f"><span>358</span></td><td id="LC358" class="css-1dcdqdg"><code>  <span class="code-comment">// }</span>
</code></td></tr><tr><td id="L359" class="css-a4x74f"><span>359</span></td><td id="LC359" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L360" class="css-a4x74f"><span>360</span></td><td id="LC360" class="css-1dcdqdg"><code>  <span class="code-keyword">let</span> createBaseLocation = <span class="code-function"><span class="code-params">()</span> =&gt;</span> location.protocol + <span class="code-string">'//'</span> + location.host;
</code></td></tr><tr><td id="L361" class="css-a4x74f"><span>361</span></td><td id="LC361" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L362" class="css-a4x74f"><span>362</span></td><td id="LC362" class="css-1dcdqdg"><code><span class="code-comment">   * Creates a normalized history location from a window.location object
</span></code></td></tr><tr><td id="L363" class="css-a4x74f"><span>363</span></td><td id="LC363" class="css-1dcdqdg"><code><span class="code-comment">   * @param location -
</span></code></td></tr><tr><td id="L364" class="css-a4x74f"><span>364</span></td><td id="LC364" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L365" class="css-a4x74f"><span>365</span></td><td id="LC365" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">createCurrentLocation</span>(<span class="code-params">base, location</span>) </span>{
</code></td></tr><tr><td id="L366" class="css-a4x74f"><span>366</span></td><td id="LC366" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> { pathname, search, hash } = location;
</code></td></tr><tr><td id="L367" class="css-a4x74f"><span>367</span></td><td id="LC367" class="css-1dcdqdg"><code>      <span class="code-comment">// allows hash bases like #, /#, #/, #!, #!/, /#!/, or even /folder#end</span>
</code></td></tr><tr><td id="L368" class="css-a4x74f"><span>368</span></td><td id="LC368" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> hashPos = base.indexOf(<span class="code-string">'#'</span>);
</code></td></tr><tr><td id="L369" class="css-a4x74f"><span>369</span></td><td id="LC369" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (hashPos &gt; <span class="code-number">-1</span>) {
</code></td></tr><tr><td id="L370" class="css-a4x74f"><span>370</span></td><td id="LC370" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> slicePos = hash.includes(base.slice(hashPos))
</code></td></tr><tr><td id="L371" class="css-a4x74f"><span>371</span></td><td id="LC371" class="css-1dcdqdg"><code>              ? base.slice(hashPos).length
</code></td></tr><tr><td id="L372" class="css-a4x74f"><span>372</span></td><td id="LC372" class="css-1dcdqdg"><code>              : <span class="code-number">1</span>;
</code></td></tr><tr><td id="L373" class="css-a4x74f"><span>373</span></td><td id="LC373" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> pathFromHash = hash.slice(slicePos);
</code></td></tr><tr><td id="L374" class="css-a4x74f"><span>374</span></td><td id="LC374" class="css-1dcdqdg"><code>          <span class="code-comment">// prepend the starting slash to hash so the url starts with /#</span>
</code></td></tr><tr><td id="L375" class="css-a4x74f"><span>375</span></td><td id="LC375" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (pathFromHash[<span class="code-number">0</span>] !== <span class="code-string">'/'</span>)
</code></td></tr><tr><td id="L376" class="css-a4x74f"><span>376</span></td><td id="LC376" class="css-1dcdqdg"><code>              pathFromHash = <span class="code-string">'/'</span> + pathFromHash;
</code></td></tr><tr><td id="L377" class="css-a4x74f"><span>377</span></td><td id="LC377" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> stripBase(pathFromHash, <span class="code-string">''</span>);
</code></td></tr><tr><td id="L378" class="css-a4x74f"><span>378</span></td><td id="LC378" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L379" class="css-a4x74f"><span>379</span></td><td id="LC379" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> path = stripBase(pathname, base);
</code></td></tr><tr><td id="L380" class="css-a4x74f"><span>380</span></td><td id="LC380" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> path + search + hash;
</code></td></tr><tr><td id="L381" class="css-a4x74f"><span>381</span></td><td id="LC381" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L382" class="css-a4x74f"><span>382</span></td><td id="LC382" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">useHistoryListeners</span>(<span class="code-params">base, historyState, currentLocation, replace</span>) </span>{
</code></td></tr><tr><td id="L383" class="css-a4x74f"><span>383</span></td><td id="LC383" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> listeners = [];
</code></td></tr><tr><td id="L384" class="css-a4x74f"><span>384</span></td><td id="LC384" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> teardowns = [];
</code></td></tr><tr><td id="L385" class="css-a4x74f"><span>385</span></td><td id="LC385" class="css-1dcdqdg"><code>      <span class="code-comment">// <span class="code-doctag">TODO:</span> should it be a stack? a Dict. Check if the popstate listener</span>
</code></td></tr><tr><td id="L386" class="css-a4x74f"><span>386</span></td><td id="LC386" class="css-1dcdqdg"><code>      <span class="code-comment">// can trigger twice</span>
</code></td></tr><tr><td id="L387" class="css-a4x74f"><span>387</span></td><td id="LC387" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> pauseState = <span class="code-literal">null</span>;
</code></td></tr><tr><td id="L388" class="css-a4x74f"><span>388</span></td><td id="LC388" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> popStateHandler = <span class="code-function">(<span class="code-params">{ state, }</span>) =&gt;</span> {
</code></td></tr><tr><td id="L389" class="css-a4x74f"><span>389</span></td><td id="LC389" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> to = createCurrentLocation(base, location);
</code></td></tr><tr><td id="L390" class="css-a4x74f"><span>390</span></td><td id="LC390" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> <span class="code-keyword">from</span> = currentLocation.value;
</code></td></tr><tr><td id="L391" class="css-a4x74f"><span>391</span></td><td id="LC391" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> fromState = historyState.value;
</code></td></tr><tr><td id="L392" class="css-a4x74f"><span>392</span></td><td id="LC392" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> delta = <span class="code-number">0</span>;
</code></td></tr><tr><td id="L393" class="css-a4x74f"><span>393</span></td><td id="LC393" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (state) {
</code></td></tr><tr><td id="L394" class="css-a4x74f"><span>394</span></td><td id="LC394" class="css-1dcdqdg"><code>              currentLocation.value = to;
</code></td></tr><tr><td id="L395" class="css-a4x74f"><span>395</span></td><td id="LC395" class="css-1dcdqdg"><code>              historyState.value = state;
</code></td></tr><tr><td id="L396" class="css-a4x74f"><span>396</span></td><td id="LC396" class="css-1dcdqdg"><code>              <span class="code-comment">// ignore the popstate and reset the pauseState</span>
</code></td></tr><tr><td id="L397" class="css-a4x74f"><span>397</span></td><td id="LC397" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (pauseState &amp;&amp; pauseState === <span class="code-keyword">from</span>) {
</code></td></tr><tr><td id="L398" class="css-a4x74f"><span>398</span></td><td id="LC398" class="css-1dcdqdg"><code>                  pauseState = <span class="code-literal">null</span>;
</code></td></tr><tr><td id="L399" class="css-a4x74f"><span>399</span></td><td id="LC399" class="css-1dcdqdg"><code>                  <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L400" class="css-a4x74f"><span>400</span></td><td id="LC400" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L401" class="css-a4x74f"><span>401</span></td><td id="LC401" class="css-1dcdqdg"><code>              delta = fromState ? state.position - fromState.position : <span class="code-number">0</span>;
</code></td></tr><tr><td id="L402" class="css-a4x74f"><span>402</span></td><td id="LC402" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L403" class="css-a4x74f"><span>403</span></td><td id="LC403" class="css-1dcdqdg"><code>          <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L404" class="css-a4x74f"><span>404</span></td><td id="LC404" class="css-1dcdqdg"><code>              replace(to);
</code></td></tr><tr><td id="L405" class="css-a4x74f"><span>405</span></td><td id="LC405" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L406" class="css-a4x74f"><span>406</span></td><td id="LC406" class="css-1dcdqdg"><code>          <span class="code-comment">// console.log({ deltaFromCurrent })</span>
</code></td></tr><tr><td id="L407" class="css-a4x74f"><span>407</span></td><td id="LC407" class="css-1dcdqdg"><code>          <span class="code-comment">// Here we could also revert the navigation by calling history.go(-delta)</span>
</code></td></tr><tr><td id="L408" class="css-a4x74f"><span>408</span></td><td id="LC408" class="css-1dcdqdg"><code>          <span class="code-comment">// this listener will have to be adapted to not trigger again and to wait for the url</span>
</code></td></tr><tr><td id="L409" class="css-a4x74f"><span>409</span></td><td id="LC409" class="css-1dcdqdg"><code>          <span class="code-comment">// to be updated before triggering the listeners. Some kind of validation function would also</span>
</code></td></tr><tr><td id="L410" class="css-a4x74f"><span>410</span></td><td id="LC410" class="css-1dcdqdg"><code>          <span class="code-comment">// need to be passed to the listeners so the navigation can be accepted</span>
</code></td></tr><tr><td id="L411" class="css-a4x74f"><span>411</span></td><td id="LC411" class="css-1dcdqdg"><code>          <span class="code-comment">// call all listeners</span>
</code></td></tr><tr><td id="L412" class="css-a4x74f"><span>412</span></td><td id="LC412" class="css-1dcdqdg"><code>          listeners.forEach(<span class="code-function"><span class="code-params">listener</span> =&gt;</span> {
</code></td></tr><tr><td id="L413" class="css-a4x74f"><span>413</span></td><td id="LC413" class="css-1dcdqdg"><code>              listener(currentLocation.value, <span class="code-keyword">from</span>, {
</code></td></tr><tr><td id="L414" class="css-a4x74f"><span>414</span></td><td id="LC414" class="css-1dcdqdg"><code>                  delta,
</code></td></tr><tr><td id="L415" class="css-a4x74f"><span>415</span></td><td id="LC415" class="css-1dcdqdg"><code>                  type: NavigationType.pop,
</code></td></tr><tr><td id="L416" class="css-a4x74f"><span>416</span></td><td id="LC416" class="css-1dcdqdg"><code>                  direction: delta
</code></td></tr><tr><td id="L417" class="css-a4x74f"><span>417</span></td><td id="LC417" class="css-1dcdqdg"><code>                      ? delta &gt; <span class="code-number">0</span>
</code></td></tr><tr><td id="L418" class="css-a4x74f"><span>418</span></td><td id="LC418" class="css-1dcdqdg"><code>                          ? NavigationDirection.forward
</code></td></tr><tr><td id="L419" class="css-a4x74f"><span>419</span></td><td id="LC419" class="css-1dcdqdg"><code>                          : NavigationDirection.back
</code></td></tr><tr><td id="L420" class="css-a4x74f"><span>420</span></td><td id="LC420" class="css-1dcdqdg"><code>                      : NavigationDirection.unknown,
</code></td></tr><tr><td id="L421" class="css-a4x74f"><span>421</span></td><td id="LC421" class="css-1dcdqdg"><code>              });
</code></td></tr><tr><td id="L422" class="css-a4x74f"><span>422</span></td><td id="LC422" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L423" class="css-a4x74f"><span>423</span></td><td id="LC423" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L424" class="css-a4x74f"><span>424</span></td><td id="LC424" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">pauseListeners</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L425" class="css-a4x74f"><span>425</span></td><td id="LC425" class="css-1dcdqdg"><code>          pauseState = currentLocation.value;
</code></td></tr><tr><td id="L426" class="css-a4x74f"><span>426</span></td><td id="LC426" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L427" class="css-a4x74f"><span>427</span></td><td id="LC427" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">listen</span>(<span class="code-params">callback</span>) </span>{
</code></td></tr><tr><td id="L428" class="css-a4x74f"><span>428</span></td><td id="LC428" class="css-1dcdqdg"><code>          <span class="code-comment">// set up the listener and prepare teardown callbacks</span>
</code></td></tr><tr><td id="L429" class="css-a4x74f"><span>429</span></td><td id="LC429" class="css-1dcdqdg"><code>          listeners.push(callback);
</code></td></tr><tr><td id="L430" class="css-a4x74f"><span>430</span></td><td id="LC430" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> teardown = <span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L431" class="css-a4x74f"><span>431</span></td><td id="LC431" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> index = listeners.indexOf(callback);
</code></td></tr><tr><td id="L432" class="css-a4x74f"><span>432</span></td><td id="LC432" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (index &gt; <span class="code-number">-1</span>)
</code></td></tr><tr><td id="L433" class="css-a4x74f"><span>433</span></td><td id="LC433" class="css-1dcdqdg"><code>                  listeners.splice(index, <span class="code-number">1</span>);
</code></td></tr><tr><td id="L434" class="css-a4x74f"><span>434</span></td><td id="LC434" class="css-1dcdqdg"><code>          };
</code></td></tr><tr><td id="L435" class="css-a4x74f"><span>435</span></td><td id="LC435" class="css-1dcdqdg"><code>          teardowns.push(teardown);
</code></td></tr><tr><td id="L436" class="css-a4x74f"><span>436</span></td><td id="LC436" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> teardown;
</code></td></tr><tr><td id="L437" class="css-a4x74f"><span>437</span></td><td id="LC437" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L438" class="css-a4x74f"><span>438</span></td><td id="LC438" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">beforeUnloadListener</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L439" class="css-a4x74f"><span>439</span></td><td id="LC439" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> { history } = <span class="code-built_in">window</span>;
</code></td></tr><tr><td id="L440" class="css-a4x74f"><span>440</span></td><td id="LC440" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!history.state)
</code></td></tr><tr><td id="L441" class="css-a4x74f"><span>441</span></td><td id="LC441" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L442" class="css-a4x74f"><span>442</span></td><td id="LC442" class="css-1dcdqdg"><code>          history.replaceState(assign({}, history.state, { <span class="code-attr">scroll</span>: computeScrollPosition() }), <span class="code-string">''</span>);
</code></td></tr><tr><td id="L443" class="css-a4x74f"><span>443</span></td><td id="LC443" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L444" class="css-a4x74f"><span>444</span></td><td id="LC444" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">destroy</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L445" class="css-a4x74f"><span>445</span></td><td id="LC445" class="css-1dcdqdg"><code>          <span class="code-keyword">for</span> (<span class="code-keyword">const</span> teardown <span class="code-keyword">of</span> teardowns)
</code></td></tr><tr><td id="L446" class="css-a4x74f"><span>446</span></td><td id="LC446" class="css-1dcdqdg"><code>              teardown();
</code></td></tr><tr><td id="L447" class="css-a4x74f"><span>447</span></td><td id="LC447" class="css-1dcdqdg"><code>          teardowns = [];
</code></td></tr><tr><td id="L448" class="css-a4x74f"><span>448</span></td><td id="LC448" class="css-1dcdqdg"><code>          <span class="code-built_in">window</span>.removeEventListener(<span class="code-string">'popstate'</span>, popStateHandler);
</code></td></tr><tr><td id="L449" class="css-a4x74f"><span>449</span></td><td id="LC449" class="css-1dcdqdg"><code>          <span class="code-built_in">window</span>.removeEventListener(<span class="code-string">'beforeunload'</span>, beforeUnloadListener);
</code></td></tr><tr><td id="L450" class="css-a4x74f"><span>450</span></td><td id="LC450" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L451" class="css-a4x74f"><span>451</span></td><td id="LC451" class="css-1dcdqdg"><code>      <span class="code-comment">// set up the listeners and prepare teardown callbacks</span>
</code></td></tr><tr><td id="L452" class="css-a4x74f"><span>452</span></td><td id="LC452" class="css-1dcdqdg"><code>      <span class="code-built_in">window</span>.addEventListener(<span class="code-string">'popstate'</span>, popStateHandler);
</code></td></tr><tr><td id="L453" class="css-a4x74f"><span>453</span></td><td id="LC453" class="css-1dcdqdg"><code>      <span class="code-built_in">window</span>.addEventListener(<span class="code-string">'beforeunload'</span>, beforeUnloadListener);
</code></td></tr><tr><td id="L454" class="css-a4x74f"><span>454</span></td><td id="LC454" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> {
</code></td></tr><tr><td id="L455" class="css-a4x74f"><span>455</span></td><td id="LC455" class="css-1dcdqdg"><code>          pauseListeners,
</code></td></tr><tr><td id="L456" class="css-a4x74f"><span>456</span></td><td id="LC456" class="css-1dcdqdg"><code>          listen,
</code></td></tr><tr><td id="L457" class="css-a4x74f"><span>457</span></td><td id="LC457" class="css-1dcdqdg"><code>          destroy,
</code></td></tr><tr><td id="L458" class="css-a4x74f"><span>458</span></td><td id="LC458" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L459" class="css-a4x74f"><span>459</span></td><td id="LC459" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L460" class="css-a4x74f"><span>460</span></td><td id="LC460" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L461" class="css-a4x74f"><span>461</span></td><td id="LC461" class="css-1dcdqdg"><code><span class="code-comment">   * Creates a state object
</span></code></td></tr><tr><td id="L462" class="css-a4x74f"><span>462</span></td><td id="LC462" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L463" class="css-a4x74f"><span>463</span></td><td id="LC463" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">buildState</span>(<span class="code-params">back, current, forward, replaced = false, computeScroll = false</span>) </span>{
</code></td></tr><tr><td id="L464" class="css-a4x74f"><span>464</span></td><td id="LC464" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> {
</code></td></tr><tr><td id="L465" class="css-a4x74f"><span>465</span></td><td id="LC465" class="css-1dcdqdg"><code>          back,
</code></td></tr><tr><td id="L466" class="css-a4x74f"><span>466</span></td><td id="LC466" class="css-1dcdqdg"><code>          current,
</code></td></tr><tr><td id="L467" class="css-a4x74f"><span>467</span></td><td id="LC467" class="css-1dcdqdg"><code>          forward,
</code></td></tr><tr><td id="L468" class="css-a4x74f"><span>468</span></td><td id="LC468" class="css-1dcdqdg"><code>          replaced,
</code></td></tr><tr><td id="L469" class="css-a4x74f"><span>469</span></td><td id="LC469" class="css-1dcdqdg"><code>          position: <span class="code-built_in">window</span>.history.length,
</code></td></tr><tr><td id="L470" class="css-a4x74f"><span>470</span></td><td id="LC470" class="css-1dcdqdg"><code>          scroll: computeScroll ? computeScrollPosition() : <span class="code-literal">null</span>,
</code></td></tr><tr><td id="L471" class="css-a4x74f"><span>471</span></td><td id="LC471" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L472" class="css-a4x74f"><span>472</span></td><td id="LC472" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L473" class="css-a4x74f"><span>473</span></td><td id="LC473" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">useHistoryStateNavigation</span>(<span class="code-params">base</span>) </span>{
</code></td></tr><tr><td id="L474" class="css-a4x74f"><span>474</span></td><td id="LC474" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> { history, location } = <span class="code-built_in">window</span>;
</code></td></tr><tr><td id="L475" class="css-a4x74f"><span>475</span></td><td id="LC475" class="css-1dcdqdg"><code>      <span class="code-comment">// private variables</span>
</code></td></tr><tr><td id="L476" class="css-a4x74f"><span>476</span></td><td id="LC476" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> currentLocation = {
</code></td></tr><tr><td id="L477" class="css-a4x74f"><span>477</span></td><td id="LC477" class="css-1dcdqdg"><code>          value: createCurrentLocation(base, location),
</code></td></tr><tr><td id="L478" class="css-a4x74f"><span>478</span></td><td id="LC478" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L479" class="css-a4x74f"><span>479</span></td><td id="LC479" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> historyState = { <span class="code-attr">value</span>: history.state };
</code></td></tr><tr><td id="L480" class="css-a4x74f"><span>480</span></td><td id="LC480" class="css-1dcdqdg"><code>      <span class="code-comment">// build current history entry as this is a fresh navigation</span>
</code></td></tr><tr><td id="L481" class="css-a4x74f"><span>481</span></td><td id="LC481" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!historyState.value) {
</code></td></tr><tr><td id="L482" class="css-a4x74f"><span>482</span></td><td id="LC482" class="css-1dcdqdg"><code>          changeLocation(currentLocation.value, {
</code></td></tr><tr><td id="L483" class="css-a4x74f"><span>483</span></td><td id="LC483" class="css-1dcdqdg"><code>              back: <span class="code-literal">null</span>,
</code></td></tr><tr><td id="L484" class="css-a4x74f"><span>484</span></td><td id="LC484" class="css-1dcdqdg"><code>              current: currentLocation.value,
</code></td></tr><tr><td id="L485" class="css-a4x74f"><span>485</span></td><td id="LC485" class="css-1dcdqdg"><code>              forward: <span class="code-literal">null</span>,
</code></td></tr><tr><td id="L486" class="css-a4x74f"><span>486</span></td><td id="LC486" class="css-1dcdqdg"><code>              <span class="code-comment">// the length is off by one, we need to decrease it</span>
</code></td></tr><tr><td id="L487" class="css-a4x74f"><span>487</span></td><td id="LC487" class="css-1dcdqdg"><code>              position: history.length - <span class="code-number">1</span>,
</code></td></tr><tr><td id="L488" class="css-a4x74f"><span>488</span></td><td id="LC488" class="css-1dcdqdg"><code>              replaced: <span class="code-literal">true</span>,
</code></td></tr><tr><td id="L489" class="css-a4x74f"><span>489</span></td><td id="LC489" class="css-1dcdqdg"><code>              <span class="code-comment">// don't add a scroll as the user may have an anchor, and we want</span>
</code></td></tr><tr><td id="L490" class="css-a4x74f"><span>490</span></td><td id="LC490" class="css-1dcdqdg"><code>              <span class="code-comment">// scrollBehavior to be triggered without a saved position</span>
</code></td></tr><tr><td id="L491" class="css-a4x74f"><span>491</span></td><td id="LC491" class="css-1dcdqdg"><code>              scroll: <span class="code-literal">null</span>,
</code></td></tr><tr><td id="L492" class="css-a4x74f"><span>492</span></td><td id="LC492" class="css-1dcdqdg"><code>          }, <span class="code-literal">true</span>);
</code></td></tr><tr><td id="L493" class="css-a4x74f"><span>493</span></td><td id="LC493" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L494" class="css-a4x74f"><span>494</span></td><td id="LC494" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">changeLocation</span>(<span class="code-params">to, state, replace</span>) </span>{
</code></td></tr><tr><td id="L495" class="css-a4x74f"><span>495</span></td><td id="LC495" class="css-1dcdqdg"><code>          <span class="code-comment">/**
</span></code></td></tr><tr><td id="L496" class="css-a4x74f"><span>496</span></td><td id="LC496" class="css-1dcdqdg"><code><span class="code-comment">           * if a base tag is provided, and we are on a normal domain, we have to
</span></code></td></tr><tr><td id="L497" class="css-a4x74f"><span>497</span></td><td id="LC497" class="css-1dcdqdg"><code><span class="code-comment">           * respect the provided `base` attribute because pushState() will use it and
</span></code></td></tr><tr><td id="L498" class="css-a4x74f"><span>498</span></td><td id="LC498" class="css-1dcdqdg"><code><span class="code-comment">           * potentially erase anything before the `#` like at
</span></code></td></tr><tr><td id="L499" class="css-a4x74f"><span>499</span></td><td id="LC499" class="css-1dcdqdg"><code><span class="code-comment">           * https://github.com/vuejs/router/issues/685 where a base of
</span></code></td></tr><tr><td id="L500" class="css-a4x74f"><span>500</span></td><td id="LC500" class="css-1dcdqdg"><code><span class="code-comment">           * `/folder/#` but a base of `/` would erase the `/folder/` section. If
</span></code></td></tr><tr><td id="L501" class="css-a4x74f"><span>501</span></td><td id="LC501" class="css-1dcdqdg"><code><span class="code-comment">           * there is no host, the `&lt;base&gt;` tag makes no sense and if there isn't a
</span></code></td></tr><tr><td id="L502" class="css-a4x74f"><span>502</span></td><td id="LC502" class="css-1dcdqdg"><code><span class="code-comment">           * base tag we can just use everything after the `#`.
</span></code></td></tr><tr><td id="L503" class="css-a4x74f"><span>503</span></td><td id="LC503" class="css-1dcdqdg"><code><span class="code-comment">           */</span>
</code></td></tr><tr><td id="L504" class="css-a4x74f"><span>504</span></td><td id="LC504" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> hashIndex = base.indexOf(<span class="code-string">'#'</span>);
</code></td></tr><tr><td id="L505" class="css-a4x74f"><span>505</span></td><td id="LC505" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> url = hashIndex &gt; <span class="code-number">-1</span>
</code></td></tr><tr><td id="L506" class="css-a4x74f"><span>506</span></td><td id="LC506" class="css-1dcdqdg"><code>              ? (location.host &amp;&amp; <span class="code-built_in">document</span>.querySelector(<span class="code-string">'base'</span>)
</code></td></tr><tr><td id="L507" class="css-a4x74f"><span>507</span></td><td id="LC507" class="css-1dcdqdg"><code>                  ? base
</code></td></tr><tr><td id="L508" class="css-a4x74f"><span>508</span></td><td id="LC508" class="css-1dcdqdg"><code>                  : base.slice(hashIndex)) + to
</code></td></tr><tr><td id="L509" class="css-a4x74f"><span>509</span></td><td id="LC509" class="css-1dcdqdg"><code>              : createBaseLocation() + base + to;
</code></td></tr><tr><td id="L510" class="css-a4x74f"><span>510</span></td><td id="LC510" class="css-1dcdqdg"><code>          <span class="code-keyword">try</span> {
</code></td></tr><tr><td id="L511" class="css-a4x74f"><span>511</span></td><td id="LC511" class="css-1dcdqdg"><code>              <span class="code-comment">// BROWSER QUIRK</span>
</code></td></tr><tr><td id="L512" class="css-a4x74f"><span>512</span></td><td id="LC512" class="css-1dcdqdg"><code>              <span class="code-comment">// <span class="code-doctag">NOTE:</span> Safari throws a SecurityError when calling this function 100 times in 30 seconds</span>
</code></td></tr><tr><td id="L513" class="css-a4x74f"><span>513</span></td><td id="LC513" class="css-1dcdqdg"><code>              history[replace ? <span class="code-string">'replaceState'</span> : <span class="code-string">'pushState'</span>](state, <span class="code-string">''</span>, url);
</code></td></tr><tr><td id="L514" class="css-a4x74f"><span>514</span></td><td id="LC514" class="css-1dcdqdg"><code>              historyState.value = state;
</code></td></tr><tr><td id="L515" class="css-a4x74f"><span>515</span></td><td id="LC515" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L516" class="css-a4x74f"><span>516</span></td><td id="LC516" class="css-1dcdqdg"><code>          <span class="code-keyword">catch</span> (err) {
</code></td></tr><tr><td id="L517" class="css-a4x74f"><span>517</span></td><td id="LC517" class="css-1dcdqdg"><code>              {
</code></td></tr><tr><td id="L518" class="css-a4x74f"><span>518</span></td><td id="LC518" class="css-1dcdqdg"><code>                  warn(<span class="code-string">'Error with push/replace State'</span>, err);
</code></td></tr><tr><td id="L519" class="css-a4x74f"><span>519</span></td><td id="LC519" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L520" class="css-a4x74f"><span>520</span></td><td id="LC520" class="css-1dcdqdg"><code>              <span class="code-comment">// Force the navigation, this also resets the call count</span>
</code></td></tr><tr><td id="L521" class="css-a4x74f"><span>521</span></td><td id="LC521" class="css-1dcdqdg"><code>              location[replace ? <span class="code-string">'replace'</span> : <span class="code-string">'assign'</span>](url);
</code></td></tr><tr><td id="L522" class="css-a4x74f"><span>522</span></td><td id="LC522" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L523" class="css-a4x74f"><span>523</span></td><td id="LC523" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L524" class="css-a4x74f"><span>524</span></td><td id="LC524" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">replace</span>(<span class="code-params">to, data</span>) </span>{
</code></td></tr><tr><td id="L525" class="css-a4x74f"><span>525</span></td><td id="LC525" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> state = assign({}, history.state, buildState(historyState.value.back, 
</code></td></tr><tr><td id="L526" class="css-a4x74f"><span>526</span></td><td id="LC526" class="css-1dcdqdg"><code>          <span class="code-comment">// keep back and forward entries but override current position</span>
</code></td></tr><tr><td id="L527" class="css-a4x74f"><span>527</span></td><td id="LC527" class="css-1dcdqdg"><code>          to, historyState.value.forward, <span class="code-literal">true</span>), data, { <span class="code-attr">position</span>: historyState.value.position });
</code></td></tr><tr><td id="L528" class="css-a4x74f"><span>528</span></td><td id="LC528" class="css-1dcdqdg"><code>          changeLocation(to, state, <span class="code-literal">true</span>);
</code></td></tr><tr><td id="L529" class="css-a4x74f"><span>529</span></td><td id="LC529" class="css-1dcdqdg"><code>          currentLocation.value = to;
</code></td></tr><tr><td id="L530" class="css-a4x74f"><span>530</span></td><td id="LC530" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L531" class="css-a4x74f"><span>531</span></td><td id="LC531" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">push</span>(<span class="code-params">to, data</span>) </span>{
</code></td></tr><tr><td id="L532" class="css-a4x74f"><span>532</span></td><td id="LC532" class="css-1dcdqdg"><code>          <span class="code-comment">// Add to current entry the information of where we are going</span>
</code></td></tr><tr><td id="L533" class="css-a4x74f"><span>533</span></td><td id="LC533" class="css-1dcdqdg"><code>          <span class="code-comment">// as well as saving the current position</span>
</code></td></tr><tr><td id="L534" class="css-a4x74f"><span>534</span></td><td id="LC534" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> currentState = assign({}, 
</code></td></tr><tr><td id="L535" class="css-a4x74f"><span>535</span></td><td id="LC535" class="css-1dcdqdg"><code>          <span class="code-comment">// use current history state to gracefully handle a wrong call to</span>
</code></td></tr><tr><td id="L536" class="css-a4x74f"><span>536</span></td><td id="LC536" class="css-1dcdqdg"><code>          <span class="code-comment">// history.replaceState</span>
</code></td></tr><tr><td id="L537" class="css-a4x74f"><span>537</span></td><td id="LC537" class="css-1dcdqdg"><code>          <span class="code-comment">// https://github.com/vuejs/router/issues/366</span>
</code></td></tr><tr><td id="L538" class="css-a4x74f"><span>538</span></td><td id="LC538" class="css-1dcdqdg"><code>          historyState.value, history.state, {
</code></td></tr><tr><td id="L539" class="css-a4x74f"><span>539</span></td><td id="LC539" class="css-1dcdqdg"><code>              forward: to,
</code></td></tr><tr><td id="L540" class="css-a4x74f"><span>540</span></td><td id="LC540" class="css-1dcdqdg"><code>              scroll: computeScrollPosition(),
</code></td></tr><tr><td id="L541" class="css-a4x74f"><span>541</span></td><td id="LC541" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L542" class="css-a4x74f"><span>542</span></td><td id="LC542" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!history.state) {
</code></td></tr><tr><td id="L543" class="css-a4x74f"><span>543</span></td><td id="LC543" class="css-1dcdqdg"><code>              warn(<span class="code-string">`history.state seems to have been manually replaced without preserving the necessary values. Make sure to preserve existing history state if you are manually calling history.replaceState:\n\n`</span> +
</code></td></tr><tr><td id="L544" class="css-a4x74f"><span>544</span></td><td id="LC544" class="css-1dcdqdg"><code>                  <span class="code-string">`history.replaceState(history.state, '', url)\n\n`</span> +
</code></td></tr><tr><td id="L545" class="css-a4x74f"><span>545</span></td><td id="LC545" class="css-1dcdqdg"><code>                  <span class="code-string">`You can find more information at https://next.router.vuejs.org/guide/migration/#usage-of-history-state.`</span>);
</code></td></tr><tr><td id="L546" class="css-a4x74f"><span>546</span></td><td id="LC546" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L547" class="css-a4x74f"><span>547</span></td><td id="LC547" class="css-1dcdqdg"><code>          changeLocation(currentState.current, currentState, <span class="code-literal">true</span>);
</code></td></tr><tr><td id="L548" class="css-a4x74f"><span>548</span></td><td id="LC548" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> state = assign({}, buildState(currentLocation.value, to, <span class="code-literal">null</span>), { <span class="code-attr">position</span>: currentState.position + <span class="code-number">1</span> }, data);
</code></td></tr><tr><td id="L549" class="css-a4x74f"><span>549</span></td><td id="LC549" class="css-1dcdqdg"><code>          changeLocation(to, state, <span class="code-literal">false</span>);
</code></td></tr><tr><td id="L550" class="css-a4x74f"><span>550</span></td><td id="LC550" class="css-1dcdqdg"><code>          currentLocation.value = to;
</code></td></tr><tr><td id="L551" class="css-a4x74f"><span>551</span></td><td id="LC551" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L552" class="css-a4x74f"><span>552</span></td><td id="LC552" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> {
</code></td></tr><tr><td id="L553" class="css-a4x74f"><span>553</span></td><td id="LC553" class="css-1dcdqdg"><code>          location: currentLocation,
</code></td></tr><tr><td id="L554" class="css-a4x74f"><span>554</span></td><td id="LC554" class="css-1dcdqdg"><code>          state: historyState,
</code></td></tr><tr><td id="L555" class="css-a4x74f"><span>555</span></td><td id="LC555" class="css-1dcdqdg"><code>          push,
</code></td></tr><tr><td id="L556" class="css-a4x74f"><span>556</span></td><td id="LC556" class="css-1dcdqdg"><code>          replace,
</code></td></tr><tr><td id="L557" class="css-a4x74f"><span>557</span></td><td id="LC557" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L558" class="css-a4x74f"><span>558</span></td><td id="LC558" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L559" class="css-a4x74f"><span>559</span></td><td id="LC559" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L560" class="css-a4x74f"><span>560</span></td><td id="LC560" class="css-1dcdqdg"><code><span class="code-comment">   * Creates an HTML5 history. Most common history for single page applications.
</span></code></td></tr><tr><td id="L561" class="css-a4x74f"><span>561</span></td><td id="LC561" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L562" class="css-a4x74f"><span>562</span></td><td id="LC562" class="css-1dcdqdg"><code><span class="code-comment">   * @param base -
</span></code></td></tr><tr><td id="L563" class="css-a4x74f"><span>563</span></td><td id="LC563" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L564" class="css-a4x74f"><span>564</span></td><td id="LC564" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">createWebHistory</span>(<span class="code-params">base</span>) </span>{
</code></td></tr><tr><td id="L565" class="css-a4x74f"><span>565</span></td><td id="LC565" class="css-1dcdqdg"><code>      base = normalizeBase(base);
</code></td></tr><tr><td id="L566" class="css-a4x74f"><span>566</span></td><td id="LC566" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> historyNavigation = useHistoryStateNavigation(base);
</code></td></tr><tr><td id="L567" class="css-a4x74f"><span>567</span></td><td id="LC567" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> historyListeners = useHistoryListeners(base, historyNavigation.state, historyNavigation.location, historyNavigation.replace);
</code></td></tr><tr><td id="L568" class="css-a4x74f"><span>568</span></td><td id="LC568" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">go</span>(<span class="code-params">delta, triggerListeners = true</span>) </span>{
</code></td></tr><tr><td id="L569" class="css-a4x74f"><span>569</span></td><td id="LC569" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!triggerListeners)
</code></td></tr><tr><td id="L570" class="css-a4x74f"><span>570</span></td><td id="LC570" class="css-1dcdqdg"><code>              historyListeners.pauseListeners();
</code></td></tr><tr><td id="L571" class="css-a4x74f"><span>571</span></td><td id="LC571" class="css-1dcdqdg"><code>          history.go(delta);
</code></td></tr><tr><td id="L572" class="css-a4x74f"><span>572</span></td><td id="LC572" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L573" class="css-a4x74f"><span>573</span></td><td id="LC573" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> routerHistory = assign({
</code></td></tr><tr><td id="L574" class="css-a4x74f"><span>574</span></td><td id="LC574" class="css-1dcdqdg"><code>          <span class="code-comment">// it's overridden right after</span>
</code></td></tr><tr><td id="L575" class="css-a4x74f"><span>575</span></td><td id="LC575" class="css-1dcdqdg"><code>          location: <span class="code-string">''</span>,
</code></td></tr><tr><td id="L576" class="css-a4x74f"><span>576</span></td><td id="LC576" class="css-1dcdqdg"><code>          base,
</code></td></tr><tr><td id="L577" class="css-a4x74f"><span>577</span></td><td id="LC577" class="css-1dcdqdg"><code>          go,
</code></td></tr><tr><td id="L578" class="css-a4x74f"><span>578</span></td><td id="LC578" class="css-1dcdqdg"><code>          createHref: createHref.bind(<span class="code-literal">null</span>, base),
</code></td></tr><tr><td id="L579" class="css-a4x74f"><span>579</span></td><td id="LC579" class="css-1dcdqdg"><code>      }, historyNavigation, historyListeners);
</code></td></tr><tr><td id="L580" class="css-a4x74f"><span>580</span></td><td id="LC580" class="css-1dcdqdg"><code>      <span class="code-built_in">Object</span>.defineProperty(routerHistory, <span class="code-string">'location'</span>, {
</code></td></tr><tr><td id="L581" class="css-a4x74f"><span>581</span></td><td id="LC581" class="css-1dcdqdg"><code>          enumerable: <span class="code-literal">true</span>,
</code></td></tr><tr><td id="L582" class="css-a4x74f"><span>582</span></td><td id="LC582" class="css-1dcdqdg"><code>          <span class="code-keyword">get</span>: () =&gt; historyNavigation.location.value,
</code></td></tr><tr><td id="L583" class="css-a4x74f"><span>583</span></td><td id="LC583" class="css-1dcdqdg"><code>      });
</code></td></tr><tr><td id="L584" class="css-a4x74f"><span>584</span></td><td id="LC584" class="css-1dcdqdg"><code>      Object.defineProperty(routerHistory, 'state', {
</code></td></tr><tr><td id="L585" class="css-a4x74f"><span>585</span></td><td id="LC585" class="css-1dcdqdg"><code>          enumerable: <span class="code-literal">true</span>,
</code></td></tr><tr><td id="L586" class="css-a4x74f"><span>586</span></td><td id="LC586" class="css-1dcdqdg"><code>          <span class="code-keyword">get</span>: () =&gt; historyNavigation.state.value,
</code></td></tr><tr><td id="L587" class="css-a4x74f"><span>587</span></td><td id="LC587" class="css-1dcdqdg"><code>      });
</code></td></tr><tr><td id="L588" class="css-a4x74f"><span>588</span></td><td id="LC588" class="css-1dcdqdg"><code>      return routerHistory;
</code></td></tr><tr><td id="L589" class="css-a4x74f"><span>589</span></td><td id="LC589" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L590" class="css-a4x74f"><span>590</span></td><td id="LC590" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L591" class="css-a4x74f"><span>591</span></td><td id="LC591" class="css-1dcdqdg"><code>  /**
</code></td></tr><tr><td id="L592" class="css-a4x74f"><span>592</span></td><td id="LC592" class="css-1dcdqdg"><code>   * Creates an in-memory based history. The main purpose of this history is to handle SSR. It starts in a special location that is nowhere.
</code></td></tr><tr><td id="L593" class="css-a4x74f"><span>593</span></td><td id="LC593" class="css-1dcdqdg"><code>   * It's up to the user to replace that location with the starter location by either calling `router.push` or `router.replace`.
</code></td></tr><tr><td id="L594" class="css-a4x74f"><span>594</span></td><td id="LC594" class="css-1dcdqdg"><code>   *
</code></td></tr><tr><td id="L595" class="css-a4x74f"><span>595</span></td><td id="LC595" class="css-1dcdqdg"><code>   * @param base - Base applied to all urls, defaults to '/'
</code></td></tr><tr><td id="L596" class="css-a4x74f"><span>596</span></td><td id="LC596" class="css-1dcdqdg"><code>   * @returns a history object that can be passed to the router <span class="code-keyword">constructor</span>
</code></td></tr><tr><td id="L597" class="css-a4x74f"><span>597</span></td><td id="LC597" class="css-1dcdqdg"><code>   */
</code></td></tr><tr><td id="L598" class="css-a4x74f"><span>598</span></td><td id="LC598" class="css-1dcdqdg"><code>  function createMemoryHistory(base = '') {
</code></td></tr><tr><td id="L599" class="css-a4x74f"><span>599</span></td><td id="LC599" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> listeners = [];
</code></td></tr><tr><td id="L600" class="css-a4x74f"><span>600</span></td><td id="LC600" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> queue = [START];
</code></td></tr><tr><td id="L601" class="css-a4x74f"><span>601</span></td><td id="LC601" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> position = <span class="code-number">0</span>;
</code></td></tr><tr><td id="L602" class="css-a4x74f"><span>602</span></td><td id="LC602" class="css-1dcdqdg"><code>      base = normalizeBase(base);
</code></td></tr><tr><td id="L603" class="css-a4x74f"><span>603</span></td><td id="LC603" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">setLocation</span>(<span class="code-params">location</span>) </span>{
</code></td></tr><tr><td id="L604" class="css-a4x74f"><span>604</span></td><td id="LC604" class="css-1dcdqdg"><code>          position++;
</code></td></tr><tr><td id="L605" class="css-a4x74f"><span>605</span></td><td id="LC605" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (position === queue.length) {
</code></td></tr><tr><td id="L606" class="css-a4x74f"><span>606</span></td><td id="LC606" class="css-1dcdqdg"><code>              <span class="code-comment">// we are at the end, we can simply append a new entry</span>
</code></td></tr><tr><td id="L607" class="css-a4x74f"><span>607</span></td><td id="LC607" class="css-1dcdqdg"><code>              queue.push(location);
</code></td></tr><tr><td id="L608" class="css-a4x74f"><span>608</span></td><td id="LC608" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L609" class="css-a4x74f"><span>609</span></td><td id="LC609" class="css-1dcdqdg"><code>          <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L610" class="css-a4x74f"><span>610</span></td><td id="LC610" class="css-1dcdqdg"><code>              <span class="code-comment">// we are in the middle, we remove everything from here in the queue</span>
</code></td></tr><tr><td id="L611" class="css-a4x74f"><span>611</span></td><td id="LC611" class="css-1dcdqdg"><code>              queue.splice(position);
</code></td></tr><tr><td id="L612" class="css-a4x74f"><span>612</span></td><td id="LC612" class="css-1dcdqdg"><code>              queue.push(location);
</code></td></tr><tr><td id="L613" class="css-a4x74f"><span>613</span></td><td id="LC613" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L614" class="css-a4x74f"><span>614</span></td><td id="LC614" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L615" class="css-a4x74f"><span>615</span></td><td id="LC615" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">triggerListeners</span>(<span class="code-params">to, from, { direction, delta }</span>) </span>{
</code></td></tr><tr><td id="L616" class="css-a4x74f"><span>616</span></td><td id="LC616" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> info = {
</code></td></tr><tr><td id="L617" class="css-a4x74f"><span>617</span></td><td id="LC617" class="css-1dcdqdg"><code>              direction,
</code></td></tr><tr><td id="L618" class="css-a4x74f"><span>618</span></td><td id="LC618" class="css-1dcdqdg"><code>              delta,
</code></td></tr><tr><td id="L619" class="css-a4x74f"><span>619</span></td><td id="LC619" class="css-1dcdqdg"><code>              type: NavigationType.pop,
</code></td></tr><tr><td id="L620" class="css-a4x74f"><span>620</span></td><td id="LC620" class="css-1dcdqdg"><code>          };
</code></td></tr><tr><td id="L621" class="css-a4x74f"><span>621</span></td><td id="LC621" class="css-1dcdqdg"><code>          <span class="code-keyword">for</span> (<span class="code-keyword">const</span> callback <span class="code-keyword">of</span> listeners) {
</code></td></tr><tr><td id="L622" class="css-a4x74f"><span>622</span></td><td id="LC622" class="css-1dcdqdg"><code>              callback(to, <span class="code-keyword">from</span>, info);
</code></td></tr><tr><td id="L623" class="css-a4x74f"><span>623</span></td><td id="LC623" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L624" class="css-a4x74f"><span>624</span></td><td id="LC624" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L625" class="css-a4x74f"><span>625</span></td><td id="LC625" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> routerHistory = {
</code></td></tr><tr><td id="L626" class="css-a4x74f"><span>626</span></td><td id="LC626" class="css-1dcdqdg"><code>          <span class="code-comment">// rewritten by Object.defineProperty</span>
</code></td></tr><tr><td id="L627" class="css-a4x74f"><span>627</span></td><td id="LC627" class="css-1dcdqdg"><code>          location: START,
</code></td></tr><tr><td id="L628" class="css-a4x74f"><span>628</span></td><td id="LC628" class="css-1dcdqdg"><code>          <span class="code-comment">// <span class="code-doctag">TODO:</span> should be kept in queue</span>
</code></td></tr><tr><td id="L629" class="css-a4x74f"><span>629</span></td><td id="LC629" class="css-1dcdqdg"><code>          state: {},
</code></td></tr><tr><td id="L630" class="css-a4x74f"><span>630</span></td><td id="LC630" class="css-1dcdqdg"><code>          base,
</code></td></tr><tr><td id="L631" class="css-a4x74f"><span>631</span></td><td id="LC631" class="css-1dcdqdg"><code>          createHref: createHref.bind(<span class="code-literal">null</span>, base),
</code></td></tr><tr><td id="L632" class="css-a4x74f"><span>632</span></td><td id="LC632" class="css-1dcdqdg"><code>          replace(to) {
</code></td></tr><tr><td id="L633" class="css-a4x74f"><span>633</span></td><td id="LC633" class="css-1dcdqdg"><code>              <span class="code-comment">// remove current entry and decrement position</span>
</code></td></tr><tr><td id="L634" class="css-a4x74f"><span>634</span></td><td id="LC634" class="css-1dcdqdg"><code>              queue.splice(position--, <span class="code-number">1</span>);
</code></td></tr><tr><td id="L635" class="css-a4x74f"><span>635</span></td><td id="LC635" class="css-1dcdqdg"><code>              setLocation(to);
</code></td></tr><tr><td id="L636" class="css-a4x74f"><span>636</span></td><td id="LC636" class="css-1dcdqdg"><code>          },
</code></td></tr><tr><td id="L637" class="css-a4x74f"><span>637</span></td><td id="LC637" class="css-1dcdqdg"><code>          push(to, data) {
</code></td></tr><tr><td id="L638" class="css-a4x74f"><span>638</span></td><td id="LC638" class="css-1dcdqdg"><code>              setLocation(to);
</code></td></tr><tr><td id="L639" class="css-a4x74f"><span>639</span></td><td id="LC639" class="css-1dcdqdg"><code>          },
</code></td></tr><tr><td id="L640" class="css-a4x74f"><span>640</span></td><td id="LC640" class="css-1dcdqdg"><code>          listen(callback) {
</code></td></tr><tr><td id="L641" class="css-a4x74f"><span>641</span></td><td id="LC641" class="css-1dcdqdg"><code>              listeners.push(callback);
</code></td></tr><tr><td id="L642" class="css-a4x74f"><span>642</span></td><td id="LC642" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> <span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L643" class="css-a4x74f"><span>643</span></td><td id="LC643" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> index = listeners.indexOf(callback);
</code></td></tr><tr><td id="L644" class="css-a4x74f"><span>644</span></td><td id="LC644" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (index &gt; <span class="code-number">-1</span>)
</code></td></tr><tr><td id="L645" class="css-a4x74f"><span>645</span></td><td id="LC645" class="css-1dcdqdg"><code>                      listeners.splice(index, <span class="code-number">1</span>);
</code></td></tr><tr><td id="L646" class="css-a4x74f"><span>646</span></td><td id="LC646" class="css-1dcdqdg"><code>              };
</code></td></tr><tr><td id="L647" class="css-a4x74f"><span>647</span></td><td id="LC647" class="css-1dcdqdg"><code>          },
</code></td></tr><tr><td id="L648" class="css-a4x74f"><span>648</span></td><td id="LC648" class="css-1dcdqdg"><code>          destroy() {
</code></td></tr><tr><td id="L649" class="css-a4x74f"><span>649</span></td><td id="LC649" class="css-1dcdqdg"><code>              listeners = [];
</code></td></tr><tr><td id="L650" class="css-a4x74f"><span>650</span></td><td id="LC650" class="css-1dcdqdg"><code>              queue = [START];
</code></td></tr><tr><td id="L651" class="css-a4x74f"><span>651</span></td><td id="LC651" class="css-1dcdqdg"><code>              position = <span class="code-number">0</span>;
</code></td></tr><tr><td id="L652" class="css-a4x74f"><span>652</span></td><td id="LC652" class="css-1dcdqdg"><code>          },
</code></td></tr><tr><td id="L653" class="css-a4x74f"><span>653</span></td><td id="LC653" class="css-1dcdqdg"><code>          go(delta, shouldTrigger = <span class="code-literal">true</span>) {
</code></td></tr><tr><td id="L654" class="css-a4x74f"><span>654</span></td><td id="LC654" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> <span class="code-keyword">from</span> = <span class="code-keyword">this</span>.location;
</code></td></tr><tr><td id="L655" class="css-a4x74f"><span>655</span></td><td id="LC655" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> direction = 
</code></td></tr><tr><td id="L656" class="css-a4x74f"><span>656</span></td><td id="LC656" class="css-1dcdqdg"><code>              <span class="code-comment">// we are considering delta === 0 going forward, but in abstract mode</span>
</code></td></tr><tr><td id="L657" class="css-a4x74f"><span>657</span></td><td id="LC657" class="css-1dcdqdg"><code>              <span class="code-comment">// using 0 for the delta doesn't make sense like it does in html5 where</span>
</code></td></tr><tr><td id="L658" class="css-a4x74f"><span>658</span></td><td id="LC658" class="css-1dcdqdg"><code>              <span class="code-comment">// it reloads the page</span>
</code></td></tr><tr><td id="L659" class="css-a4x74f"><span>659</span></td><td id="LC659" class="css-1dcdqdg"><code>              delta &lt; <span class="code-number">0</span> ? NavigationDirection.back : NavigationDirection.forward;
</code></td></tr><tr><td id="L660" class="css-a4x74f"><span>660</span></td><td id="LC660" class="css-1dcdqdg"><code>              position = <span class="code-built_in">Math</span>.max(<span class="code-number">0</span>, <span class="code-built_in">Math</span>.min(position + delta, queue.length - <span class="code-number">1</span>));
</code></td></tr><tr><td id="L661" class="css-a4x74f"><span>661</span></td><td id="LC661" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (shouldTrigger) {
</code></td></tr><tr><td id="L662" class="css-a4x74f"><span>662</span></td><td id="LC662" class="css-1dcdqdg"><code>                  triggerListeners(<span class="code-keyword">this</span>.location, <span class="code-keyword">from</span>, {
</code></td></tr><tr><td id="L663" class="css-a4x74f"><span>663</span></td><td id="LC663" class="css-1dcdqdg"><code>                      direction,
</code></td></tr><tr><td id="L664" class="css-a4x74f"><span>664</span></td><td id="LC664" class="css-1dcdqdg"><code>                      delta,
</code></td></tr><tr><td id="L665" class="css-a4x74f"><span>665</span></td><td id="LC665" class="css-1dcdqdg"><code>                  });
</code></td></tr><tr><td id="L666" class="css-a4x74f"><span>666</span></td><td id="LC666" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L667" class="css-a4x74f"><span>667</span></td><td id="LC667" class="css-1dcdqdg"><code>          },
</code></td></tr><tr><td id="L668" class="css-a4x74f"><span>668</span></td><td id="LC668" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L669" class="css-a4x74f"><span>669</span></td><td id="LC669" class="css-1dcdqdg"><code>      <span class="code-built_in">Object</span>.defineProperty(routerHistory, <span class="code-string">'location'</span>, {
</code></td></tr><tr><td id="L670" class="css-a4x74f"><span>670</span></td><td id="LC670" class="css-1dcdqdg"><code>          enumerable: <span class="code-literal">true</span>,
</code></td></tr><tr><td id="L671" class="css-a4x74f"><span>671</span></td><td id="LC671" class="css-1dcdqdg"><code>          <span class="code-keyword">get</span>: () =&gt; queue[position],
</code></td></tr><tr><td id="L672" class="css-a4x74f"><span>672</span></td><td id="LC672" class="css-1dcdqdg"><code>      });
</code></td></tr><tr><td id="L673" class="css-a4x74f"><span>673</span></td><td id="LC673" class="css-1dcdqdg"><code>      return routerHistory;
</code></td></tr><tr><td id="L674" class="css-a4x74f"><span>674</span></td><td id="LC674" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L675" class="css-a4x74f"><span>675</span></td><td id="LC675" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L676" class="css-a4x74f"><span>676</span></td><td id="LC676" class="css-1dcdqdg"><code>  /**
</code></td></tr><tr><td id="L677" class="css-a4x74f"><span>677</span></td><td id="LC677" class="css-1dcdqdg"><code>   * Creates a hash history. Useful for web applications with no host (e.g. `file://`) or when configuring a server to
</code></td></tr><tr><td id="L678" class="css-a4x74f"><span>678</span></td><td id="LC678" class="css-1dcdqdg"><code>   * handle any URL is not possible.
</code></td></tr><tr><td id="L679" class="css-a4x74f"><span>679</span></td><td id="LC679" class="css-1dcdqdg"><code>   *
</code></td></tr><tr><td id="L680" class="css-a4x74f"><span>680</span></td><td id="LC680" class="css-1dcdqdg"><code>   * @param base - optional base to provide. Defaults to `location.pathname + location.search` If there is a `&lt;base&gt;` tag
</code></td></tr><tr><td id="L681" class="css-a4x74f"><span>681</span></td><td id="LC681" class="css-1dcdqdg"><code>   * in the `head`, its value will be ignored in favor of this parameter **but note it affects all the history.pushState()
</code></td></tr><tr><td id="L682" class="css-a4x74f"><span>682</span></td><td id="LC682" class="css-1dcdqdg"><code>   * calls**, meaning that if you use a `&lt;base&gt;` tag, it's `href` value **has to match this parameter** (ignoring anything
</code></td></tr><tr><td id="L683" class="css-a4x74f"><span>683</span></td><td id="LC683" class="css-1dcdqdg"><code>   * after the `#`).
</code></td></tr><tr><td id="L684" class="css-a4x74f"><span>684</span></td><td id="LC684" class="css-1dcdqdg"><code>   *
</code></td></tr><tr><td id="L685" class="css-a4x74f"><span>685</span></td><td id="LC685" class="css-1dcdqdg"><code>   * @example
</code></td></tr><tr><td id="L686" class="css-a4x74f"><span>686</span></td><td id="LC686" class="css-1dcdqdg"><code>   * ```js
</code></td></tr><tr><td id="L687" class="css-a4x74f"><span>687</span></td><td id="LC687" class="css-1dcdqdg"><code>   * // at https://example.com/folder
</code></td></tr><tr><td id="L688" class="css-a4x74f"><span>688</span></td><td id="LC688" class="css-1dcdqdg"><code>   * createWebHashHistory() // gives a url of `https://example.com/folder#`
</code></td></tr><tr><td id="L689" class="css-a4x74f"><span>689</span></td><td id="LC689" class="css-1dcdqdg"><code>   * createWebHashHistory('/folder/') // gives a url of `https://example.com/folder/#`
</code></td></tr><tr><td id="L690" class="css-a4x74f"><span>690</span></td><td id="LC690" class="css-1dcdqdg"><code>   * // if the `#` is provided in the base, it won't be added by `createWebHashHistory`
</code></td></tr><tr><td id="L691" class="css-a4x74f"><span>691</span></td><td id="LC691" class="css-1dcdqdg"><code>   * createWebHashHistory('/folder/#/app/') // gives a url of `https://example.com/folder/#/app/`
</code></td></tr><tr><td id="L692" class="css-a4x74f"><span>692</span></td><td id="LC692" class="css-1dcdqdg"><code>   * // you should avoid doing this because it changes the original url and breaks copying urls
</code></td></tr><tr><td id="L693" class="css-a4x74f"><span>693</span></td><td id="LC693" class="css-1dcdqdg"><code>   * createWebHashHistory('/other-folder/') // gives a url of `https://example.com/other-folder/#`
</code></td></tr><tr><td id="L694" class="css-a4x74f"><span>694</span></td><td id="LC694" class="css-1dcdqdg"><code>   *
</code></td></tr><tr><td id="L695" class="css-a4x74f"><span>695</span></td><td id="LC695" class="css-1dcdqdg"><code>   * // at file:///usr/etc/folder/index.html
</code></td></tr><tr><td id="L696" class="css-a4x74f"><span>696</span></td><td id="LC696" class="css-1dcdqdg"><code>   * // for locations with no `host`, the base is ignored
</code></td></tr><tr><td id="L697" class="css-a4x74f"><span>697</span></td><td id="LC697" class="css-1dcdqdg"><code>   * createWebHashHistory('/iAmIgnored') // gives a url of `file:///usr/etc/folder/index.html#`
</code></td></tr><tr><td id="L698" class="css-a4x74f"><span>698</span></td><td id="LC698" class="css-1dcdqdg"><code>   * ```
</code></td></tr><tr><td id="L699" class="css-a4x74f"><span>699</span></td><td id="LC699" class="css-1dcdqdg"><code>   */
</code></td></tr><tr><td id="L700" class="css-a4x74f"><span>700</span></td><td id="LC700" class="css-1dcdqdg"><code>  function createWebHashHistory(base) {
</code></td></tr><tr><td id="L701" class="css-a4x74f"><span>701</span></td><td id="LC701" class="css-1dcdqdg"><code>      <span class="code-comment">// Make sure this implementation is fine in terms of encoding, specially for IE11</span>
</code></td></tr><tr><td id="L702" class="css-a4x74f"><span>702</span></td><td id="LC702" class="css-1dcdqdg"><code>      <span class="code-comment">// for `file://`, directly use the pathname and ignore the base</span>
</code></td></tr><tr><td id="L703" class="css-a4x74f"><span>703</span></td><td id="LC703" class="css-1dcdqdg"><code>      <span class="code-comment">// location.pathname contains an initial `/` even at the root: `https://example.com`</span>
</code></td></tr><tr><td id="L704" class="css-a4x74f"><span>704</span></td><td id="LC704" class="css-1dcdqdg"><code>      base = location.host ? base || location.pathname + location.search : <span class="code-string">''</span>;
</code></td></tr><tr><td id="L705" class="css-a4x74f"><span>705</span></td><td id="LC705" class="css-1dcdqdg"><code>      <span class="code-comment">// allow the user to provide a `#` in the middle: `/base/#/app`</span>
</code></td></tr><tr><td id="L706" class="css-a4x74f"><span>706</span></td><td id="LC706" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!base.includes(<span class="code-string">'#'</span>))
</code></td></tr><tr><td id="L707" class="css-a4x74f"><span>707</span></td><td id="LC707" class="css-1dcdqdg"><code>          base += <span class="code-string">'#'</span>;
</code></td></tr><tr><td id="L708" class="css-a4x74f"><span>708</span></td><td id="LC708" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!base.endsWith(<span class="code-string">'#/'</span>) &amp;&amp; !base.endsWith(<span class="code-string">'#'</span>)) {
</code></td></tr><tr><td id="L709" class="css-a4x74f"><span>709</span></td><td id="LC709" class="css-1dcdqdg"><code>          warn(<span class="code-string">`A hash base must end with a "#":\n"<span class="code-subst">${base}</span>" should be "<span class="code-subst">${base.replace(<span class="code-regexp">/#.*$/</span>, <span class="code-string">'#'</span>)}</span>".`</span>);
</code></td></tr><tr><td id="L710" class="css-a4x74f"><span>710</span></td><td id="LC710" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L711" class="css-a4x74f"><span>711</span></td><td id="LC711" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> createWebHistory(base);
</code></td></tr><tr><td id="L712" class="css-a4x74f"><span>712</span></td><td id="LC712" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L713" class="css-a4x74f"><span>713</span></td><td id="LC713" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L714" class="css-a4x74f"><span>714</span></td><td id="LC714" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isRouteLocation</span>(<span class="code-params">route</span>) </span>{
</code></td></tr><tr><td id="L715" class="css-a4x74f"><span>715</span></td><td id="LC715" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> <span class="code-keyword">typeof</span> route === <span class="code-string">'string'</span> || (route &amp;&amp; <span class="code-keyword">typeof</span> route === <span class="code-string">'object'</span>);
</code></td></tr><tr><td id="L716" class="css-a4x74f"><span>716</span></td><td id="LC716" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L717" class="css-a4x74f"><span>717</span></td><td id="LC717" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isRouteName</span>(<span class="code-params">name</span>) </span>{
</code></td></tr><tr><td id="L718" class="css-a4x74f"><span>718</span></td><td id="LC718" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> <span class="code-keyword">typeof</span> name === <span class="code-string">'string'</span> || <span class="code-keyword">typeof</span> name === <span class="code-string">'symbol'</span>;
</code></td></tr><tr><td id="L719" class="css-a4x74f"><span>719</span></td><td id="LC719" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L720" class="css-a4x74f"><span>720</span></td><td id="LC720" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L721" class="css-a4x74f"><span>721</span></td><td id="LC721" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L722" class="css-a4x74f"><span>722</span></td><td id="LC722" class="css-1dcdqdg"><code><span class="code-comment">   * Initial route location where the router is. Can be used in navigation guards
</span></code></td></tr><tr><td id="L723" class="css-a4x74f"><span>723</span></td><td id="LC723" class="css-1dcdqdg"><code><span class="code-comment">   * to differentiate the initial navigation.
</span></code></td></tr><tr><td id="L724" class="css-a4x74f"><span>724</span></td><td id="LC724" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L725" class="css-a4x74f"><span>725</span></td><td id="LC725" class="css-1dcdqdg"><code><span class="code-comment">   * @example
</span></code></td></tr><tr><td id="L726" class="css-a4x74f"><span>726</span></td><td id="LC726" class="css-1dcdqdg"><code><span class="code-comment">   * ```js
</span></code></td></tr><tr><td id="L727" class="css-a4x74f"><span>727</span></td><td id="LC727" class="css-1dcdqdg"><code><span class="code-comment">   * import { START_LOCATION } from 'vue-router'
</span></code></td></tr><tr><td id="L728" class="css-a4x74f"><span>728</span></td><td id="LC728" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L729" class="css-a4x74f"><span>729</span></td><td id="LC729" class="css-1dcdqdg"><code><span class="code-comment">   * router.beforeEach((to, from) =&gt; {
</span></code></td></tr><tr><td id="L730" class="css-a4x74f"><span>730</span></td><td id="LC730" class="css-1dcdqdg"><code><span class="code-comment">   *   if (from === START_LOCATION) {
</span></code></td></tr><tr><td id="L731" class="css-a4x74f"><span>731</span></td><td id="LC731" class="css-1dcdqdg"><code><span class="code-comment">   *     // initial navigation
</span></code></td></tr><tr><td id="L732" class="css-a4x74f"><span>732</span></td><td id="LC732" class="css-1dcdqdg"><code><span class="code-comment">   *   }
</span></code></td></tr><tr><td id="L733" class="css-a4x74f"><span>733</span></td><td id="LC733" class="css-1dcdqdg"><code><span class="code-comment">   * })
</span></code></td></tr><tr><td id="L734" class="css-a4x74f"><span>734</span></td><td id="LC734" class="css-1dcdqdg"><code><span class="code-comment">   * ```
</span></code></td></tr><tr><td id="L735" class="css-a4x74f"><span>735</span></td><td id="LC735" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L736" class="css-a4x74f"><span>736</span></td><td id="LC736" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> START_LOCATION_NORMALIZED = {
</code></td></tr><tr><td id="L737" class="css-a4x74f"><span>737</span></td><td id="LC737" class="css-1dcdqdg"><code>      path: <span class="code-string">'/'</span>,
</code></td></tr><tr><td id="L738" class="css-a4x74f"><span>738</span></td><td id="LC738" class="css-1dcdqdg"><code>      name: <span class="code-literal">undefined</span>,
</code></td></tr><tr><td id="L739" class="css-a4x74f"><span>739</span></td><td id="LC739" class="css-1dcdqdg"><code>      params: {},
</code></td></tr><tr><td id="L740" class="css-a4x74f"><span>740</span></td><td id="LC740" class="css-1dcdqdg"><code>      query: {},
</code></td></tr><tr><td id="L741" class="css-a4x74f"><span>741</span></td><td id="LC741" class="css-1dcdqdg"><code>      hash: <span class="code-string">''</span>,
</code></td></tr><tr><td id="L742" class="css-a4x74f"><span>742</span></td><td id="LC742" class="css-1dcdqdg"><code>      fullPath: <span class="code-string">'/'</span>,
</code></td></tr><tr><td id="L743" class="css-a4x74f"><span>743</span></td><td id="LC743" class="css-1dcdqdg"><code>      matched: [],
</code></td></tr><tr><td id="L744" class="css-a4x74f"><span>744</span></td><td id="LC744" class="css-1dcdqdg"><code>      meta: {},
</code></td></tr><tr><td id="L745" class="css-a4x74f"><span>745</span></td><td id="LC745" class="css-1dcdqdg"><code>      redirectedFrom: <span class="code-literal">undefined</span>,
</code></td></tr><tr><td id="L746" class="css-a4x74f"><span>746</span></td><td id="LC746" class="css-1dcdqdg"><code>  };
</code></td></tr><tr><td id="L747" class="css-a4x74f"><span>747</span></td><td id="LC747" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L748" class="css-a4x74f"><span>748</span></td><td id="LC748" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> NavigationFailureSymbol = <span class="code-built_in">Symbol</span>(<span class="code-string">'navigation failure'</span> );
</code></td></tr><tr><td id="L749" class="css-a4x74f"><span>749</span></td><td id="LC749" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L750" class="css-a4x74f"><span>750</span></td><td id="LC750" class="css-1dcdqdg"><code><span class="code-comment">   * Enumeration with all possible types for navigation failures. Can be passed to
</span></code></td></tr><tr><td id="L751" class="css-a4x74f"><span>751</span></td><td id="LC751" class="css-1dcdqdg"><code><span class="code-comment">   * {@link isNavigationFailure} to check for specific failures.
</span></code></td></tr><tr><td id="L752" class="css-a4x74f"><span>752</span></td><td id="LC752" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L753" class="css-a4x74f"><span>753</span></td><td id="LC753" class="css-1dcdqdg"><code>  exports.NavigationFailureType = <span class="code-keyword">void</span> <span class="code-number">0</span>;
</code></td></tr><tr><td id="L754" class="css-a4x74f"><span>754</span></td><td id="LC754" class="css-1dcdqdg"><code>  (<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">NavigationFailureType</span>) </span>{
</code></td></tr><tr><td id="L755" class="css-a4x74f"><span>755</span></td><td id="LC755" class="css-1dcdqdg"><code>      <span class="code-comment">/**
</span></code></td></tr><tr><td id="L756" class="css-a4x74f"><span>756</span></td><td id="LC756" class="css-1dcdqdg"><code><span class="code-comment">       * An aborted navigation is a navigation that failed because a navigation
</span></code></td></tr><tr><td id="L757" class="css-a4x74f"><span>757</span></td><td id="LC757" class="css-1dcdqdg"><code><span class="code-comment">       * guard returned `false` or called `next(false)`
</span></code></td></tr><tr><td id="L758" class="css-a4x74f"><span>758</span></td><td id="LC758" class="css-1dcdqdg"><code><span class="code-comment">       */</span>
</code></td></tr><tr><td id="L759" class="css-a4x74f"><span>759</span></td><td id="LC759" class="css-1dcdqdg"><code>      NavigationFailureType[NavigationFailureType[<span class="code-string">"aborted"</span>] = <span class="code-number">4</span>] = <span class="code-string">"aborted"</span>;
</code></td></tr><tr><td id="L760" class="css-a4x74f"><span>760</span></td><td id="LC760" class="css-1dcdqdg"><code>      <span class="code-comment">/**
</span></code></td></tr><tr><td id="L761" class="css-a4x74f"><span>761</span></td><td id="LC761" class="css-1dcdqdg"><code><span class="code-comment">       * A cancelled navigation is a navigation that failed because a more recent
</span></code></td></tr><tr><td id="L762" class="css-a4x74f"><span>762</span></td><td id="LC762" class="css-1dcdqdg"><code><span class="code-comment">       * navigation finished started (not necessarily finished).
</span></code></td></tr><tr><td id="L763" class="css-a4x74f"><span>763</span></td><td id="LC763" class="css-1dcdqdg"><code><span class="code-comment">       */</span>
</code></td></tr><tr><td id="L764" class="css-a4x74f"><span>764</span></td><td id="LC764" class="css-1dcdqdg"><code>      NavigationFailureType[NavigationFailureType[<span class="code-string">"cancelled"</span>] = <span class="code-number">8</span>] = <span class="code-string">"cancelled"</span>;
</code></td></tr><tr><td id="L765" class="css-a4x74f"><span>765</span></td><td id="LC765" class="css-1dcdqdg"><code>      <span class="code-comment">/**
</span></code></td></tr><tr><td id="L766" class="css-a4x74f"><span>766</span></td><td id="LC766" class="css-1dcdqdg"><code><span class="code-comment">       * A duplicated navigation is a navigation that failed because it was
</span></code></td></tr><tr><td id="L767" class="css-a4x74f"><span>767</span></td><td id="LC767" class="css-1dcdqdg"><code><span class="code-comment">       * initiated while already being at the exact same location.
</span></code></td></tr><tr><td id="L768" class="css-a4x74f"><span>768</span></td><td id="LC768" class="css-1dcdqdg"><code><span class="code-comment">       */</span>
</code></td></tr><tr><td id="L769" class="css-a4x74f"><span>769</span></td><td id="LC769" class="css-1dcdqdg"><code>      NavigationFailureType[NavigationFailureType[<span class="code-string">"duplicated"</span>] = <span class="code-number">16</span>] = <span class="code-string">"duplicated"</span>;
</code></td></tr><tr><td id="L770" class="css-a4x74f"><span>770</span></td><td id="LC770" class="css-1dcdqdg"><code>  })(exports.NavigationFailureType || (exports.NavigationFailureType = {}));
</code></td></tr><tr><td id="L771" class="css-a4x74f"><span>771</span></td><td id="LC771" class="css-1dcdqdg"><code>  <span class="code-comment">// DEV only debug messages</span>
</code></td></tr><tr><td id="L772" class="css-a4x74f"><span>772</span></td><td id="LC772" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> ErrorTypeMessages = {
</code></td></tr><tr><td id="L773" class="css-a4x74f"><span>773</span></td><td id="LC773" class="css-1dcdqdg"><code>      [<span class="code-number">1</span> <span class="code-comment">/* ErrorTypes.MATCHER_NOT_FOUND */</span>]({ location, currentLocation }) {
</code></td></tr><tr><td id="L774" class="css-a4x74f"><span>774</span></td><td id="LC774" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-string">`No match for\n <span class="code-subst">${<span class="code-built_in">JSON</span>.stringify(location)}</span><span class="code-subst">${currentLocation
</span></span></code></td></tr><tr><td id="L775" class="css-a4x74f"><span>775</span></td><td id="LC775" class="css-1dcdqdg"><code><span class="code-string"><span class="code-subst">            ? <span class="code-string">'\nwhile being at\n'</span> + <span class="code-built_in">JSON</span>.stringify(currentLocation)
</span></span></code></td></tr><tr><td id="L776" class="css-a4x74f"><span>776</span></td><td id="LC776" class="css-1dcdqdg"><code><span class="code-string"><span class="code-subst">            : <span class="code-string">''</span>}</span>`</span>;
</code></td></tr><tr><td id="L777" class="css-a4x74f"><span>777</span></td><td id="LC777" class="css-1dcdqdg"><code>      },
</code></td></tr><tr><td id="L778" class="css-a4x74f"><span>778</span></td><td id="LC778" class="css-1dcdqdg"><code>      [<span class="code-number">2</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_GUARD_REDIRECT */</span>]({ <span class="code-keyword">from</span>, to, }) {
</code></td></tr><tr><td id="L779" class="css-a4x74f"><span>779</span></td><td id="LC779" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-string">`Redirected from "<span class="code-subst">${<span class="code-keyword">from</span>.fullPath}</span>" to "<span class="code-subst">${stringifyRoute(to)}</span>" via a navigation guard.`</span>;
</code></td></tr><tr><td id="L780" class="css-a4x74f"><span>780</span></td><td id="LC780" class="css-1dcdqdg"><code>      },
</code></td></tr><tr><td id="L781" class="css-a4x74f"><span>781</span></td><td id="LC781" class="css-1dcdqdg"><code>      [<span class="code-number">4</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_ABORTED */</span>]({ <span class="code-keyword">from</span>, to }) {
</code></td></tr><tr><td id="L782" class="css-a4x74f"><span>782</span></td><td id="LC782" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-string">`Navigation aborted from "<span class="code-subst">${<span class="code-keyword">from</span>.fullPath}</span>" to "<span class="code-subst">${to.fullPath}</span>" via a navigation guard.`</span>;
</code></td></tr><tr><td id="L783" class="css-a4x74f"><span>783</span></td><td id="LC783" class="css-1dcdqdg"><code>      },
</code></td></tr><tr><td id="L784" class="css-a4x74f"><span>784</span></td><td id="LC784" class="css-1dcdqdg"><code>      [<span class="code-number">8</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_CANCELLED */</span>]({ <span class="code-keyword">from</span>, to }) {
</code></td></tr><tr><td id="L785" class="css-a4x74f"><span>785</span></td><td id="LC785" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-string">`Navigation cancelled from "<span class="code-subst">${<span class="code-keyword">from</span>.fullPath}</span>" to "<span class="code-subst">${to.fullPath}</span>" with a new navigation.`</span>;
</code></td></tr><tr><td id="L786" class="css-a4x74f"><span>786</span></td><td id="LC786" class="css-1dcdqdg"><code>      },
</code></td></tr><tr><td id="L787" class="css-a4x74f"><span>787</span></td><td id="LC787" class="css-1dcdqdg"><code>      [<span class="code-number">16</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_DUPLICATED */</span>]({ <span class="code-keyword">from</span>, to }) {
</code></td></tr><tr><td id="L788" class="css-a4x74f"><span>788</span></td><td id="LC788" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-string">`Avoided redundant navigation to current location: "<span class="code-subst">${<span class="code-keyword">from</span>.fullPath}</span>".`</span>;
</code></td></tr><tr><td id="L789" class="css-a4x74f"><span>789</span></td><td id="LC789" class="css-1dcdqdg"><code>      },
</code></td></tr><tr><td id="L790" class="css-a4x74f"><span>790</span></td><td id="LC790" class="css-1dcdqdg"><code>  };
</code></td></tr><tr><td id="L791" class="css-a4x74f"><span>791</span></td><td id="LC791" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">createRouterError</span>(<span class="code-params">type, params</span>) </span>{
</code></td></tr><tr><td id="L792" class="css-a4x74f"><span>792</span></td><td id="LC792" class="css-1dcdqdg"><code>      <span class="code-comment">// keep full error messages in cjs versions</span>
</code></td></tr><tr><td id="L793" class="css-a4x74f"><span>793</span></td><td id="LC793" class="css-1dcdqdg"><code>      {
</code></td></tr><tr><td id="L794" class="css-a4x74f"><span>794</span></td><td id="LC794" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> assign(<span class="code-keyword">new</span> <span class="code-built_in">Error</span>(ErrorTypeMessages[type](params)), {
</code></td></tr><tr><td id="L795" class="css-a4x74f"><span>795</span></td><td id="LC795" class="css-1dcdqdg"><code>              type,
</code></td></tr><tr><td id="L796" class="css-a4x74f"><span>796</span></td><td id="LC796" class="css-1dcdqdg"><code>              [NavigationFailureSymbol]: <span class="code-literal">true</span>,
</code></td></tr><tr><td id="L797" class="css-a4x74f"><span>797</span></td><td id="LC797" class="css-1dcdqdg"><code>          }, params);
</code></td></tr><tr><td id="L798" class="css-a4x74f"><span>798</span></td><td id="LC798" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L799" class="css-a4x74f"><span>799</span></td><td id="LC799" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L800" class="css-a4x74f"><span>800</span></td><td id="LC800" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isNavigationFailure</span>(<span class="code-params">error, type</span>) </span>{
</code></td></tr><tr><td id="L801" class="css-a4x74f"><span>801</span></td><td id="LC801" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> (error <span class="code-keyword">instanceof</span> <span class="code-built_in">Error</span> &amp;&amp;
</code></td></tr><tr><td id="L802" class="css-a4x74f"><span>802</span></td><td id="LC802" class="css-1dcdqdg"><code>          NavigationFailureSymbol <span class="code-keyword">in</span> error &amp;&amp;
</code></td></tr><tr><td id="L803" class="css-a4x74f"><span>803</span></td><td id="LC803" class="css-1dcdqdg"><code>          (type == <span class="code-literal">null</span> || !!(error.type &amp; type)));
</code></td></tr><tr><td id="L804" class="css-a4x74f"><span>804</span></td><td id="LC804" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L805" class="css-a4x74f"><span>805</span></td><td id="LC805" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> propertiesToLog = [<span class="code-string">'params'</span>, <span class="code-string">'query'</span>, <span class="code-string">'hash'</span>];
</code></td></tr><tr><td id="L806" class="css-a4x74f"><span>806</span></td><td id="LC806" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">stringifyRoute</span>(<span class="code-params">to</span>) </span>{
</code></td></tr><tr><td id="L807" class="css-a4x74f"><span>807</span></td><td id="LC807" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (<span class="code-keyword">typeof</span> to === <span class="code-string">'string'</span>)
</code></td></tr><tr><td id="L808" class="css-a4x74f"><span>808</span></td><td id="LC808" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> to;
</code></td></tr><tr><td id="L809" class="css-a4x74f"><span>809</span></td><td id="LC809" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (<span class="code-string">'path'</span> <span class="code-keyword">in</span> to)
</code></td></tr><tr><td id="L810" class="css-a4x74f"><span>810</span></td><td id="LC810" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> to.path;
</code></td></tr><tr><td id="L811" class="css-a4x74f"><span>811</span></td><td id="LC811" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> location = {};
</code></td></tr><tr><td id="L812" class="css-a4x74f"><span>812</span></td><td id="LC812" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">const</span> key <span class="code-keyword">of</span> propertiesToLog) {
</code></td></tr><tr><td id="L813" class="css-a4x74f"><span>813</span></td><td id="LC813" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (key <span class="code-keyword">in</span> to)
</code></td></tr><tr><td id="L814" class="css-a4x74f"><span>814</span></td><td id="LC814" class="css-1dcdqdg"><code>              location[key] = to[key];
</code></td></tr><tr><td id="L815" class="css-a4x74f"><span>815</span></td><td id="LC815" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L816" class="css-a4x74f"><span>816</span></td><td id="LC816" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> <span class="code-built_in">JSON</span>.stringify(location, <span class="code-literal">null</span>, <span class="code-number">2</span>);
</code></td></tr><tr><td id="L817" class="css-a4x74f"><span>817</span></td><td id="LC817" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L818" class="css-a4x74f"><span>818</span></td><td id="LC818" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L819" class="css-a4x74f"><span>819</span></td><td id="LC819" class="css-1dcdqdg"><code>  <span class="code-comment">// default pattern for a param: non-greedy everything but /</span>
</code></td></tr><tr><td id="L820" class="css-a4x74f"><span>820</span></td><td id="LC820" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> BASE_PARAM_PATTERN = <span class="code-string">'[^/]+?'</span>;
</code></td></tr><tr><td id="L821" class="css-a4x74f"><span>821</span></td><td id="LC821" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> BASE_PATH_PARSER_OPTIONS = {
</code></td></tr><tr><td id="L822" class="css-a4x74f"><span>822</span></td><td id="LC822" class="css-1dcdqdg"><code>      sensitive: <span class="code-literal">false</span>,
</code></td></tr><tr><td id="L823" class="css-a4x74f"><span>823</span></td><td id="LC823" class="css-1dcdqdg"><code>      strict: <span class="code-literal">false</span>,
</code></td></tr><tr><td id="L824" class="css-a4x74f"><span>824</span></td><td id="LC824" class="css-1dcdqdg"><code>      start: <span class="code-literal">true</span>,
</code></td></tr><tr><td id="L825" class="css-a4x74f"><span>825</span></td><td id="LC825" class="css-1dcdqdg"><code>      end: <span class="code-literal">true</span>,
</code></td></tr><tr><td id="L826" class="css-a4x74f"><span>826</span></td><td id="LC826" class="css-1dcdqdg"><code>  };
</code></td></tr><tr><td id="L827" class="css-a4x74f"><span>827</span></td><td id="LC827" class="css-1dcdqdg"><code>  <span class="code-comment">// Special Regex characters that must be escaped in static tokens</span>
</code></td></tr><tr><td id="L828" class="css-a4x74f"><span>828</span></td><td id="LC828" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> REGEX_CHARS_RE = <span class="code-regexp">/[.+*?^${}()[\]/\\]/g</span>;
</code></td></tr><tr><td id="L829" class="css-a4x74f"><span>829</span></td><td id="LC829" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L830" class="css-a4x74f"><span>830</span></td><td id="LC830" class="css-1dcdqdg"><code><span class="code-comment">   * Creates a path parser from an array of Segments (a segment is an array of Tokens)
</span></code></td></tr><tr><td id="L831" class="css-a4x74f"><span>831</span></td><td id="LC831" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L832" class="css-a4x74f"><span>832</span></td><td id="LC832" class="css-1dcdqdg"><code><span class="code-comment">   * @param segments - array of segments returned by tokenizePath
</span></code></td></tr><tr><td id="L833" class="css-a4x74f"><span>833</span></td><td id="LC833" class="css-1dcdqdg"><code><span class="code-comment">   * @param extraOptions - optional options for the regexp
</span></code></td></tr><tr><td id="L834" class="css-a4x74f"><span>834</span></td><td id="LC834" class="css-1dcdqdg"><code><span class="code-comment">   * @returns a PathParser
</span></code></td></tr><tr><td id="L835" class="css-a4x74f"><span>835</span></td><td id="LC835" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L836" class="css-a4x74f"><span>836</span></td><td id="LC836" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">tokensToParser</span>(<span class="code-params">segments, extraOptions</span>) </span>{
</code></td></tr><tr><td id="L837" class="css-a4x74f"><span>837</span></td><td id="LC837" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> options = assign({}, BASE_PATH_PARSER_OPTIONS, extraOptions);
</code></td></tr><tr><td id="L838" class="css-a4x74f"><span>838</span></td><td id="LC838" class="css-1dcdqdg"><code>      <span class="code-comment">// the amount of scores is the same as the length of segments except for the root segment "/"</span>
</code></td></tr><tr><td id="L839" class="css-a4x74f"><span>839</span></td><td id="LC839" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> score = [];
</code></td></tr><tr><td id="L840" class="css-a4x74f"><span>840</span></td><td id="LC840" class="css-1dcdqdg"><code>      <span class="code-comment">// the regexp as a string</span>
</code></td></tr><tr><td id="L841" class="css-a4x74f"><span>841</span></td><td id="LC841" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> pattern = options.start ? <span class="code-string">'^'</span> : <span class="code-string">''</span>;
</code></td></tr><tr><td id="L842" class="css-a4x74f"><span>842</span></td><td id="LC842" class="css-1dcdqdg"><code>      <span class="code-comment">// extracted keys</span>
</code></td></tr><tr><td id="L843" class="css-a4x74f"><span>843</span></td><td id="LC843" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> keys = [];
</code></td></tr><tr><td id="L844" class="css-a4x74f"><span>844</span></td><td id="LC844" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">const</span> segment <span class="code-keyword">of</span> segments) {
</code></td></tr><tr><td id="L845" class="css-a4x74f"><span>845</span></td><td id="LC845" class="css-1dcdqdg"><code>          <span class="code-comment">// the root segment needs special treatment</span>
</code></td></tr><tr><td id="L846" class="css-a4x74f"><span>846</span></td><td id="LC846" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> segmentScores = segment.length ? [] : [<span class="code-number">90</span> <span class="code-comment">/* PathScore.Root */</span>];
</code></td></tr><tr><td id="L847" class="css-a4x74f"><span>847</span></td><td id="LC847" class="css-1dcdqdg"><code>          <span class="code-comment">// allow trailing slash</span>
</code></td></tr><tr><td id="L848" class="css-a4x74f"><span>848</span></td><td id="LC848" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (options.strict &amp;&amp; !segment.length)
</code></td></tr><tr><td id="L849" class="css-a4x74f"><span>849</span></td><td id="LC849" class="css-1dcdqdg"><code>              pattern += <span class="code-string">'/'</span>;
</code></td></tr><tr><td id="L850" class="css-a4x74f"><span>850</span></td><td id="LC850" class="css-1dcdqdg"><code>          <span class="code-keyword">for</span> (<span class="code-keyword">let</span> tokenIndex = <span class="code-number">0</span>; tokenIndex &lt; segment.length; tokenIndex++) {
</code></td></tr><tr><td id="L851" class="css-a4x74f"><span>851</span></td><td id="LC851" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> token = segment[tokenIndex];
</code></td></tr><tr><td id="L852" class="css-a4x74f"><span>852</span></td><td id="LC852" class="css-1dcdqdg"><code>              <span class="code-comment">// resets the score if we are inside a sub-segment /:a-other-:b</span>
</code></td></tr><tr><td id="L853" class="css-a4x74f"><span>853</span></td><td id="LC853" class="css-1dcdqdg"><code>              <span class="code-keyword">let</span> subSegmentScore = <span class="code-number">40</span> <span class="code-comment">/* PathScore.Segment */</span> +
</code></td></tr><tr><td id="L854" class="css-a4x74f"><span>854</span></td><td id="LC854" class="css-1dcdqdg"><code>                  (options.sensitive ? <span class="code-number">0.25</span> <span class="code-comment">/* PathScore.BonusCaseSensitive */</span> : <span class="code-number">0</span>);
</code></td></tr><tr><td id="L855" class="css-a4x74f"><span>855</span></td><td id="LC855" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (token.type === <span class="code-number">0</span> <span class="code-comment">/* TokenType.Static */</span>) {
</code></td></tr><tr><td id="L856" class="css-a4x74f"><span>856</span></td><td id="LC856" class="css-1dcdqdg"><code>                  <span class="code-comment">// prepend the slash if we are starting a new segment</span>
</code></td></tr><tr><td id="L857" class="css-a4x74f"><span>857</span></td><td id="LC857" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (!tokenIndex)
</code></td></tr><tr><td id="L858" class="css-a4x74f"><span>858</span></td><td id="LC858" class="css-1dcdqdg"><code>                      pattern += <span class="code-string">'/'</span>;
</code></td></tr><tr><td id="L859" class="css-a4x74f"><span>859</span></td><td id="LC859" class="css-1dcdqdg"><code>                  pattern += token.value.replace(REGEX_CHARS_RE, <span class="code-string">'\\$&amp;'</span>);
</code></td></tr><tr><td id="L860" class="css-a4x74f"><span>860</span></td><td id="LC860" class="css-1dcdqdg"><code>                  subSegmentScore += <span class="code-number">40</span> <span class="code-comment">/* PathScore.Static */</span>;
</code></td></tr><tr><td id="L861" class="css-a4x74f"><span>861</span></td><td id="LC861" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L862" class="css-a4x74f"><span>862</span></td><td id="LC862" class="css-1dcdqdg"><code>              <span class="code-keyword">else</span> <span class="code-keyword">if</span> (token.type === <span class="code-number">1</span> <span class="code-comment">/* TokenType.Param */</span>) {
</code></td></tr><tr><td id="L863" class="css-a4x74f"><span>863</span></td><td id="LC863" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> { value, repeatable, optional, regexp } = token;
</code></td></tr><tr><td id="L864" class="css-a4x74f"><span>864</span></td><td id="LC864" class="css-1dcdqdg"><code>                  keys.push({
</code></td></tr><tr><td id="L865" class="css-a4x74f"><span>865</span></td><td id="LC865" class="css-1dcdqdg"><code>                      name: value,
</code></td></tr><tr><td id="L866" class="css-a4x74f"><span>866</span></td><td id="LC866" class="css-1dcdqdg"><code>                      repeatable,
</code></td></tr><tr><td id="L867" class="css-a4x74f"><span>867</span></td><td id="LC867" class="css-1dcdqdg"><code>                      optional,
</code></td></tr><tr><td id="L868" class="css-a4x74f"><span>868</span></td><td id="LC868" class="css-1dcdqdg"><code>                  });
</code></td></tr><tr><td id="L869" class="css-a4x74f"><span>869</span></td><td id="LC869" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> re = regexp ? regexp : BASE_PARAM_PATTERN;
</code></td></tr><tr><td id="L870" class="css-a4x74f"><span>870</span></td><td id="LC870" class="css-1dcdqdg"><code>                  <span class="code-comment">// the user provided a custom regexp /:id(\\d+)</span>
</code></td></tr><tr><td id="L871" class="css-a4x74f"><span>871</span></td><td id="LC871" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (re !== BASE_PARAM_PATTERN) {
</code></td></tr><tr><td id="L872" class="css-a4x74f"><span>872</span></td><td id="LC872" class="css-1dcdqdg"><code>                      subSegmentScore += <span class="code-number">10</span> <span class="code-comment">/* PathScore.BonusCustomRegExp */</span>;
</code></td></tr><tr><td id="L873" class="css-a4x74f"><span>873</span></td><td id="LC873" class="css-1dcdqdg"><code>                      <span class="code-comment">// make sure the regexp is valid before using it</span>
</code></td></tr><tr><td id="L874" class="css-a4x74f"><span>874</span></td><td id="LC874" class="css-1dcdqdg"><code>                      <span class="code-keyword">try</span> {
</code></td></tr><tr><td id="L875" class="css-a4x74f"><span>875</span></td><td id="LC875" class="css-1dcdqdg"><code>                          <span class="code-keyword">new</span> <span class="code-built_in">RegExp</span>(<span class="code-string">`(<span class="code-subst">${re}</span>)`</span>);
</code></td></tr><tr><td id="L876" class="css-a4x74f"><span>876</span></td><td id="LC876" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L877" class="css-a4x74f"><span>877</span></td><td id="LC877" class="css-1dcdqdg"><code>                      <span class="code-keyword">catch</span> (err) {
</code></td></tr><tr><td id="L878" class="css-a4x74f"><span>878</span></td><td id="LC878" class="css-1dcdqdg"><code>                          <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">`Invalid custom RegExp for param "<span class="code-subst">${value}</span>" (<span class="code-subst">${re}</span>): `</span> +
</code></td></tr><tr><td id="L879" class="css-a4x74f"><span>879</span></td><td id="LC879" class="css-1dcdqdg"><code>                              err.message);
</code></td></tr><tr><td id="L880" class="css-a4x74f"><span>880</span></td><td id="LC880" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L881" class="css-a4x74f"><span>881</span></td><td id="LC881" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L882" class="css-a4x74f"><span>882</span></td><td id="LC882" class="css-1dcdqdg"><code>                  <span class="code-comment">// when we repeat we must take care of the repeating leading slash</span>
</code></td></tr><tr><td id="L883" class="css-a4x74f"><span>883</span></td><td id="LC883" class="css-1dcdqdg"><code>                  <span class="code-keyword">let</span> subPattern = repeatable ? <span class="code-string">`((?:<span class="code-subst">${re}</span>)(?:/(?:<span class="code-subst">${re}</span>))*)`</span> : <span class="code-string">`(<span class="code-subst">${re}</span>)`</span>;
</code></td></tr><tr><td id="L884" class="css-a4x74f"><span>884</span></td><td id="LC884" class="css-1dcdqdg"><code>                  <span class="code-comment">// prepend the slash if we are starting a new segment</span>
</code></td></tr><tr><td id="L885" class="css-a4x74f"><span>885</span></td><td id="LC885" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (!tokenIndex)
</code></td></tr><tr><td id="L886" class="css-a4x74f"><span>886</span></td><td id="LC886" class="css-1dcdqdg"><code>                      subPattern =
</code></td></tr><tr><td id="L887" class="css-a4x74f"><span>887</span></td><td id="LC887" class="css-1dcdqdg"><code>                          <span class="code-comment">// avoid an optional / if there are more segments e.g. /:p?-static</span>
</code></td></tr><tr><td id="L888" class="css-a4x74f"><span>888</span></td><td id="LC888" class="css-1dcdqdg"><code>                          <span class="code-comment">// or /:p?-:p2</span>
</code></td></tr><tr><td id="L889" class="css-a4x74f"><span>889</span></td><td id="LC889" class="css-1dcdqdg"><code>                          optional &amp;&amp; segment.length &lt; <span class="code-number">2</span>
</code></td></tr><tr><td id="L890" class="css-a4x74f"><span>890</span></td><td id="LC890" class="css-1dcdqdg"><code>                              ? <span class="code-string">`(?:/<span class="code-subst">${subPattern}</span>)`</span>
</code></td></tr><tr><td id="L891" class="css-a4x74f"><span>891</span></td><td id="LC891" class="css-1dcdqdg"><code>                              : <span class="code-string">'/'</span> + subPattern;
</code></td></tr><tr><td id="L892" class="css-a4x74f"><span>892</span></td><td id="LC892" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (optional)
</code></td></tr><tr><td id="L893" class="css-a4x74f"><span>893</span></td><td id="LC893" class="css-1dcdqdg"><code>                      subPattern += <span class="code-string">'?'</span>;
</code></td></tr><tr><td id="L894" class="css-a4x74f"><span>894</span></td><td id="LC894" class="css-1dcdqdg"><code>                  pattern += subPattern;
</code></td></tr><tr><td id="L895" class="css-a4x74f"><span>895</span></td><td id="LC895" class="css-1dcdqdg"><code>                  subSegmentScore += <span class="code-number">20</span> <span class="code-comment">/* PathScore.Dynamic */</span>;
</code></td></tr><tr><td id="L896" class="css-a4x74f"><span>896</span></td><td id="LC896" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (optional)
</code></td></tr><tr><td id="L897" class="css-a4x74f"><span>897</span></td><td id="LC897" class="css-1dcdqdg"><code>                      subSegmentScore += <span class="code-number">-8</span> <span class="code-comment">/* PathScore.BonusOptional */</span>;
</code></td></tr><tr><td id="L898" class="css-a4x74f"><span>898</span></td><td id="LC898" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (repeatable)
</code></td></tr><tr><td id="L899" class="css-a4x74f"><span>899</span></td><td id="LC899" class="css-1dcdqdg"><code>                      subSegmentScore += <span class="code-number">-20</span> <span class="code-comment">/* PathScore.BonusRepeatable */</span>;
</code></td></tr><tr><td id="L900" class="css-a4x74f"><span>900</span></td><td id="LC900" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (re === <span class="code-string">'.*'</span>)
</code></td></tr><tr><td id="L901" class="css-a4x74f"><span>901</span></td><td id="LC901" class="css-1dcdqdg"><code>                      subSegmentScore += <span class="code-number">-50</span> <span class="code-comment">/* PathScore.BonusWildcard */</span>;
</code></td></tr><tr><td id="L902" class="css-a4x74f"><span>902</span></td><td id="LC902" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L903" class="css-a4x74f"><span>903</span></td><td id="LC903" class="css-1dcdqdg"><code>              segmentScores.push(subSegmentScore);
</code></td></tr><tr><td id="L904" class="css-a4x74f"><span>904</span></td><td id="LC904" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L905" class="css-a4x74f"><span>905</span></td><td id="LC905" class="css-1dcdqdg"><code>          <span class="code-comment">// an empty array like /home/ -&gt; [[{home}], []]</span>
</code></td></tr><tr><td id="L906" class="css-a4x74f"><span>906</span></td><td id="LC906" class="css-1dcdqdg"><code>          <span class="code-comment">// if (!segment.length) pattern += '/'</span>
</code></td></tr><tr><td id="L907" class="css-a4x74f"><span>907</span></td><td id="LC907" class="css-1dcdqdg"><code>          score.push(segmentScores);
</code></td></tr><tr><td id="L908" class="css-a4x74f"><span>908</span></td><td id="LC908" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L909" class="css-a4x74f"><span>909</span></td><td id="LC909" class="css-1dcdqdg"><code>      <span class="code-comment">// only apply the strict bonus to the last score</span>
</code></td></tr><tr><td id="L910" class="css-a4x74f"><span>910</span></td><td id="LC910" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (options.strict &amp;&amp; options.end) {
</code></td></tr><tr><td id="L911" class="css-a4x74f"><span>911</span></td><td id="LC911" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> i = score.length - <span class="code-number">1</span>;
</code></td></tr><tr><td id="L912" class="css-a4x74f"><span>912</span></td><td id="LC912" class="css-1dcdqdg"><code>          score[i][score[i].length - <span class="code-number">1</span>] += <span class="code-number">0.7000000000000001</span> <span class="code-comment">/* PathScore.BonusStrict */</span>;
</code></td></tr><tr><td id="L913" class="css-a4x74f"><span>913</span></td><td id="LC913" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L914" class="css-a4x74f"><span>914</span></td><td id="LC914" class="css-1dcdqdg"><code>      <span class="code-comment">// <span class="code-doctag">TODO:</span> dev only warn double trailing slash</span>
</code></td></tr><tr><td id="L915" class="css-a4x74f"><span>915</span></td><td id="LC915" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!options.strict)
</code></td></tr><tr><td id="L916" class="css-a4x74f"><span>916</span></td><td id="LC916" class="css-1dcdqdg"><code>          pattern += <span class="code-string">'/?'</span>;
</code></td></tr><tr><td id="L917" class="css-a4x74f"><span>917</span></td><td id="LC917" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (options.end)
</code></td></tr><tr><td id="L918" class="css-a4x74f"><span>918</span></td><td id="LC918" class="css-1dcdqdg"><code>          pattern += <span class="code-string">'$'</span>;
</code></td></tr><tr><td id="L919" class="css-a4x74f"><span>919</span></td><td id="LC919" class="css-1dcdqdg"><code>      <span class="code-comment">// allow paths like /dynamic to only match dynamic or dynamic/... but not dynamic_something_else</span>
</code></td></tr><tr><td id="L920" class="css-a4x74f"><span>920</span></td><td id="LC920" class="css-1dcdqdg"><code>      <span class="code-keyword">else</span> <span class="code-keyword">if</span> (options.strict)
</code></td></tr><tr><td id="L921" class="css-a4x74f"><span>921</span></td><td id="LC921" class="css-1dcdqdg"><code>          pattern += <span class="code-string">'(?:/|$)'</span>;
</code></td></tr><tr><td id="L922" class="css-a4x74f"><span>922</span></td><td id="LC922" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> re = <span class="code-keyword">new</span> <span class="code-built_in">RegExp</span>(pattern, options.sensitive ? <span class="code-string">''</span> : <span class="code-string">'i'</span>);
</code></td></tr><tr><td id="L923" class="css-a4x74f"><span>923</span></td><td id="LC923" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">parse</span>(<span class="code-params">path</span>) </span>{
</code></td></tr><tr><td id="L924" class="css-a4x74f"><span>924</span></td><td id="LC924" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> match = path.match(re);
</code></td></tr><tr><td id="L925" class="css-a4x74f"><span>925</span></td><td id="LC925" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> params = {};
</code></td></tr><tr><td id="L926" class="css-a4x74f"><span>926</span></td><td id="LC926" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!match)
</code></td></tr><tr><td id="L927" class="css-a4x74f"><span>927</span></td><td id="LC927" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> <span class="code-literal">null</span>;
</code></td></tr><tr><td id="L928" class="css-a4x74f"><span>928</span></td><td id="LC928" class="css-1dcdqdg"><code>          <span class="code-keyword">for</span> (<span class="code-keyword">let</span> i = <span class="code-number">1</span>; i &lt; match.length; i++) {
</code></td></tr><tr><td id="L929" class="css-a4x74f"><span>929</span></td><td id="LC929" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> value = match[i] || <span class="code-string">''</span>;
</code></td></tr><tr><td id="L930" class="css-a4x74f"><span>930</span></td><td id="LC930" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> key = keys[i - <span class="code-number">1</span>];
</code></td></tr><tr><td id="L931" class="css-a4x74f"><span>931</span></td><td id="LC931" class="css-1dcdqdg"><code>              params[key.name] = value &amp;&amp; key.repeatable ? value.split(<span class="code-string">'/'</span>) : value;
</code></td></tr><tr><td id="L932" class="css-a4x74f"><span>932</span></td><td id="LC932" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L933" class="css-a4x74f"><span>933</span></td><td id="LC933" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> params;
</code></td></tr><tr><td id="L934" class="css-a4x74f"><span>934</span></td><td id="LC934" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L935" class="css-a4x74f"><span>935</span></td><td id="LC935" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">stringify</span>(<span class="code-params">params</span>) </span>{
</code></td></tr><tr><td id="L936" class="css-a4x74f"><span>936</span></td><td id="LC936" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> path = <span class="code-string">''</span>;
</code></td></tr><tr><td id="L937" class="css-a4x74f"><span>937</span></td><td id="LC937" class="css-1dcdqdg"><code>          <span class="code-comment">// for optional parameters to allow to be empty</span>
</code></td></tr><tr><td id="L938" class="css-a4x74f"><span>938</span></td><td id="LC938" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> avoidDuplicatedSlash = <span class="code-literal">false</span>;
</code></td></tr><tr><td id="L939" class="css-a4x74f"><span>939</span></td><td id="LC939" class="css-1dcdqdg"><code>          <span class="code-keyword">for</span> (<span class="code-keyword">const</span> segment <span class="code-keyword">of</span> segments) {
</code></td></tr><tr><td id="L940" class="css-a4x74f"><span>940</span></td><td id="LC940" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (!avoidDuplicatedSlash || !path.endsWith(<span class="code-string">'/'</span>))
</code></td></tr><tr><td id="L941" class="css-a4x74f"><span>941</span></td><td id="LC941" class="css-1dcdqdg"><code>                  path += <span class="code-string">'/'</span>;
</code></td></tr><tr><td id="L942" class="css-a4x74f"><span>942</span></td><td id="LC942" class="css-1dcdqdg"><code>              avoidDuplicatedSlash = <span class="code-literal">false</span>;
</code></td></tr><tr><td id="L943" class="css-a4x74f"><span>943</span></td><td id="LC943" class="css-1dcdqdg"><code>              <span class="code-keyword">for</span> (<span class="code-keyword">const</span> token <span class="code-keyword">of</span> segment) {
</code></td></tr><tr><td id="L944" class="css-a4x74f"><span>944</span></td><td id="LC944" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (token.type === <span class="code-number">0</span> <span class="code-comment">/* TokenType.Static */</span>) {
</code></td></tr><tr><td id="L945" class="css-a4x74f"><span>945</span></td><td id="LC945" class="css-1dcdqdg"><code>                      path += token.value;
</code></td></tr><tr><td id="L946" class="css-a4x74f"><span>946</span></td><td id="LC946" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L947" class="css-a4x74f"><span>947</span></td><td id="LC947" class="css-1dcdqdg"><code>                  <span class="code-keyword">else</span> <span class="code-keyword">if</span> (token.type === <span class="code-number">1</span> <span class="code-comment">/* TokenType.Param */</span>) {
</code></td></tr><tr><td id="L948" class="css-a4x74f"><span>948</span></td><td id="LC948" class="css-1dcdqdg"><code>                      <span class="code-keyword">const</span> { value, repeatable, optional } = token;
</code></td></tr><tr><td id="L949" class="css-a4x74f"><span>949</span></td><td id="LC949" class="css-1dcdqdg"><code>                      <span class="code-keyword">const</span> param = value <span class="code-keyword">in</span> params ? params[value] : <span class="code-string">''</span>;
</code></td></tr><tr><td id="L950" class="css-a4x74f"><span>950</span></td><td id="LC950" class="css-1dcdqdg"><code>                      <span class="code-keyword">if</span> (isArray(param) &amp;&amp; !repeatable) {
</code></td></tr><tr><td id="L951" class="css-a4x74f"><span>951</span></td><td id="LC951" class="css-1dcdqdg"><code>                          <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">`Provided param "<span class="code-subst">${value}</span>" is an array but it is not repeatable (* or + modifiers)`</span>);
</code></td></tr><tr><td id="L952" class="css-a4x74f"><span>952</span></td><td id="LC952" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L953" class="css-a4x74f"><span>953</span></td><td id="LC953" class="css-1dcdqdg"><code>                      <span class="code-keyword">const</span> text = isArray(param)
</code></td></tr><tr><td id="L954" class="css-a4x74f"><span>954</span></td><td id="LC954" class="css-1dcdqdg"><code>                          ? param.join(<span class="code-string">'/'</span>)
</code></td></tr><tr><td id="L955" class="css-a4x74f"><span>955</span></td><td id="LC955" class="css-1dcdqdg"><code>                          : param;
</code></td></tr><tr><td id="L956" class="css-a4x74f"><span>956</span></td><td id="LC956" class="css-1dcdqdg"><code>                      <span class="code-keyword">if</span> (!text) {
</code></td></tr><tr><td id="L957" class="css-a4x74f"><span>957</span></td><td id="LC957" class="css-1dcdqdg"><code>                          <span class="code-keyword">if</span> (optional) {
</code></td></tr><tr><td id="L958" class="css-a4x74f"><span>958</span></td><td id="LC958" class="css-1dcdqdg"><code>                              <span class="code-comment">// if we have more than one optional param like /:a?-static we don't need to care about the optional param</span>
</code></td></tr><tr><td id="L959" class="css-a4x74f"><span>959</span></td><td id="LC959" class="css-1dcdqdg"><code>                              <span class="code-keyword">if</span> (segment.length &lt; <span class="code-number">2</span>) {
</code></td></tr><tr><td id="L960" class="css-a4x74f"><span>960</span></td><td id="LC960" class="css-1dcdqdg"><code>                                  <span class="code-comment">// remove the last slash as we could be at the end</span>
</code></td></tr><tr><td id="L961" class="css-a4x74f"><span>961</span></td><td id="LC961" class="css-1dcdqdg"><code>                                  <span class="code-keyword">if</span> (path.endsWith(<span class="code-string">'/'</span>))
</code></td></tr><tr><td id="L962" class="css-a4x74f"><span>962</span></td><td id="LC962" class="css-1dcdqdg"><code>                                      path = path.slice(<span class="code-number">0</span>, <span class="code-number">-1</span>);
</code></td></tr><tr><td id="L963" class="css-a4x74f"><span>963</span></td><td id="LC963" class="css-1dcdqdg"><code>                                  <span class="code-comment">// do not append a slash on the next iteration</span>
</code></td></tr><tr><td id="L964" class="css-a4x74f"><span>964</span></td><td id="LC964" class="css-1dcdqdg"><code>                                  <span class="code-keyword">else</span>
</code></td></tr><tr><td id="L965" class="css-a4x74f"><span>965</span></td><td id="LC965" class="css-1dcdqdg"><code>                                      avoidDuplicatedSlash = <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L966" class="css-a4x74f"><span>966</span></td><td id="LC966" class="css-1dcdqdg"><code>                              }
</code></td></tr><tr><td id="L967" class="css-a4x74f"><span>967</span></td><td id="LC967" class="css-1dcdqdg"><code>                          }
</code></td></tr><tr><td id="L968" class="css-a4x74f"><span>968</span></td><td id="LC968" class="css-1dcdqdg"><code>                          <span class="code-keyword">else</span>
</code></td></tr><tr><td id="L969" class="css-a4x74f"><span>969</span></td><td id="LC969" class="css-1dcdqdg"><code>                              <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">`Missing required param "<span class="code-subst">${value}</span>"`</span>);
</code></td></tr><tr><td id="L970" class="css-a4x74f"><span>970</span></td><td id="LC970" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L971" class="css-a4x74f"><span>971</span></td><td id="LC971" class="css-1dcdqdg"><code>                      path += text;
</code></td></tr><tr><td id="L972" class="css-a4x74f"><span>972</span></td><td id="LC972" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L973" class="css-a4x74f"><span>973</span></td><td id="LC973" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L974" class="css-a4x74f"><span>974</span></td><td id="LC974" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L975" class="css-a4x74f"><span>975</span></td><td id="LC975" class="css-1dcdqdg"><code>          <span class="code-comment">// avoid empty path when we have multiple optional params</span>
</code></td></tr><tr><td id="L976" class="css-a4x74f"><span>976</span></td><td id="LC976" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> path || <span class="code-string">'/'</span>;
</code></td></tr><tr><td id="L977" class="css-a4x74f"><span>977</span></td><td id="LC977" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L978" class="css-a4x74f"><span>978</span></td><td id="LC978" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> {
</code></td></tr><tr><td id="L979" class="css-a4x74f"><span>979</span></td><td id="LC979" class="css-1dcdqdg"><code>          re,
</code></td></tr><tr><td id="L980" class="css-a4x74f"><span>980</span></td><td id="LC980" class="css-1dcdqdg"><code>          score,
</code></td></tr><tr><td id="L981" class="css-a4x74f"><span>981</span></td><td id="LC981" class="css-1dcdqdg"><code>          keys,
</code></td></tr><tr><td id="L982" class="css-a4x74f"><span>982</span></td><td id="LC982" class="css-1dcdqdg"><code>          parse,
</code></td></tr><tr><td id="L983" class="css-a4x74f"><span>983</span></td><td id="LC983" class="css-1dcdqdg"><code>          stringify,
</code></td></tr><tr><td id="L984" class="css-a4x74f"><span>984</span></td><td id="LC984" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L985" class="css-a4x74f"><span>985</span></td><td id="LC985" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L986" class="css-a4x74f"><span>986</span></td><td id="LC986" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L987" class="css-a4x74f"><span>987</span></td><td id="LC987" class="css-1dcdqdg"><code><span class="code-comment">   * Compares an array of numbers as used in PathParser.score and returns a
</span></code></td></tr><tr><td id="L988" class="css-a4x74f"><span>988</span></td><td id="LC988" class="css-1dcdqdg"><code><span class="code-comment">   * number. This function can be used to `sort` an array
</span></code></td></tr><tr><td id="L989" class="css-a4x74f"><span>989</span></td><td id="LC989" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L990" class="css-a4x74f"><span>990</span></td><td id="LC990" class="css-1dcdqdg"><code><span class="code-comment">   * @param a - first array of numbers
</span></code></td></tr><tr><td id="L991" class="css-a4x74f"><span>991</span></td><td id="LC991" class="css-1dcdqdg"><code><span class="code-comment">   * @param b - second array of numbers
</span></code></td></tr><tr><td id="L992" class="css-a4x74f"><span>992</span></td><td id="LC992" class="css-1dcdqdg"><code><span class="code-comment">   * @returns 0 if both are equal, &lt; 0 if a should be sorted first, &gt; 0 if b
</span></code></td></tr><tr><td id="L993" class="css-a4x74f"><span>993</span></td><td id="LC993" class="css-1dcdqdg"><code><span class="code-comment">   * should be sorted first
</span></code></td></tr><tr><td id="L994" class="css-a4x74f"><span>994</span></td><td id="LC994" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L995" class="css-a4x74f"><span>995</span></td><td id="LC995" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">compareScoreArray</span>(<span class="code-params">a, b</span>) </span>{
</code></td></tr><tr><td id="L996" class="css-a4x74f"><span>996</span></td><td id="LC996" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> i = <span class="code-number">0</span>;
</code></td></tr><tr><td id="L997" class="css-a4x74f"><span>997</span></td><td id="LC997" class="css-1dcdqdg"><code>      <span class="code-keyword">while</span> (i &lt; a.length &amp;&amp; i &lt; b.length) {
</code></td></tr><tr><td id="L998" class="css-a4x74f"><span>998</span></td><td id="LC998" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> diff = b[i] - a[i];
</code></td></tr><tr><td id="L999" class="css-a4x74f"><span>999</span></td><td id="LC999" class="css-1dcdqdg"><code>          <span class="code-comment">// only keep going if diff === 0</span>
</code></td></tr><tr><td id="L1000" class="css-a4x74f"><span>1000</span></td><td id="LC1000" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (diff)
</code></td></tr><tr><td id="L1001" class="css-a4x74f"><span>1001</span></td><td id="LC1001" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> diff;
</code></td></tr><tr><td id="L1002" class="css-a4x74f"><span>1002</span></td><td id="LC1002" class="css-1dcdqdg"><code>          i++;
</code></td></tr><tr><td id="L1003" class="css-a4x74f"><span>1003</span></td><td id="LC1003" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1004" class="css-a4x74f"><span>1004</span></td><td id="LC1004" class="css-1dcdqdg"><code>      <span class="code-comment">// if the last subsegment was Static, the shorter segments should be sorted first</span>
</code></td></tr><tr><td id="L1005" class="css-a4x74f"><span>1005</span></td><td id="LC1005" class="css-1dcdqdg"><code>      <span class="code-comment">// otherwise sort the longest segment first</span>
</code></td></tr><tr><td id="L1006" class="css-a4x74f"><span>1006</span></td><td id="LC1006" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (a.length &lt; b.length) {
</code></td></tr><tr><td id="L1007" class="css-a4x74f"><span>1007</span></td><td id="LC1007" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> a.length === <span class="code-number">1</span> &amp;&amp; a[<span class="code-number">0</span>] === <span class="code-number">40</span> <span class="code-comment">/* PathScore.Static */</span> + <span class="code-number">40</span> <span class="code-comment">/* PathScore.Segment */</span>
</code></td></tr><tr><td id="L1008" class="css-a4x74f"><span>1008</span></td><td id="LC1008" class="css-1dcdqdg"><code>              ? <span class="code-number">-1</span>
</code></td></tr><tr><td id="L1009" class="css-a4x74f"><span>1009</span></td><td id="LC1009" class="css-1dcdqdg"><code>              : <span class="code-number">1</span>;
</code></td></tr><tr><td id="L1010" class="css-a4x74f"><span>1010</span></td><td id="LC1010" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1011" class="css-a4x74f"><span>1011</span></td><td id="LC1011" class="css-1dcdqdg"><code>      <span class="code-keyword">else</span> <span class="code-keyword">if</span> (a.length &gt; b.length) {
</code></td></tr><tr><td id="L1012" class="css-a4x74f"><span>1012</span></td><td id="LC1012" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> b.length === <span class="code-number">1</span> &amp;&amp; b[<span class="code-number">0</span>] === <span class="code-number">40</span> <span class="code-comment">/* PathScore.Static */</span> + <span class="code-number">40</span> <span class="code-comment">/* PathScore.Segment */</span>
</code></td></tr><tr><td id="L1013" class="css-a4x74f"><span>1013</span></td><td id="LC1013" class="css-1dcdqdg"><code>              ? <span class="code-number">1</span>
</code></td></tr><tr><td id="L1014" class="css-a4x74f"><span>1014</span></td><td id="LC1014" class="css-1dcdqdg"><code>              : <span class="code-number">-1</span>;
</code></td></tr><tr><td id="L1015" class="css-a4x74f"><span>1015</span></td><td id="LC1015" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1016" class="css-a4x74f"><span>1016</span></td><td id="LC1016" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> <span class="code-number">0</span>;
</code></td></tr><tr><td id="L1017" class="css-a4x74f"><span>1017</span></td><td id="LC1017" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1018" class="css-a4x74f"><span>1018</span></td><td id="LC1018" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1019" class="css-a4x74f"><span>1019</span></td><td id="LC1019" class="css-1dcdqdg"><code><span class="code-comment">   * Compare function that can be used with `sort` to sort an array of PathParser
</span></code></td></tr><tr><td id="L1020" class="css-a4x74f"><span>1020</span></td><td id="LC1020" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1021" class="css-a4x74f"><span>1021</span></td><td id="LC1021" class="css-1dcdqdg"><code><span class="code-comment">   * @param a - first PathParser
</span></code></td></tr><tr><td id="L1022" class="css-a4x74f"><span>1022</span></td><td id="LC1022" class="css-1dcdqdg"><code><span class="code-comment">   * @param b - second PathParser
</span></code></td></tr><tr><td id="L1023" class="css-a4x74f"><span>1023</span></td><td id="LC1023" class="css-1dcdqdg"><code><span class="code-comment">   * @returns 0 if both are equal, &lt; 0 if a should be sorted first, &gt; 0 if b
</span></code></td></tr><tr><td id="L1024" class="css-a4x74f"><span>1024</span></td><td id="LC1024" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1025" class="css-a4x74f"><span>1025</span></td><td id="LC1025" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">comparePathParserScore</span>(<span class="code-params">a, b</span>) </span>{
</code></td></tr><tr><td id="L1026" class="css-a4x74f"><span>1026</span></td><td id="LC1026" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> i = <span class="code-number">0</span>;
</code></td></tr><tr><td id="L1027" class="css-a4x74f"><span>1027</span></td><td id="LC1027" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> aScore = a.score;
</code></td></tr><tr><td id="L1028" class="css-a4x74f"><span>1028</span></td><td id="LC1028" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> bScore = b.score;
</code></td></tr><tr><td id="L1029" class="css-a4x74f"><span>1029</span></td><td id="LC1029" class="css-1dcdqdg"><code>      <span class="code-keyword">while</span> (i &lt; aScore.length &amp;&amp; i &lt; bScore.length) {
</code></td></tr><tr><td id="L1030" class="css-a4x74f"><span>1030</span></td><td id="LC1030" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> comp = compareScoreArray(aScore[i], bScore[i]);
</code></td></tr><tr><td id="L1031" class="css-a4x74f"><span>1031</span></td><td id="LC1031" class="css-1dcdqdg"><code>          <span class="code-comment">// do not return if both are equal</span>
</code></td></tr><tr><td id="L1032" class="css-a4x74f"><span>1032</span></td><td id="LC1032" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (comp)
</code></td></tr><tr><td id="L1033" class="css-a4x74f"><span>1033</span></td><td id="LC1033" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> comp;
</code></td></tr><tr><td id="L1034" class="css-a4x74f"><span>1034</span></td><td id="LC1034" class="css-1dcdqdg"><code>          i++;
</code></td></tr><tr><td id="L1035" class="css-a4x74f"><span>1035</span></td><td id="LC1035" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1036" class="css-a4x74f"><span>1036</span></td><td id="LC1036" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (<span class="code-built_in">Math</span>.abs(bScore.length - aScore.length) === <span class="code-number">1</span>) {
</code></td></tr><tr><td id="L1037" class="css-a4x74f"><span>1037</span></td><td id="LC1037" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (isLastScoreNegative(aScore))
</code></td></tr><tr><td id="L1038" class="css-a4x74f"><span>1038</span></td><td id="LC1038" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> <span class="code-number">1</span>;
</code></td></tr><tr><td id="L1039" class="css-a4x74f"><span>1039</span></td><td id="LC1039" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (isLastScoreNegative(bScore))
</code></td></tr><tr><td id="L1040" class="css-a4x74f"><span>1040</span></td><td id="LC1040" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> <span class="code-number">-1</span>;
</code></td></tr><tr><td id="L1041" class="css-a4x74f"><span>1041</span></td><td id="LC1041" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1042" class="css-a4x74f"><span>1042</span></td><td id="LC1042" class="css-1dcdqdg"><code>      <span class="code-comment">// if a and b share the same score entries but b has more, sort b first</span>
</code></td></tr><tr><td id="L1043" class="css-a4x74f"><span>1043</span></td><td id="LC1043" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> bScore.length - aScore.length;
</code></td></tr><tr><td id="L1044" class="css-a4x74f"><span>1044</span></td><td id="LC1044" class="css-1dcdqdg"><code>      <span class="code-comment">// this is the ternary version</span>
</code></td></tr><tr><td id="L1045" class="css-a4x74f"><span>1045</span></td><td id="LC1045" class="css-1dcdqdg"><code>      <span class="code-comment">// return aScore.length &lt; bScore.length</span>
</code></td></tr><tr><td id="L1046" class="css-a4x74f"><span>1046</span></td><td id="LC1046" class="css-1dcdqdg"><code>      <span class="code-comment">//   ? 1</span>
</code></td></tr><tr><td id="L1047" class="css-a4x74f"><span>1047</span></td><td id="LC1047" class="css-1dcdqdg"><code>      <span class="code-comment">//   : aScore.length &gt; bScore.length</span>
</code></td></tr><tr><td id="L1048" class="css-a4x74f"><span>1048</span></td><td id="LC1048" class="css-1dcdqdg"><code>      <span class="code-comment">//   ? -1</span>
</code></td></tr><tr><td id="L1049" class="css-a4x74f"><span>1049</span></td><td id="LC1049" class="css-1dcdqdg"><code>      <span class="code-comment">//   : 0</span>
</code></td></tr><tr><td id="L1050" class="css-a4x74f"><span>1050</span></td><td id="LC1050" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1051" class="css-a4x74f"><span>1051</span></td><td id="LC1051" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1052" class="css-a4x74f"><span>1052</span></td><td id="LC1052" class="css-1dcdqdg"><code><span class="code-comment">   * This allows detecting splats at the end of a path: /home/:id(.*)*
</span></code></td></tr><tr><td id="L1053" class="css-a4x74f"><span>1053</span></td><td id="LC1053" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1054" class="css-a4x74f"><span>1054</span></td><td id="LC1054" class="css-1dcdqdg"><code><span class="code-comment">   * @param score - score to check
</span></code></td></tr><tr><td id="L1055" class="css-a4x74f"><span>1055</span></td><td id="LC1055" class="css-1dcdqdg"><code><span class="code-comment">   * @returns true if the last entry is negative
</span></code></td></tr><tr><td id="L1056" class="css-a4x74f"><span>1056</span></td><td id="LC1056" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1057" class="css-a4x74f"><span>1057</span></td><td id="LC1057" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isLastScoreNegative</span>(<span class="code-params">score</span>) </span>{
</code></td></tr><tr><td id="L1058" class="css-a4x74f"><span>1058</span></td><td id="LC1058" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> last = score[score.length - <span class="code-number">1</span>];
</code></td></tr><tr><td id="L1059" class="css-a4x74f"><span>1059</span></td><td id="LC1059" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> score.length &gt; <span class="code-number">0</span> &amp;&amp; last[last.length - <span class="code-number">1</span>] &lt; <span class="code-number">0</span>;
</code></td></tr><tr><td id="L1060" class="css-a4x74f"><span>1060</span></td><td id="LC1060" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1061" class="css-a4x74f"><span>1061</span></td><td id="LC1061" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1062" class="css-a4x74f"><span>1062</span></td><td id="LC1062" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> ROOT_TOKEN = {
</code></td></tr><tr><td id="L1063" class="css-a4x74f"><span>1063</span></td><td id="LC1063" class="css-1dcdqdg"><code>      type: <span class="code-number">0</span> <span class="code-comment">/* TokenType.Static */</span>,
</code></td></tr><tr><td id="L1064" class="css-a4x74f"><span>1064</span></td><td id="LC1064" class="css-1dcdqdg"><code>      value: <span class="code-string">''</span>,
</code></td></tr><tr><td id="L1065" class="css-a4x74f"><span>1065</span></td><td id="LC1065" class="css-1dcdqdg"><code>  };
</code></td></tr><tr><td id="L1066" class="css-a4x74f"><span>1066</span></td><td id="LC1066" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> VALID_PARAM_RE = <span class="code-regexp">/[a-zA-Z0-9_]/</span>;
</code></td></tr><tr><td id="L1067" class="css-a4x74f"><span>1067</span></td><td id="LC1067" class="css-1dcdqdg"><code>  <span class="code-comment">// After some profiling, the cache seems to be unnecessary because tokenizePath</span>
</code></td></tr><tr><td id="L1068" class="css-a4x74f"><span>1068</span></td><td id="LC1068" class="css-1dcdqdg"><code>  <span class="code-comment">// (the slowest part of adding a route) is very fast</span>
</code></td></tr><tr><td id="L1069" class="css-a4x74f"><span>1069</span></td><td id="LC1069" class="css-1dcdqdg"><code>  <span class="code-comment">// const tokenCache = new Map&lt;string, Token[][]&gt;()</span>
</code></td></tr><tr><td id="L1070" class="css-a4x74f"><span>1070</span></td><td id="LC1070" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">tokenizePath</span>(<span class="code-params">path</span>) </span>{
</code></td></tr><tr><td id="L1071" class="css-a4x74f"><span>1071</span></td><td id="LC1071" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!path)
</code></td></tr><tr><td id="L1072" class="css-a4x74f"><span>1072</span></td><td id="LC1072" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> [[]];
</code></td></tr><tr><td id="L1073" class="css-a4x74f"><span>1073</span></td><td id="LC1073" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (path === <span class="code-string">'/'</span>)
</code></td></tr><tr><td id="L1074" class="css-a4x74f"><span>1074</span></td><td id="LC1074" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> [[ROOT_TOKEN]];
</code></td></tr><tr><td id="L1075" class="css-a4x74f"><span>1075</span></td><td id="LC1075" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!path.startsWith(<span class="code-string">'/'</span>)) {
</code></td></tr><tr><td id="L1076" class="css-a4x74f"><span>1076</span></td><td id="LC1076" class="css-1dcdqdg"><code>          <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">`Route paths should start with a "/": "<span class="code-subst">${path}</span>" should be "/<span class="code-subst">${path}</span>".`</span>
</code></td></tr><tr><td id="L1077" class="css-a4x74f"><span>1077</span></td><td id="LC1077" class="css-1dcdqdg"><code>              );
</code></td></tr><tr><td id="L1078" class="css-a4x74f"><span>1078</span></td><td id="LC1078" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1079" class="css-a4x74f"><span>1079</span></td><td id="LC1079" class="css-1dcdqdg"><code>      <span class="code-comment">// if (tokenCache.has(path)) return tokenCache.get(path)!</span>
</code></td></tr><tr><td id="L1080" class="css-a4x74f"><span>1080</span></td><td id="LC1080" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">crash</span>(<span class="code-params">message</span>) </span>{
</code></td></tr><tr><td id="L1081" class="css-a4x74f"><span>1081</span></td><td id="LC1081" class="css-1dcdqdg"><code>          <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">`ERR (<span class="code-subst">${state}</span>)/"<span class="code-subst">${buffer}</span>": <span class="code-subst">${message}</span>`</span>);
</code></td></tr><tr><td id="L1082" class="css-a4x74f"><span>1082</span></td><td id="LC1082" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1083" class="css-a4x74f"><span>1083</span></td><td id="LC1083" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> state = <span class="code-number">0</span> <span class="code-comment">/* TokenizerState.Static */</span>;
</code></td></tr><tr><td id="L1084" class="css-a4x74f"><span>1084</span></td><td id="LC1084" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> previousState = state;
</code></td></tr><tr><td id="L1085" class="css-a4x74f"><span>1085</span></td><td id="LC1085" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> tokens = [];
</code></td></tr><tr><td id="L1086" class="css-a4x74f"><span>1086</span></td><td id="LC1086" class="css-1dcdqdg"><code>      <span class="code-comment">// the segment will always be valid because we get into the initial state</span>
</code></td></tr><tr><td id="L1087" class="css-a4x74f"><span>1087</span></td><td id="LC1087" class="css-1dcdqdg"><code>      <span class="code-comment">// with the leading /</span>
</code></td></tr><tr><td id="L1088" class="css-a4x74f"><span>1088</span></td><td id="LC1088" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> segment;
</code></td></tr><tr><td id="L1089" class="css-a4x74f"><span>1089</span></td><td id="LC1089" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">finalizeSegment</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L1090" class="css-a4x74f"><span>1090</span></td><td id="LC1090" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (segment)
</code></td></tr><tr><td id="L1091" class="css-a4x74f"><span>1091</span></td><td id="LC1091" class="css-1dcdqdg"><code>              tokens.push(segment);
</code></td></tr><tr><td id="L1092" class="css-a4x74f"><span>1092</span></td><td id="LC1092" class="css-1dcdqdg"><code>          segment = [];
</code></td></tr><tr><td id="L1093" class="css-a4x74f"><span>1093</span></td><td id="LC1093" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1094" class="css-a4x74f"><span>1094</span></td><td id="LC1094" class="css-1dcdqdg"><code>      <span class="code-comment">// index on the path</span>
</code></td></tr><tr><td id="L1095" class="css-a4x74f"><span>1095</span></td><td id="LC1095" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> i = <span class="code-number">0</span>;
</code></td></tr><tr><td id="L1096" class="css-a4x74f"><span>1096</span></td><td id="LC1096" class="css-1dcdqdg"><code>      <span class="code-comment">// char at index</span>
</code></td></tr><tr><td id="L1097" class="css-a4x74f"><span>1097</span></td><td id="LC1097" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> char;
</code></td></tr><tr><td id="L1098" class="css-a4x74f"><span>1098</span></td><td id="LC1098" class="css-1dcdqdg"><code>      <span class="code-comment">// buffer of the value read</span>
</code></td></tr><tr><td id="L1099" class="css-a4x74f"><span>1099</span></td><td id="LC1099" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> buffer = <span class="code-string">''</span>;
</code></td></tr><tr><td id="L1100" class="css-a4x74f"><span>1100</span></td><td id="LC1100" class="css-1dcdqdg"><code>      <span class="code-comment">// custom regexp for a param</span>
</code></td></tr><tr><td id="L1101" class="css-a4x74f"><span>1101</span></td><td id="LC1101" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> customRe = <span class="code-string">''</span>;
</code></td></tr><tr><td id="L1102" class="css-a4x74f"><span>1102</span></td><td id="LC1102" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">consumeBuffer</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L1103" class="css-a4x74f"><span>1103</span></td><td id="LC1103" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!buffer)
</code></td></tr><tr><td id="L1104" class="css-a4x74f"><span>1104</span></td><td id="LC1104" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L1105" class="css-a4x74f"><span>1105</span></td><td id="LC1105" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (state === <span class="code-number">0</span> <span class="code-comment">/* TokenizerState.Static */</span>) {
</code></td></tr><tr><td id="L1106" class="css-a4x74f"><span>1106</span></td><td id="LC1106" class="css-1dcdqdg"><code>              segment.push({
</code></td></tr><tr><td id="L1107" class="css-a4x74f"><span>1107</span></td><td id="LC1107" class="css-1dcdqdg"><code>                  type: <span class="code-number">0</span> <span class="code-comment">/* TokenType.Static */</span>,
</code></td></tr><tr><td id="L1108" class="css-a4x74f"><span>1108</span></td><td id="LC1108" class="css-1dcdqdg"><code>                  value: buffer,
</code></td></tr><tr><td id="L1109" class="css-a4x74f"><span>1109</span></td><td id="LC1109" class="css-1dcdqdg"><code>              });
</code></td></tr><tr><td id="L1110" class="css-a4x74f"><span>1110</span></td><td id="LC1110" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1111" class="css-a4x74f"><span>1111</span></td><td id="LC1111" class="css-1dcdqdg"><code>          <span class="code-keyword">else</span> <span class="code-keyword">if</span> (state === <span class="code-number">1</span> <span class="code-comment">/* TokenizerState.Param */</span> ||
</code></td></tr><tr><td id="L1112" class="css-a4x74f"><span>1112</span></td><td id="LC1112" class="css-1dcdqdg"><code>              state === <span class="code-number">2</span> <span class="code-comment">/* TokenizerState.ParamRegExp */</span> ||
</code></td></tr><tr><td id="L1113" class="css-a4x74f"><span>1113</span></td><td id="LC1113" class="css-1dcdqdg"><code>              state === <span class="code-number">3</span> <span class="code-comment">/* TokenizerState.ParamRegExpEnd */</span>) {
</code></td></tr><tr><td id="L1114" class="css-a4x74f"><span>1114</span></td><td id="LC1114" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (segment.length &gt; <span class="code-number">1</span> &amp;&amp; (char === <span class="code-string">'*'</span> || char === <span class="code-string">'+'</span>))
</code></td></tr><tr><td id="L1115" class="css-a4x74f"><span>1115</span></td><td id="LC1115" class="css-1dcdqdg"><code>                  crash(<span class="code-string">`A repeatable param (<span class="code-subst">${buffer}</span>) must be alone in its segment. eg: '/:ids+.`</span>);
</code></td></tr><tr><td id="L1116" class="css-a4x74f"><span>1116</span></td><td id="LC1116" class="css-1dcdqdg"><code>              segment.push({
</code></td></tr><tr><td id="L1117" class="css-a4x74f"><span>1117</span></td><td id="LC1117" class="css-1dcdqdg"><code>                  type: <span class="code-number">1</span> <span class="code-comment">/* TokenType.Param */</span>,
</code></td></tr><tr><td id="L1118" class="css-a4x74f"><span>1118</span></td><td id="LC1118" class="css-1dcdqdg"><code>                  value: buffer,
</code></td></tr><tr><td id="L1119" class="css-a4x74f"><span>1119</span></td><td id="LC1119" class="css-1dcdqdg"><code>                  regexp: customRe,
</code></td></tr><tr><td id="L1120" class="css-a4x74f"><span>1120</span></td><td id="LC1120" class="css-1dcdqdg"><code>                  repeatable: char === <span class="code-string">'*'</span> || char === <span class="code-string">'+'</span>,
</code></td></tr><tr><td id="L1121" class="css-a4x74f"><span>1121</span></td><td id="LC1121" class="css-1dcdqdg"><code>                  optional: char === <span class="code-string">'*'</span> || char === <span class="code-string">'?'</span>,
</code></td></tr><tr><td id="L1122" class="css-a4x74f"><span>1122</span></td><td id="LC1122" class="css-1dcdqdg"><code>              });
</code></td></tr><tr><td id="L1123" class="css-a4x74f"><span>1123</span></td><td id="LC1123" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1124" class="css-a4x74f"><span>1124</span></td><td id="LC1124" class="css-1dcdqdg"><code>          <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1125" class="css-a4x74f"><span>1125</span></td><td id="LC1125" class="css-1dcdqdg"><code>              crash(<span class="code-string">'Invalid state to consume buffer'</span>);
</code></td></tr><tr><td id="L1126" class="css-a4x74f"><span>1126</span></td><td id="LC1126" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1127" class="css-a4x74f"><span>1127</span></td><td id="LC1127" class="css-1dcdqdg"><code>          buffer = <span class="code-string">''</span>;
</code></td></tr><tr><td id="L1128" class="css-a4x74f"><span>1128</span></td><td id="LC1128" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1129" class="css-a4x74f"><span>1129</span></td><td id="LC1129" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">addCharToBuffer</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L1130" class="css-a4x74f"><span>1130</span></td><td id="LC1130" class="css-1dcdqdg"><code>          buffer += char;
</code></td></tr><tr><td id="L1131" class="css-a4x74f"><span>1131</span></td><td id="LC1131" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1132" class="css-a4x74f"><span>1132</span></td><td id="LC1132" class="css-1dcdqdg"><code>      <span class="code-keyword">while</span> (i &lt; path.length) {
</code></td></tr><tr><td id="L1133" class="css-a4x74f"><span>1133</span></td><td id="LC1133" class="css-1dcdqdg"><code>          char = path[i++];
</code></td></tr><tr><td id="L1134" class="css-a4x74f"><span>1134</span></td><td id="LC1134" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (char === <span class="code-string">'\\'</span> &amp;&amp; state !== <span class="code-number">2</span> <span class="code-comment">/* TokenizerState.ParamRegExp */</span>) {
</code></td></tr><tr><td id="L1135" class="css-a4x74f"><span>1135</span></td><td id="LC1135" class="css-1dcdqdg"><code>              previousState = state;
</code></td></tr><tr><td id="L1136" class="css-a4x74f"><span>1136</span></td><td id="LC1136" class="css-1dcdqdg"><code>              state = <span class="code-number">4</span> <span class="code-comment">/* TokenizerState.EscapeNext */</span>;
</code></td></tr><tr><td id="L1137" class="css-a4x74f"><span>1137</span></td><td id="LC1137" class="css-1dcdqdg"><code>              <span class="code-keyword">continue</span>;
</code></td></tr><tr><td id="L1138" class="css-a4x74f"><span>1138</span></td><td id="LC1138" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1139" class="css-a4x74f"><span>1139</span></td><td id="LC1139" class="css-1dcdqdg"><code>          <span class="code-keyword">switch</span> (state) {
</code></td></tr><tr><td id="L1140" class="css-a4x74f"><span>1140</span></td><td id="LC1140" class="css-1dcdqdg"><code>              <span class="code-keyword">case</span> <span class="code-number">0</span> <span class="code-comment">/* TokenizerState.Static */</span>:
</code></td></tr><tr><td id="L1141" class="css-a4x74f"><span>1141</span></td><td id="LC1141" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (char === <span class="code-string">'/'</span>) {
</code></td></tr><tr><td id="L1142" class="css-a4x74f"><span>1142</span></td><td id="LC1142" class="css-1dcdqdg"><code>                      <span class="code-keyword">if</span> (buffer) {
</code></td></tr><tr><td id="L1143" class="css-a4x74f"><span>1143</span></td><td id="LC1143" class="css-1dcdqdg"><code>                          consumeBuffer();
</code></td></tr><tr><td id="L1144" class="css-a4x74f"><span>1144</span></td><td id="LC1144" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L1145" class="css-a4x74f"><span>1145</span></td><td id="LC1145" class="css-1dcdqdg"><code>                      finalizeSegment();
</code></td></tr><tr><td id="L1146" class="css-a4x74f"><span>1146</span></td><td id="LC1146" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L1147" class="css-a4x74f"><span>1147</span></td><td id="LC1147" class="css-1dcdqdg"><code>                  <span class="code-keyword">else</span> <span class="code-keyword">if</span> (char === <span class="code-string">':'</span>) {
</code></td></tr><tr><td id="L1148" class="css-a4x74f"><span>1148</span></td><td id="LC1148" class="css-1dcdqdg"><code>                      consumeBuffer();
</code></td></tr><tr><td id="L1149" class="css-a4x74f"><span>1149</span></td><td id="LC1149" class="css-1dcdqdg"><code>                      state = <span class="code-number">1</span> <span class="code-comment">/* TokenizerState.Param */</span>;
</code></td></tr><tr><td id="L1150" class="css-a4x74f"><span>1150</span></td><td id="LC1150" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L1151" class="css-a4x74f"><span>1151</span></td><td id="LC1151" class="css-1dcdqdg"><code>                  <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1152" class="css-a4x74f"><span>1152</span></td><td id="LC1152" class="css-1dcdqdg"><code>                      addCharToBuffer();
</code></td></tr><tr><td id="L1153" class="css-a4x74f"><span>1153</span></td><td id="LC1153" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L1154" class="css-a4x74f"><span>1154</span></td><td id="LC1154" class="css-1dcdqdg"><code>                  <span class="code-keyword">break</span>;
</code></td></tr><tr><td id="L1155" class="css-a4x74f"><span>1155</span></td><td id="LC1155" class="css-1dcdqdg"><code>              <span class="code-keyword">case</span> <span class="code-number">4</span> <span class="code-comment">/* TokenizerState.EscapeNext */</span>:
</code></td></tr><tr><td id="L1156" class="css-a4x74f"><span>1156</span></td><td id="LC1156" class="css-1dcdqdg"><code>                  addCharToBuffer();
</code></td></tr><tr><td id="L1157" class="css-a4x74f"><span>1157</span></td><td id="LC1157" class="css-1dcdqdg"><code>                  state = previousState;
</code></td></tr><tr><td id="L1158" class="css-a4x74f"><span>1158</span></td><td id="LC1158" class="css-1dcdqdg"><code>                  <span class="code-keyword">break</span>;
</code></td></tr><tr><td id="L1159" class="css-a4x74f"><span>1159</span></td><td id="LC1159" class="css-1dcdqdg"><code>              <span class="code-keyword">case</span> <span class="code-number">1</span> <span class="code-comment">/* TokenizerState.Param */</span>:
</code></td></tr><tr><td id="L1160" class="css-a4x74f"><span>1160</span></td><td id="LC1160" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (char === <span class="code-string">'('</span>) {
</code></td></tr><tr><td id="L1161" class="css-a4x74f"><span>1161</span></td><td id="LC1161" class="css-1dcdqdg"><code>                      state = <span class="code-number">2</span> <span class="code-comment">/* TokenizerState.ParamRegExp */</span>;
</code></td></tr><tr><td id="L1162" class="css-a4x74f"><span>1162</span></td><td id="LC1162" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L1163" class="css-a4x74f"><span>1163</span></td><td id="LC1163" class="css-1dcdqdg"><code>                  <span class="code-keyword">else</span> <span class="code-keyword">if</span> (VALID_PARAM_RE.test(char)) {
</code></td></tr><tr><td id="L1164" class="css-a4x74f"><span>1164</span></td><td id="LC1164" class="css-1dcdqdg"><code>                      addCharToBuffer();
</code></td></tr><tr><td id="L1165" class="css-a4x74f"><span>1165</span></td><td id="LC1165" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L1166" class="css-a4x74f"><span>1166</span></td><td id="LC1166" class="css-1dcdqdg"><code>                  <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1167" class="css-a4x74f"><span>1167</span></td><td id="LC1167" class="css-1dcdqdg"><code>                      consumeBuffer();
</code></td></tr><tr><td id="L1168" class="css-a4x74f"><span>1168</span></td><td id="LC1168" class="css-1dcdqdg"><code>                      state = <span class="code-number">0</span> <span class="code-comment">/* TokenizerState.Static */</span>;
</code></td></tr><tr><td id="L1169" class="css-a4x74f"><span>1169</span></td><td id="LC1169" class="css-1dcdqdg"><code>                      <span class="code-comment">// go back one character if we were not modifying</span>
</code></td></tr><tr><td id="L1170" class="css-a4x74f"><span>1170</span></td><td id="LC1170" class="css-1dcdqdg"><code>                      <span class="code-keyword">if</span> (char !== <span class="code-string">'*'</span> &amp;&amp; char !== <span class="code-string">'?'</span> &amp;&amp; char !== <span class="code-string">'+'</span>)
</code></td></tr><tr><td id="L1171" class="css-a4x74f"><span>1171</span></td><td id="LC1171" class="css-1dcdqdg"><code>                          i--;
</code></td></tr><tr><td id="L1172" class="css-a4x74f"><span>1172</span></td><td id="LC1172" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L1173" class="css-a4x74f"><span>1173</span></td><td id="LC1173" class="css-1dcdqdg"><code>                  <span class="code-keyword">break</span>;
</code></td></tr><tr><td id="L1174" class="css-a4x74f"><span>1174</span></td><td id="LC1174" class="css-1dcdqdg"><code>              <span class="code-keyword">case</span> <span class="code-number">2</span> <span class="code-comment">/* TokenizerState.ParamRegExp */</span>:
</code></td></tr><tr><td id="L1175" class="css-a4x74f"><span>1175</span></td><td id="LC1175" class="css-1dcdqdg"><code>                  <span class="code-comment">// <span class="code-doctag">TODO:</span> is it worth handling nested regexp? like :p(?:prefix_([^/]+)_suffix)</span>
</code></td></tr><tr><td id="L1176" class="css-a4x74f"><span>1176</span></td><td id="LC1176" class="css-1dcdqdg"><code>                  <span class="code-comment">// it already works by escaping the closing )</span>
</code></td></tr><tr><td id="L1177" class="css-a4x74f"><span>1177</span></td><td id="LC1177" class="css-1dcdqdg"><code>                  <span class="code-comment">// https://paths.esm.dev/?p=AAMeJbiAwQEcDKbAoAAkP60PG2R6QAvgNaA6AFACM2ABuQBB#</span>
</code></td></tr><tr><td id="L1178" class="css-a4x74f"><span>1178</span></td><td id="LC1178" class="css-1dcdqdg"><code>                  <span class="code-comment">// is this really something people need since you can also write</span>
</code></td></tr><tr><td id="L1179" class="css-a4x74f"><span>1179</span></td><td id="LC1179" class="css-1dcdqdg"><code>                  <span class="code-comment">// /prefix_:p()_suffix</span>
</code></td></tr><tr><td id="L1180" class="css-a4x74f"><span>1180</span></td><td id="LC1180" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (char === <span class="code-string">')'</span>) {
</code></td></tr><tr><td id="L1181" class="css-a4x74f"><span>1181</span></td><td id="LC1181" class="css-1dcdqdg"><code>                      <span class="code-comment">// handle the escaped )</span>
</code></td></tr><tr><td id="L1182" class="css-a4x74f"><span>1182</span></td><td id="LC1182" class="css-1dcdqdg"><code>                      <span class="code-keyword">if</span> (customRe[customRe.length - <span class="code-number">1</span>] == <span class="code-string">'\\'</span>)
</code></td></tr><tr><td id="L1183" class="css-a4x74f"><span>1183</span></td><td id="LC1183" class="css-1dcdqdg"><code>                          customRe = customRe.slice(<span class="code-number">0</span>, <span class="code-number">-1</span>) + char;
</code></td></tr><tr><td id="L1184" class="css-a4x74f"><span>1184</span></td><td id="LC1184" class="css-1dcdqdg"><code>                      <span class="code-keyword">else</span>
</code></td></tr><tr><td id="L1185" class="css-a4x74f"><span>1185</span></td><td id="LC1185" class="css-1dcdqdg"><code>                          state = <span class="code-number">3</span> <span class="code-comment">/* TokenizerState.ParamRegExpEnd */</span>;
</code></td></tr><tr><td id="L1186" class="css-a4x74f"><span>1186</span></td><td id="LC1186" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L1187" class="css-a4x74f"><span>1187</span></td><td id="LC1187" class="css-1dcdqdg"><code>                  <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1188" class="css-a4x74f"><span>1188</span></td><td id="LC1188" class="css-1dcdqdg"><code>                      customRe += char;
</code></td></tr><tr><td id="L1189" class="css-a4x74f"><span>1189</span></td><td id="LC1189" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L1190" class="css-a4x74f"><span>1190</span></td><td id="LC1190" class="css-1dcdqdg"><code>                  <span class="code-keyword">break</span>;
</code></td></tr><tr><td id="L1191" class="css-a4x74f"><span>1191</span></td><td id="LC1191" class="css-1dcdqdg"><code>              <span class="code-keyword">case</span> <span class="code-number">3</span> <span class="code-comment">/* TokenizerState.ParamRegExpEnd */</span>:
</code></td></tr><tr><td id="L1192" class="css-a4x74f"><span>1192</span></td><td id="LC1192" class="css-1dcdqdg"><code>                  <span class="code-comment">// same as finalizing a param</span>
</code></td></tr><tr><td id="L1193" class="css-a4x74f"><span>1193</span></td><td id="LC1193" class="css-1dcdqdg"><code>                  consumeBuffer();
</code></td></tr><tr><td id="L1194" class="css-a4x74f"><span>1194</span></td><td id="LC1194" class="css-1dcdqdg"><code>                  state = <span class="code-number">0</span> <span class="code-comment">/* TokenizerState.Static */</span>;
</code></td></tr><tr><td id="L1195" class="css-a4x74f"><span>1195</span></td><td id="LC1195" class="css-1dcdqdg"><code>                  <span class="code-comment">// go back one character if we were not modifying</span>
</code></td></tr><tr><td id="L1196" class="css-a4x74f"><span>1196</span></td><td id="LC1196" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (char !== <span class="code-string">'*'</span> &amp;&amp; char !== <span class="code-string">'?'</span> &amp;&amp; char !== <span class="code-string">'+'</span>)
</code></td></tr><tr><td id="L1197" class="css-a4x74f"><span>1197</span></td><td id="LC1197" class="css-1dcdqdg"><code>                      i--;
</code></td></tr><tr><td id="L1198" class="css-a4x74f"><span>1198</span></td><td id="LC1198" class="css-1dcdqdg"><code>                  customRe = <span class="code-string">''</span>;
</code></td></tr><tr><td id="L1199" class="css-a4x74f"><span>1199</span></td><td id="LC1199" class="css-1dcdqdg"><code>                  <span class="code-keyword">break</span>;
</code></td></tr><tr><td id="L1200" class="css-a4x74f"><span>1200</span></td><td id="LC1200" class="css-1dcdqdg"><code>              <span class="code-keyword">default</span>:
</code></td></tr><tr><td id="L1201" class="css-a4x74f"><span>1201</span></td><td id="LC1201" class="css-1dcdqdg"><code>                  crash(<span class="code-string">'Unknown state'</span>);
</code></td></tr><tr><td id="L1202" class="css-a4x74f"><span>1202</span></td><td id="LC1202" class="css-1dcdqdg"><code>                  <span class="code-keyword">break</span>;
</code></td></tr><tr><td id="L1203" class="css-a4x74f"><span>1203</span></td><td id="LC1203" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1204" class="css-a4x74f"><span>1204</span></td><td id="LC1204" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1205" class="css-a4x74f"><span>1205</span></td><td id="LC1205" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (state === <span class="code-number">2</span> <span class="code-comment">/* TokenizerState.ParamRegExp */</span>)
</code></td></tr><tr><td id="L1206" class="css-a4x74f"><span>1206</span></td><td id="LC1206" class="css-1dcdqdg"><code>          crash(<span class="code-string">`Unfinished custom RegExp for param "<span class="code-subst">${buffer}</span>"`</span>);
</code></td></tr><tr><td id="L1207" class="css-a4x74f"><span>1207</span></td><td id="LC1207" class="css-1dcdqdg"><code>      consumeBuffer();
</code></td></tr><tr><td id="L1208" class="css-a4x74f"><span>1208</span></td><td id="LC1208" class="css-1dcdqdg"><code>      finalizeSegment();
</code></td></tr><tr><td id="L1209" class="css-a4x74f"><span>1209</span></td><td id="LC1209" class="css-1dcdqdg"><code>      <span class="code-comment">// tokenCache.set(path, tokens)</span>
</code></td></tr><tr><td id="L1210" class="css-a4x74f"><span>1210</span></td><td id="LC1210" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> tokens;
</code></td></tr><tr><td id="L1211" class="css-a4x74f"><span>1211</span></td><td id="LC1211" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1212" class="css-a4x74f"><span>1212</span></td><td id="LC1212" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1213" class="css-a4x74f"><span>1213</span></td><td id="LC1213" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">createRouteRecordMatcher</span>(<span class="code-params">record, parent, options</span>) </span>{
</code></td></tr><tr><td id="L1214" class="css-a4x74f"><span>1214</span></td><td id="LC1214" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> parser = tokensToParser(tokenizePath(record.path), options);
</code></td></tr><tr><td id="L1215" class="css-a4x74f"><span>1215</span></td><td id="LC1215" class="css-1dcdqdg"><code>      <span class="code-comment">// warn against params with the same name</span>
</code></td></tr><tr><td id="L1216" class="css-a4x74f"><span>1216</span></td><td id="LC1216" class="css-1dcdqdg"><code>      {
</code></td></tr><tr><td id="L1217" class="css-a4x74f"><span>1217</span></td><td id="LC1217" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> existingKeys = <span class="code-keyword">new</span> <span class="code-built_in">Set</span>();
</code></td></tr><tr><td id="L1218" class="css-a4x74f"><span>1218</span></td><td id="LC1218" class="css-1dcdqdg"><code>          <span class="code-keyword">for</span> (<span class="code-keyword">const</span> key <span class="code-keyword">of</span> parser.keys) {
</code></td></tr><tr><td id="L1219" class="css-a4x74f"><span>1219</span></td><td id="LC1219" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (existingKeys.has(key.name))
</code></td></tr><tr><td id="L1220" class="css-a4x74f"><span>1220</span></td><td id="LC1220" class="css-1dcdqdg"><code>                  warn(<span class="code-string">`Found duplicated params with name "<span class="code-subst">${key.name}</span>" for path "<span class="code-subst">${record.path}</span>". Only the last one will be available on "$route.params".`</span>);
</code></td></tr><tr><td id="L1221" class="css-a4x74f"><span>1221</span></td><td id="LC1221" class="css-1dcdqdg"><code>              existingKeys.add(key.name);
</code></td></tr><tr><td id="L1222" class="css-a4x74f"><span>1222</span></td><td id="LC1222" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1223" class="css-a4x74f"><span>1223</span></td><td id="LC1223" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1224" class="css-a4x74f"><span>1224</span></td><td id="LC1224" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> matcher = assign(parser, {
</code></td></tr><tr><td id="L1225" class="css-a4x74f"><span>1225</span></td><td id="LC1225" class="css-1dcdqdg"><code>          record,
</code></td></tr><tr><td id="L1226" class="css-a4x74f"><span>1226</span></td><td id="LC1226" class="css-1dcdqdg"><code>          parent,
</code></td></tr><tr><td id="L1227" class="css-a4x74f"><span>1227</span></td><td id="LC1227" class="css-1dcdqdg"><code>          <span class="code-comment">// these needs to be populated by the parent</span>
</code></td></tr><tr><td id="L1228" class="css-a4x74f"><span>1228</span></td><td id="LC1228" class="css-1dcdqdg"><code>          children: [],
</code></td></tr><tr><td id="L1229" class="css-a4x74f"><span>1229</span></td><td id="LC1229" class="css-1dcdqdg"><code>          alias: [],
</code></td></tr><tr><td id="L1230" class="css-a4x74f"><span>1230</span></td><td id="LC1230" class="css-1dcdqdg"><code>      });
</code></td></tr><tr><td id="L1231" class="css-a4x74f"><span>1231</span></td><td id="LC1231" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (parent) {
</code></td></tr><tr><td id="L1232" class="css-a4x74f"><span>1232</span></td><td id="LC1232" class="css-1dcdqdg"><code>          <span class="code-comment">// both are aliases or both are not aliases</span>
</code></td></tr><tr><td id="L1233" class="css-a4x74f"><span>1233</span></td><td id="LC1233" class="css-1dcdqdg"><code>          <span class="code-comment">// we don't want to mix them because the order is used when</span>
</code></td></tr><tr><td id="L1234" class="css-a4x74f"><span>1234</span></td><td id="LC1234" class="css-1dcdqdg"><code>          <span class="code-comment">// passing originalRecord in Matcher.addRoute</span>
</code></td></tr><tr><td id="L1235" class="css-a4x74f"><span>1235</span></td><td id="LC1235" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!matcher.record.aliasOf === !parent.record.aliasOf)
</code></td></tr><tr><td id="L1236" class="css-a4x74f"><span>1236</span></td><td id="LC1236" class="css-1dcdqdg"><code>              parent.children.push(matcher);
</code></td></tr><tr><td id="L1237" class="css-a4x74f"><span>1237</span></td><td id="LC1237" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1238" class="css-a4x74f"><span>1238</span></td><td id="LC1238" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> matcher;
</code></td></tr><tr><td id="L1239" class="css-a4x74f"><span>1239</span></td><td id="LC1239" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1240" class="css-a4x74f"><span>1240</span></td><td id="LC1240" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1241" class="css-a4x74f"><span>1241</span></td><td id="LC1241" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1242" class="css-a4x74f"><span>1242</span></td><td id="LC1242" class="css-1dcdqdg"><code><span class="code-comment">   * Creates a Router Matcher.
</span></code></td></tr><tr><td id="L1243" class="css-a4x74f"><span>1243</span></td><td id="LC1243" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1244" class="css-a4x74f"><span>1244</span></td><td id="LC1244" class="css-1dcdqdg"><code><span class="code-comment">   * @internal
</span></code></td></tr><tr><td id="L1245" class="css-a4x74f"><span>1245</span></td><td id="LC1245" class="css-1dcdqdg"><code><span class="code-comment">   * @param routes - array of initial routes
</span></code></td></tr><tr><td id="L1246" class="css-a4x74f"><span>1246</span></td><td id="LC1246" class="css-1dcdqdg"><code><span class="code-comment">   * @param globalOptions - global route options
</span></code></td></tr><tr><td id="L1247" class="css-a4x74f"><span>1247</span></td><td id="LC1247" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1248" class="css-a4x74f"><span>1248</span></td><td id="LC1248" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">createRouterMatcher</span>(<span class="code-params">routes, globalOptions</span>) </span>{
</code></td></tr><tr><td id="L1249" class="css-a4x74f"><span>1249</span></td><td id="LC1249" class="css-1dcdqdg"><code>      <span class="code-comment">// normalized ordered array of matchers</span>
</code></td></tr><tr><td id="L1250" class="css-a4x74f"><span>1250</span></td><td id="LC1250" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> matchers = [];
</code></td></tr><tr><td id="L1251" class="css-a4x74f"><span>1251</span></td><td id="LC1251" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> matcherMap = <span class="code-keyword">new</span> <span class="code-built_in">Map</span>();
</code></td></tr><tr><td id="L1252" class="css-a4x74f"><span>1252</span></td><td id="LC1252" class="css-1dcdqdg"><code>      globalOptions = mergeOptions({ <span class="code-attr">strict</span>: <span class="code-literal">false</span>, <span class="code-attr">end</span>: <span class="code-literal">true</span>, <span class="code-attr">sensitive</span>: <span class="code-literal">false</span> }, globalOptions);
</code></td></tr><tr><td id="L1253" class="css-a4x74f"><span>1253</span></td><td id="LC1253" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">getRecordMatcher</span>(<span class="code-params">name</span>) </span>{
</code></td></tr><tr><td id="L1254" class="css-a4x74f"><span>1254</span></td><td id="LC1254" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> matcherMap.get(name);
</code></td></tr><tr><td id="L1255" class="css-a4x74f"><span>1255</span></td><td id="LC1255" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1256" class="css-a4x74f"><span>1256</span></td><td id="LC1256" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">addRoute</span>(<span class="code-params">record, parent, originalRecord</span>) </span>{
</code></td></tr><tr><td id="L1257" class="css-a4x74f"><span>1257</span></td><td id="LC1257" class="css-1dcdqdg"><code>          <span class="code-comment">// used later on to remove by name</span>
</code></td></tr><tr><td id="L1258" class="css-a4x74f"><span>1258</span></td><td id="LC1258" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> isRootAdd = !originalRecord;
</code></td></tr><tr><td id="L1259" class="css-a4x74f"><span>1259</span></td><td id="LC1259" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> mainNormalizedRecord = normalizeRouteRecord(record);
</code></td></tr><tr><td id="L1260" class="css-a4x74f"><span>1260</span></td><td id="LC1260" class="css-1dcdqdg"><code>          {
</code></td></tr><tr><td id="L1261" class="css-a4x74f"><span>1261</span></td><td id="LC1261" class="css-1dcdqdg"><code>              checkChildMissingNameWithEmptyPath(mainNormalizedRecord, parent);
</code></td></tr><tr><td id="L1262" class="css-a4x74f"><span>1262</span></td><td id="LC1262" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1263" class="css-a4x74f"><span>1263</span></td><td id="LC1263" class="css-1dcdqdg"><code>          <span class="code-comment">// we might be the child of an alias</span>
</code></td></tr><tr><td id="L1264" class="css-a4x74f"><span>1264</span></td><td id="LC1264" class="css-1dcdqdg"><code>          mainNormalizedRecord.aliasOf = originalRecord &amp;&amp; originalRecord.record;
</code></td></tr><tr><td id="L1265" class="css-a4x74f"><span>1265</span></td><td id="LC1265" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> options = mergeOptions(globalOptions, record);
</code></td></tr><tr><td id="L1266" class="css-a4x74f"><span>1266</span></td><td id="LC1266" class="css-1dcdqdg"><code>          <span class="code-comment">// generate an array of records to correctly handle aliases</span>
</code></td></tr><tr><td id="L1267" class="css-a4x74f"><span>1267</span></td><td id="LC1267" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> normalizedRecords = [
</code></td></tr><tr><td id="L1268" class="css-a4x74f"><span>1268</span></td><td id="LC1268" class="css-1dcdqdg"><code>              mainNormalizedRecord,
</code></td></tr><tr><td id="L1269" class="css-a4x74f"><span>1269</span></td><td id="LC1269" class="css-1dcdqdg"><code>          ];
</code></td></tr><tr><td id="L1270" class="css-a4x74f"><span>1270</span></td><td id="LC1270" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (<span class="code-string">'alias'</span> <span class="code-keyword">in</span> record) {
</code></td></tr><tr><td id="L1271" class="css-a4x74f"><span>1271</span></td><td id="LC1271" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> aliases = <span class="code-keyword">typeof</span> record.alias === <span class="code-string">'string'</span> ? [record.alias] : record.alias;
</code></td></tr><tr><td id="L1272" class="css-a4x74f"><span>1272</span></td><td id="LC1272" class="css-1dcdqdg"><code>              <span class="code-keyword">for</span> (<span class="code-keyword">const</span> alias <span class="code-keyword">of</span> aliases) {
</code></td></tr><tr><td id="L1273" class="css-a4x74f"><span>1273</span></td><td id="LC1273" class="css-1dcdqdg"><code>                  normalizedRecords.push(assign({}, mainNormalizedRecord, {
</code></td></tr><tr><td id="L1274" class="css-a4x74f"><span>1274</span></td><td id="LC1274" class="css-1dcdqdg"><code>                      <span class="code-comment">// this allows us to hold a copy of the `components` option</span>
</code></td></tr><tr><td id="L1275" class="css-a4x74f"><span>1275</span></td><td id="LC1275" class="css-1dcdqdg"><code>                      <span class="code-comment">// so that async components cache is hold on the original record</span>
</code></td></tr><tr><td id="L1276" class="css-a4x74f"><span>1276</span></td><td id="LC1276" class="css-1dcdqdg"><code>                      components: originalRecord
</code></td></tr><tr><td id="L1277" class="css-a4x74f"><span>1277</span></td><td id="LC1277" class="css-1dcdqdg"><code>                          ? originalRecord.record.components
</code></td></tr><tr><td id="L1278" class="css-a4x74f"><span>1278</span></td><td id="LC1278" class="css-1dcdqdg"><code>                          : mainNormalizedRecord.components,
</code></td></tr><tr><td id="L1279" class="css-a4x74f"><span>1279</span></td><td id="LC1279" class="css-1dcdqdg"><code>                      path: alias,
</code></td></tr><tr><td id="L1280" class="css-a4x74f"><span>1280</span></td><td id="LC1280" class="css-1dcdqdg"><code>                      <span class="code-comment">// we might be the child of an alias</span>
</code></td></tr><tr><td id="L1281" class="css-a4x74f"><span>1281</span></td><td id="LC1281" class="css-1dcdqdg"><code>                      aliasOf: originalRecord
</code></td></tr><tr><td id="L1282" class="css-a4x74f"><span>1282</span></td><td id="LC1282" class="css-1dcdqdg"><code>                          ? originalRecord.record
</code></td></tr><tr><td id="L1283" class="css-a4x74f"><span>1283</span></td><td id="LC1283" class="css-1dcdqdg"><code>                          : mainNormalizedRecord,
</code></td></tr><tr><td id="L1284" class="css-a4x74f"><span>1284</span></td><td id="LC1284" class="css-1dcdqdg"><code>                      <span class="code-comment">// the aliases are always of the same kind as the original since they</span>
</code></td></tr><tr><td id="L1285" class="css-a4x74f"><span>1285</span></td><td id="LC1285" class="css-1dcdqdg"><code>                      <span class="code-comment">// are defined on the same record</span>
</code></td></tr><tr><td id="L1286" class="css-a4x74f"><span>1286</span></td><td id="LC1286" class="css-1dcdqdg"><code>                  }));
</code></td></tr><tr><td id="L1287" class="css-a4x74f"><span>1287</span></td><td id="LC1287" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1288" class="css-a4x74f"><span>1288</span></td><td id="LC1288" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1289" class="css-a4x74f"><span>1289</span></td><td id="LC1289" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> matcher;
</code></td></tr><tr><td id="L1290" class="css-a4x74f"><span>1290</span></td><td id="LC1290" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> originalMatcher;
</code></td></tr><tr><td id="L1291" class="css-a4x74f"><span>1291</span></td><td id="LC1291" class="css-1dcdqdg"><code>          <span class="code-keyword">for</span> (<span class="code-keyword">const</span> normalizedRecord <span class="code-keyword">of</span> normalizedRecords) {
</code></td></tr><tr><td id="L1292" class="css-a4x74f"><span>1292</span></td><td id="LC1292" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> { path } = normalizedRecord;
</code></td></tr><tr><td id="L1293" class="css-a4x74f"><span>1293</span></td><td id="LC1293" class="css-1dcdqdg"><code>              <span class="code-comment">// Build up the path for nested routes if the child isn't an absolute</span>
</code></td></tr><tr><td id="L1294" class="css-a4x74f"><span>1294</span></td><td id="LC1294" class="css-1dcdqdg"><code>              <span class="code-comment">// route. Only add the / delimiter if the child path isn't empty and if the</span>
</code></td></tr><tr><td id="L1295" class="css-a4x74f"><span>1295</span></td><td id="LC1295" class="css-1dcdqdg"><code>              <span class="code-comment">// parent path doesn't have a trailing slash</span>
</code></td></tr><tr><td id="L1296" class="css-a4x74f"><span>1296</span></td><td id="LC1296" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (parent &amp;&amp; path[<span class="code-number">0</span>] !== <span class="code-string">'/'</span>) {
</code></td></tr><tr><td id="L1297" class="css-a4x74f"><span>1297</span></td><td id="LC1297" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> parentPath = parent.record.path;
</code></td></tr><tr><td id="L1298" class="css-a4x74f"><span>1298</span></td><td id="LC1298" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> connectingSlash = parentPath[parentPath.length - <span class="code-number">1</span>] === <span class="code-string">'/'</span> ? <span class="code-string">''</span> : <span class="code-string">'/'</span>;
</code></td></tr><tr><td id="L1299" class="css-a4x74f"><span>1299</span></td><td id="LC1299" class="css-1dcdqdg"><code>                  normalizedRecord.path =
</code></td></tr><tr><td id="L1300" class="css-a4x74f"><span>1300</span></td><td id="LC1300" class="css-1dcdqdg"><code>                      parent.record.path + (path &amp;&amp; connectingSlash + path);
</code></td></tr><tr><td id="L1301" class="css-a4x74f"><span>1301</span></td><td id="LC1301" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1302" class="css-a4x74f"><span>1302</span></td><td id="LC1302" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (normalizedRecord.path === <span class="code-string">'*'</span>) {
</code></td></tr><tr><td id="L1303" class="css-a4x74f"><span>1303</span></td><td id="LC1303" class="css-1dcdqdg"><code>                  <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">'Catch all routes ("*") must now be defined using a param with a custom regexp.\n'</span> +
</code></td></tr><tr><td id="L1304" class="css-a4x74f"><span>1304</span></td><td id="LC1304" class="css-1dcdqdg"><code>                      <span class="code-string">'See more at https://next.router.vuejs.org/guide/migration/#removed-star-or-catch-all-routes.'</span>);
</code></td></tr><tr><td id="L1305" class="css-a4x74f"><span>1305</span></td><td id="LC1305" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1306" class="css-a4x74f"><span>1306</span></td><td id="LC1306" class="css-1dcdqdg"><code>              <span class="code-comment">// create the object beforehand, so it can be passed to children</span>
</code></td></tr><tr><td id="L1307" class="css-a4x74f"><span>1307</span></td><td id="LC1307" class="css-1dcdqdg"><code>              matcher = createRouteRecordMatcher(normalizedRecord, parent, options);
</code></td></tr><tr><td id="L1308" class="css-a4x74f"><span>1308</span></td><td id="LC1308" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (parent &amp;&amp; path[<span class="code-number">0</span>] === <span class="code-string">'/'</span>)
</code></td></tr><tr><td id="L1309" class="css-a4x74f"><span>1309</span></td><td id="LC1309" class="css-1dcdqdg"><code>                  checkMissingParamsInAbsolutePath(matcher, parent);
</code></td></tr><tr><td id="L1310" class="css-a4x74f"><span>1310</span></td><td id="LC1310" class="css-1dcdqdg"><code>              <span class="code-comment">// if we are an alias we must tell the original record that we exist,</span>
</code></td></tr><tr><td id="L1311" class="css-a4x74f"><span>1311</span></td><td id="LC1311" class="css-1dcdqdg"><code>              <span class="code-comment">// so we can be removed</span>
</code></td></tr><tr><td id="L1312" class="css-a4x74f"><span>1312</span></td><td id="LC1312" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (originalRecord) {
</code></td></tr><tr><td id="L1313" class="css-a4x74f"><span>1313</span></td><td id="LC1313" class="css-1dcdqdg"><code>                  originalRecord.alias.push(matcher);
</code></td></tr><tr><td id="L1314" class="css-a4x74f"><span>1314</span></td><td id="LC1314" class="css-1dcdqdg"><code>                  {
</code></td></tr><tr><td id="L1315" class="css-a4x74f"><span>1315</span></td><td id="LC1315" class="css-1dcdqdg"><code>                      checkSameParams(originalRecord, matcher);
</code></td></tr><tr><td id="L1316" class="css-a4x74f"><span>1316</span></td><td id="LC1316" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L1317" class="css-a4x74f"><span>1317</span></td><td id="LC1317" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1318" class="css-a4x74f"><span>1318</span></td><td id="LC1318" class="css-1dcdqdg"><code>              <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1319" class="css-a4x74f"><span>1319</span></td><td id="LC1319" class="css-1dcdqdg"><code>                  <span class="code-comment">// otherwise, the first record is the original and others are aliases</span>
</code></td></tr><tr><td id="L1320" class="css-a4x74f"><span>1320</span></td><td id="LC1320" class="css-1dcdqdg"><code>                  originalMatcher = originalMatcher || matcher;
</code></td></tr><tr><td id="L1321" class="css-a4x74f"><span>1321</span></td><td id="LC1321" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (originalMatcher !== matcher)
</code></td></tr><tr><td id="L1322" class="css-a4x74f"><span>1322</span></td><td id="LC1322" class="css-1dcdqdg"><code>                      originalMatcher.alias.push(matcher);
</code></td></tr><tr><td id="L1323" class="css-a4x74f"><span>1323</span></td><td id="LC1323" class="css-1dcdqdg"><code>                  <span class="code-comment">// remove the route if named and only for the top record (avoid in nested calls)</span>
</code></td></tr><tr><td id="L1324" class="css-a4x74f"><span>1324</span></td><td id="LC1324" class="css-1dcdqdg"><code>                  <span class="code-comment">// this works because the original record is the first one</span>
</code></td></tr><tr><td id="L1325" class="css-a4x74f"><span>1325</span></td><td id="LC1325" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (isRootAdd &amp;&amp; record.name &amp;&amp; !isAliasRecord(matcher))
</code></td></tr><tr><td id="L1326" class="css-a4x74f"><span>1326</span></td><td id="LC1326" class="css-1dcdqdg"><code>                      removeRoute(record.name);
</code></td></tr><tr><td id="L1327" class="css-a4x74f"><span>1327</span></td><td id="LC1327" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1328" class="css-a4x74f"><span>1328</span></td><td id="LC1328" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (mainNormalizedRecord.children) {
</code></td></tr><tr><td id="L1329" class="css-a4x74f"><span>1329</span></td><td id="LC1329" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> children = mainNormalizedRecord.children;
</code></td></tr><tr><td id="L1330" class="css-a4x74f"><span>1330</span></td><td id="LC1330" class="css-1dcdqdg"><code>                  <span class="code-keyword">for</span> (<span class="code-keyword">let</span> i = <span class="code-number">0</span>; i &lt; children.length; i++) {
</code></td></tr><tr><td id="L1331" class="css-a4x74f"><span>1331</span></td><td id="LC1331" class="css-1dcdqdg"><code>                      addRoute(children[i], matcher, originalRecord &amp;&amp; originalRecord.children[i]);
</code></td></tr><tr><td id="L1332" class="css-a4x74f"><span>1332</span></td><td id="LC1332" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L1333" class="css-a4x74f"><span>1333</span></td><td id="LC1333" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1334" class="css-a4x74f"><span>1334</span></td><td id="LC1334" class="css-1dcdqdg"><code>              <span class="code-comment">// if there was no original record, then the first one was not an alias and all</span>
</code></td></tr><tr><td id="L1335" class="css-a4x74f"><span>1335</span></td><td id="LC1335" class="css-1dcdqdg"><code>              <span class="code-comment">// other aliases (if any) need to reference this record when adding children</span>
</code></td></tr><tr><td id="L1336" class="css-a4x74f"><span>1336</span></td><td id="LC1336" class="css-1dcdqdg"><code>              originalRecord = originalRecord || matcher;
</code></td></tr><tr><td id="L1337" class="css-a4x74f"><span>1337</span></td><td id="LC1337" class="css-1dcdqdg"><code>              <span class="code-comment">// <span class="code-doctag">TODO:</span> add normalized records for more flexibility</span>
</code></td></tr><tr><td id="L1338" class="css-a4x74f"><span>1338</span></td><td id="LC1338" class="css-1dcdqdg"><code>              <span class="code-comment">// if (parent &amp;&amp; isAliasRecord(originalRecord)) {</span>
</code></td></tr><tr><td id="L1339" class="css-a4x74f"><span>1339</span></td><td id="LC1339" class="css-1dcdqdg"><code>              <span class="code-comment">//   parent.children.push(originalRecord)</span>
</code></td></tr><tr><td id="L1340" class="css-a4x74f"><span>1340</span></td><td id="LC1340" class="css-1dcdqdg"><code>              <span class="code-comment">// }</span>
</code></td></tr><tr><td id="L1341" class="css-a4x74f"><span>1341</span></td><td id="LC1341" class="css-1dcdqdg"><code>              <span class="code-comment">// Avoid adding a record that doesn't display anything. This allows passing through records without a component to</span>
</code></td></tr><tr><td id="L1342" class="css-a4x74f"><span>1342</span></td><td id="LC1342" class="css-1dcdqdg"><code>              <span class="code-comment">// not be reached and pass through the catch all route</span>
</code></td></tr><tr><td id="L1343" class="css-a4x74f"><span>1343</span></td><td id="LC1343" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> ((matcher.record.components &amp;&amp;
</code></td></tr><tr><td id="L1344" class="css-a4x74f"><span>1344</span></td><td id="LC1344" class="css-1dcdqdg"><code>                  <span class="code-built_in">Object</span>.keys(matcher.record.components).length) ||
</code></td></tr><tr><td id="L1345" class="css-a4x74f"><span>1345</span></td><td id="LC1345" class="css-1dcdqdg"><code>                  matcher.record.name ||
</code></td></tr><tr><td id="L1346" class="css-a4x74f"><span>1346</span></td><td id="LC1346" class="css-1dcdqdg"><code>                  matcher.record.redirect) {
</code></td></tr><tr><td id="L1347" class="css-a4x74f"><span>1347</span></td><td id="LC1347" class="css-1dcdqdg"><code>                  insertMatcher(matcher);
</code></td></tr><tr><td id="L1348" class="css-a4x74f"><span>1348</span></td><td id="LC1348" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1349" class="css-a4x74f"><span>1349</span></td><td id="LC1349" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1350" class="css-a4x74f"><span>1350</span></td><td id="LC1350" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> originalMatcher
</code></td></tr><tr><td id="L1351" class="css-a4x74f"><span>1351</span></td><td id="LC1351" class="css-1dcdqdg"><code>              ? <span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L1352" class="css-a4x74f"><span>1352</span></td><td id="LC1352" class="css-1dcdqdg"><code>                  <span class="code-comment">// since other matchers are aliases, they should be removed by the original matcher</span>
</code></td></tr><tr><td id="L1353" class="css-a4x74f"><span>1353</span></td><td id="LC1353" class="css-1dcdqdg"><code>                  removeRoute(originalMatcher);
</code></td></tr><tr><td id="L1354" class="css-a4x74f"><span>1354</span></td><td id="LC1354" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1355" class="css-a4x74f"><span>1355</span></td><td id="LC1355" class="css-1dcdqdg"><code>              : noop;
</code></td></tr><tr><td id="L1356" class="css-a4x74f"><span>1356</span></td><td id="LC1356" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1357" class="css-a4x74f"><span>1357</span></td><td id="LC1357" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">removeRoute</span>(<span class="code-params">matcherRef</span>) </span>{
</code></td></tr><tr><td id="L1358" class="css-a4x74f"><span>1358</span></td><td id="LC1358" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (isRouteName(matcherRef)) {
</code></td></tr><tr><td id="L1359" class="css-a4x74f"><span>1359</span></td><td id="LC1359" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> matcher = matcherMap.get(matcherRef);
</code></td></tr><tr><td id="L1360" class="css-a4x74f"><span>1360</span></td><td id="LC1360" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (matcher) {
</code></td></tr><tr><td id="L1361" class="css-a4x74f"><span>1361</span></td><td id="LC1361" class="css-1dcdqdg"><code>                  matcherMap.delete(matcherRef);
</code></td></tr><tr><td id="L1362" class="css-a4x74f"><span>1362</span></td><td id="LC1362" class="css-1dcdqdg"><code>                  matchers.splice(matchers.indexOf(matcher), <span class="code-number">1</span>);
</code></td></tr><tr><td id="L1363" class="css-a4x74f"><span>1363</span></td><td id="LC1363" class="css-1dcdqdg"><code>                  matcher.children.forEach(removeRoute);
</code></td></tr><tr><td id="L1364" class="css-a4x74f"><span>1364</span></td><td id="LC1364" class="css-1dcdqdg"><code>                  matcher.alias.forEach(removeRoute);
</code></td></tr><tr><td id="L1365" class="css-a4x74f"><span>1365</span></td><td id="LC1365" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1366" class="css-a4x74f"><span>1366</span></td><td id="LC1366" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1367" class="css-a4x74f"><span>1367</span></td><td id="LC1367" class="css-1dcdqdg"><code>          <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1368" class="css-a4x74f"><span>1368</span></td><td id="LC1368" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> index = matchers.indexOf(matcherRef);
</code></td></tr><tr><td id="L1369" class="css-a4x74f"><span>1369</span></td><td id="LC1369" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (index &gt; <span class="code-number">-1</span>) {
</code></td></tr><tr><td id="L1370" class="css-a4x74f"><span>1370</span></td><td id="LC1370" class="css-1dcdqdg"><code>                  matchers.splice(index, <span class="code-number">1</span>);
</code></td></tr><tr><td id="L1371" class="css-a4x74f"><span>1371</span></td><td id="LC1371" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (matcherRef.record.name)
</code></td></tr><tr><td id="L1372" class="css-a4x74f"><span>1372</span></td><td id="LC1372" class="css-1dcdqdg"><code>                      matcherMap.delete(matcherRef.record.name);
</code></td></tr><tr><td id="L1373" class="css-a4x74f"><span>1373</span></td><td id="LC1373" class="css-1dcdqdg"><code>                  matcherRef.children.forEach(removeRoute);
</code></td></tr><tr><td id="L1374" class="css-a4x74f"><span>1374</span></td><td id="LC1374" class="css-1dcdqdg"><code>                  matcherRef.alias.forEach(removeRoute);
</code></td></tr><tr><td id="L1375" class="css-a4x74f"><span>1375</span></td><td id="LC1375" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1376" class="css-a4x74f"><span>1376</span></td><td id="LC1376" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1377" class="css-a4x74f"><span>1377</span></td><td id="LC1377" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1378" class="css-a4x74f"><span>1378</span></td><td id="LC1378" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">getRoutes</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L1379" class="css-a4x74f"><span>1379</span></td><td id="LC1379" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> matchers;
</code></td></tr><tr><td id="L1380" class="css-a4x74f"><span>1380</span></td><td id="LC1380" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1381" class="css-a4x74f"><span>1381</span></td><td id="LC1381" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">insertMatcher</span>(<span class="code-params">matcher</span>) </span>{
</code></td></tr><tr><td id="L1382" class="css-a4x74f"><span>1382</span></td><td id="LC1382" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> i = <span class="code-number">0</span>;
</code></td></tr><tr><td id="L1383" class="css-a4x74f"><span>1383</span></td><td id="LC1383" class="css-1dcdqdg"><code>          <span class="code-keyword">while</span> (i &lt; matchers.length &amp;&amp;
</code></td></tr><tr><td id="L1384" class="css-a4x74f"><span>1384</span></td><td id="LC1384" class="css-1dcdqdg"><code>              comparePathParserScore(matcher, matchers[i]) &gt;= <span class="code-number">0</span> &amp;&amp;
</code></td></tr><tr><td id="L1385" class="css-a4x74f"><span>1385</span></td><td id="LC1385" class="css-1dcdqdg"><code>              <span class="code-comment">// Adding children with empty path should still appear before the parent</span>
</code></td></tr><tr><td id="L1386" class="css-a4x74f"><span>1386</span></td><td id="LC1386" class="css-1dcdqdg"><code>              <span class="code-comment">// https://github.com/vuejs/router/issues/1124</span>
</code></td></tr><tr><td id="L1387" class="css-a4x74f"><span>1387</span></td><td id="LC1387" class="css-1dcdqdg"><code>              (matcher.record.path !== matchers[i].record.path ||
</code></td></tr><tr><td id="L1388" class="css-a4x74f"><span>1388</span></td><td id="LC1388" class="css-1dcdqdg"><code>                  !isRecordChildOf(matcher, matchers[i])))
</code></td></tr><tr><td id="L1389" class="css-a4x74f"><span>1389</span></td><td id="LC1389" class="css-1dcdqdg"><code>              i++;
</code></td></tr><tr><td id="L1390" class="css-a4x74f"><span>1390</span></td><td id="LC1390" class="css-1dcdqdg"><code>          matchers.splice(i, <span class="code-number">0</span>, matcher);
</code></td></tr><tr><td id="L1391" class="css-a4x74f"><span>1391</span></td><td id="LC1391" class="css-1dcdqdg"><code>          <span class="code-comment">// only add the original record to the name map</span>
</code></td></tr><tr><td id="L1392" class="css-a4x74f"><span>1392</span></td><td id="LC1392" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (matcher.record.name &amp;&amp; !isAliasRecord(matcher))
</code></td></tr><tr><td id="L1393" class="css-a4x74f"><span>1393</span></td><td id="LC1393" class="css-1dcdqdg"><code>              matcherMap.set(matcher.record.name, matcher);
</code></td></tr><tr><td id="L1394" class="css-a4x74f"><span>1394</span></td><td id="LC1394" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1395" class="css-a4x74f"><span>1395</span></td><td id="LC1395" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">resolve</span>(<span class="code-params">location, currentLocation</span>) </span>{
</code></td></tr><tr><td id="L1396" class="css-a4x74f"><span>1396</span></td><td id="LC1396" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> matcher;
</code></td></tr><tr><td id="L1397" class="css-a4x74f"><span>1397</span></td><td id="LC1397" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> params = {};
</code></td></tr><tr><td id="L1398" class="css-a4x74f"><span>1398</span></td><td id="LC1398" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> path;
</code></td></tr><tr><td id="L1399" class="css-a4x74f"><span>1399</span></td><td id="LC1399" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> name;
</code></td></tr><tr><td id="L1400" class="css-a4x74f"><span>1400</span></td><td id="LC1400" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (<span class="code-string">'name'</span> <span class="code-keyword">in</span> location &amp;&amp; location.name) {
</code></td></tr><tr><td id="L1401" class="css-a4x74f"><span>1401</span></td><td id="LC1401" class="css-1dcdqdg"><code>              matcher = matcherMap.get(location.name);
</code></td></tr><tr><td id="L1402" class="css-a4x74f"><span>1402</span></td><td id="LC1402" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (!matcher)
</code></td></tr><tr><td id="L1403" class="css-a4x74f"><span>1403</span></td><td id="LC1403" class="css-1dcdqdg"><code>                  <span class="code-keyword">throw</span> createRouterError(<span class="code-number">1</span> <span class="code-comment">/* ErrorTypes.MATCHER_NOT_FOUND */</span>, {
</code></td></tr><tr><td id="L1404" class="css-a4x74f"><span>1404</span></td><td id="LC1404" class="css-1dcdqdg"><code>                      location,
</code></td></tr><tr><td id="L1405" class="css-a4x74f"><span>1405</span></td><td id="LC1405" class="css-1dcdqdg"><code>                  });
</code></td></tr><tr><td id="L1406" class="css-a4x74f"><span>1406</span></td><td id="LC1406" class="css-1dcdqdg"><code>              <span class="code-comment">// warn if the user is passing invalid params so they can debug it better when they get removed</span>
</code></td></tr><tr><td id="L1407" class="css-a4x74f"><span>1407</span></td><td id="LC1407" class="css-1dcdqdg"><code>              {
</code></td></tr><tr><td id="L1408" class="css-a4x74f"><span>1408</span></td><td id="LC1408" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> invalidParams = <span class="code-built_in">Object</span>.keys(location.params || {}).filter(<span class="code-function"><span class="code-params">paramName</span> =&gt;</span> !matcher.keys.find(<span class="code-function"><span class="code-params">k</span> =&gt;</span> k.name === paramName));
</code></td></tr><tr><td id="L1409" class="css-a4x74f"><span>1409</span></td><td id="LC1409" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (invalidParams.length) {
</code></td></tr><tr><td id="L1410" class="css-a4x74f"><span>1410</span></td><td id="LC1410" class="css-1dcdqdg"><code>                      warn(<span class="code-string">`Discarded invalid param(s) "<span class="code-subst">${invalidParams.join(<span class="code-string">'", "'</span>)}</span>" when navigating. See https://github.com/vuejs/router/blob/main/packages/router/CHANGELOG.md#414-2022-08-22 for more details.`</span>);
</code></td></tr><tr><td id="L1411" class="css-a4x74f"><span>1411</span></td><td id="LC1411" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L1412" class="css-a4x74f"><span>1412</span></td><td id="LC1412" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1413" class="css-a4x74f"><span>1413</span></td><td id="LC1413" class="css-1dcdqdg"><code>              name = matcher.record.name;
</code></td></tr><tr><td id="L1414" class="css-a4x74f"><span>1414</span></td><td id="LC1414" class="css-1dcdqdg"><code>              params = assign(
</code></td></tr><tr><td id="L1415" class="css-a4x74f"><span>1415</span></td><td id="LC1415" class="css-1dcdqdg"><code>              <span class="code-comment">// paramsFromLocation is a new object</span>
</code></td></tr><tr><td id="L1416" class="css-a4x74f"><span>1416</span></td><td id="LC1416" class="css-1dcdqdg"><code>              paramsFromLocation(currentLocation.params, 
</code></td></tr><tr><td id="L1417" class="css-a4x74f"><span>1417</span></td><td id="LC1417" class="css-1dcdqdg"><code>              <span class="code-comment">// only keep params that exist in the resolved location</span>
</code></td></tr><tr><td id="L1418" class="css-a4x74f"><span>1418</span></td><td id="LC1418" class="css-1dcdqdg"><code>              <span class="code-comment">// <span class="code-doctag">TODO:</span> only keep optional params coming from a parent record</span>
</code></td></tr><tr><td id="L1419" class="css-a4x74f"><span>1419</span></td><td id="LC1419" class="css-1dcdqdg"><code>              matcher.keys.filter(<span class="code-function"><span class="code-params">k</span> =&gt;</span> !k.optional).map(<span class="code-function"><span class="code-params">k</span> =&gt;</span> k.name)), 
</code></td></tr><tr><td id="L1420" class="css-a4x74f"><span>1420</span></td><td id="LC1420" class="css-1dcdqdg"><code>              <span class="code-comment">// discard any existing params in the current location that do not exist here</span>
</code></td></tr><tr><td id="L1421" class="css-a4x74f"><span>1421</span></td><td id="LC1421" class="css-1dcdqdg"><code>              <span class="code-comment">// #1497 this ensures better active/exact matching</span>
</code></td></tr><tr><td id="L1422" class="css-a4x74f"><span>1422</span></td><td id="LC1422" class="css-1dcdqdg"><code>              location.params &amp;&amp;
</code></td></tr><tr><td id="L1423" class="css-a4x74f"><span>1423</span></td><td id="LC1423" class="css-1dcdqdg"><code>                  paramsFromLocation(location.params, matcher.keys.map(<span class="code-function"><span class="code-params">k</span> =&gt;</span> k.name)));
</code></td></tr><tr><td id="L1424" class="css-a4x74f"><span>1424</span></td><td id="LC1424" class="css-1dcdqdg"><code>              <span class="code-comment">// throws if cannot be stringified</span>
</code></td></tr><tr><td id="L1425" class="css-a4x74f"><span>1425</span></td><td id="LC1425" class="css-1dcdqdg"><code>              path = matcher.stringify(params);
</code></td></tr><tr><td id="L1426" class="css-a4x74f"><span>1426</span></td><td id="LC1426" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1427" class="css-a4x74f"><span>1427</span></td><td id="LC1427" class="css-1dcdqdg"><code>          <span class="code-keyword">else</span> <span class="code-keyword">if</span> (<span class="code-string">'path'</span> <span class="code-keyword">in</span> location) {
</code></td></tr><tr><td id="L1428" class="css-a4x74f"><span>1428</span></td><td id="LC1428" class="css-1dcdqdg"><code>              <span class="code-comment">// no need to resolve the path with the matcher as it was provided</span>
</code></td></tr><tr><td id="L1429" class="css-a4x74f"><span>1429</span></td><td id="LC1429" class="css-1dcdqdg"><code>              <span class="code-comment">// this also allows the user to control the encoding</span>
</code></td></tr><tr><td id="L1430" class="css-a4x74f"><span>1430</span></td><td id="LC1430" class="css-1dcdqdg"><code>              path = location.path;
</code></td></tr><tr><td id="L1431" class="css-a4x74f"><span>1431</span></td><td id="LC1431" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (!path.startsWith(<span class="code-string">'/'</span>)) {
</code></td></tr><tr><td id="L1432" class="css-a4x74f"><span>1432</span></td><td id="LC1432" class="css-1dcdqdg"><code>                  warn(<span class="code-string">`The Matcher cannot resolve relative paths but received "<span class="code-subst">${path}</span>". Unless you directly called \`matcher.resolve("<span class="code-subst">${path}</span>")\`, this is probably a bug in vue-router. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/router.`</span>);
</code></td></tr><tr><td id="L1433" class="css-a4x74f"><span>1433</span></td><td id="LC1433" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1434" class="css-a4x74f"><span>1434</span></td><td id="LC1434" class="css-1dcdqdg"><code>              matcher = matchers.find(<span class="code-function"><span class="code-params">m</span> =&gt;</span> m.re.test(path));
</code></td></tr><tr><td id="L1435" class="css-a4x74f"><span>1435</span></td><td id="LC1435" class="css-1dcdqdg"><code>              <span class="code-comment">// matcher should have a value after the loop</span>
</code></td></tr><tr><td id="L1436" class="css-a4x74f"><span>1436</span></td><td id="LC1436" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (matcher) {
</code></td></tr><tr><td id="L1437" class="css-a4x74f"><span>1437</span></td><td id="LC1437" class="css-1dcdqdg"><code>                  <span class="code-comment">// we know the matcher works because we tested the regexp</span>
</code></td></tr><tr><td id="L1438" class="css-a4x74f"><span>1438</span></td><td id="LC1438" class="css-1dcdqdg"><code>                  params = matcher.parse(path);
</code></td></tr><tr><td id="L1439" class="css-a4x74f"><span>1439</span></td><td id="LC1439" class="css-1dcdqdg"><code>                  name = matcher.record.name;
</code></td></tr><tr><td id="L1440" class="css-a4x74f"><span>1440</span></td><td id="LC1440" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1441" class="css-a4x74f"><span>1441</span></td><td id="LC1441" class="css-1dcdqdg"><code>              <span class="code-comment">// location is a relative path</span>
</code></td></tr><tr><td id="L1442" class="css-a4x74f"><span>1442</span></td><td id="LC1442" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1443" class="css-a4x74f"><span>1443</span></td><td id="LC1443" class="css-1dcdqdg"><code>          <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1444" class="css-a4x74f"><span>1444</span></td><td id="LC1444" class="css-1dcdqdg"><code>              <span class="code-comment">// match by name or path of current route</span>
</code></td></tr><tr><td id="L1445" class="css-a4x74f"><span>1445</span></td><td id="LC1445" class="css-1dcdqdg"><code>              matcher = currentLocation.name
</code></td></tr><tr><td id="L1446" class="css-a4x74f"><span>1446</span></td><td id="LC1446" class="css-1dcdqdg"><code>                  ? matcherMap.get(currentLocation.name)
</code></td></tr><tr><td id="L1447" class="css-a4x74f"><span>1447</span></td><td id="LC1447" class="css-1dcdqdg"><code>                  : matchers.find(<span class="code-function"><span class="code-params">m</span> =&gt;</span> m.re.test(currentLocation.path));
</code></td></tr><tr><td id="L1448" class="css-a4x74f"><span>1448</span></td><td id="LC1448" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (!matcher)
</code></td></tr><tr><td id="L1449" class="css-a4x74f"><span>1449</span></td><td id="LC1449" class="css-1dcdqdg"><code>                  <span class="code-keyword">throw</span> createRouterError(<span class="code-number">1</span> <span class="code-comment">/* ErrorTypes.MATCHER_NOT_FOUND */</span>, {
</code></td></tr><tr><td id="L1450" class="css-a4x74f"><span>1450</span></td><td id="LC1450" class="css-1dcdqdg"><code>                      location,
</code></td></tr><tr><td id="L1451" class="css-a4x74f"><span>1451</span></td><td id="LC1451" class="css-1dcdqdg"><code>                      currentLocation,
</code></td></tr><tr><td id="L1452" class="css-a4x74f"><span>1452</span></td><td id="LC1452" class="css-1dcdqdg"><code>                  });
</code></td></tr><tr><td id="L1453" class="css-a4x74f"><span>1453</span></td><td id="LC1453" class="css-1dcdqdg"><code>              name = matcher.record.name;
</code></td></tr><tr><td id="L1454" class="css-a4x74f"><span>1454</span></td><td id="LC1454" class="css-1dcdqdg"><code>              <span class="code-comment">// since we are navigating to the same location, we don't need to pick the</span>
</code></td></tr><tr><td id="L1455" class="css-a4x74f"><span>1455</span></td><td id="LC1455" class="css-1dcdqdg"><code>              <span class="code-comment">// params like when `name` is provided</span>
</code></td></tr><tr><td id="L1456" class="css-a4x74f"><span>1456</span></td><td id="LC1456" class="css-1dcdqdg"><code>              params = assign({}, currentLocation.params, location.params);
</code></td></tr><tr><td id="L1457" class="css-a4x74f"><span>1457</span></td><td id="LC1457" class="css-1dcdqdg"><code>              path = matcher.stringify(params);
</code></td></tr><tr><td id="L1458" class="css-a4x74f"><span>1458</span></td><td id="LC1458" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1459" class="css-a4x74f"><span>1459</span></td><td id="LC1459" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> matched = [];
</code></td></tr><tr><td id="L1460" class="css-a4x74f"><span>1460</span></td><td id="LC1460" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> parentMatcher = matcher;
</code></td></tr><tr><td id="L1461" class="css-a4x74f"><span>1461</span></td><td id="LC1461" class="css-1dcdqdg"><code>          <span class="code-keyword">while</span> (parentMatcher) {
</code></td></tr><tr><td id="L1462" class="css-a4x74f"><span>1462</span></td><td id="LC1462" class="css-1dcdqdg"><code>              <span class="code-comment">// reversed order so parents are at the beginning</span>
</code></td></tr><tr><td id="L1463" class="css-a4x74f"><span>1463</span></td><td id="LC1463" class="css-1dcdqdg"><code>              matched.unshift(parentMatcher.record);
</code></td></tr><tr><td id="L1464" class="css-a4x74f"><span>1464</span></td><td id="LC1464" class="css-1dcdqdg"><code>              parentMatcher = parentMatcher.parent;
</code></td></tr><tr><td id="L1465" class="css-a4x74f"><span>1465</span></td><td id="LC1465" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1466" class="css-a4x74f"><span>1466</span></td><td id="LC1466" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> {
</code></td></tr><tr><td id="L1467" class="css-a4x74f"><span>1467</span></td><td id="LC1467" class="css-1dcdqdg"><code>              name,
</code></td></tr><tr><td id="L1468" class="css-a4x74f"><span>1468</span></td><td id="LC1468" class="css-1dcdqdg"><code>              path,
</code></td></tr><tr><td id="L1469" class="css-a4x74f"><span>1469</span></td><td id="LC1469" class="css-1dcdqdg"><code>              params,
</code></td></tr><tr><td id="L1470" class="css-a4x74f"><span>1470</span></td><td id="LC1470" class="css-1dcdqdg"><code>              matched,
</code></td></tr><tr><td id="L1471" class="css-a4x74f"><span>1471</span></td><td id="LC1471" class="css-1dcdqdg"><code>              meta: mergeMetaFields(matched),
</code></td></tr><tr><td id="L1472" class="css-a4x74f"><span>1472</span></td><td id="LC1472" class="css-1dcdqdg"><code>          };
</code></td></tr><tr><td id="L1473" class="css-a4x74f"><span>1473</span></td><td id="LC1473" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1474" class="css-a4x74f"><span>1474</span></td><td id="LC1474" class="css-1dcdqdg"><code>      <span class="code-comment">// add initial routes</span>
</code></td></tr><tr><td id="L1475" class="css-a4x74f"><span>1475</span></td><td id="LC1475" class="css-1dcdqdg"><code>      routes.forEach(<span class="code-function"><span class="code-params">route</span> =&gt;</span> addRoute(route));
</code></td></tr><tr><td id="L1476" class="css-a4x74f"><span>1476</span></td><td id="LC1476" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> { addRoute, resolve, removeRoute, getRoutes, getRecordMatcher };
</code></td></tr><tr><td id="L1477" class="css-a4x74f"><span>1477</span></td><td id="LC1477" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1478" class="css-a4x74f"><span>1478</span></td><td id="LC1478" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">paramsFromLocation</span>(<span class="code-params">params, keys</span>) </span>{
</code></td></tr><tr><td id="L1479" class="css-a4x74f"><span>1479</span></td><td id="LC1479" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> newParams = {};
</code></td></tr><tr><td id="L1480" class="css-a4x74f"><span>1480</span></td><td id="LC1480" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">const</span> key <span class="code-keyword">of</span> keys) {
</code></td></tr><tr><td id="L1481" class="css-a4x74f"><span>1481</span></td><td id="LC1481" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (key <span class="code-keyword">in</span> params)
</code></td></tr><tr><td id="L1482" class="css-a4x74f"><span>1482</span></td><td id="LC1482" class="css-1dcdqdg"><code>              newParams[key] = params[key];
</code></td></tr><tr><td id="L1483" class="css-a4x74f"><span>1483</span></td><td id="LC1483" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1484" class="css-a4x74f"><span>1484</span></td><td id="LC1484" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> newParams;
</code></td></tr><tr><td id="L1485" class="css-a4x74f"><span>1485</span></td><td id="LC1485" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1486" class="css-a4x74f"><span>1486</span></td><td id="LC1486" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1487" class="css-a4x74f"><span>1487</span></td><td id="LC1487" class="css-1dcdqdg"><code><span class="code-comment">   * Normalizes a RouteRecordRaw. Creates a copy
</span></code></td></tr><tr><td id="L1488" class="css-a4x74f"><span>1488</span></td><td id="LC1488" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1489" class="css-a4x74f"><span>1489</span></td><td id="LC1489" class="css-1dcdqdg"><code><span class="code-comment">   * @param record
</span></code></td></tr><tr><td id="L1490" class="css-a4x74f"><span>1490</span></td><td id="LC1490" class="css-1dcdqdg"><code><span class="code-comment">   * @returns the normalized version
</span></code></td></tr><tr><td id="L1491" class="css-a4x74f"><span>1491</span></td><td id="LC1491" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1492" class="css-a4x74f"><span>1492</span></td><td id="LC1492" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">normalizeRouteRecord</span>(<span class="code-params">record</span>) </span>{
</code></td></tr><tr><td id="L1493" class="css-a4x74f"><span>1493</span></td><td id="LC1493" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> {
</code></td></tr><tr><td id="L1494" class="css-a4x74f"><span>1494</span></td><td id="LC1494" class="css-1dcdqdg"><code>          path: record.path,
</code></td></tr><tr><td id="L1495" class="css-a4x74f"><span>1495</span></td><td id="LC1495" class="css-1dcdqdg"><code>          redirect: record.redirect,
</code></td></tr><tr><td id="L1496" class="css-a4x74f"><span>1496</span></td><td id="LC1496" class="css-1dcdqdg"><code>          name: record.name,
</code></td></tr><tr><td id="L1497" class="css-a4x74f"><span>1497</span></td><td id="LC1497" class="css-1dcdqdg"><code>          meta: record.meta || {},
</code></td></tr><tr><td id="L1498" class="css-a4x74f"><span>1498</span></td><td id="LC1498" class="css-1dcdqdg"><code>          aliasOf: <span class="code-literal">undefined</span>,
</code></td></tr><tr><td id="L1499" class="css-a4x74f"><span>1499</span></td><td id="LC1499" class="css-1dcdqdg"><code>          beforeEnter: record.beforeEnter,
</code></td></tr><tr><td id="L1500" class="css-a4x74f"><span>1500</span></td><td id="LC1500" class="css-1dcdqdg"><code>          props: normalizeRecordProps(record),
</code></td></tr><tr><td id="L1501" class="css-a4x74f"><span>1501</span></td><td id="LC1501" class="css-1dcdqdg"><code>          children: record.children || [],
</code></td></tr><tr><td id="L1502" class="css-a4x74f"><span>1502</span></td><td id="LC1502" class="css-1dcdqdg"><code>          instances: {},
</code></td></tr><tr><td id="L1503" class="css-a4x74f"><span>1503</span></td><td id="LC1503" class="css-1dcdqdg"><code>          leaveGuards: <span class="code-keyword">new</span> <span class="code-built_in">Set</span>(),
</code></td></tr><tr><td id="L1504" class="css-a4x74f"><span>1504</span></td><td id="LC1504" class="css-1dcdqdg"><code>          updateGuards: <span class="code-keyword">new</span> <span class="code-built_in">Set</span>(),
</code></td></tr><tr><td id="L1505" class="css-a4x74f"><span>1505</span></td><td id="LC1505" class="css-1dcdqdg"><code>          enterCallbacks: {},
</code></td></tr><tr><td id="L1506" class="css-a4x74f"><span>1506</span></td><td id="LC1506" class="css-1dcdqdg"><code>          components: <span class="code-string">'components'</span> <span class="code-keyword">in</span> record
</code></td></tr><tr><td id="L1507" class="css-a4x74f"><span>1507</span></td><td id="LC1507" class="css-1dcdqdg"><code>              ? record.components || <span class="code-literal">null</span>
</code></td></tr><tr><td id="L1508" class="css-a4x74f"><span>1508</span></td><td id="LC1508" class="css-1dcdqdg"><code>              : record.component &amp;&amp; { <span class="code-attr">default</span>: record.component },
</code></td></tr><tr><td id="L1509" class="css-a4x74f"><span>1509</span></td><td id="LC1509" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L1510" class="css-a4x74f"><span>1510</span></td><td id="LC1510" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1511" class="css-a4x74f"><span>1511</span></td><td id="LC1511" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1512" class="css-a4x74f"><span>1512</span></td><td id="LC1512" class="css-1dcdqdg"><code><span class="code-comment">   * Normalize the optional `props` in a record to always be an object similar to
</span></code></td></tr><tr><td id="L1513" class="css-a4x74f"><span>1513</span></td><td id="LC1513" class="css-1dcdqdg"><code><span class="code-comment">   * components. Also accept a boolean for components.
</span></code></td></tr><tr><td id="L1514" class="css-a4x74f"><span>1514</span></td><td id="LC1514" class="css-1dcdqdg"><code><span class="code-comment">   * @param record
</span></code></td></tr><tr><td id="L1515" class="css-a4x74f"><span>1515</span></td><td id="LC1515" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1516" class="css-a4x74f"><span>1516</span></td><td id="LC1516" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">normalizeRecordProps</span>(<span class="code-params">record</span>) </span>{
</code></td></tr><tr><td id="L1517" class="css-a4x74f"><span>1517</span></td><td id="LC1517" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> propsObject = {};
</code></td></tr><tr><td id="L1518" class="css-a4x74f"><span>1518</span></td><td id="LC1518" class="css-1dcdqdg"><code>      <span class="code-comment">// props does not exist on redirect records, but we can set false directly</span>
</code></td></tr><tr><td id="L1519" class="css-a4x74f"><span>1519</span></td><td id="LC1519" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> props = record.props || <span class="code-literal">false</span>;
</code></td></tr><tr><td id="L1520" class="css-a4x74f"><span>1520</span></td><td id="LC1520" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (<span class="code-string">'component'</span> <span class="code-keyword">in</span> record) {
</code></td></tr><tr><td id="L1521" class="css-a4x74f"><span>1521</span></td><td id="LC1521" class="css-1dcdqdg"><code>          propsObject.default = props;
</code></td></tr><tr><td id="L1522" class="css-a4x74f"><span>1522</span></td><td id="LC1522" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1523" class="css-a4x74f"><span>1523</span></td><td id="LC1523" class="css-1dcdqdg"><code>      <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1524" class="css-a4x74f"><span>1524</span></td><td id="LC1524" class="css-1dcdqdg"><code>          <span class="code-comment">// <span class="code-doctag">NOTE:</span> we could also allow a function to be applied to every component.</span>
</code></td></tr><tr><td id="L1525" class="css-a4x74f"><span>1525</span></td><td id="LC1525" class="css-1dcdqdg"><code>          <span class="code-comment">// Would need user feedback for use cases</span>
</code></td></tr><tr><td id="L1526" class="css-a4x74f"><span>1526</span></td><td id="LC1526" class="css-1dcdqdg"><code>          <span class="code-keyword">for</span> (<span class="code-keyword">const</span> name <span class="code-keyword">in</span> record.components)
</code></td></tr><tr><td id="L1527" class="css-a4x74f"><span>1527</span></td><td id="LC1527" class="css-1dcdqdg"><code>              propsObject[name] = <span class="code-keyword">typeof</span> props === <span class="code-string">'boolean'</span> ? props : props[name];
</code></td></tr><tr><td id="L1528" class="css-a4x74f"><span>1528</span></td><td id="LC1528" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1529" class="css-a4x74f"><span>1529</span></td><td id="LC1529" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> propsObject;
</code></td></tr><tr><td id="L1530" class="css-a4x74f"><span>1530</span></td><td id="LC1530" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1531" class="css-a4x74f"><span>1531</span></td><td id="LC1531" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1532" class="css-a4x74f"><span>1532</span></td><td id="LC1532" class="css-1dcdqdg"><code><span class="code-comment">   * Checks if a record or any of its parent is an alias
</span></code></td></tr><tr><td id="L1533" class="css-a4x74f"><span>1533</span></td><td id="LC1533" class="css-1dcdqdg"><code><span class="code-comment">   * @param record
</span></code></td></tr><tr><td id="L1534" class="css-a4x74f"><span>1534</span></td><td id="LC1534" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1535" class="css-a4x74f"><span>1535</span></td><td id="LC1535" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isAliasRecord</span>(<span class="code-params">record</span>) </span>{
</code></td></tr><tr><td id="L1536" class="css-a4x74f"><span>1536</span></td><td id="LC1536" class="css-1dcdqdg"><code>      <span class="code-keyword">while</span> (record) {
</code></td></tr><tr><td id="L1537" class="css-a4x74f"><span>1537</span></td><td id="LC1537" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (record.record.aliasOf)
</code></td></tr><tr><td id="L1538" class="css-a4x74f"><span>1538</span></td><td id="LC1538" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L1539" class="css-a4x74f"><span>1539</span></td><td id="LC1539" class="css-1dcdqdg"><code>          record = record.parent;
</code></td></tr><tr><td id="L1540" class="css-a4x74f"><span>1540</span></td><td id="LC1540" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1541" class="css-a4x74f"><span>1541</span></td><td id="LC1541" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> <span class="code-literal">false</span>;
</code></td></tr><tr><td id="L1542" class="css-a4x74f"><span>1542</span></td><td id="LC1542" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1543" class="css-a4x74f"><span>1543</span></td><td id="LC1543" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1544" class="css-a4x74f"><span>1544</span></td><td id="LC1544" class="css-1dcdqdg"><code><span class="code-comment">   * Merge meta fields of an array of records
</span></code></td></tr><tr><td id="L1545" class="css-a4x74f"><span>1545</span></td><td id="LC1545" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1546" class="css-a4x74f"><span>1546</span></td><td id="LC1546" class="css-1dcdqdg"><code><span class="code-comment">   * @param matched - array of matched records
</span></code></td></tr><tr><td id="L1547" class="css-a4x74f"><span>1547</span></td><td id="LC1547" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1548" class="css-a4x74f"><span>1548</span></td><td id="LC1548" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">mergeMetaFields</span>(<span class="code-params">matched</span>) </span>{
</code></td></tr><tr><td id="L1549" class="css-a4x74f"><span>1549</span></td><td id="LC1549" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> matched.reduce(<span class="code-function">(<span class="code-params">meta, record</span>) =&gt;</span> assign(meta, record.meta), {});
</code></td></tr><tr><td id="L1550" class="css-a4x74f"><span>1550</span></td><td id="LC1550" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1551" class="css-a4x74f"><span>1551</span></td><td id="LC1551" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">mergeOptions</span>(<span class="code-params">defaults, partialOptions</span>) </span>{
</code></td></tr><tr><td id="L1552" class="css-a4x74f"><span>1552</span></td><td id="LC1552" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> options = {};
</code></td></tr><tr><td id="L1553" class="css-a4x74f"><span>1553</span></td><td id="LC1553" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">const</span> key <span class="code-keyword">in</span> defaults) {
</code></td></tr><tr><td id="L1554" class="css-a4x74f"><span>1554</span></td><td id="LC1554" class="css-1dcdqdg"><code>          options[key] = key <span class="code-keyword">in</span> partialOptions ? partialOptions[key] : defaults[key];
</code></td></tr><tr><td id="L1555" class="css-a4x74f"><span>1555</span></td><td id="LC1555" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1556" class="css-a4x74f"><span>1556</span></td><td id="LC1556" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> options;
</code></td></tr><tr><td id="L1557" class="css-a4x74f"><span>1557</span></td><td id="LC1557" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1558" class="css-a4x74f"><span>1558</span></td><td id="LC1558" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isSameParam</span>(<span class="code-params">a, b</span>) </span>{
</code></td></tr><tr><td id="L1559" class="css-a4x74f"><span>1559</span></td><td id="LC1559" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> (a.name === b.name &amp;&amp;
</code></td></tr><tr><td id="L1560" class="css-a4x74f"><span>1560</span></td><td id="LC1560" class="css-1dcdqdg"><code>          a.optional === b.optional &amp;&amp;
</code></td></tr><tr><td id="L1561" class="css-a4x74f"><span>1561</span></td><td id="LC1561" class="css-1dcdqdg"><code>          a.repeatable === b.repeatable);
</code></td></tr><tr><td id="L1562" class="css-a4x74f"><span>1562</span></td><td id="LC1562" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1563" class="css-a4x74f"><span>1563</span></td><td id="LC1563" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1564" class="css-a4x74f"><span>1564</span></td><td id="LC1564" class="css-1dcdqdg"><code><span class="code-comment">   * Check if a path and its alias have the same required params
</span></code></td></tr><tr><td id="L1565" class="css-a4x74f"><span>1565</span></td><td id="LC1565" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1566" class="css-a4x74f"><span>1566</span></td><td id="LC1566" class="css-1dcdqdg"><code><span class="code-comment">   * @param a - original record
</span></code></td></tr><tr><td id="L1567" class="css-a4x74f"><span>1567</span></td><td id="LC1567" class="css-1dcdqdg"><code><span class="code-comment">   * @param b - alias record
</span></code></td></tr><tr><td id="L1568" class="css-a4x74f"><span>1568</span></td><td id="LC1568" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1569" class="css-a4x74f"><span>1569</span></td><td id="LC1569" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">checkSameParams</span>(<span class="code-params">a, b</span>) </span>{
</code></td></tr><tr><td id="L1570" class="css-a4x74f"><span>1570</span></td><td id="LC1570" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">const</span> key <span class="code-keyword">of</span> a.keys) {
</code></td></tr><tr><td id="L1571" class="css-a4x74f"><span>1571</span></td><td id="LC1571" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!key.optional &amp;&amp; !b.keys.find(isSameParam.bind(<span class="code-literal">null</span>, key)))
</code></td></tr><tr><td id="L1572" class="css-a4x74f"><span>1572</span></td><td id="LC1572" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> warn(<span class="code-string">`Alias "<span class="code-subst">${b.record.path}</span>" and the original record: "<span class="code-subst">${a.record.path}</span>" must have the exact same param named "<span class="code-subst">${key.name}</span>"`</span>);
</code></td></tr><tr><td id="L1573" class="css-a4x74f"><span>1573</span></td><td id="LC1573" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1574" class="css-a4x74f"><span>1574</span></td><td id="LC1574" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">const</span> key <span class="code-keyword">of</span> b.keys) {
</code></td></tr><tr><td id="L1575" class="css-a4x74f"><span>1575</span></td><td id="LC1575" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!key.optional &amp;&amp; !a.keys.find(isSameParam.bind(<span class="code-literal">null</span>, key)))
</code></td></tr><tr><td id="L1576" class="css-a4x74f"><span>1576</span></td><td id="LC1576" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> warn(<span class="code-string">`Alias "<span class="code-subst">${b.record.path}</span>" and the original record: "<span class="code-subst">${a.record.path}</span>" must have the exact same param named "<span class="code-subst">${key.name}</span>"`</span>);
</code></td></tr><tr><td id="L1577" class="css-a4x74f"><span>1577</span></td><td id="LC1577" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1578" class="css-a4x74f"><span>1578</span></td><td id="LC1578" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1579" class="css-a4x74f"><span>1579</span></td><td id="LC1579" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1580" class="css-a4x74f"><span>1580</span></td><td id="LC1580" class="css-1dcdqdg"><code><span class="code-comment">   * A route with a name and a child with an empty path without a name should warn when adding the route
</span></code></td></tr><tr><td id="L1581" class="css-a4x74f"><span>1581</span></td><td id="LC1581" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1582" class="css-a4x74f"><span>1582</span></td><td id="LC1582" class="css-1dcdqdg"><code><span class="code-comment">   * @param mainNormalizedRecord - RouteRecordNormalized
</span></code></td></tr><tr><td id="L1583" class="css-a4x74f"><span>1583</span></td><td id="LC1583" class="css-1dcdqdg"><code><span class="code-comment">   * @param parent - RouteRecordMatcher
</span></code></td></tr><tr><td id="L1584" class="css-a4x74f"><span>1584</span></td><td id="LC1584" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1585" class="css-a4x74f"><span>1585</span></td><td id="LC1585" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">checkChildMissingNameWithEmptyPath</span>(<span class="code-params">mainNormalizedRecord, parent</span>) </span>{
</code></td></tr><tr><td id="L1586" class="css-a4x74f"><span>1586</span></td><td id="LC1586" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (parent &amp;&amp;
</code></td></tr><tr><td id="L1587" class="css-a4x74f"><span>1587</span></td><td id="LC1587" class="css-1dcdqdg"><code>          parent.record.name &amp;&amp;
</code></td></tr><tr><td id="L1588" class="css-a4x74f"><span>1588</span></td><td id="LC1588" class="css-1dcdqdg"><code>          !mainNormalizedRecord.name &amp;&amp;
</code></td></tr><tr><td id="L1589" class="css-a4x74f"><span>1589</span></td><td id="LC1589" class="css-1dcdqdg"><code>          !mainNormalizedRecord.path) {
</code></td></tr><tr><td id="L1590" class="css-a4x74f"><span>1590</span></td><td id="LC1590" class="css-1dcdqdg"><code>          warn(<span class="code-string">`The route named "<span class="code-subst">${<span class="code-built_in">String</span>(parent.record.name)}</span>" has a child without a name and an empty path. Using that name won't render the empty path child so you probably want to move the name to the child instead. If this is intentional, add a name to the child route to remove the warning.`</span>);
</code></td></tr><tr><td id="L1591" class="css-a4x74f"><span>1591</span></td><td id="LC1591" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1592" class="css-a4x74f"><span>1592</span></td><td id="LC1592" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1593" class="css-a4x74f"><span>1593</span></td><td id="LC1593" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">checkMissingParamsInAbsolutePath</span>(<span class="code-params">record, parent</span>) </span>{
</code></td></tr><tr><td id="L1594" class="css-a4x74f"><span>1594</span></td><td id="LC1594" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">const</span> key <span class="code-keyword">of</span> parent.keys) {
</code></td></tr><tr><td id="L1595" class="css-a4x74f"><span>1595</span></td><td id="LC1595" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!record.keys.find(isSameParam.bind(<span class="code-literal">null</span>, key)))
</code></td></tr><tr><td id="L1596" class="css-a4x74f"><span>1596</span></td><td id="LC1596" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> warn(<span class="code-string">`Absolute path "<span class="code-subst">${record.record.path}</span>" must have the exact same param named "<span class="code-subst">${key.name}</span>" as its parent "<span class="code-subst">${parent.record.path}</span>".`</span>);
</code></td></tr><tr><td id="L1597" class="css-a4x74f"><span>1597</span></td><td id="LC1597" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1598" class="css-a4x74f"><span>1598</span></td><td id="LC1598" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1599" class="css-a4x74f"><span>1599</span></td><td id="LC1599" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isRecordChildOf</span>(<span class="code-params">record, parent</span>) </span>{
</code></td></tr><tr><td id="L1600" class="css-a4x74f"><span>1600</span></td><td id="LC1600" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> parent.children.some(<span class="code-function"><span class="code-params">child</span> =&gt;</span> child === record || isRecordChildOf(record, child));
</code></td></tr><tr><td id="L1601" class="css-a4x74f"><span>1601</span></td><td id="LC1601" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1602" class="css-a4x74f"><span>1602</span></td><td id="LC1602" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1603" class="css-a4x74f"><span>1603</span></td><td id="LC1603" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1604" class="css-a4x74f"><span>1604</span></td><td id="LC1604" class="css-1dcdqdg"><code><span class="code-comment">   * Encoding Rules  = Space Path:  " &lt; &gt; # ? { } Query:  " &lt; &gt; # &amp; = Hash:  "
</span></code></td></tr><tr><td id="L1605" class="css-a4x74f"><span>1605</span></td><td id="LC1605" class="css-1dcdqdg"><code><span class="code-comment">   * &lt; &gt; `
</span></code></td></tr><tr><td id="L1606" class="css-a4x74f"><span>1606</span></td><td id="LC1606" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1607" class="css-a4x74f"><span>1607</span></td><td id="LC1607" class="css-1dcdqdg"><code><span class="code-comment">   * On top of that, the RFC3986 (https://tools.ietf.org/html/rfc3986#section-2.2)
</span></code></td></tr><tr><td id="L1608" class="css-a4x74f"><span>1608</span></td><td id="LC1608" class="css-1dcdqdg"><code><span class="code-comment">   * defines some extra characters to be encoded. Most browsers do not encode them
</span></code></td></tr><tr><td id="L1609" class="css-a4x74f"><span>1609</span></td><td id="LC1609" class="css-1dcdqdg"><code><span class="code-comment">   * in encodeURI https://github.com/whatwg/url/issues/369, so it may be safer to
</span></code></td></tr><tr><td id="L1610" class="css-a4x74f"><span>1610</span></td><td id="LC1610" class="css-1dcdqdg"><code><span class="code-comment">   * also encode `!'()*`. Leaving un-encoded only ASCII alphanumeric(`a-zA-Z0-9`)
</span></code></td></tr><tr><td id="L1611" class="css-a4x74f"><span>1611</span></td><td id="LC1611" class="css-1dcdqdg"><code><span class="code-comment">   * plus `-._~`. This extra safety should be applied to query by patching the
</span></code></td></tr><tr><td id="L1612" class="css-a4x74f"><span>1612</span></td><td id="LC1612" class="css-1dcdqdg"><code><span class="code-comment">   * string returned by encodeURIComponent encodeURI also encodes `[\]^`. `\`
</span></code></td></tr><tr><td id="L1613" class="css-a4x74f"><span>1613</span></td><td id="LC1613" class="css-1dcdqdg"><code><span class="code-comment">   * should be encoded to avoid ambiguity. Browsers (IE, FF, C) transform a `\`
</span></code></td></tr><tr><td id="L1614" class="css-a4x74f"><span>1614</span></td><td id="LC1614" class="css-1dcdqdg"><code><span class="code-comment">   * into a `/` if directly typed in. The _backtick_ (`````) should also be
</span></code></td></tr><tr><td id="L1615" class="css-a4x74f"><span>1615</span></td><td id="LC1615" class="css-1dcdqdg"><code><span class="code-comment">   * encoded everywhere because some browsers like FF encode it when directly
</span></code></td></tr><tr><td id="L1616" class="css-a4x74f"><span>1616</span></td><td id="LC1616" class="css-1dcdqdg"><code><span class="code-comment">   * written while others don't. Safari and IE don't encode ``"&lt;&gt;{}``` in hash.
</span></code></td></tr><tr><td id="L1617" class="css-a4x74f"><span>1617</span></td><td id="LC1617" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1618" class="css-a4x74f"><span>1618</span></td><td id="LC1618" class="css-1dcdqdg"><code>  <span class="code-comment">// const EXTRA_RESERVED_RE = /[!'()*]/g</span>
</code></td></tr><tr><td id="L1619" class="css-a4x74f"><span>1619</span></td><td id="LC1619" class="css-1dcdqdg"><code>  <span class="code-comment">// const encodeReservedReplacer = (c: string) =&gt; '%' + c.charCodeAt(0).toString(16)</span>
</code></td></tr><tr><td id="L1620" class="css-a4x74f"><span>1620</span></td><td id="LC1620" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> HASH_RE = <span class="code-regexp">/#/g</span>; <span class="code-comment">// %23</span>
</code></td></tr><tr><td id="L1621" class="css-a4x74f"><span>1621</span></td><td id="LC1621" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> AMPERSAND_RE = <span class="code-regexp">/&amp;/g</span>; <span class="code-comment">// %26</span>
</code></td></tr><tr><td id="L1622" class="css-a4x74f"><span>1622</span></td><td id="LC1622" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> SLASH_RE = <span class="code-regexp">/\//g</span>; <span class="code-comment">// %2F</span>
</code></td></tr><tr><td id="L1623" class="css-a4x74f"><span>1623</span></td><td id="LC1623" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> EQUAL_RE = <span class="code-regexp">/=/g</span>; <span class="code-comment">// %3D</span>
</code></td></tr><tr><td id="L1624" class="css-a4x74f"><span>1624</span></td><td id="LC1624" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> IM_RE = <span class="code-regexp">/\?/g</span>; <span class="code-comment">// %3F</span>
</code></td></tr><tr><td id="L1625" class="css-a4x74f"><span>1625</span></td><td id="LC1625" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> PLUS_RE = <span class="code-regexp">/\+/g</span>; <span class="code-comment">// %2B</span>
</code></td></tr><tr><td id="L1626" class="css-a4x74f"><span>1626</span></td><td id="LC1626" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1627" class="css-a4x74f"><span>1627</span></td><td id="LC1627" class="css-1dcdqdg"><code><span class="code-comment">   * <span class="code-doctag">NOTE:</span> It's not clear to me if we should encode the + symbol in queries, it
</span></code></td></tr><tr><td id="L1628" class="css-a4x74f"><span>1628</span></td><td id="LC1628" class="css-1dcdqdg"><code><span class="code-comment">   * seems to be less flexible than not doing so and I can't find out the legacy
</span></code></td></tr><tr><td id="L1629" class="css-a4x74f"><span>1629</span></td><td id="LC1629" class="css-1dcdqdg"><code><span class="code-comment">   * systems requiring this for regular requests like text/html. In the standard,
</span></code></td></tr><tr><td id="L1630" class="css-a4x74f"><span>1630</span></td><td id="LC1630" class="css-1dcdqdg"><code><span class="code-comment">   * the encoding of the plus character is only mentioned for
</span></code></td></tr><tr><td id="L1631" class="css-a4x74f"><span>1631</span></td><td id="LC1631" class="css-1dcdqdg"><code><span class="code-comment">   * application/x-www-form-urlencoded
</span></code></td></tr><tr><td id="L1632" class="css-a4x74f"><span>1632</span></td><td id="LC1632" class="css-1dcdqdg"><code><span class="code-comment">   * (https://url.spec.whatwg.org/#urlencoded-parsing) and most browsers seems lo
</span></code></td></tr><tr><td id="L1633" class="css-a4x74f"><span>1633</span></td><td id="LC1633" class="css-1dcdqdg"><code><span class="code-comment">   * leave the plus character as is in queries. To be more flexible, we allow the
</span></code></td></tr><tr><td id="L1634" class="css-a4x74f"><span>1634</span></td><td id="LC1634" class="css-1dcdqdg"><code><span class="code-comment">   * plus character on the query, but it can also be manually encoded by the user.
</span></code></td></tr><tr><td id="L1635" class="css-a4x74f"><span>1635</span></td><td id="LC1635" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1636" class="css-a4x74f"><span>1636</span></td><td id="LC1636" class="css-1dcdqdg"><code><span class="code-comment">   * Resources:
</span></code></td></tr><tr><td id="L1637" class="css-a4x74f"><span>1637</span></td><td id="LC1637" class="css-1dcdqdg"><code><span class="code-comment">   * - https://url.spec.whatwg.org/#urlencoded-parsing
</span></code></td></tr><tr><td id="L1638" class="css-a4x74f"><span>1638</span></td><td id="LC1638" class="css-1dcdqdg"><code><span class="code-comment">   * - https://stackoverflow.com/questions/1634271/url-encoding-the-space-character-or-20
</span></code></td></tr><tr><td id="L1639" class="css-a4x74f"><span>1639</span></td><td id="LC1639" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1640" class="css-a4x74f"><span>1640</span></td><td id="LC1640" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> ENC_BRACKET_OPEN_RE = <span class="code-regexp">/%5B/g</span>; <span class="code-comment">// [</span>
</code></td></tr><tr><td id="L1641" class="css-a4x74f"><span>1641</span></td><td id="LC1641" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> ENC_BRACKET_CLOSE_RE = <span class="code-regexp">/%5D/g</span>; <span class="code-comment">// ]</span>
</code></td></tr><tr><td id="L1642" class="css-a4x74f"><span>1642</span></td><td id="LC1642" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> ENC_CARET_RE = <span class="code-regexp">/%5E/g</span>; <span class="code-comment">// ^</span>
</code></td></tr><tr><td id="L1643" class="css-a4x74f"><span>1643</span></td><td id="LC1643" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> ENC_BACKTICK_RE = <span class="code-regexp">/%60/g</span>; <span class="code-comment">// `</span>
</code></td></tr><tr><td id="L1644" class="css-a4x74f"><span>1644</span></td><td id="LC1644" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> ENC_CURLY_OPEN_RE = <span class="code-regexp">/%7B/g</span>; <span class="code-comment">// {</span>
</code></td></tr><tr><td id="L1645" class="css-a4x74f"><span>1645</span></td><td id="LC1645" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> ENC_PIPE_RE = <span class="code-regexp">/%7C/g</span>; <span class="code-comment">// |</span>
</code></td></tr><tr><td id="L1646" class="css-a4x74f"><span>1646</span></td><td id="LC1646" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> ENC_CURLY_CLOSE_RE = <span class="code-regexp">/%7D/g</span>; <span class="code-comment">// }</span>
</code></td></tr><tr><td id="L1647" class="css-a4x74f"><span>1647</span></td><td id="LC1647" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> ENC_SPACE_RE = <span class="code-regexp">/%20/g</span>; <span class="code-comment">// }</span>
</code></td></tr><tr><td id="L1648" class="css-a4x74f"><span>1648</span></td><td id="LC1648" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1649" class="css-a4x74f"><span>1649</span></td><td id="LC1649" class="css-1dcdqdg"><code><span class="code-comment">   * Encode characters that need to be encoded on the path, search and hash
</span></code></td></tr><tr><td id="L1650" class="css-a4x74f"><span>1650</span></td><td id="LC1650" class="css-1dcdqdg"><code><span class="code-comment">   * sections of the URL.
</span></code></td></tr><tr><td id="L1651" class="css-a4x74f"><span>1651</span></td><td id="LC1651" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1652" class="css-a4x74f"><span>1652</span></td><td id="LC1652" class="css-1dcdqdg"><code><span class="code-comment">   * @internal
</span></code></td></tr><tr><td id="L1653" class="css-a4x74f"><span>1653</span></td><td id="LC1653" class="css-1dcdqdg"><code><span class="code-comment">   * @param text - string to encode
</span></code></td></tr><tr><td id="L1654" class="css-a4x74f"><span>1654</span></td><td id="LC1654" class="css-1dcdqdg"><code><span class="code-comment">   * @returns encoded string
</span></code></td></tr><tr><td id="L1655" class="css-a4x74f"><span>1655</span></td><td id="LC1655" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1656" class="css-a4x74f"><span>1656</span></td><td id="LC1656" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">commonEncode</span>(<span class="code-params">text</span>) </span>{
</code></td></tr><tr><td id="L1657" class="css-a4x74f"><span>1657</span></td><td id="LC1657" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> <span class="code-built_in">encodeURI</span>(<span class="code-string">''</span> + text)
</code></td></tr><tr><td id="L1658" class="css-a4x74f"><span>1658</span></td><td id="LC1658" class="css-1dcdqdg"><code>          .replace(ENC_PIPE_RE, <span class="code-string">'|'</span>)
</code></td></tr><tr><td id="L1659" class="css-a4x74f"><span>1659</span></td><td id="LC1659" class="css-1dcdqdg"><code>          .replace(ENC_BRACKET_OPEN_RE, <span class="code-string">'['</span>)
</code></td></tr><tr><td id="L1660" class="css-a4x74f"><span>1660</span></td><td id="LC1660" class="css-1dcdqdg"><code>          .replace(ENC_BRACKET_CLOSE_RE, <span class="code-string">']'</span>);
</code></td></tr><tr><td id="L1661" class="css-a4x74f"><span>1661</span></td><td id="LC1661" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1662" class="css-a4x74f"><span>1662</span></td><td id="LC1662" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1663" class="css-a4x74f"><span>1663</span></td><td id="LC1663" class="css-1dcdqdg"><code><span class="code-comment">   * Encode characters that need to be encoded on the hash section of the URL.
</span></code></td></tr><tr><td id="L1664" class="css-a4x74f"><span>1664</span></td><td id="LC1664" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1665" class="css-a4x74f"><span>1665</span></td><td id="LC1665" class="css-1dcdqdg"><code><span class="code-comment">   * @param text - string to encode
</span></code></td></tr><tr><td id="L1666" class="css-a4x74f"><span>1666</span></td><td id="LC1666" class="css-1dcdqdg"><code><span class="code-comment">   * @returns encoded string
</span></code></td></tr><tr><td id="L1667" class="css-a4x74f"><span>1667</span></td><td id="LC1667" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1668" class="css-a4x74f"><span>1668</span></td><td id="LC1668" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">encodeHash</span>(<span class="code-params">text</span>) </span>{
</code></td></tr><tr><td id="L1669" class="css-a4x74f"><span>1669</span></td><td id="LC1669" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> commonEncode(text)
</code></td></tr><tr><td id="L1670" class="css-a4x74f"><span>1670</span></td><td id="LC1670" class="css-1dcdqdg"><code>          .replace(ENC_CURLY_OPEN_RE, <span class="code-string">'{'</span>)
</code></td></tr><tr><td id="L1671" class="css-a4x74f"><span>1671</span></td><td id="LC1671" class="css-1dcdqdg"><code>          .replace(ENC_CURLY_CLOSE_RE, <span class="code-string">'}'</span>)
</code></td></tr><tr><td id="L1672" class="css-a4x74f"><span>1672</span></td><td id="LC1672" class="css-1dcdqdg"><code>          .replace(ENC_CARET_RE, <span class="code-string">'^'</span>);
</code></td></tr><tr><td id="L1673" class="css-a4x74f"><span>1673</span></td><td id="LC1673" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1674" class="css-a4x74f"><span>1674</span></td><td id="LC1674" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1675" class="css-a4x74f"><span>1675</span></td><td id="LC1675" class="css-1dcdqdg"><code><span class="code-comment">   * Encode characters that need to be encoded query values on the query
</span></code></td></tr><tr><td id="L1676" class="css-a4x74f"><span>1676</span></td><td id="LC1676" class="css-1dcdqdg"><code><span class="code-comment">   * section of the URL.
</span></code></td></tr><tr><td id="L1677" class="css-a4x74f"><span>1677</span></td><td id="LC1677" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1678" class="css-a4x74f"><span>1678</span></td><td id="LC1678" class="css-1dcdqdg"><code><span class="code-comment">   * @param text - string to encode
</span></code></td></tr><tr><td id="L1679" class="css-a4x74f"><span>1679</span></td><td id="LC1679" class="css-1dcdqdg"><code><span class="code-comment">   * @returns encoded string
</span></code></td></tr><tr><td id="L1680" class="css-a4x74f"><span>1680</span></td><td id="LC1680" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1681" class="css-a4x74f"><span>1681</span></td><td id="LC1681" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">encodeQueryValue</span>(<span class="code-params">text</span>) </span>{
</code></td></tr><tr><td id="L1682" class="css-a4x74f"><span>1682</span></td><td id="LC1682" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> (commonEncode(text)
</code></td></tr><tr><td id="L1683" class="css-a4x74f"><span>1683</span></td><td id="LC1683" class="css-1dcdqdg"><code>          <span class="code-comment">// Encode the space as +, encode the + to differentiate it from the space</span>
</code></td></tr><tr><td id="L1684" class="css-a4x74f"><span>1684</span></td><td id="LC1684" class="css-1dcdqdg"><code>          .replace(PLUS_RE, <span class="code-string">'%2B'</span>)
</code></td></tr><tr><td id="L1685" class="css-a4x74f"><span>1685</span></td><td id="LC1685" class="css-1dcdqdg"><code>          .replace(ENC_SPACE_RE, <span class="code-string">'+'</span>)
</code></td></tr><tr><td id="L1686" class="css-a4x74f"><span>1686</span></td><td id="LC1686" class="css-1dcdqdg"><code>          .replace(HASH_RE, <span class="code-string">'%23'</span>)
</code></td></tr><tr><td id="L1687" class="css-a4x74f"><span>1687</span></td><td id="LC1687" class="css-1dcdqdg"><code>          .replace(AMPERSAND_RE, <span class="code-string">'%26'</span>)
</code></td></tr><tr><td id="L1688" class="css-a4x74f"><span>1688</span></td><td id="LC1688" class="css-1dcdqdg"><code>          .replace(ENC_BACKTICK_RE, <span class="code-string">'`'</span>)
</code></td></tr><tr><td id="L1689" class="css-a4x74f"><span>1689</span></td><td id="LC1689" class="css-1dcdqdg"><code>          .replace(ENC_CURLY_OPEN_RE, <span class="code-string">'{'</span>)
</code></td></tr><tr><td id="L1690" class="css-a4x74f"><span>1690</span></td><td id="LC1690" class="css-1dcdqdg"><code>          .replace(ENC_CURLY_CLOSE_RE, <span class="code-string">'}'</span>)
</code></td></tr><tr><td id="L1691" class="css-a4x74f"><span>1691</span></td><td id="LC1691" class="css-1dcdqdg"><code>          .replace(ENC_CARET_RE, <span class="code-string">'^'</span>));
</code></td></tr><tr><td id="L1692" class="css-a4x74f"><span>1692</span></td><td id="LC1692" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1693" class="css-a4x74f"><span>1693</span></td><td id="LC1693" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1694" class="css-a4x74f"><span>1694</span></td><td id="LC1694" class="css-1dcdqdg"><code><span class="code-comment">   * Like `encodeQueryValue` but also encodes the `=` character.
</span></code></td></tr><tr><td id="L1695" class="css-a4x74f"><span>1695</span></td><td id="LC1695" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1696" class="css-a4x74f"><span>1696</span></td><td id="LC1696" class="css-1dcdqdg"><code><span class="code-comment">   * @param text - string to encode
</span></code></td></tr><tr><td id="L1697" class="css-a4x74f"><span>1697</span></td><td id="LC1697" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1698" class="css-a4x74f"><span>1698</span></td><td id="LC1698" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">encodeQueryKey</span>(<span class="code-params">text</span>) </span>{
</code></td></tr><tr><td id="L1699" class="css-a4x74f"><span>1699</span></td><td id="LC1699" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> encodeQueryValue(text).replace(EQUAL_RE, <span class="code-string">'%3D'</span>);
</code></td></tr><tr><td id="L1700" class="css-a4x74f"><span>1700</span></td><td id="LC1700" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1701" class="css-a4x74f"><span>1701</span></td><td id="LC1701" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1702" class="css-a4x74f"><span>1702</span></td><td id="LC1702" class="css-1dcdqdg"><code><span class="code-comment">   * Encode characters that need to be encoded on the path section of the URL.
</span></code></td></tr><tr><td id="L1703" class="css-a4x74f"><span>1703</span></td><td id="LC1703" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1704" class="css-a4x74f"><span>1704</span></td><td id="LC1704" class="css-1dcdqdg"><code><span class="code-comment">   * @param text - string to encode
</span></code></td></tr><tr><td id="L1705" class="css-a4x74f"><span>1705</span></td><td id="LC1705" class="css-1dcdqdg"><code><span class="code-comment">   * @returns encoded string
</span></code></td></tr><tr><td id="L1706" class="css-a4x74f"><span>1706</span></td><td id="LC1706" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1707" class="css-a4x74f"><span>1707</span></td><td id="LC1707" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">encodePath</span>(<span class="code-params">text</span>) </span>{
</code></td></tr><tr><td id="L1708" class="css-a4x74f"><span>1708</span></td><td id="LC1708" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> commonEncode(text).replace(HASH_RE, <span class="code-string">'%23'</span>).replace(IM_RE, <span class="code-string">'%3F'</span>);
</code></td></tr><tr><td id="L1709" class="css-a4x74f"><span>1709</span></td><td id="LC1709" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1710" class="css-a4x74f"><span>1710</span></td><td id="LC1710" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1711" class="css-a4x74f"><span>1711</span></td><td id="LC1711" class="css-1dcdqdg"><code><span class="code-comment">   * Encode characters that need to be encoded on the path section of the URL as a
</span></code></td></tr><tr><td id="L1712" class="css-a4x74f"><span>1712</span></td><td id="LC1712" class="css-1dcdqdg"><code><span class="code-comment">   * param. This function encodes everything {@link encodePath} does plus the
</span></code></td></tr><tr><td id="L1713" class="css-a4x74f"><span>1713</span></td><td id="LC1713" class="css-1dcdqdg"><code><span class="code-comment">   * slash (`/`) character. If `text` is `null` or `undefined`, returns an empty
</span></code></td></tr><tr><td id="L1714" class="css-a4x74f"><span>1714</span></td><td id="LC1714" class="css-1dcdqdg"><code><span class="code-comment">   * string instead.
</span></code></td></tr><tr><td id="L1715" class="css-a4x74f"><span>1715</span></td><td id="LC1715" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1716" class="css-a4x74f"><span>1716</span></td><td id="LC1716" class="css-1dcdqdg"><code><span class="code-comment">   * @param text - string to encode
</span></code></td></tr><tr><td id="L1717" class="css-a4x74f"><span>1717</span></td><td id="LC1717" class="css-1dcdqdg"><code><span class="code-comment">   * @returns encoded string
</span></code></td></tr><tr><td id="L1718" class="css-a4x74f"><span>1718</span></td><td id="LC1718" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1719" class="css-a4x74f"><span>1719</span></td><td id="LC1719" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">encodeParam</span>(<span class="code-params">text</span>) </span>{
</code></td></tr><tr><td id="L1720" class="css-a4x74f"><span>1720</span></td><td id="LC1720" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> text == <span class="code-literal">null</span> ? <span class="code-string">''</span> : encodePath(text).replace(SLASH_RE, <span class="code-string">'%2F'</span>);
</code></td></tr><tr><td id="L1721" class="css-a4x74f"><span>1721</span></td><td id="LC1721" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1722" class="css-a4x74f"><span>1722</span></td><td id="LC1722" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1723" class="css-a4x74f"><span>1723</span></td><td id="LC1723" class="css-1dcdqdg"><code><span class="code-comment">   * Decode text using `decodeURIComponent`. Returns the original text if it
</span></code></td></tr><tr><td id="L1724" class="css-a4x74f"><span>1724</span></td><td id="LC1724" class="css-1dcdqdg"><code><span class="code-comment">   * fails.
</span></code></td></tr><tr><td id="L1725" class="css-a4x74f"><span>1725</span></td><td id="LC1725" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1726" class="css-a4x74f"><span>1726</span></td><td id="LC1726" class="css-1dcdqdg"><code><span class="code-comment">   * @param text - string to decode
</span></code></td></tr><tr><td id="L1727" class="css-a4x74f"><span>1727</span></td><td id="LC1727" class="css-1dcdqdg"><code><span class="code-comment">   * @returns decoded string
</span></code></td></tr><tr><td id="L1728" class="css-a4x74f"><span>1728</span></td><td id="LC1728" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1729" class="css-a4x74f"><span>1729</span></td><td id="LC1729" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">decode</span>(<span class="code-params">text</span>) </span>{
</code></td></tr><tr><td id="L1730" class="css-a4x74f"><span>1730</span></td><td id="LC1730" class="css-1dcdqdg"><code>      <span class="code-keyword">try</span> {
</code></td></tr><tr><td id="L1731" class="css-a4x74f"><span>1731</span></td><td id="LC1731" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-built_in">decodeURIComponent</span>(<span class="code-string">''</span> + text);
</code></td></tr><tr><td id="L1732" class="css-a4x74f"><span>1732</span></td><td id="LC1732" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1733" class="css-a4x74f"><span>1733</span></td><td id="LC1733" class="css-1dcdqdg"><code>      <span class="code-keyword">catch</span> (err) {
</code></td></tr><tr><td id="L1734" class="css-a4x74f"><span>1734</span></td><td id="LC1734" class="css-1dcdqdg"><code>          warn(<span class="code-string">`Error decoding "<span class="code-subst">${text}</span>". Using original value`</span>);
</code></td></tr><tr><td id="L1735" class="css-a4x74f"><span>1735</span></td><td id="LC1735" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1736" class="css-a4x74f"><span>1736</span></td><td id="LC1736" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> <span class="code-string">''</span> + text;
</code></td></tr><tr><td id="L1737" class="css-a4x74f"><span>1737</span></td><td id="LC1737" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1738" class="css-a4x74f"><span>1738</span></td><td id="LC1738" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1739" class="css-a4x74f"><span>1739</span></td><td id="LC1739" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1740" class="css-a4x74f"><span>1740</span></td><td id="LC1740" class="css-1dcdqdg"><code><span class="code-comment">   * Transforms a queryString into a {@link LocationQuery} object. Accept both, a
</span></code></td></tr><tr><td id="L1741" class="css-a4x74f"><span>1741</span></td><td id="LC1741" class="css-1dcdqdg"><code><span class="code-comment">   * version with the leading `?` and without Should work as URLSearchParams
</span></code></td></tr><tr><td id="L1742" class="css-a4x74f"><span>1742</span></td><td id="LC1742" class="css-1dcdqdg"><code><span class="code-comment">
</span></code></td></tr><tr><td id="L1743" class="css-a4x74f"><span>1743</span></td><td id="LC1743" class="css-1dcdqdg"><code><span class="code-comment">   * @internal
</span></code></td></tr><tr><td id="L1744" class="css-a4x74f"><span>1744</span></td><td id="LC1744" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1745" class="css-a4x74f"><span>1745</span></td><td id="LC1745" class="css-1dcdqdg"><code><span class="code-comment">   * @param search - search string to parse
</span></code></td></tr><tr><td id="L1746" class="css-a4x74f"><span>1746</span></td><td id="LC1746" class="css-1dcdqdg"><code><span class="code-comment">   * @returns a query object
</span></code></td></tr><tr><td id="L1747" class="css-a4x74f"><span>1747</span></td><td id="LC1747" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1748" class="css-a4x74f"><span>1748</span></td><td id="LC1748" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">parseQuery</span>(<span class="code-params">search</span>) </span>{
</code></td></tr><tr><td id="L1749" class="css-a4x74f"><span>1749</span></td><td id="LC1749" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> query = {};
</code></td></tr><tr><td id="L1750" class="css-a4x74f"><span>1750</span></td><td id="LC1750" class="css-1dcdqdg"><code>      <span class="code-comment">// avoid creating an object with an empty key and empty value</span>
</code></td></tr><tr><td id="L1751" class="css-a4x74f"><span>1751</span></td><td id="LC1751" class="css-1dcdqdg"><code>      <span class="code-comment">// because of split('&amp;')</span>
</code></td></tr><tr><td id="L1752" class="css-a4x74f"><span>1752</span></td><td id="LC1752" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (search === <span class="code-string">''</span> || search === <span class="code-string">'?'</span>)
</code></td></tr><tr><td id="L1753" class="css-a4x74f"><span>1753</span></td><td id="LC1753" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> query;
</code></td></tr><tr><td id="L1754" class="css-a4x74f"><span>1754</span></td><td id="LC1754" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> hasLeadingIM = search[<span class="code-number">0</span>] === <span class="code-string">'?'</span>;
</code></td></tr><tr><td id="L1755" class="css-a4x74f"><span>1755</span></td><td id="LC1755" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> searchParams = (hasLeadingIM ? search.slice(<span class="code-number">1</span>) : search).split(<span class="code-string">'&amp;'</span>);
</code></td></tr><tr><td id="L1756" class="css-a4x74f"><span>1756</span></td><td id="LC1756" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">let</span> i = <span class="code-number">0</span>; i &lt; searchParams.length; ++i) {
</code></td></tr><tr><td id="L1757" class="css-a4x74f"><span>1757</span></td><td id="LC1757" class="css-1dcdqdg"><code>          <span class="code-comment">// pre decode the + into space</span>
</code></td></tr><tr><td id="L1758" class="css-a4x74f"><span>1758</span></td><td id="LC1758" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> searchParam = searchParams[i].replace(PLUS_RE, <span class="code-string">' '</span>);
</code></td></tr><tr><td id="L1759" class="css-a4x74f"><span>1759</span></td><td id="LC1759" class="css-1dcdqdg"><code>          <span class="code-comment">// allow the = character</span>
</code></td></tr><tr><td id="L1760" class="css-a4x74f"><span>1760</span></td><td id="LC1760" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> eqPos = searchParam.indexOf(<span class="code-string">'='</span>);
</code></td></tr><tr><td id="L1761" class="css-a4x74f"><span>1761</span></td><td id="LC1761" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> key = decode(eqPos &lt; <span class="code-number">0</span> ? searchParam : searchParam.slice(<span class="code-number">0</span>, eqPos));
</code></td></tr><tr><td id="L1762" class="css-a4x74f"><span>1762</span></td><td id="LC1762" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> value = eqPos &lt; <span class="code-number">0</span> ? <span class="code-literal">null</span> : decode(searchParam.slice(eqPos + <span class="code-number">1</span>));
</code></td></tr><tr><td id="L1763" class="css-a4x74f"><span>1763</span></td><td id="LC1763" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (key <span class="code-keyword">in</span> query) {
</code></td></tr><tr><td id="L1764" class="css-a4x74f"><span>1764</span></td><td id="LC1764" class="css-1dcdqdg"><code>              <span class="code-comment">// an extra variable for ts types</span>
</code></td></tr><tr><td id="L1765" class="css-a4x74f"><span>1765</span></td><td id="LC1765" class="css-1dcdqdg"><code>              <span class="code-keyword">let</span> currentValue = query[key];
</code></td></tr><tr><td id="L1766" class="css-a4x74f"><span>1766</span></td><td id="LC1766" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (!isArray(currentValue)) {
</code></td></tr><tr><td id="L1767" class="css-a4x74f"><span>1767</span></td><td id="LC1767" class="css-1dcdqdg"><code>                  currentValue = query[key] = [currentValue];
</code></td></tr><tr><td id="L1768" class="css-a4x74f"><span>1768</span></td><td id="LC1768" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1769" class="css-a4x74f"><span>1769</span></td><td id="LC1769" class="css-1dcdqdg"><code>              currentValue.push(value);
</code></td></tr><tr><td id="L1770" class="css-a4x74f"><span>1770</span></td><td id="LC1770" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1771" class="css-a4x74f"><span>1771</span></td><td id="LC1771" class="css-1dcdqdg"><code>          <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1772" class="css-a4x74f"><span>1772</span></td><td id="LC1772" class="css-1dcdqdg"><code>              query[key] = value;
</code></td></tr><tr><td id="L1773" class="css-a4x74f"><span>1773</span></td><td id="LC1773" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1774" class="css-a4x74f"><span>1774</span></td><td id="LC1774" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1775" class="css-a4x74f"><span>1775</span></td><td id="LC1775" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> query;
</code></td></tr><tr><td id="L1776" class="css-a4x74f"><span>1776</span></td><td id="LC1776" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1777" class="css-a4x74f"><span>1777</span></td><td id="LC1777" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1778" class="css-a4x74f"><span>1778</span></td><td id="LC1778" class="css-1dcdqdg"><code><span class="code-comment">   * Stringifies a {@link LocationQueryRaw} object. Like `URLSearchParams`, it
</span></code></td></tr><tr><td id="L1779" class="css-a4x74f"><span>1779</span></td><td id="LC1779" class="css-1dcdqdg"><code><span class="code-comment">   * doesn't prepend a `?`
</span></code></td></tr><tr><td id="L1780" class="css-a4x74f"><span>1780</span></td><td id="LC1780" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1781" class="css-a4x74f"><span>1781</span></td><td id="LC1781" class="css-1dcdqdg"><code><span class="code-comment">   * @internal
</span></code></td></tr><tr><td id="L1782" class="css-a4x74f"><span>1782</span></td><td id="LC1782" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1783" class="css-a4x74f"><span>1783</span></td><td id="LC1783" class="css-1dcdqdg"><code><span class="code-comment">   * @param query - query object to stringify
</span></code></td></tr><tr><td id="L1784" class="css-a4x74f"><span>1784</span></td><td id="LC1784" class="css-1dcdqdg"><code><span class="code-comment">   * @returns string version of the query without the leading `?`
</span></code></td></tr><tr><td id="L1785" class="css-a4x74f"><span>1785</span></td><td id="LC1785" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1786" class="css-a4x74f"><span>1786</span></td><td id="LC1786" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">stringifyQuery</span>(<span class="code-params">query</span>) </span>{
</code></td></tr><tr><td id="L1787" class="css-a4x74f"><span>1787</span></td><td id="LC1787" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> search = <span class="code-string">''</span>;
</code></td></tr><tr><td id="L1788" class="css-a4x74f"><span>1788</span></td><td id="LC1788" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">let</span> key <span class="code-keyword">in</span> query) {
</code></td></tr><tr><td id="L1789" class="css-a4x74f"><span>1789</span></td><td id="LC1789" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> value = query[key];
</code></td></tr><tr><td id="L1790" class="css-a4x74f"><span>1790</span></td><td id="LC1790" class="css-1dcdqdg"><code>          key = encodeQueryKey(key);
</code></td></tr><tr><td id="L1791" class="css-a4x74f"><span>1791</span></td><td id="LC1791" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (value == <span class="code-literal">null</span>) {
</code></td></tr><tr><td id="L1792" class="css-a4x74f"><span>1792</span></td><td id="LC1792" class="css-1dcdqdg"><code>              <span class="code-comment">// only null adds the value</span>
</code></td></tr><tr><td id="L1793" class="css-a4x74f"><span>1793</span></td><td id="LC1793" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (value !== <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L1794" class="css-a4x74f"><span>1794</span></td><td id="LC1794" class="css-1dcdqdg"><code>                  search += (search.length ? <span class="code-string">'&amp;'</span> : <span class="code-string">''</span>) + key;
</code></td></tr><tr><td id="L1795" class="css-a4x74f"><span>1795</span></td><td id="LC1795" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1796" class="css-a4x74f"><span>1796</span></td><td id="LC1796" class="css-1dcdqdg"><code>              <span class="code-keyword">continue</span>;
</code></td></tr><tr><td id="L1797" class="css-a4x74f"><span>1797</span></td><td id="LC1797" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1798" class="css-a4x74f"><span>1798</span></td><td id="LC1798" class="css-1dcdqdg"><code>          <span class="code-comment">// keep null values</span>
</code></td></tr><tr><td id="L1799" class="css-a4x74f"><span>1799</span></td><td id="LC1799" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> values = isArray(value)
</code></td></tr><tr><td id="L1800" class="css-a4x74f"><span>1800</span></td><td id="LC1800" class="css-1dcdqdg"><code>              ? value.map(<span class="code-function"><span class="code-params">v</span> =&gt;</span> v &amp;&amp; encodeQueryValue(v))
</code></td></tr><tr><td id="L1801" class="css-a4x74f"><span>1801</span></td><td id="LC1801" class="css-1dcdqdg"><code>              : [value &amp;&amp; encodeQueryValue(value)];
</code></td></tr><tr><td id="L1802" class="css-a4x74f"><span>1802</span></td><td id="LC1802" class="css-1dcdqdg"><code>          values.forEach(<span class="code-function"><span class="code-params">value</span> =&gt;</span> {
</code></td></tr><tr><td id="L1803" class="css-a4x74f"><span>1803</span></td><td id="LC1803" class="css-1dcdqdg"><code>              <span class="code-comment">// skip undefined values in arrays as if they were not present</span>
</code></td></tr><tr><td id="L1804" class="css-a4x74f"><span>1804</span></td><td id="LC1804" class="css-1dcdqdg"><code>              <span class="code-comment">// smaller code than using filter</span>
</code></td></tr><tr><td id="L1805" class="css-a4x74f"><span>1805</span></td><td id="LC1805" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (value !== <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L1806" class="css-a4x74f"><span>1806</span></td><td id="LC1806" class="css-1dcdqdg"><code>                  <span class="code-comment">// only append &amp; with non-empty search</span>
</code></td></tr><tr><td id="L1807" class="css-a4x74f"><span>1807</span></td><td id="LC1807" class="css-1dcdqdg"><code>                  search += (search.length ? <span class="code-string">'&amp;'</span> : <span class="code-string">''</span>) + key;
</code></td></tr><tr><td id="L1808" class="css-a4x74f"><span>1808</span></td><td id="LC1808" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (value != <span class="code-literal">null</span>)
</code></td></tr><tr><td id="L1809" class="css-a4x74f"><span>1809</span></td><td id="LC1809" class="css-1dcdqdg"><code>                      search += <span class="code-string">'='</span> + value;
</code></td></tr><tr><td id="L1810" class="css-a4x74f"><span>1810</span></td><td id="LC1810" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1811" class="css-a4x74f"><span>1811</span></td><td id="LC1811" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L1812" class="css-a4x74f"><span>1812</span></td><td id="LC1812" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1813" class="css-a4x74f"><span>1813</span></td><td id="LC1813" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> search;
</code></td></tr><tr><td id="L1814" class="css-a4x74f"><span>1814</span></td><td id="LC1814" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1815" class="css-a4x74f"><span>1815</span></td><td id="LC1815" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1816" class="css-a4x74f"><span>1816</span></td><td id="LC1816" class="css-1dcdqdg"><code><span class="code-comment">   * Transforms a {@link LocationQueryRaw} into a {@link LocationQuery} by casting
</span></code></td></tr><tr><td id="L1817" class="css-a4x74f"><span>1817</span></td><td id="LC1817" class="css-1dcdqdg"><code><span class="code-comment">   * numbers into strings, removing keys with an undefined value and replacing
</span></code></td></tr><tr><td id="L1818" class="css-a4x74f"><span>1818</span></td><td id="LC1818" class="css-1dcdqdg"><code><span class="code-comment">   * undefined with null in arrays
</span></code></td></tr><tr><td id="L1819" class="css-a4x74f"><span>1819</span></td><td id="LC1819" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1820" class="css-a4x74f"><span>1820</span></td><td id="LC1820" class="css-1dcdqdg"><code><span class="code-comment">   * @param query - query object to normalize
</span></code></td></tr><tr><td id="L1821" class="css-a4x74f"><span>1821</span></td><td id="LC1821" class="css-1dcdqdg"><code><span class="code-comment">   * @returns a normalized query object
</span></code></td></tr><tr><td id="L1822" class="css-a4x74f"><span>1822</span></td><td id="LC1822" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1823" class="css-a4x74f"><span>1823</span></td><td id="LC1823" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">normalizeQuery</span>(<span class="code-params">query</span>) </span>{
</code></td></tr><tr><td id="L1824" class="css-a4x74f"><span>1824</span></td><td id="LC1824" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> normalizedQuery = {};
</code></td></tr><tr><td id="L1825" class="css-a4x74f"><span>1825</span></td><td id="LC1825" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">const</span> key <span class="code-keyword">in</span> query) {
</code></td></tr><tr><td id="L1826" class="css-a4x74f"><span>1826</span></td><td id="LC1826" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> value = query[key];
</code></td></tr><tr><td id="L1827" class="css-a4x74f"><span>1827</span></td><td id="LC1827" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (value !== <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L1828" class="css-a4x74f"><span>1828</span></td><td id="LC1828" class="css-1dcdqdg"><code>              normalizedQuery[key] = isArray(value)
</code></td></tr><tr><td id="L1829" class="css-a4x74f"><span>1829</span></td><td id="LC1829" class="css-1dcdqdg"><code>                  ? value.map(<span class="code-function"><span class="code-params">v</span> =&gt;</span> (v == <span class="code-literal">null</span> ? <span class="code-literal">null</span> : <span class="code-string">''</span> + v))
</code></td></tr><tr><td id="L1830" class="css-a4x74f"><span>1830</span></td><td id="LC1830" class="css-1dcdqdg"><code>                  : value == <span class="code-literal">null</span>
</code></td></tr><tr><td id="L1831" class="css-a4x74f"><span>1831</span></td><td id="LC1831" class="css-1dcdqdg"><code>                      ? value
</code></td></tr><tr><td id="L1832" class="css-a4x74f"><span>1832</span></td><td id="LC1832" class="css-1dcdqdg"><code>                      : <span class="code-string">''</span> + value;
</code></td></tr><tr><td id="L1833" class="css-a4x74f"><span>1833</span></td><td id="LC1833" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1834" class="css-a4x74f"><span>1834</span></td><td id="LC1834" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1835" class="css-a4x74f"><span>1835</span></td><td id="LC1835" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> normalizedQuery;
</code></td></tr><tr><td id="L1836" class="css-a4x74f"><span>1836</span></td><td id="LC1836" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1837" class="css-a4x74f"><span>1837</span></td><td id="LC1837" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1838" class="css-a4x74f"><span>1838</span></td><td id="LC1838" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1839" class="css-a4x74f"><span>1839</span></td><td id="LC1839" class="css-1dcdqdg"><code><span class="code-comment">   * RouteRecord being rendered by the closest ancestor Router View. Used for
</span></code></td></tr><tr><td id="L1840" class="css-a4x74f"><span>1840</span></td><td id="LC1840" class="css-1dcdqdg"><code><span class="code-comment">   * `onBeforeRouteUpdate` and `onBeforeRouteLeave`. rvlm stands for Router View
</span></code></td></tr><tr><td id="L1841" class="css-a4x74f"><span>1841</span></td><td id="LC1841" class="css-1dcdqdg"><code><span class="code-comment">   * Location Matched
</span></code></td></tr><tr><td id="L1842" class="css-a4x74f"><span>1842</span></td><td id="LC1842" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1843" class="css-a4x74f"><span>1843</span></td><td id="LC1843" class="css-1dcdqdg"><code><span class="code-comment">   * @internal
</span></code></td></tr><tr><td id="L1844" class="css-a4x74f"><span>1844</span></td><td id="LC1844" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1845" class="css-a4x74f"><span>1845</span></td><td id="LC1845" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> matchedRouteKey = <span class="code-built_in">Symbol</span>(<span class="code-string">'router view location matched'</span> );
</code></td></tr><tr><td id="L1846" class="css-a4x74f"><span>1846</span></td><td id="LC1846" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1847" class="css-a4x74f"><span>1847</span></td><td id="LC1847" class="css-1dcdqdg"><code><span class="code-comment">   * Allows overriding the router view depth to control which component in
</span></code></td></tr><tr><td id="L1848" class="css-a4x74f"><span>1848</span></td><td id="LC1848" class="css-1dcdqdg"><code><span class="code-comment">   * `matched` is rendered. rvd stands for Router View Depth
</span></code></td></tr><tr><td id="L1849" class="css-a4x74f"><span>1849</span></td><td id="LC1849" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1850" class="css-a4x74f"><span>1850</span></td><td id="LC1850" class="css-1dcdqdg"><code><span class="code-comment">   * @internal
</span></code></td></tr><tr><td id="L1851" class="css-a4x74f"><span>1851</span></td><td id="LC1851" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1852" class="css-a4x74f"><span>1852</span></td><td id="LC1852" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> viewDepthKey = <span class="code-built_in">Symbol</span>(<span class="code-string">'router view depth'</span> );
</code></td></tr><tr><td id="L1853" class="css-a4x74f"><span>1853</span></td><td id="LC1853" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1854" class="css-a4x74f"><span>1854</span></td><td id="LC1854" class="css-1dcdqdg"><code><span class="code-comment">   * Allows overriding the router instance returned by `useRouter` in tests. r
</span></code></td></tr><tr><td id="L1855" class="css-a4x74f"><span>1855</span></td><td id="LC1855" class="css-1dcdqdg"><code><span class="code-comment">   * stands for router
</span></code></td></tr><tr><td id="L1856" class="css-a4x74f"><span>1856</span></td><td id="LC1856" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1857" class="css-a4x74f"><span>1857</span></td><td id="LC1857" class="css-1dcdqdg"><code><span class="code-comment">   * @internal
</span></code></td></tr><tr><td id="L1858" class="css-a4x74f"><span>1858</span></td><td id="LC1858" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1859" class="css-a4x74f"><span>1859</span></td><td id="LC1859" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> routerKey = <span class="code-built_in">Symbol</span>(<span class="code-string">'router'</span> );
</code></td></tr><tr><td id="L1860" class="css-a4x74f"><span>1860</span></td><td id="LC1860" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1861" class="css-a4x74f"><span>1861</span></td><td id="LC1861" class="css-1dcdqdg"><code><span class="code-comment">   * Allows overriding the current route returned by `useRoute` in tests. rl
</span></code></td></tr><tr><td id="L1862" class="css-a4x74f"><span>1862</span></td><td id="LC1862" class="css-1dcdqdg"><code><span class="code-comment">   * stands for route location
</span></code></td></tr><tr><td id="L1863" class="css-a4x74f"><span>1863</span></td><td id="LC1863" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1864" class="css-a4x74f"><span>1864</span></td><td id="LC1864" class="css-1dcdqdg"><code><span class="code-comment">   * @internal
</span></code></td></tr><tr><td id="L1865" class="css-a4x74f"><span>1865</span></td><td id="LC1865" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1866" class="css-a4x74f"><span>1866</span></td><td id="LC1866" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> routeLocationKey = <span class="code-built_in">Symbol</span>(<span class="code-string">'route location'</span> );
</code></td></tr><tr><td id="L1867" class="css-a4x74f"><span>1867</span></td><td id="LC1867" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1868" class="css-a4x74f"><span>1868</span></td><td id="LC1868" class="css-1dcdqdg"><code><span class="code-comment">   * Allows overriding the current route used by router-view. Internally this is
</span></code></td></tr><tr><td id="L1869" class="css-a4x74f"><span>1869</span></td><td id="LC1869" class="css-1dcdqdg"><code><span class="code-comment">   * used when the `route` prop is passed.
</span></code></td></tr><tr><td id="L1870" class="css-a4x74f"><span>1870</span></td><td id="LC1870" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1871" class="css-a4x74f"><span>1871</span></td><td id="LC1871" class="css-1dcdqdg"><code><span class="code-comment">   * @internal
</span></code></td></tr><tr><td id="L1872" class="css-a4x74f"><span>1872</span></td><td id="LC1872" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1873" class="css-a4x74f"><span>1873</span></td><td id="LC1873" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> routerViewLocationKey = <span class="code-built_in">Symbol</span>(<span class="code-string">'router view location'</span> );
</code></td></tr><tr><td id="L1874" class="css-a4x74f"><span>1874</span></td><td id="LC1874" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1875" class="css-a4x74f"><span>1875</span></td><td id="LC1875" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1876" class="css-a4x74f"><span>1876</span></td><td id="LC1876" class="css-1dcdqdg"><code><span class="code-comment">   * Create a list of callbacks that can be reset. Used to create before and after navigation guards list
</span></code></td></tr><tr><td id="L1877" class="css-a4x74f"><span>1877</span></td><td id="LC1877" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1878" class="css-a4x74f"><span>1878</span></td><td id="LC1878" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">useCallbacks</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L1879" class="css-a4x74f"><span>1879</span></td><td id="LC1879" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> handlers = [];
</code></td></tr><tr><td id="L1880" class="css-a4x74f"><span>1880</span></td><td id="LC1880" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">add</span>(<span class="code-params">handler</span>) </span>{
</code></td></tr><tr><td id="L1881" class="css-a4x74f"><span>1881</span></td><td id="LC1881" class="css-1dcdqdg"><code>          handlers.push(handler);
</code></td></tr><tr><td id="L1882" class="css-a4x74f"><span>1882</span></td><td id="LC1882" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L1883" class="css-a4x74f"><span>1883</span></td><td id="LC1883" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> i = handlers.indexOf(handler);
</code></td></tr><tr><td id="L1884" class="css-a4x74f"><span>1884</span></td><td id="LC1884" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (i &gt; <span class="code-number">-1</span>)
</code></td></tr><tr><td id="L1885" class="css-a4x74f"><span>1885</span></td><td id="LC1885" class="css-1dcdqdg"><code>                  handlers.splice(i, <span class="code-number">1</span>);
</code></td></tr><tr><td id="L1886" class="css-a4x74f"><span>1886</span></td><td id="LC1886" class="css-1dcdqdg"><code>          };
</code></td></tr><tr><td id="L1887" class="css-a4x74f"><span>1887</span></td><td id="LC1887" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1888" class="css-a4x74f"><span>1888</span></td><td id="LC1888" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">reset</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L1889" class="css-a4x74f"><span>1889</span></td><td id="LC1889" class="css-1dcdqdg"><code>          handlers = [];
</code></td></tr><tr><td id="L1890" class="css-a4x74f"><span>1890</span></td><td id="LC1890" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1891" class="css-a4x74f"><span>1891</span></td><td id="LC1891" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> {
</code></td></tr><tr><td id="L1892" class="css-a4x74f"><span>1892</span></td><td id="LC1892" class="css-1dcdqdg"><code>          add,
</code></td></tr><tr><td id="L1893" class="css-a4x74f"><span>1893</span></td><td id="LC1893" class="css-1dcdqdg"><code>          list: <span class="code-function"><span class="code-params">()</span> =&gt;</span> handlers,
</code></td></tr><tr><td id="L1894" class="css-a4x74f"><span>1894</span></td><td id="LC1894" class="css-1dcdqdg"><code>          reset,
</code></td></tr><tr><td id="L1895" class="css-a4x74f"><span>1895</span></td><td id="LC1895" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L1896" class="css-a4x74f"><span>1896</span></td><td id="LC1896" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1897" class="css-a4x74f"><span>1897</span></td><td id="LC1897" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1898" class="css-a4x74f"><span>1898</span></td><td id="LC1898" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">registerGuard</span>(<span class="code-params">record, name, guard</span>) </span>{
</code></td></tr><tr><td id="L1899" class="css-a4x74f"><span>1899</span></td><td id="LC1899" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> removeFromList = <span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L1900" class="css-a4x74f"><span>1900</span></td><td id="LC1900" class="css-1dcdqdg"><code>          record[name].delete(guard);
</code></td></tr><tr><td id="L1901" class="css-a4x74f"><span>1901</span></td><td id="LC1901" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L1902" class="css-a4x74f"><span>1902</span></td><td id="LC1902" class="css-1dcdqdg"><code>      vue.onUnmounted(removeFromList);
</code></td></tr><tr><td id="L1903" class="css-a4x74f"><span>1903</span></td><td id="LC1903" class="css-1dcdqdg"><code>      vue.onDeactivated(removeFromList);
</code></td></tr><tr><td id="L1904" class="css-a4x74f"><span>1904</span></td><td id="LC1904" class="css-1dcdqdg"><code>      vue.onActivated(<span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L1905" class="css-a4x74f"><span>1905</span></td><td id="LC1905" class="css-1dcdqdg"><code>          record[name].add(guard);
</code></td></tr><tr><td id="L1906" class="css-a4x74f"><span>1906</span></td><td id="LC1906" class="css-1dcdqdg"><code>      });
</code></td></tr><tr><td id="L1907" class="css-a4x74f"><span>1907</span></td><td id="LC1907" class="css-1dcdqdg"><code>      record[name].add(guard);
</code></td></tr><tr><td id="L1908" class="css-a4x74f"><span>1908</span></td><td id="LC1908" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1909" class="css-a4x74f"><span>1909</span></td><td id="LC1909" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1910" class="css-a4x74f"><span>1910</span></td><td id="LC1910" class="css-1dcdqdg"><code><span class="code-comment">   * Add a navigation guard that triggers whenever the component for the current
</span></code></td></tr><tr><td id="L1911" class="css-a4x74f"><span>1911</span></td><td id="LC1911" class="css-1dcdqdg"><code><span class="code-comment">   * location is about to be left. Similar to {@link beforeRouteLeave} but can be
</span></code></td></tr><tr><td id="L1912" class="css-a4x74f"><span>1912</span></td><td id="LC1912" class="css-1dcdqdg"><code><span class="code-comment">   * used in any component. The guard is removed when the component is unmounted.
</span></code></td></tr><tr><td id="L1913" class="css-a4x74f"><span>1913</span></td><td id="LC1913" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1914" class="css-a4x74f"><span>1914</span></td><td id="LC1914" class="css-1dcdqdg"><code><span class="code-comment">   * @param leaveGuard - {@link NavigationGuard}
</span></code></td></tr><tr><td id="L1915" class="css-a4x74f"><span>1915</span></td><td id="LC1915" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1916" class="css-a4x74f"><span>1916</span></td><td id="LC1916" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">onBeforeRouteLeave</span>(<span class="code-params">leaveGuard</span>) </span>{
</code></td></tr><tr><td id="L1917" class="css-a4x74f"><span>1917</span></td><td id="LC1917" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!vue.getCurrentInstance()) {
</code></td></tr><tr><td id="L1918" class="css-a4x74f"><span>1918</span></td><td id="LC1918" class="css-1dcdqdg"><code>          warn(<span class="code-string">'getCurrentInstance() returned null. onBeforeRouteLeave() must be called at the top of a setup function'</span>);
</code></td></tr><tr><td id="L1919" class="css-a4x74f"><span>1919</span></td><td id="LC1919" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L1920" class="css-a4x74f"><span>1920</span></td><td id="LC1920" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1921" class="css-a4x74f"><span>1921</span></td><td id="LC1921" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> activeRecord = vue.inject(matchedRouteKey, 
</code></td></tr><tr><td id="L1922" class="css-a4x74f"><span>1922</span></td><td id="LC1922" class="css-1dcdqdg"><code>      <span class="code-comment">// to avoid warning</span>
</code></td></tr><tr><td id="L1923" class="css-a4x74f"><span>1923</span></td><td id="LC1923" class="css-1dcdqdg"><code>      {}).value;
</code></td></tr><tr><td id="L1924" class="css-a4x74f"><span>1924</span></td><td id="LC1924" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!activeRecord) {
</code></td></tr><tr><td id="L1925" class="css-a4x74f"><span>1925</span></td><td id="LC1925" class="css-1dcdqdg"><code>          warn(<span class="code-string">'No active route record was found when calling `onBeforeRouteLeave()`. Make sure you call this function inside a component child of &lt;router-view&gt;. Maybe you called it inside of App.vue?'</span>);
</code></td></tr><tr><td id="L1926" class="css-a4x74f"><span>1926</span></td><td id="LC1926" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L1927" class="css-a4x74f"><span>1927</span></td><td id="LC1927" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1928" class="css-a4x74f"><span>1928</span></td><td id="LC1928" class="css-1dcdqdg"><code>      registerGuard(activeRecord, <span class="code-string">'leaveGuards'</span>, leaveGuard);
</code></td></tr><tr><td id="L1929" class="css-a4x74f"><span>1929</span></td><td id="LC1929" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1930" class="css-a4x74f"><span>1930</span></td><td id="LC1930" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L1931" class="css-a4x74f"><span>1931</span></td><td id="LC1931" class="css-1dcdqdg"><code><span class="code-comment">   * Add a navigation guard that triggers whenever the current location is about
</span></code></td></tr><tr><td id="L1932" class="css-a4x74f"><span>1932</span></td><td id="LC1932" class="css-1dcdqdg"><code><span class="code-comment">   * to be updated. Similar to {@link beforeRouteUpdate} but can be used in any
</span></code></td></tr><tr><td id="L1933" class="css-a4x74f"><span>1933</span></td><td id="LC1933" class="css-1dcdqdg"><code><span class="code-comment">   * component. The guard is removed when the component is unmounted.
</span></code></td></tr><tr><td id="L1934" class="css-a4x74f"><span>1934</span></td><td id="LC1934" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1935" class="css-a4x74f"><span>1935</span></td><td id="LC1935" class="css-1dcdqdg"><code><span class="code-comment">   * @param updateGuard - {@link NavigationGuard}
</span></code></td></tr><tr><td id="L1936" class="css-a4x74f"><span>1936</span></td><td id="LC1936" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1937" class="css-a4x74f"><span>1937</span></td><td id="LC1937" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">onBeforeRouteUpdate</span>(<span class="code-params">updateGuard</span>) </span>{
</code></td></tr><tr><td id="L1938" class="css-a4x74f"><span>1938</span></td><td id="LC1938" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!vue.getCurrentInstance()) {
</code></td></tr><tr><td id="L1939" class="css-a4x74f"><span>1939</span></td><td id="LC1939" class="css-1dcdqdg"><code>          warn(<span class="code-string">'getCurrentInstance() returned null. onBeforeRouteUpdate() must be called at the top of a setup function'</span>);
</code></td></tr><tr><td id="L1940" class="css-a4x74f"><span>1940</span></td><td id="LC1940" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L1941" class="css-a4x74f"><span>1941</span></td><td id="LC1941" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1942" class="css-a4x74f"><span>1942</span></td><td id="LC1942" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> activeRecord = vue.inject(matchedRouteKey, 
</code></td></tr><tr><td id="L1943" class="css-a4x74f"><span>1943</span></td><td id="LC1943" class="css-1dcdqdg"><code>      <span class="code-comment">// to avoid warning</span>
</code></td></tr><tr><td id="L1944" class="css-a4x74f"><span>1944</span></td><td id="LC1944" class="css-1dcdqdg"><code>      {}).value;
</code></td></tr><tr><td id="L1945" class="css-a4x74f"><span>1945</span></td><td id="LC1945" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!activeRecord) {
</code></td></tr><tr><td id="L1946" class="css-a4x74f"><span>1946</span></td><td id="LC1946" class="css-1dcdqdg"><code>          warn(<span class="code-string">'No active route record was found when calling `onBeforeRouteUpdate()`. Make sure you call this function inside a component child of &lt;router-view&gt;. Maybe you called it inside of App.vue?'</span>);
</code></td></tr><tr><td id="L1947" class="css-a4x74f"><span>1947</span></td><td id="LC1947" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L1948" class="css-a4x74f"><span>1948</span></td><td id="LC1948" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1949" class="css-a4x74f"><span>1949</span></td><td id="LC1949" class="css-1dcdqdg"><code>      registerGuard(activeRecord, <span class="code-string">'updateGuards'</span>, updateGuard);
</code></td></tr><tr><td id="L1950" class="css-a4x74f"><span>1950</span></td><td id="LC1950" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1951" class="css-a4x74f"><span>1951</span></td><td id="LC1951" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">guardToPromiseFn</span>(<span class="code-params">guard, to, from, record, name</span>) </span>{
</code></td></tr><tr><td id="L1952" class="css-a4x74f"><span>1952</span></td><td id="LC1952" class="css-1dcdqdg"><code>      <span class="code-comment">// keep a reference to the enterCallbackArray to prevent pushing callbacks if a new navigation took place</span>
</code></td></tr><tr><td id="L1953" class="css-a4x74f"><span>1953</span></td><td id="LC1953" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> enterCallbackArray = record &amp;&amp;
</code></td></tr><tr><td id="L1954" class="css-a4x74f"><span>1954</span></td><td id="LC1954" class="css-1dcdqdg"><code>          <span class="code-comment">// name is defined if record is because of the function overload</span>
</code></td></tr><tr><td id="L1955" class="css-a4x74f"><span>1955</span></td><td id="LC1955" class="css-1dcdqdg"><code>          (record.enterCallbacks[name] = record.enterCallbacks[name] || []);
</code></td></tr><tr><td id="L1956" class="css-a4x74f"><span>1956</span></td><td id="LC1956" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> <span class="code-function"><span class="code-params">()</span> =&gt;</span> <span class="code-keyword">new</span> <span class="code-built_in">Promise</span>(<span class="code-function">(<span class="code-params">resolve, reject</span>) =&gt;</span> {
</code></td></tr><tr><td id="L1957" class="css-a4x74f"><span>1957</span></td><td id="LC1957" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> next = <span class="code-function">(<span class="code-params">valid</span>) =&gt;</span> {
</code></td></tr><tr><td id="L1958" class="css-a4x74f"><span>1958</span></td><td id="LC1958" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (valid === <span class="code-literal">false</span>) {
</code></td></tr><tr><td id="L1959" class="css-a4x74f"><span>1959</span></td><td id="LC1959" class="css-1dcdqdg"><code>                  reject(createRouterError(<span class="code-number">4</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_ABORTED */</span>, {
</code></td></tr><tr><td id="L1960" class="css-a4x74f"><span>1960</span></td><td id="LC1960" class="css-1dcdqdg"><code>                      <span class="code-keyword">from</span>,
</code></td></tr><tr><td id="L1961" class="css-a4x74f"><span>1961</span></td><td id="LC1961" class="css-1dcdqdg"><code>                      to,
</code></td></tr><tr><td id="L1962" class="css-a4x74f"><span>1962</span></td><td id="LC1962" class="css-1dcdqdg"><code>                  }));
</code></td></tr><tr><td id="L1963" class="css-a4x74f"><span>1963</span></td><td id="LC1963" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1964" class="css-a4x74f"><span>1964</span></td><td id="LC1964" class="css-1dcdqdg"><code>              <span class="code-keyword">else</span> <span class="code-keyword">if</span> (valid <span class="code-keyword">instanceof</span> <span class="code-built_in">Error</span>) {
</code></td></tr><tr><td id="L1965" class="css-a4x74f"><span>1965</span></td><td id="LC1965" class="css-1dcdqdg"><code>                  reject(valid);
</code></td></tr><tr><td id="L1966" class="css-a4x74f"><span>1966</span></td><td id="LC1966" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1967" class="css-a4x74f"><span>1967</span></td><td id="LC1967" class="css-1dcdqdg"><code>              <span class="code-keyword">else</span> <span class="code-keyword">if</span> (isRouteLocation(valid)) {
</code></td></tr><tr><td id="L1968" class="css-a4x74f"><span>1968</span></td><td id="LC1968" class="css-1dcdqdg"><code>                  reject(createRouterError(<span class="code-number">2</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_GUARD_REDIRECT */</span>, {
</code></td></tr><tr><td id="L1969" class="css-a4x74f"><span>1969</span></td><td id="LC1969" class="css-1dcdqdg"><code>                      <span class="code-keyword">from</span>: to,
</code></td></tr><tr><td id="L1970" class="css-a4x74f"><span>1970</span></td><td id="LC1970" class="css-1dcdqdg"><code>                      to: valid,
</code></td></tr><tr><td id="L1971" class="css-a4x74f"><span>1971</span></td><td id="LC1971" class="css-1dcdqdg"><code>                  }));
</code></td></tr><tr><td id="L1972" class="css-a4x74f"><span>1972</span></td><td id="LC1972" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1973" class="css-a4x74f"><span>1973</span></td><td id="LC1973" class="css-1dcdqdg"><code>              <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1974" class="css-a4x74f"><span>1974</span></td><td id="LC1974" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (enterCallbackArray &amp;&amp;
</code></td></tr><tr><td id="L1975" class="css-a4x74f"><span>1975</span></td><td id="LC1975" class="css-1dcdqdg"><code>                      <span class="code-comment">// since enterCallbackArray is truthy, both record and name also are</span>
</code></td></tr><tr><td id="L1976" class="css-a4x74f"><span>1976</span></td><td id="LC1976" class="css-1dcdqdg"><code>                      record.enterCallbacks[name] === enterCallbackArray &amp;&amp;
</code></td></tr><tr><td id="L1977" class="css-a4x74f"><span>1977</span></td><td id="LC1977" class="css-1dcdqdg"><code>                      <span class="code-keyword">typeof</span> valid === <span class="code-string">'function'</span>) {
</code></td></tr><tr><td id="L1978" class="css-a4x74f"><span>1978</span></td><td id="LC1978" class="css-1dcdqdg"><code>                      enterCallbackArray.push(valid);
</code></td></tr><tr><td id="L1979" class="css-a4x74f"><span>1979</span></td><td id="LC1979" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L1980" class="css-a4x74f"><span>1980</span></td><td id="LC1980" class="css-1dcdqdg"><code>                  resolve();
</code></td></tr><tr><td id="L1981" class="css-a4x74f"><span>1981</span></td><td id="LC1981" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L1982" class="css-a4x74f"><span>1982</span></td><td id="LC1982" class="css-1dcdqdg"><code>          };
</code></td></tr><tr><td id="L1983" class="css-a4x74f"><span>1983</span></td><td id="LC1983" class="css-1dcdqdg"><code>          <span class="code-comment">// wrapping with Promise.resolve allows it to work with both async and sync guards</span>
</code></td></tr><tr><td id="L1984" class="css-a4x74f"><span>1984</span></td><td id="LC1984" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> guardReturn = guard.call(record &amp;&amp; record.instances[name], to, <span class="code-keyword">from</span>, canOnlyBeCalledOnce(next, to, <span class="code-keyword">from</span>) );
</code></td></tr><tr><td id="L1985" class="css-a4x74f"><span>1985</span></td><td id="LC1985" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> guardCall = <span class="code-built_in">Promise</span>.resolve(guardReturn);
</code></td></tr><tr><td id="L1986" class="css-a4x74f"><span>1986</span></td><td id="LC1986" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (guard.length &lt; <span class="code-number">3</span>)
</code></td></tr><tr><td id="L1987" class="css-a4x74f"><span>1987</span></td><td id="LC1987" class="css-1dcdqdg"><code>              guardCall = guardCall.then(next);
</code></td></tr><tr><td id="L1988" class="css-a4x74f"><span>1988</span></td><td id="LC1988" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (guard.length &gt; <span class="code-number">2</span>) {
</code></td></tr><tr><td id="L1989" class="css-a4x74f"><span>1989</span></td><td id="LC1989" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> message = <span class="code-string">`The "next" callback was never called inside of <span class="code-subst">${guard.name ? <span class="code-string">'"'</span> + guard.name + <span class="code-string">'"'</span> : <span class="code-string">''</span>}</span>:\n<span class="code-subst">${guard.toString()}</span>\n. If you are returning a value instead of calling "next", make sure to remove the "next" parameter from your function.`</span>;
</code></td></tr><tr><td id="L1990" class="css-a4x74f"><span>1990</span></td><td id="LC1990" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (<span class="code-keyword">typeof</span> guardReturn === <span class="code-string">'object'</span> &amp;&amp; <span class="code-string">'then'</span> <span class="code-keyword">in</span> guardReturn) {
</code></td></tr><tr><td id="L1991" class="css-a4x74f"><span>1991</span></td><td id="LC1991" class="css-1dcdqdg"><code>                  guardCall = guardCall.then(<span class="code-function"><span class="code-params">resolvedValue</span> =&gt;</span> {
</code></td></tr><tr><td id="L1992" class="css-a4x74f"><span>1992</span></td><td id="LC1992" class="css-1dcdqdg"><code>                      <span class="code-comment">// @ts-expect-error: _called is added at canOnlyBeCalledOnce</span>
</code></td></tr><tr><td id="L1993" class="css-a4x74f"><span>1993</span></td><td id="LC1993" class="css-1dcdqdg"><code>                      <span class="code-keyword">if</span> (!next._called) {
</code></td></tr><tr><td id="L1994" class="css-a4x74f"><span>1994</span></td><td id="LC1994" class="css-1dcdqdg"><code>                          warn(message);
</code></td></tr><tr><td id="L1995" class="css-a4x74f"><span>1995</span></td><td id="LC1995" class="css-1dcdqdg"><code>                          <span class="code-keyword">return</span> <span class="code-built_in">Promise</span>.reject(<span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">'Invalid navigation guard'</span>));
</code></td></tr><tr><td id="L1996" class="css-a4x74f"><span>1996</span></td><td id="LC1996" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L1997" class="css-a4x74f"><span>1997</span></td><td id="LC1997" class="css-1dcdqdg"><code>                      <span class="code-keyword">return</span> resolvedValue;
</code></td></tr><tr><td id="L1998" class="css-a4x74f"><span>1998</span></td><td id="LC1998" class="css-1dcdqdg"><code>                  });
</code></td></tr><tr><td id="L1999" class="css-a4x74f"><span>1999</span></td><td id="LC1999" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2000" class="css-a4x74f"><span>2000</span></td><td id="LC2000" class="css-1dcdqdg"><code>              <span class="code-keyword">else</span> <span class="code-keyword">if</span> (guardReturn !== <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L2001" class="css-a4x74f"><span>2001</span></td><td id="LC2001" class="css-1dcdqdg"><code>                  <span class="code-comment">// @ts-expect-error: _called is added at canOnlyBeCalledOnce</span>
</code></td></tr><tr><td id="L2002" class="css-a4x74f"><span>2002</span></td><td id="LC2002" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (!next._called) {
</code></td></tr><tr><td id="L2003" class="css-a4x74f"><span>2003</span></td><td id="LC2003" class="css-1dcdqdg"><code>                      warn(message);
</code></td></tr><tr><td id="L2004" class="css-a4x74f"><span>2004</span></td><td id="LC2004" class="css-1dcdqdg"><code>                      reject(<span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">'Invalid navigation guard'</span>));
</code></td></tr><tr><td id="L2005" class="css-a4x74f"><span>2005</span></td><td id="LC2005" class="css-1dcdqdg"><code>                      <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L2006" class="css-a4x74f"><span>2006</span></td><td id="LC2006" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2007" class="css-a4x74f"><span>2007</span></td><td id="LC2007" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2008" class="css-a4x74f"><span>2008</span></td><td id="LC2008" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2009" class="css-a4x74f"><span>2009</span></td><td id="LC2009" class="css-1dcdqdg"><code>          guardCall.catch(<span class="code-function"><span class="code-params">err</span> =&gt;</span> reject(err));
</code></td></tr><tr><td id="L2010" class="css-a4x74f"><span>2010</span></td><td id="LC2010" class="css-1dcdqdg"><code>      });
</code></td></tr><tr><td id="L2011" class="css-a4x74f"><span>2011</span></td><td id="LC2011" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2012" class="css-a4x74f"><span>2012</span></td><td id="LC2012" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">canOnlyBeCalledOnce</span>(<span class="code-params">next, to, from</span>) </span>{
</code></td></tr><tr><td id="L2013" class="css-a4x74f"><span>2013</span></td><td id="LC2013" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> called = <span class="code-number">0</span>;
</code></td></tr><tr><td id="L2014" class="css-a4x74f"><span>2014</span></td><td id="LC2014" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L2015" class="css-a4x74f"><span>2015</span></td><td id="LC2015" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (called++ === <span class="code-number">1</span>)
</code></td></tr><tr><td id="L2016" class="css-a4x74f"><span>2016</span></td><td id="LC2016" class="css-1dcdqdg"><code>              warn(<span class="code-string">`The "next" callback was called more than once in one navigation guard when going from "<span class="code-subst">${<span class="code-keyword">from</span>.fullPath}</span>" to "<span class="code-subst">${to.fullPath}</span>". It should be called exactly one time in each navigation guard. This will fail in production.`</span>);
</code></td></tr><tr><td id="L2017" class="css-a4x74f"><span>2017</span></td><td id="LC2017" class="css-1dcdqdg"><code>          <span class="code-comment">// @ts-expect-error: we put it in the original one because it's easier to check</span>
</code></td></tr><tr><td id="L2018" class="css-a4x74f"><span>2018</span></td><td id="LC2018" class="css-1dcdqdg"><code>          next._called = <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L2019" class="css-a4x74f"><span>2019</span></td><td id="LC2019" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (called === <span class="code-number">1</span>)
</code></td></tr><tr><td id="L2020" class="css-a4x74f"><span>2020</span></td><td id="LC2020" class="css-1dcdqdg"><code>              next.apply(<span class="code-literal">null</span>, <span class="code-built_in">arguments</span>);
</code></td></tr><tr><td id="L2021" class="css-a4x74f"><span>2021</span></td><td id="LC2021" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L2022" class="css-a4x74f"><span>2022</span></td><td id="LC2022" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2023" class="css-a4x74f"><span>2023</span></td><td id="LC2023" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">extractComponentsGuards</span>(<span class="code-params">matched, guardType, to, from</span>) </span>{
</code></td></tr><tr><td id="L2024" class="css-a4x74f"><span>2024</span></td><td id="LC2024" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> guards = [];
</code></td></tr><tr><td id="L2025" class="css-a4x74f"><span>2025</span></td><td id="LC2025" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">const</span> record <span class="code-keyword">of</span> matched) {
</code></td></tr><tr><td id="L2026" class="css-a4x74f"><span>2026</span></td><td id="LC2026" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!record.components &amp;&amp; !record.children.length) {
</code></td></tr><tr><td id="L2027" class="css-a4x74f"><span>2027</span></td><td id="LC2027" class="css-1dcdqdg"><code>              warn(<span class="code-string">`Record with path "<span class="code-subst">${record.path}</span>" is either missing a "component(s)"`</span> +
</code></td></tr><tr><td id="L2028" class="css-a4x74f"><span>2028</span></td><td id="LC2028" class="css-1dcdqdg"><code>                  <span class="code-string">` or "children" property.`</span>);
</code></td></tr><tr><td id="L2029" class="css-a4x74f"><span>2029</span></td><td id="LC2029" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2030" class="css-a4x74f"><span>2030</span></td><td id="LC2030" class="css-1dcdqdg"><code>          <span class="code-keyword">for</span> (<span class="code-keyword">const</span> name <span class="code-keyword">in</span> record.components) {
</code></td></tr><tr><td id="L2031" class="css-a4x74f"><span>2031</span></td><td id="LC2031" class="css-1dcdqdg"><code>              <span class="code-keyword">let</span> rawComponent = record.components[name];
</code></td></tr><tr><td id="L2032" class="css-a4x74f"><span>2032</span></td><td id="LC2032" class="css-1dcdqdg"><code>              {
</code></td></tr><tr><td id="L2033" class="css-a4x74f"><span>2033</span></td><td id="LC2033" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (!rawComponent ||
</code></td></tr><tr><td id="L2034" class="css-a4x74f"><span>2034</span></td><td id="LC2034" class="css-1dcdqdg"><code>                      (<span class="code-keyword">typeof</span> rawComponent !== <span class="code-string">'object'</span> &amp;&amp;
</code></td></tr><tr><td id="L2035" class="css-a4x74f"><span>2035</span></td><td id="LC2035" class="css-1dcdqdg"><code>                          <span class="code-keyword">typeof</span> rawComponent !== <span class="code-string">'function'</span>)) {
</code></td></tr><tr><td id="L2036" class="css-a4x74f"><span>2036</span></td><td id="LC2036" class="css-1dcdqdg"><code>                      warn(<span class="code-string">`Component "<span class="code-subst">${name}</span>" in record with path "<span class="code-subst">${record.path}</span>" is not`</span> +
</code></td></tr><tr><td id="L2037" class="css-a4x74f"><span>2037</span></td><td id="LC2037" class="css-1dcdqdg"><code>                          <span class="code-string">` a valid component. Received "<span class="code-subst">${<span class="code-built_in">String</span>(rawComponent)}</span>".`</span>);
</code></td></tr><tr><td id="L2038" class="css-a4x74f"><span>2038</span></td><td id="LC2038" class="css-1dcdqdg"><code>                      <span class="code-comment">// throw to ensure we stop here but warn to ensure the message isn't</span>
</code></td></tr><tr><td id="L2039" class="css-a4x74f"><span>2039</span></td><td id="LC2039" class="css-1dcdqdg"><code>                      <span class="code-comment">// missed by the user</span>
</code></td></tr><tr><td id="L2040" class="css-a4x74f"><span>2040</span></td><td id="LC2040" class="css-1dcdqdg"><code>                      <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">'Invalid route component'</span>);
</code></td></tr><tr><td id="L2041" class="css-a4x74f"><span>2041</span></td><td id="LC2041" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2042" class="css-a4x74f"><span>2042</span></td><td id="LC2042" class="css-1dcdqdg"><code>                  <span class="code-keyword">else</span> <span class="code-keyword">if</span> (<span class="code-string">'then'</span> <span class="code-keyword">in</span> rawComponent) {
</code></td></tr><tr><td id="L2043" class="css-a4x74f"><span>2043</span></td><td id="LC2043" class="css-1dcdqdg"><code>                      <span class="code-comment">// warn if user wrote import('/component.vue') instead of () =&gt;</span>
</code></td></tr><tr><td id="L2044" class="css-a4x74f"><span>2044</span></td><td id="LC2044" class="css-1dcdqdg"><code>                      <span class="code-comment">// import('./component.vue')</span>
</code></td></tr><tr><td id="L2045" class="css-a4x74f"><span>2045</span></td><td id="LC2045" class="css-1dcdqdg"><code>                      warn(<span class="code-string">`Component "<span class="code-subst">${name}</span>" in record with path "<span class="code-subst">${record.path}</span>" is a `</span> +
</code></td></tr><tr><td id="L2046" class="css-a4x74f"><span>2046</span></td><td id="LC2046" class="css-1dcdqdg"><code>                          <span class="code-string">`Promise instead of a function that returns a Promise. Did you `</span> +
</code></td></tr><tr><td id="L2047" class="css-a4x74f"><span>2047</span></td><td id="LC2047" class="css-1dcdqdg"><code>                          <span class="code-string">`write "import('./MyPage.vue')" instead of `</span> +
</code></td></tr><tr><td id="L2048" class="css-a4x74f"><span>2048</span></td><td id="LC2048" class="css-1dcdqdg"><code>                          <span class="code-string">`"() =&gt; import('./MyPage.vue')" ? This will break in `</span> +
</code></td></tr><tr><td id="L2049" class="css-a4x74f"><span>2049</span></td><td id="LC2049" class="css-1dcdqdg"><code>                          <span class="code-string">`production if not fixed.`</span>);
</code></td></tr><tr><td id="L2050" class="css-a4x74f"><span>2050</span></td><td id="LC2050" class="css-1dcdqdg"><code>                      <span class="code-keyword">const</span> promise = rawComponent;
</code></td></tr><tr><td id="L2051" class="css-a4x74f"><span>2051</span></td><td id="LC2051" class="css-1dcdqdg"><code>                      rawComponent = <span class="code-function"><span class="code-params">()</span> =&gt;</span> promise;
</code></td></tr><tr><td id="L2052" class="css-a4x74f"><span>2052</span></td><td id="LC2052" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2053" class="css-a4x74f"><span>2053</span></td><td id="LC2053" class="css-1dcdqdg"><code>                  <span class="code-keyword">else</span> <span class="code-keyword">if</span> (rawComponent.__asyncLoader &amp;&amp;
</code></td></tr><tr><td id="L2054" class="css-a4x74f"><span>2054</span></td><td id="LC2054" class="css-1dcdqdg"><code>                      <span class="code-comment">// warn only once per component</span>
</code></td></tr><tr><td id="L2055" class="css-a4x74f"><span>2055</span></td><td id="LC2055" class="css-1dcdqdg"><code>                      !rawComponent.__warnedDefineAsync) {
</code></td></tr><tr><td id="L2056" class="css-a4x74f"><span>2056</span></td><td id="LC2056" class="css-1dcdqdg"><code>                      rawComponent.__warnedDefineAsync = <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L2057" class="css-a4x74f"><span>2057</span></td><td id="LC2057" class="css-1dcdqdg"><code>                      warn(<span class="code-string">`Component "<span class="code-subst">${name}</span>" in record with path "<span class="code-subst">${record.path}</span>" is defined `</span> +
</code></td></tr><tr><td id="L2058" class="css-a4x74f"><span>2058</span></td><td id="LC2058" class="css-1dcdqdg"><code>                          <span class="code-string">`using "defineAsyncComponent()". `</span> +
</code></td></tr><tr><td id="L2059" class="css-a4x74f"><span>2059</span></td><td id="LC2059" class="css-1dcdqdg"><code>                          <span class="code-string">`Write "() =&gt; import('./MyPage.vue')" instead of `</span> +
</code></td></tr><tr><td id="L2060" class="css-a4x74f"><span>2060</span></td><td id="LC2060" class="css-1dcdqdg"><code>                          <span class="code-string">`"defineAsyncComponent(() =&gt; import('./MyPage.vue'))".`</span>);
</code></td></tr><tr><td id="L2061" class="css-a4x74f"><span>2061</span></td><td id="LC2061" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2062" class="css-a4x74f"><span>2062</span></td><td id="LC2062" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2063" class="css-a4x74f"><span>2063</span></td><td id="LC2063" class="css-1dcdqdg"><code>              <span class="code-comment">// skip update and leave guards if the route component is not mounted</span>
</code></td></tr><tr><td id="L2064" class="css-a4x74f"><span>2064</span></td><td id="LC2064" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (guardType !== <span class="code-string">'beforeRouteEnter'</span> &amp;&amp; !record.instances[name])
</code></td></tr><tr><td id="L2065" class="css-a4x74f"><span>2065</span></td><td id="LC2065" class="css-1dcdqdg"><code>                  <span class="code-keyword">continue</span>;
</code></td></tr><tr><td id="L2066" class="css-a4x74f"><span>2066</span></td><td id="LC2066" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (isRouteComponent(rawComponent)) {
</code></td></tr><tr><td id="L2067" class="css-a4x74f"><span>2067</span></td><td id="LC2067" class="css-1dcdqdg"><code>                  <span class="code-comment">// __vccOpts is added by vue-class-component and contain the regular options</span>
</code></td></tr><tr><td id="L2068" class="css-a4x74f"><span>2068</span></td><td id="LC2068" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> options = rawComponent.__vccOpts || rawComponent;
</code></td></tr><tr><td id="L2069" class="css-a4x74f"><span>2069</span></td><td id="LC2069" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> guard = options[guardType];
</code></td></tr><tr><td id="L2070" class="css-a4x74f"><span>2070</span></td><td id="LC2070" class="css-1dcdqdg"><code>                  guard &amp;&amp; guards.push(guardToPromiseFn(guard, to, <span class="code-keyword">from</span>, record, name));
</code></td></tr><tr><td id="L2071" class="css-a4x74f"><span>2071</span></td><td id="LC2071" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2072" class="css-a4x74f"><span>2072</span></td><td id="LC2072" class="css-1dcdqdg"><code>              <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L2073" class="css-a4x74f"><span>2073</span></td><td id="LC2073" class="css-1dcdqdg"><code>                  <span class="code-comment">// start requesting the chunk already</span>
</code></td></tr><tr><td id="L2074" class="css-a4x74f"><span>2074</span></td><td id="LC2074" class="css-1dcdqdg"><code>                  <span class="code-keyword">let</span> componentPromise = rawComponent();
</code></td></tr><tr><td id="L2075" class="css-a4x74f"><span>2075</span></td><td id="LC2075" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (!(<span class="code-string">'catch'</span> <span class="code-keyword">in</span> componentPromise)) {
</code></td></tr><tr><td id="L2076" class="css-a4x74f"><span>2076</span></td><td id="LC2076" class="css-1dcdqdg"><code>                      warn(<span class="code-string">`Component "<span class="code-subst">${name}</span>" in record with path "<span class="code-subst">${record.path}</span>" is a function that does not return a Promise. If you were passing a functional component, make sure to add a "displayName" to the component. This will break in production if not fixed.`</span>);
</code></td></tr><tr><td id="L2077" class="css-a4x74f"><span>2077</span></td><td id="LC2077" class="css-1dcdqdg"><code>                      componentPromise = <span class="code-built_in">Promise</span>.resolve(componentPromise);
</code></td></tr><tr><td id="L2078" class="css-a4x74f"><span>2078</span></td><td id="LC2078" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2079" class="css-a4x74f"><span>2079</span></td><td id="LC2079" class="css-1dcdqdg"><code>                  guards.push(<span class="code-function"><span class="code-params">()</span> =&gt;</span> componentPromise.then(<span class="code-function"><span class="code-params">resolved</span> =&gt;</span> {
</code></td></tr><tr><td id="L2080" class="css-a4x74f"><span>2080</span></td><td id="LC2080" class="css-1dcdqdg"><code>                      <span class="code-keyword">if</span> (!resolved)
</code></td></tr><tr><td id="L2081" class="css-a4x74f"><span>2081</span></td><td id="LC2081" class="css-1dcdqdg"><code>                          <span class="code-keyword">return</span> <span class="code-built_in">Promise</span>.reject(<span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">`Couldn't resolve component "<span class="code-subst">${name}</span>" at "<span class="code-subst">${record.path}</span>"`</span>));
</code></td></tr><tr><td id="L2082" class="css-a4x74f"><span>2082</span></td><td id="LC2082" class="css-1dcdqdg"><code>                      <span class="code-keyword">const</span> resolvedComponent = isESModule(resolved)
</code></td></tr><tr><td id="L2083" class="css-a4x74f"><span>2083</span></td><td id="LC2083" class="css-1dcdqdg"><code>                          ? resolved.default
</code></td></tr><tr><td id="L2084" class="css-a4x74f"><span>2084</span></td><td id="LC2084" class="css-1dcdqdg"><code>                          : resolved;
</code></td></tr><tr><td id="L2085" class="css-a4x74f"><span>2085</span></td><td id="LC2085" class="css-1dcdqdg"><code>                      <span class="code-comment">// replace the function with the resolved component</span>
</code></td></tr><tr><td id="L2086" class="css-a4x74f"><span>2086</span></td><td id="LC2086" class="css-1dcdqdg"><code>                      <span class="code-comment">// cannot be null or undefined because we went into the for loop</span>
</code></td></tr><tr><td id="L2087" class="css-a4x74f"><span>2087</span></td><td id="LC2087" class="css-1dcdqdg"><code>                      record.components[name] = resolvedComponent;
</code></td></tr><tr><td id="L2088" class="css-a4x74f"><span>2088</span></td><td id="LC2088" class="css-1dcdqdg"><code>                      <span class="code-comment">// __vccOpts is added by vue-class-component and contain the regular options</span>
</code></td></tr><tr><td id="L2089" class="css-a4x74f"><span>2089</span></td><td id="LC2089" class="css-1dcdqdg"><code>                      <span class="code-keyword">const</span> options = resolvedComponent.__vccOpts || resolvedComponent;
</code></td></tr><tr><td id="L2090" class="css-a4x74f"><span>2090</span></td><td id="LC2090" class="css-1dcdqdg"><code>                      <span class="code-keyword">const</span> guard = options[guardType];
</code></td></tr><tr><td id="L2091" class="css-a4x74f"><span>2091</span></td><td id="LC2091" class="css-1dcdqdg"><code>                      <span class="code-keyword">return</span> guard &amp;&amp; guardToPromiseFn(guard, to, <span class="code-keyword">from</span>, record, name)();
</code></td></tr><tr><td id="L2092" class="css-a4x74f"><span>2092</span></td><td id="LC2092" class="css-1dcdqdg"><code>                  }));
</code></td></tr><tr><td id="L2093" class="css-a4x74f"><span>2093</span></td><td id="LC2093" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2094" class="css-a4x74f"><span>2094</span></td><td id="LC2094" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2095" class="css-a4x74f"><span>2095</span></td><td id="LC2095" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2096" class="css-a4x74f"><span>2096</span></td><td id="LC2096" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> guards;
</code></td></tr><tr><td id="L2097" class="css-a4x74f"><span>2097</span></td><td id="LC2097" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2098" class="css-a4x74f"><span>2098</span></td><td id="LC2098" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2099" class="css-a4x74f"><span>2099</span></td><td id="LC2099" class="css-1dcdqdg"><code><span class="code-comment">   * Allows differentiating lazy components from functional components and vue-class-component
</span></code></td></tr><tr><td id="L2100" class="css-a4x74f"><span>2100</span></td><td id="LC2100" class="css-1dcdqdg"><code><span class="code-comment">   * @internal
</span></code></td></tr><tr><td id="L2101" class="css-a4x74f"><span>2101</span></td><td id="LC2101" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L2102" class="css-a4x74f"><span>2102</span></td><td id="LC2102" class="css-1dcdqdg"><code><span class="code-comment">   * @param component
</span></code></td></tr><tr><td id="L2103" class="css-a4x74f"><span>2103</span></td><td id="LC2103" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L2104" class="css-a4x74f"><span>2104</span></td><td id="LC2104" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isRouteComponent</span>(<span class="code-params">component</span>) </span>{
</code></td></tr><tr><td id="L2105" class="css-a4x74f"><span>2105</span></td><td id="LC2105" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> (<span class="code-keyword">typeof</span> component === <span class="code-string">'object'</span> ||
</code></td></tr><tr><td id="L2106" class="css-a4x74f"><span>2106</span></td><td id="LC2106" class="css-1dcdqdg"><code>          <span class="code-string">'displayName'</span> <span class="code-keyword">in</span> component ||
</code></td></tr><tr><td id="L2107" class="css-a4x74f"><span>2107</span></td><td id="LC2107" class="css-1dcdqdg"><code>          <span class="code-string">'props'</span> <span class="code-keyword">in</span> component ||
</code></td></tr><tr><td id="L2108" class="css-a4x74f"><span>2108</span></td><td id="LC2108" class="css-1dcdqdg"><code>          <span class="code-string">'__vccOpts'</span> <span class="code-keyword">in</span> component);
</code></td></tr><tr><td id="L2109" class="css-a4x74f"><span>2109</span></td><td id="LC2109" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2110" class="css-a4x74f"><span>2110</span></td><td id="LC2110" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2111" class="css-a4x74f"><span>2111</span></td><td id="LC2111" class="css-1dcdqdg"><code><span class="code-comment">   * Ensures a route is loaded, so it can be passed as o prop to `&lt;RouterView&gt;`.
</span></code></td></tr><tr><td id="L2112" class="css-a4x74f"><span>2112</span></td><td id="LC2112" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L2113" class="css-a4x74f"><span>2113</span></td><td id="LC2113" class="css-1dcdqdg"><code><span class="code-comment">   * @param route - resolved route to load
</span></code></td></tr><tr><td id="L2114" class="css-a4x74f"><span>2114</span></td><td id="LC2114" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L2115" class="css-a4x74f"><span>2115</span></td><td id="LC2115" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">loadRouteLocation</span>(<span class="code-params">route</span>) </span>{
</code></td></tr><tr><td id="L2116" class="css-a4x74f"><span>2116</span></td><td id="LC2116" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> route.matched.every(<span class="code-function"><span class="code-params">record</span> =&gt;</span> record.redirect)
</code></td></tr><tr><td id="L2117" class="css-a4x74f"><span>2117</span></td><td id="LC2117" class="css-1dcdqdg"><code>          ? <span class="code-built_in">Promise</span>.reject(<span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">'Cannot load a route that redirects.'</span>))
</code></td></tr><tr><td id="L2118" class="css-a4x74f"><span>2118</span></td><td id="LC2118" class="css-1dcdqdg"><code>          : <span class="code-built_in">Promise</span>.all(route.matched.map(<span class="code-function"><span class="code-params">record</span> =&gt;</span> record.components &amp;&amp;
</code></td></tr><tr><td id="L2119" class="css-a4x74f"><span>2119</span></td><td id="LC2119" class="css-1dcdqdg"><code>              <span class="code-built_in">Promise</span>.all(<span class="code-built_in">Object</span>.keys(record.components).reduce(<span class="code-function">(<span class="code-params">promises, name</span>) =&gt;</span> {
</code></td></tr><tr><td id="L2120" class="css-a4x74f"><span>2120</span></td><td id="LC2120" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> rawComponent = record.components[name];
</code></td></tr><tr><td id="L2121" class="css-a4x74f"><span>2121</span></td><td id="LC2121" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (<span class="code-keyword">typeof</span> rawComponent === <span class="code-string">'function'</span> &amp;&amp;
</code></td></tr><tr><td id="L2122" class="css-a4x74f"><span>2122</span></td><td id="LC2122" class="css-1dcdqdg"><code>                      !(<span class="code-string">'displayName'</span> <span class="code-keyword">in</span> rawComponent)) {
</code></td></tr><tr><td id="L2123" class="css-a4x74f"><span>2123</span></td><td id="LC2123" class="css-1dcdqdg"><code>                      promises.push(rawComponent().then(<span class="code-function"><span class="code-params">resolved</span> =&gt;</span> {
</code></td></tr><tr><td id="L2124" class="css-a4x74f"><span>2124</span></td><td id="LC2124" class="css-1dcdqdg"><code>                          <span class="code-keyword">if</span> (!resolved)
</code></td></tr><tr><td id="L2125" class="css-a4x74f"><span>2125</span></td><td id="LC2125" class="css-1dcdqdg"><code>                              <span class="code-keyword">return</span> <span class="code-built_in">Promise</span>.reject(<span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">`Couldn't resolve component "<span class="code-subst">${name}</span>" at "<span class="code-subst">${record.path}</span>". Ensure you passed a function that returns a promise.`</span>));
</code></td></tr><tr><td id="L2126" class="css-a4x74f"><span>2126</span></td><td id="LC2126" class="css-1dcdqdg"><code>                          <span class="code-keyword">const</span> resolvedComponent = isESModule(resolved)
</code></td></tr><tr><td id="L2127" class="css-a4x74f"><span>2127</span></td><td id="LC2127" class="css-1dcdqdg"><code>                              ? resolved.default
</code></td></tr><tr><td id="L2128" class="css-a4x74f"><span>2128</span></td><td id="LC2128" class="css-1dcdqdg"><code>                              : resolved;
</code></td></tr><tr><td id="L2129" class="css-a4x74f"><span>2129</span></td><td id="LC2129" class="css-1dcdqdg"><code>                          <span class="code-comment">// replace the function with the resolved component</span>
</code></td></tr><tr><td id="L2130" class="css-a4x74f"><span>2130</span></td><td id="LC2130" class="css-1dcdqdg"><code>                          <span class="code-comment">// cannot be null or undefined because we went into the for loop</span>
</code></td></tr><tr><td id="L2131" class="css-a4x74f"><span>2131</span></td><td id="LC2131" class="css-1dcdqdg"><code>                          record.components[name] = resolvedComponent;
</code></td></tr><tr><td id="L2132" class="css-a4x74f"><span>2132</span></td><td id="LC2132" class="css-1dcdqdg"><code>                          <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L2133" class="css-a4x74f"><span>2133</span></td><td id="LC2133" class="css-1dcdqdg"><code>                      }));
</code></td></tr><tr><td id="L2134" class="css-a4x74f"><span>2134</span></td><td id="LC2134" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2135" class="css-a4x74f"><span>2135</span></td><td id="LC2135" class="css-1dcdqdg"><code>                  <span class="code-keyword">return</span> promises;
</code></td></tr><tr><td id="L2136" class="css-a4x74f"><span>2136</span></td><td id="LC2136" class="css-1dcdqdg"><code>              }, [])))).then(<span class="code-function"><span class="code-params">()</span> =&gt;</span> route);
</code></td></tr><tr><td id="L2137" class="css-a4x74f"><span>2137</span></td><td id="LC2137" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2138" class="css-a4x74f"><span>2138</span></td><td id="LC2138" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2139" class="css-a4x74f"><span>2139</span></td><td id="LC2139" class="css-1dcdqdg"><code>  <span class="code-comment">// <span class="code-doctag">TODO:</span> we could allow currentRoute as a prop to expose `isActive` and</span>
</code></td></tr><tr><td id="L2140" class="css-a4x74f"><span>2140</span></td><td id="LC2140" class="css-1dcdqdg"><code>  <span class="code-comment">// `isExactActive` behavior should go through an RFC</span>
</code></td></tr><tr><td id="L2141" class="css-a4x74f"><span>2141</span></td><td id="LC2141" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">useLink</span>(<span class="code-params">props</span>) </span>{
</code></td></tr><tr><td id="L2142" class="css-a4x74f"><span>2142</span></td><td id="LC2142" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> router = vue.inject(routerKey);
</code></td></tr><tr><td id="L2143" class="css-a4x74f"><span>2143</span></td><td id="LC2143" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> currentRoute = vue.inject(routeLocationKey);
</code></td></tr><tr><td id="L2144" class="css-a4x74f"><span>2144</span></td><td id="LC2144" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> route = vue.computed(<span class="code-function"><span class="code-params">()</span> =&gt;</span> router.resolve(vue.unref(props.to)));
</code></td></tr><tr><td id="L2145" class="css-a4x74f"><span>2145</span></td><td id="LC2145" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> activeRecordIndex = vue.computed(<span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L2146" class="css-a4x74f"><span>2146</span></td><td id="LC2146" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> { matched } = route.value;
</code></td></tr><tr><td id="L2147" class="css-a4x74f"><span>2147</span></td><td id="LC2147" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> { length } = matched;
</code></td></tr><tr><td id="L2148" class="css-a4x74f"><span>2148</span></td><td id="LC2148" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> routeMatched = matched[length - <span class="code-number">1</span>];
</code></td></tr><tr><td id="L2149" class="css-a4x74f"><span>2149</span></td><td id="LC2149" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> currentMatched = currentRoute.matched;
</code></td></tr><tr><td id="L2150" class="css-a4x74f"><span>2150</span></td><td id="LC2150" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!routeMatched || !currentMatched.length)
</code></td></tr><tr><td id="L2151" class="css-a4x74f"><span>2151</span></td><td id="LC2151" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> <span class="code-number">-1</span>;
</code></td></tr><tr><td id="L2152" class="css-a4x74f"><span>2152</span></td><td id="LC2152" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> index = currentMatched.findIndex(isSameRouteRecord.bind(<span class="code-literal">null</span>, routeMatched));
</code></td></tr><tr><td id="L2153" class="css-a4x74f"><span>2153</span></td><td id="LC2153" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (index &gt; <span class="code-number">-1</span>)
</code></td></tr><tr><td id="L2154" class="css-a4x74f"><span>2154</span></td><td id="LC2154" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> index;
</code></td></tr><tr><td id="L2155" class="css-a4x74f"><span>2155</span></td><td id="LC2155" class="css-1dcdqdg"><code>          <span class="code-comment">// possible parent record</span>
</code></td></tr><tr><td id="L2156" class="css-a4x74f"><span>2156</span></td><td id="LC2156" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> parentRecordPath = getOriginalPath(matched[length - <span class="code-number">2</span>]);
</code></td></tr><tr><td id="L2157" class="css-a4x74f"><span>2157</span></td><td id="LC2157" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> (
</code></td></tr><tr><td id="L2158" class="css-a4x74f"><span>2158</span></td><td id="LC2158" class="css-1dcdqdg"><code>          <span class="code-comment">// we are dealing with nested routes</span>
</code></td></tr><tr><td id="L2159" class="css-a4x74f"><span>2159</span></td><td id="LC2159" class="css-1dcdqdg"><code>          length &gt; <span class="code-number">1</span> &amp;&amp;
</code></td></tr><tr><td id="L2160" class="css-a4x74f"><span>2160</span></td><td id="LC2160" class="css-1dcdqdg"><code>              <span class="code-comment">// if the parent and matched route have the same path, this link is</span>
</code></td></tr><tr><td id="L2161" class="css-a4x74f"><span>2161</span></td><td id="LC2161" class="css-1dcdqdg"><code>              <span class="code-comment">// referring to the empty child. Or we currently are on a different</span>
</code></td></tr><tr><td id="L2162" class="css-a4x74f"><span>2162</span></td><td id="LC2162" class="css-1dcdqdg"><code>              <span class="code-comment">// child of the same parent</span>
</code></td></tr><tr><td id="L2163" class="css-a4x74f"><span>2163</span></td><td id="LC2163" class="css-1dcdqdg"><code>              getOriginalPath(routeMatched) === parentRecordPath &amp;&amp;
</code></td></tr><tr><td id="L2164" class="css-a4x74f"><span>2164</span></td><td id="LC2164" class="css-1dcdqdg"><code>              <span class="code-comment">// avoid comparing the child with its parent</span>
</code></td></tr><tr><td id="L2165" class="css-a4x74f"><span>2165</span></td><td id="LC2165" class="css-1dcdqdg"><code>              currentMatched[currentMatched.length - <span class="code-number">1</span>].path !== parentRecordPath
</code></td></tr><tr><td id="L2166" class="css-a4x74f"><span>2166</span></td><td id="LC2166" class="css-1dcdqdg"><code>              ? currentMatched.findIndex(isSameRouteRecord.bind(<span class="code-literal">null</span>, matched[length - <span class="code-number">2</span>]))
</code></td></tr><tr><td id="L2167" class="css-a4x74f"><span>2167</span></td><td id="LC2167" class="css-1dcdqdg"><code>              : index);
</code></td></tr><tr><td id="L2168" class="css-a4x74f"><span>2168</span></td><td id="LC2168" class="css-1dcdqdg"><code>      });
</code></td></tr><tr><td id="L2169" class="css-a4x74f"><span>2169</span></td><td id="LC2169" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> isActive = vue.computed(<span class="code-function"><span class="code-params">()</span> =&gt;</span> activeRecordIndex.value &gt; <span class="code-number">-1</span> &amp;&amp;
</code></td></tr><tr><td id="L2170" class="css-a4x74f"><span>2170</span></td><td id="LC2170" class="css-1dcdqdg"><code>          includesParams(currentRoute.params, route.value.params));
</code></td></tr><tr><td id="L2171" class="css-a4x74f"><span>2171</span></td><td id="LC2171" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> isExactActive = vue.computed(<span class="code-function"><span class="code-params">()</span> =&gt;</span> activeRecordIndex.value &gt; <span class="code-number">-1</span> &amp;&amp;
</code></td></tr><tr><td id="L2172" class="css-a4x74f"><span>2172</span></td><td id="LC2172" class="css-1dcdqdg"><code>          activeRecordIndex.value === currentRoute.matched.length - <span class="code-number">1</span> &amp;&amp;
</code></td></tr><tr><td id="L2173" class="css-a4x74f"><span>2173</span></td><td id="LC2173" class="css-1dcdqdg"><code>          isSameRouteLocationParams(currentRoute.params, route.value.params));
</code></td></tr><tr><td id="L2174" class="css-a4x74f"><span>2174</span></td><td id="LC2174" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">navigate</span>(<span class="code-params">e = {}</span>) </span>{
</code></td></tr><tr><td id="L2175" class="css-a4x74f"><span>2175</span></td><td id="LC2175" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (guardEvent(e)) {
</code></td></tr><tr><td id="L2176" class="css-a4x74f"><span>2176</span></td><td id="LC2176" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> router[vue.unref(props.replace) ? <span class="code-string">'replace'</span> : <span class="code-string">'push'</span>](vue.unref(props.to)
</code></td></tr><tr><td id="L2177" class="css-a4x74f"><span>2177</span></td><td id="LC2177" class="css-1dcdqdg"><code>              <span class="code-comment">// avoid uncaught errors are they are logged anyway</span>
</code></td></tr><tr><td id="L2178" class="css-a4x74f"><span>2178</span></td><td id="LC2178" class="css-1dcdqdg"><code>              ).catch(noop);
</code></td></tr><tr><td id="L2179" class="css-a4x74f"><span>2179</span></td><td id="LC2179" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2180" class="css-a4x74f"><span>2180</span></td><td id="LC2180" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-built_in">Promise</span>.resolve();
</code></td></tr><tr><td id="L2181" class="css-a4x74f"><span>2181</span></td><td id="LC2181" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2182" class="css-a4x74f"><span>2182</span></td><td id="LC2182" class="css-1dcdqdg"><code>      <span class="code-comment">// devtools only</span>
</code></td></tr><tr><td id="L2183" class="css-a4x74f"><span>2183</span></td><td id="LC2183" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (isBrowser) {
</code></td></tr><tr><td id="L2184" class="css-a4x74f"><span>2184</span></td><td id="LC2184" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> instance = vue.getCurrentInstance();
</code></td></tr><tr><td id="L2185" class="css-a4x74f"><span>2185</span></td><td id="LC2185" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (instance) {
</code></td></tr><tr><td id="L2186" class="css-a4x74f"><span>2186</span></td><td id="LC2186" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> linkContextDevtools = {
</code></td></tr><tr><td id="L2187" class="css-a4x74f"><span>2187</span></td><td id="LC2187" class="css-1dcdqdg"><code>                  route: route.value,
</code></td></tr><tr><td id="L2188" class="css-a4x74f"><span>2188</span></td><td id="LC2188" class="css-1dcdqdg"><code>                  isActive: isActive.value,
</code></td></tr><tr><td id="L2189" class="css-a4x74f"><span>2189</span></td><td id="LC2189" class="css-1dcdqdg"><code>                  isExactActive: isExactActive.value,
</code></td></tr><tr><td id="L2190" class="css-a4x74f"><span>2190</span></td><td id="LC2190" class="css-1dcdqdg"><code>              };
</code></td></tr><tr><td id="L2191" class="css-a4x74f"><span>2191</span></td><td id="LC2191" class="css-1dcdqdg"><code>              <span class="code-comment">// @ts-expect-error: this is internal</span>
</code></td></tr><tr><td id="L2192" class="css-a4x74f"><span>2192</span></td><td id="LC2192" class="css-1dcdqdg"><code>              instance.__vrl_devtools = instance.__vrl_devtools || [];
</code></td></tr><tr><td id="L2193" class="css-a4x74f"><span>2193</span></td><td id="LC2193" class="css-1dcdqdg"><code>              <span class="code-comment">// @ts-expect-error: this is internal</span>
</code></td></tr><tr><td id="L2194" class="css-a4x74f"><span>2194</span></td><td id="LC2194" class="css-1dcdqdg"><code>              instance.__vrl_devtools.push(linkContextDevtools);
</code></td></tr><tr><td id="L2195" class="css-a4x74f"><span>2195</span></td><td id="LC2195" class="css-1dcdqdg"><code>              vue.watchEffect(<span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L2196" class="css-a4x74f"><span>2196</span></td><td id="LC2196" class="css-1dcdqdg"><code>                  linkContextDevtools.route = route.value;
</code></td></tr><tr><td id="L2197" class="css-a4x74f"><span>2197</span></td><td id="LC2197" class="css-1dcdqdg"><code>                  linkContextDevtools.isActive = isActive.value;
</code></td></tr><tr><td id="L2198" class="css-a4x74f"><span>2198</span></td><td id="LC2198" class="css-1dcdqdg"><code>                  linkContextDevtools.isExactActive = isExactActive.value;
</code></td></tr><tr><td id="L2199" class="css-a4x74f"><span>2199</span></td><td id="LC2199" class="css-1dcdqdg"><code>              }, { <span class="code-attr">flush</span>: <span class="code-string">'post'</span> });
</code></td></tr><tr><td id="L2200" class="css-a4x74f"><span>2200</span></td><td id="LC2200" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2201" class="css-a4x74f"><span>2201</span></td><td id="LC2201" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2202" class="css-a4x74f"><span>2202</span></td><td id="LC2202" class="css-1dcdqdg"><code>      <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2203" class="css-a4x74f"><span>2203</span></td><td id="LC2203" class="css-1dcdqdg"><code><span class="code-comment">       * <span class="code-doctag">NOTE:</span> update {@link _RouterLinkI}'s `$slots` type when updating this
</span></code></td></tr><tr><td id="L2204" class="css-a4x74f"><span>2204</span></td><td id="LC2204" class="css-1dcdqdg"><code><span class="code-comment">       */</span>
</code></td></tr><tr><td id="L2205" class="css-a4x74f"><span>2205</span></td><td id="LC2205" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> {
</code></td></tr><tr><td id="L2206" class="css-a4x74f"><span>2206</span></td><td id="LC2206" class="css-1dcdqdg"><code>          route,
</code></td></tr><tr><td id="L2207" class="css-a4x74f"><span>2207</span></td><td id="LC2207" class="css-1dcdqdg"><code>          href: vue.computed(<span class="code-function"><span class="code-params">()</span> =&gt;</span> route.value.href),
</code></td></tr><tr><td id="L2208" class="css-a4x74f"><span>2208</span></td><td id="LC2208" class="css-1dcdqdg"><code>          isActive,
</code></td></tr><tr><td id="L2209" class="css-a4x74f"><span>2209</span></td><td id="LC2209" class="css-1dcdqdg"><code>          isExactActive,
</code></td></tr><tr><td id="L2210" class="css-a4x74f"><span>2210</span></td><td id="LC2210" class="css-1dcdqdg"><code>          navigate,
</code></td></tr><tr><td id="L2211" class="css-a4x74f"><span>2211</span></td><td id="LC2211" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L2212" class="css-a4x74f"><span>2212</span></td><td id="LC2212" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2213" class="css-a4x74f"><span>2213</span></td><td id="LC2213" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> RouterLinkImpl = <span class="code-comment">/*#__PURE__*/</span> vue.defineComponent({
</code></td></tr><tr><td id="L2214" class="css-a4x74f"><span>2214</span></td><td id="LC2214" class="css-1dcdqdg"><code>      name: <span class="code-string">'RouterLink'</span>,
</code></td></tr><tr><td id="L2215" class="css-a4x74f"><span>2215</span></td><td id="LC2215" class="css-1dcdqdg"><code>      compatConfig: { <span class="code-attr">MODE</span>: <span class="code-number">3</span> },
</code></td></tr><tr><td id="L2216" class="css-a4x74f"><span>2216</span></td><td id="LC2216" class="css-1dcdqdg"><code>      props: {
</code></td></tr><tr><td id="L2217" class="css-a4x74f"><span>2217</span></td><td id="LC2217" class="css-1dcdqdg"><code>          to: {
</code></td></tr><tr><td id="L2218" class="css-a4x74f"><span>2218</span></td><td id="LC2218" class="css-1dcdqdg"><code>              type: [<span class="code-built_in">String</span>, <span class="code-built_in">Object</span>],
</code></td></tr><tr><td id="L2219" class="css-a4x74f"><span>2219</span></td><td id="LC2219" class="css-1dcdqdg"><code>              required: <span class="code-literal">true</span>,
</code></td></tr><tr><td id="L2220" class="css-a4x74f"><span>2220</span></td><td id="LC2220" class="css-1dcdqdg"><code>          },
</code></td></tr><tr><td id="L2221" class="css-a4x74f"><span>2221</span></td><td id="LC2221" class="css-1dcdqdg"><code>          replace: <span class="code-built_in">Boolean</span>,
</code></td></tr><tr><td id="L2222" class="css-a4x74f"><span>2222</span></td><td id="LC2222" class="css-1dcdqdg"><code>          activeClass: <span class="code-built_in">String</span>,
</code></td></tr><tr><td id="L2223" class="css-a4x74f"><span>2223</span></td><td id="LC2223" class="css-1dcdqdg"><code>          <span class="code-comment">// inactiveClass: String,</span>
</code></td></tr><tr><td id="L2224" class="css-a4x74f"><span>2224</span></td><td id="LC2224" class="css-1dcdqdg"><code>          exactActiveClass: <span class="code-built_in">String</span>,
</code></td></tr><tr><td id="L2225" class="css-a4x74f"><span>2225</span></td><td id="LC2225" class="css-1dcdqdg"><code>          custom: <span class="code-built_in">Boolean</span>,
</code></td></tr><tr><td id="L2226" class="css-a4x74f"><span>2226</span></td><td id="LC2226" class="css-1dcdqdg"><code>          ariaCurrentValue: {
</code></td></tr><tr><td id="L2227" class="css-a4x74f"><span>2227</span></td><td id="LC2227" class="css-1dcdqdg"><code>              type: <span class="code-built_in">String</span>,
</code></td></tr><tr><td id="L2228" class="css-a4x74f"><span>2228</span></td><td id="LC2228" class="css-1dcdqdg"><code>              <span class="code-keyword">default</span>: <span class="code-string">'page'</span>,
</code></td></tr><tr><td id="L2229" class="css-a4x74f"><span>2229</span></td><td id="LC2229" class="css-1dcdqdg"><code>          },
</code></td></tr><tr><td id="L2230" class="css-a4x74f"><span>2230</span></td><td id="LC2230" class="css-1dcdqdg"><code>      },
</code></td></tr><tr><td id="L2231" class="css-a4x74f"><span>2231</span></td><td id="LC2231" class="css-1dcdqdg"><code>      useLink,
</code></td></tr><tr><td id="L2232" class="css-a4x74f"><span>2232</span></td><td id="LC2232" class="css-1dcdqdg"><code>      setup(props, { slots }) {
</code></td></tr><tr><td id="L2233" class="css-a4x74f"><span>2233</span></td><td id="LC2233" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> link = vue.reactive(useLink(props));
</code></td></tr><tr><td id="L2234" class="css-a4x74f"><span>2234</span></td><td id="LC2234" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> { options } = vue.inject(routerKey);
</code></td></tr><tr><td id="L2235" class="css-a4x74f"><span>2235</span></td><td id="LC2235" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> elClass = vue.computed(<span class="code-function"><span class="code-params">()</span> =&gt;</span> ({
</code></td></tr><tr><td id="L2236" class="css-a4x74f"><span>2236</span></td><td id="LC2236" class="css-1dcdqdg"><code>              [getLinkClass(props.activeClass, options.linkActiveClass, <span class="code-string">'router-link-active'</span>)]: link.isActive,
</code></td></tr><tr><td id="L2237" class="css-a4x74f"><span>2237</span></td><td id="LC2237" class="css-1dcdqdg"><code>              <span class="code-comment">// [getLinkClass(</span>
</code></td></tr><tr><td id="L2238" class="css-a4x74f"><span>2238</span></td><td id="LC2238" class="css-1dcdqdg"><code>              <span class="code-comment">//   props.inactiveClass,</span>
</code></td></tr><tr><td id="L2239" class="css-a4x74f"><span>2239</span></td><td id="LC2239" class="css-1dcdqdg"><code>              <span class="code-comment">//   options.linkInactiveClass,</span>
</code></td></tr><tr><td id="L2240" class="css-a4x74f"><span>2240</span></td><td id="LC2240" class="css-1dcdqdg"><code>              <span class="code-comment">//   'router-link-inactive'</span>
</code></td></tr><tr><td id="L2241" class="css-a4x74f"><span>2241</span></td><td id="LC2241" class="css-1dcdqdg"><code>              <span class="code-comment">// )]: !link.isExactActive,</span>
</code></td></tr><tr><td id="L2242" class="css-a4x74f"><span>2242</span></td><td id="LC2242" class="css-1dcdqdg"><code>              [getLinkClass(props.exactActiveClass, options.linkExactActiveClass, <span class="code-string">'router-link-exact-active'</span>)]: link.isExactActive,
</code></td></tr><tr><td id="L2243" class="css-a4x74f"><span>2243</span></td><td id="LC2243" class="css-1dcdqdg"><code>          }));
</code></td></tr><tr><td id="L2244" class="css-a4x74f"><span>2244</span></td><td id="LC2244" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L2245" class="css-a4x74f"><span>2245</span></td><td id="LC2245" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> children = slots.default &amp;&amp; slots.default(link);
</code></td></tr><tr><td id="L2246" class="css-a4x74f"><span>2246</span></td><td id="LC2246" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> props.custom
</code></td></tr><tr><td id="L2247" class="css-a4x74f"><span>2247</span></td><td id="LC2247" class="css-1dcdqdg"><code>                  ? children
</code></td></tr><tr><td id="L2248" class="css-a4x74f"><span>2248</span></td><td id="LC2248" class="css-1dcdqdg"><code>                  : vue.h(<span class="code-string">'a'</span>, {
</code></td></tr><tr><td id="L2249" class="css-a4x74f"><span>2249</span></td><td id="LC2249" class="css-1dcdqdg"><code>                      <span class="code-string">'aria-current'</span>: link.isExactActive
</code></td></tr><tr><td id="L2250" class="css-a4x74f"><span>2250</span></td><td id="LC2250" class="css-1dcdqdg"><code>                          ? props.ariaCurrentValue
</code></td></tr><tr><td id="L2251" class="css-a4x74f"><span>2251</span></td><td id="LC2251" class="css-1dcdqdg"><code>                          : <span class="code-literal">null</span>,
</code></td></tr><tr><td id="L2252" class="css-a4x74f"><span>2252</span></td><td id="LC2252" class="css-1dcdqdg"><code>                      href: link.href,
</code></td></tr><tr><td id="L2253" class="css-a4x74f"><span>2253</span></td><td id="LC2253" class="css-1dcdqdg"><code>                      <span class="code-comment">// this would override user added attrs but Vue will still add</span>
</code></td></tr><tr><td id="L2254" class="css-a4x74f"><span>2254</span></td><td id="LC2254" class="css-1dcdqdg"><code>                      <span class="code-comment">// the listener, so we end up triggering both</span>
</code></td></tr><tr><td id="L2255" class="css-a4x74f"><span>2255</span></td><td id="LC2255" class="css-1dcdqdg"><code>                      onClick: link.navigate,
</code></td></tr><tr><td id="L2256" class="css-a4x74f"><span>2256</span></td><td id="LC2256" class="css-1dcdqdg"><code>                      class: elClass.value,
</code></td></tr><tr><td id="L2257" class="css-a4x74f"><span>2257</span></td><td id="LC2257" class="css-1dcdqdg"><code>                  }, children);
</code></td></tr><tr><td id="L2258" class="css-a4x74f"><span>2258</span></td><td id="LC2258" class="css-1dcdqdg"><code>          };
</code></td></tr><tr><td id="L2259" class="css-a4x74f"><span>2259</span></td><td id="LC2259" class="css-1dcdqdg"><code>      },
</code></td></tr><tr><td id="L2260" class="css-a4x74f"><span>2260</span></td><td id="LC2260" class="css-1dcdqdg"><code>  });
</code></td></tr><tr><td id="L2261" class="css-a4x74f"><span>2261</span></td><td id="LC2261" class="css-1dcdqdg"><code>  <span class="code-comment">// export the public type for h/tsx inference</span>
</code></td></tr><tr><td id="L2262" class="css-a4x74f"><span>2262</span></td><td id="LC2262" class="css-1dcdqdg"><code>  <span class="code-comment">// also to avoid inline import() in generated d.ts files</span>
</code></td></tr><tr><td id="L2263" class="css-a4x74f"><span>2263</span></td><td id="LC2263" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2264" class="css-a4x74f"><span>2264</span></td><td id="LC2264" class="css-1dcdqdg"><code><span class="code-comment">   * Component to render a link that triggers a navigation on click.
</span></code></td></tr><tr><td id="L2265" class="css-a4x74f"><span>2265</span></td><td id="LC2265" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L2266" class="css-a4x74f"><span>2266</span></td><td id="LC2266" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> RouterLink = RouterLinkImpl;
</code></td></tr><tr><td id="L2267" class="css-a4x74f"><span>2267</span></td><td id="LC2267" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">guardEvent</span>(<span class="code-params">e</span>) </span>{
</code></td></tr><tr><td id="L2268" class="css-a4x74f"><span>2268</span></td><td id="LC2268" class="css-1dcdqdg"><code>      <span class="code-comment">// don't redirect with control keys</span>
</code></td></tr><tr><td id="L2269" class="css-a4x74f"><span>2269</span></td><td id="LC2269" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey)
</code></td></tr><tr><td id="L2270" class="css-a4x74f"><span>2270</span></td><td id="LC2270" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L2271" class="css-a4x74f"><span>2271</span></td><td id="LC2271" class="css-1dcdqdg"><code>      <span class="code-comment">// don't redirect when preventDefault called</span>
</code></td></tr><tr><td id="L2272" class="css-a4x74f"><span>2272</span></td><td id="LC2272" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (e.defaultPrevented)
</code></td></tr><tr><td id="L2273" class="css-a4x74f"><span>2273</span></td><td id="LC2273" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L2274" class="css-a4x74f"><span>2274</span></td><td id="LC2274" class="css-1dcdqdg"><code>      <span class="code-comment">// don't redirect on right click</span>
</code></td></tr><tr><td id="L2275" class="css-a4x74f"><span>2275</span></td><td id="LC2275" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (e.button !== <span class="code-literal">undefined</span> &amp;&amp; e.button !== <span class="code-number">0</span>)
</code></td></tr><tr><td id="L2276" class="css-a4x74f"><span>2276</span></td><td id="LC2276" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L2277" class="css-a4x74f"><span>2277</span></td><td id="LC2277" class="css-1dcdqdg"><code>      <span class="code-comment">// don't redirect if `target="_blank"`</span>
</code></td></tr><tr><td id="L2278" class="css-a4x74f"><span>2278</span></td><td id="LC2278" class="css-1dcdqdg"><code>      <span class="code-comment">// @ts-expect-error getAttribute does exist</span>
</code></td></tr><tr><td id="L2279" class="css-a4x74f"><span>2279</span></td><td id="LC2279" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (e.currentTarget &amp;&amp; e.currentTarget.getAttribute) {
</code></td></tr><tr><td id="L2280" class="css-a4x74f"><span>2280</span></td><td id="LC2280" class="css-1dcdqdg"><code>          <span class="code-comment">// @ts-expect-error getAttribute exists</span>
</code></td></tr><tr><td id="L2281" class="css-a4x74f"><span>2281</span></td><td id="LC2281" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> target = e.currentTarget.getAttribute(<span class="code-string">'target'</span>);
</code></td></tr><tr><td id="L2282" class="css-a4x74f"><span>2282</span></td><td id="LC2282" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (<span class="code-regexp">/\b_blank\b/i</span>.test(target))
</code></td></tr><tr><td id="L2283" class="css-a4x74f"><span>2283</span></td><td id="LC2283" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L2284" class="css-a4x74f"><span>2284</span></td><td id="LC2284" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2285" class="css-a4x74f"><span>2285</span></td><td id="LC2285" class="css-1dcdqdg"><code>      <span class="code-comment">// this may be a Weex event which doesn't have this method</span>
</code></td></tr><tr><td id="L2286" class="css-a4x74f"><span>2286</span></td><td id="LC2286" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (e.preventDefault)
</code></td></tr><tr><td id="L2287" class="css-a4x74f"><span>2287</span></td><td id="LC2287" class="css-1dcdqdg"><code>          e.preventDefault();
</code></td></tr><tr><td id="L2288" class="css-a4x74f"><span>2288</span></td><td id="LC2288" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L2289" class="css-a4x74f"><span>2289</span></td><td id="LC2289" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2290" class="css-a4x74f"><span>2290</span></td><td id="LC2290" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">includesParams</span>(<span class="code-params">outer, inner</span>) </span>{
</code></td></tr><tr><td id="L2291" class="css-a4x74f"><span>2291</span></td><td id="LC2291" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">const</span> key <span class="code-keyword">in</span> inner) {
</code></td></tr><tr><td id="L2292" class="css-a4x74f"><span>2292</span></td><td id="LC2292" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> innerValue = inner[key];
</code></td></tr><tr><td id="L2293" class="css-a4x74f"><span>2293</span></td><td id="LC2293" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> outerValue = outer[key];
</code></td></tr><tr><td id="L2294" class="css-a4x74f"><span>2294</span></td><td id="LC2294" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (<span class="code-keyword">typeof</span> innerValue === <span class="code-string">'string'</span>) {
</code></td></tr><tr><td id="L2295" class="css-a4x74f"><span>2295</span></td><td id="LC2295" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (innerValue !== outerValue)
</code></td></tr><tr><td id="L2296" class="css-a4x74f"><span>2296</span></td><td id="LC2296" class="css-1dcdqdg"><code>                  <span class="code-keyword">return</span> <span class="code-literal">false</span>;
</code></td></tr><tr><td id="L2297" class="css-a4x74f"><span>2297</span></td><td id="LC2297" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2298" class="css-a4x74f"><span>2298</span></td><td id="LC2298" class="css-1dcdqdg"><code>          <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L2299" class="css-a4x74f"><span>2299</span></td><td id="LC2299" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (!isArray(outerValue) ||
</code></td></tr><tr><td id="L2300" class="css-a4x74f"><span>2300</span></td><td id="LC2300" class="css-1dcdqdg"><code>                  outerValue.length !== innerValue.length ||
</code></td></tr><tr><td id="L2301" class="css-a4x74f"><span>2301</span></td><td id="LC2301" class="css-1dcdqdg"><code>                  innerValue.some(<span class="code-function">(<span class="code-params">value, i</span>) =&gt;</span> value !== outerValue[i]))
</code></td></tr><tr><td id="L2302" class="css-a4x74f"><span>2302</span></td><td id="LC2302" class="css-1dcdqdg"><code>                  <span class="code-keyword">return</span> <span class="code-literal">false</span>;
</code></td></tr><tr><td id="L2303" class="css-a4x74f"><span>2303</span></td><td id="LC2303" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2304" class="css-a4x74f"><span>2304</span></td><td id="LC2304" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2305" class="css-a4x74f"><span>2305</span></td><td id="LC2305" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L2306" class="css-a4x74f"><span>2306</span></td><td id="LC2306" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2307" class="css-a4x74f"><span>2307</span></td><td id="LC2307" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2308" class="css-a4x74f"><span>2308</span></td><td id="LC2308" class="css-1dcdqdg"><code><span class="code-comment">   * Get the original path value of a record by following its aliasOf
</span></code></td></tr><tr><td id="L2309" class="css-a4x74f"><span>2309</span></td><td id="LC2309" class="css-1dcdqdg"><code><span class="code-comment">   * @param record
</span></code></td></tr><tr><td id="L2310" class="css-a4x74f"><span>2310</span></td><td id="LC2310" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L2311" class="css-a4x74f"><span>2311</span></td><td id="LC2311" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">getOriginalPath</span>(<span class="code-params">record</span>) </span>{
</code></td></tr><tr><td id="L2312" class="css-a4x74f"><span>2312</span></td><td id="LC2312" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> record ? (record.aliasOf ? record.aliasOf.path : record.path) : <span class="code-string">''</span>;
</code></td></tr><tr><td id="L2313" class="css-a4x74f"><span>2313</span></td><td id="LC2313" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2314" class="css-a4x74f"><span>2314</span></td><td id="LC2314" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2315" class="css-a4x74f"><span>2315</span></td><td id="LC2315" class="css-1dcdqdg"><code><span class="code-comment">   * Utility class to get the active class based on defaults.
</span></code></td></tr><tr><td id="L2316" class="css-a4x74f"><span>2316</span></td><td id="LC2316" class="css-1dcdqdg"><code><span class="code-comment">   * @param propClass
</span></code></td></tr><tr><td id="L2317" class="css-a4x74f"><span>2317</span></td><td id="LC2317" class="css-1dcdqdg"><code><span class="code-comment">   * @param globalClass
</span></code></td></tr><tr><td id="L2318" class="css-a4x74f"><span>2318</span></td><td id="LC2318" class="css-1dcdqdg"><code><span class="code-comment">   * @param defaultClass
</span></code></td></tr><tr><td id="L2319" class="css-a4x74f"><span>2319</span></td><td id="LC2319" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L2320" class="css-a4x74f"><span>2320</span></td><td id="LC2320" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> getLinkClass = <span class="code-function">(<span class="code-params">propClass, globalClass, defaultClass</span>) =&gt;</span> propClass != <span class="code-literal">null</span>
</code></td></tr><tr><td id="L2321" class="css-a4x74f"><span>2321</span></td><td id="LC2321" class="css-1dcdqdg"><code>      ? propClass
</code></td></tr><tr><td id="L2322" class="css-a4x74f"><span>2322</span></td><td id="LC2322" class="css-1dcdqdg"><code>      : globalClass != <span class="code-literal">null</span>
</code></td></tr><tr><td id="L2323" class="css-a4x74f"><span>2323</span></td><td id="LC2323" class="css-1dcdqdg"><code>          ? globalClass
</code></td></tr><tr><td id="L2324" class="css-a4x74f"><span>2324</span></td><td id="LC2324" class="css-1dcdqdg"><code>          : defaultClass;
</code></td></tr><tr><td id="L2325" class="css-a4x74f"><span>2325</span></td><td id="LC2325" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2326" class="css-a4x74f"><span>2326</span></td><td id="LC2326" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> RouterViewImpl = <span class="code-comment">/*#__PURE__*/</span> vue.defineComponent({
</code></td></tr><tr><td id="L2327" class="css-a4x74f"><span>2327</span></td><td id="LC2327" class="css-1dcdqdg"><code>      name: <span class="code-string">'RouterView'</span>,
</code></td></tr><tr><td id="L2328" class="css-a4x74f"><span>2328</span></td><td id="LC2328" class="css-1dcdqdg"><code>      <span class="code-comment">// #674 we manually inherit them</span>
</code></td></tr><tr><td id="L2329" class="css-a4x74f"><span>2329</span></td><td id="LC2329" class="css-1dcdqdg"><code>      inheritAttrs: <span class="code-literal">false</span>,
</code></td></tr><tr><td id="L2330" class="css-a4x74f"><span>2330</span></td><td id="LC2330" class="css-1dcdqdg"><code>      props: {
</code></td></tr><tr><td id="L2331" class="css-a4x74f"><span>2331</span></td><td id="LC2331" class="css-1dcdqdg"><code>          name: {
</code></td></tr><tr><td id="L2332" class="css-a4x74f"><span>2332</span></td><td id="LC2332" class="css-1dcdqdg"><code>              type: <span class="code-built_in">String</span>,
</code></td></tr><tr><td id="L2333" class="css-a4x74f"><span>2333</span></td><td id="LC2333" class="css-1dcdqdg"><code>              <span class="code-keyword">default</span>: <span class="code-string">'default'</span>,
</code></td></tr><tr><td id="L2334" class="css-a4x74f"><span>2334</span></td><td id="LC2334" class="css-1dcdqdg"><code>          },
</code></td></tr><tr><td id="L2335" class="css-a4x74f"><span>2335</span></td><td id="LC2335" class="css-1dcdqdg"><code>          route: <span class="code-built_in">Object</span>,
</code></td></tr><tr><td id="L2336" class="css-a4x74f"><span>2336</span></td><td id="LC2336" class="css-1dcdqdg"><code>      },
</code></td></tr><tr><td id="L2337" class="css-a4x74f"><span>2337</span></td><td id="LC2337" class="css-1dcdqdg"><code>      <span class="code-comment">// Better compat for @vue/compat users</span>
</code></td></tr><tr><td id="L2338" class="css-a4x74f"><span>2338</span></td><td id="LC2338" class="css-1dcdqdg"><code>      <span class="code-comment">// https://github.com/vuejs/router/issues/1315</span>
</code></td></tr><tr><td id="L2339" class="css-a4x74f"><span>2339</span></td><td id="LC2339" class="css-1dcdqdg"><code>      compatConfig: { <span class="code-attr">MODE</span>: <span class="code-number">3</span> },
</code></td></tr><tr><td id="L2340" class="css-a4x74f"><span>2340</span></td><td id="LC2340" class="css-1dcdqdg"><code>      setup(props, { attrs, slots }) {
</code></td></tr><tr><td id="L2341" class="css-a4x74f"><span>2341</span></td><td id="LC2341" class="css-1dcdqdg"><code>          warnDeprecatedUsage();
</code></td></tr><tr><td id="L2342" class="css-a4x74f"><span>2342</span></td><td id="LC2342" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> injectedRoute = vue.inject(routerViewLocationKey);
</code></td></tr><tr><td id="L2343" class="css-a4x74f"><span>2343</span></td><td id="LC2343" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> routeToDisplay = vue.computed(<span class="code-function"><span class="code-params">()</span> =&gt;</span> props.route || injectedRoute.value);
</code></td></tr><tr><td id="L2344" class="css-a4x74f"><span>2344</span></td><td id="LC2344" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> injectedDepth = vue.inject(viewDepthKey, <span class="code-number">0</span>);
</code></td></tr><tr><td id="L2345" class="css-a4x74f"><span>2345</span></td><td id="LC2345" class="css-1dcdqdg"><code>          <span class="code-comment">// The depth changes based on empty components option, which allows passthrough routes e.g. routes with children</span>
</code></td></tr><tr><td id="L2346" class="css-a4x74f"><span>2346</span></td><td id="LC2346" class="css-1dcdqdg"><code>          <span class="code-comment">// that are used to reuse the `path` property</span>
</code></td></tr><tr><td id="L2347" class="css-a4x74f"><span>2347</span></td><td id="LC2347" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> depth = vue.computed(<span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L2348" class="css-a4x74f"><span>2348</span></td><td id="LC2348" class="css-1dcdqdg"><code>              <span class="code-keyword">let</span> initialDepth = vue.unref(injectedDepth);
</code></td></tr><tr><td id="L2349" class="css-a4x74f"><span>2349</span></td><td id="LC2349" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> { matched } = routeToDisplay.value;
</code></td></tr><tr><td id="L2350" class="css-a4x74f"><span>2350</span></td><td id="LC2350" class="css-1dcdqdg"><code>              <span class="code-keyword">let</span> matchedRoute;
</code></td></tr><tr><td id="L2351" class="css-a4x74f"><span>2351</span></td><td id="LC2351" class="css-1dcdqdg"><code>              <span class="code-keyword">while</span> ((matchedRoute = matched[initialDepth]) &amp;&amp;
</code></td></tr><tr><td id="L2352" class="css-a4x74f"><span>2352</span></td><td id="LC2352" class="css-1dcdqdg"><code>                  !matchedRoute.components) {
</code></td></tr><tr><td id="L2353" class="css-a4x74f"><span>2353</span></td><td id="LC2353" class="css-1dcdqdg"><code>                  initialDepth++;
</code></td></tr><tr><td id="L2354" class="css-a4x74f"><span>2354</span></td><td id="LC2354" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2355" class="css-a4x74f"><span>2355</span></td><td id="LC2355" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> initialDepth;
</code></td></tr><tr><td id="L2356" class="css-a4x74f"><span>2356</span></td><td id="LC2356" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2357" class="css-a4x74f"><span>2357</span></td><td id="LC2357" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> matchedRouteRef = vue.computed(<span class="code-function"><span class="code-params">()</span> =&gt;</span> routeToDisplay.value.matched[depth.value]);
</code></td></tr><tr><td id="L2358" class="css-a4x74f"><span>2358</span></td><td id="LC2358" class="css-1dcdqdg"><code>          vue.provide(viewDepthKey, vue.computed(<span class="code-function"><span class="code-params">()</span> =&gt;</span> depth.value + <span class="code-number">1</span>));
</code></td></tr><tr><td id="L2359" class="css-a4x74f"><span>2359</span></td><td id="LC2359" class="css-1dcdqdg"><code>          vue.provide(matchedRouteKey, matchedRouteRef);
</code></td></tr><tr><td id="L2360" class="css-a4x74f"><span>2360</span></td><td id="LC2360" class="css-1dcdqdg"><code>          vue.provide(routerViewLocationKey, routeToDisplay);
</code></td></tr><tr><td id="L2361" class="css-a4x74f"><span>2361</span></td><td id="LC2361" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> viewRef = vue.ref();
</code></td></tr><tr><td id="L2362" class="css-a4x74f"><span>2362</span></td><td id="LC2362" class="css-1dcdqdg"><code>          <span class="code-comment">// watch at the same time the component instance, the route record we are</span>
</code></td></tr><tr><td id="L2363" class="css-a4x74f"><span>2363</span></td><td id="LC2363" class="css-1dcdqdg"><code>          <span class="code-comment">// rendering, and the name</span>
</code></td></tr><tr><td id="L2364" class="css-a4x74f"><span>2364</span></td><td id="LC2364" class="css-1dcdqdg"><code>          vue.watch(<span class="code-function"><span class="code-params">()</span> =&gt;</span> [viewRef.value, matchedRouteRef.value, props.name], ([instance, to, name], [oldInstance, <span class="code-keyword">from</span>, oldName]) =&gt; {
</code></td></tr><tr><td id="L2365" class="css-a4x74f"><span>2365</span></td><td id="LC2365" class="css-1dcdqdg"><code>              <span class="code-comment">// copy reused instances</span>
</code></td></tr><tr><td id="L2366" class="css-a4x74f"><span>2366</span></td><td id="LC2366" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (to) {
</code></td></tr><tr><td id="L2367" class="css-a4x74f"><span>2367</span></td><td id="LC2367" class="css-1dcdqdg"><code>                  <span class="code-comment">// this will update the instance for new instances as well as reused</span>
</code></td></tr><tr><td id="L2368" class="css-a4x74f"><span>2368</span></td><td id="LC2368" class="css-1dcdqdg"><code>                  <span class="code-comment">// instances when navigating to a new route</span>
</code></td></tr><tr><td id="L2369" class="css-a4x74f"><span>2369</span></td><td id="LC2369" class="css-1dcdqdg"><code>                  to.instances[name] = instance;
</code></td></tr><tr><td id="L2370" class="css-a4x74f"><span>2370</span></td><td id="LC2370" class="css-1dcdqdg"><code>                  <span class="code-comment">// the component instance is reused for a different route or name, so</span>
</code></td></tr><tr><td id="L2371" class="css-a4x74f"><span>2371</span></td><td id="LC2371" class="css-1dcdqdg"><code>                  <span class="code-comment">// we copy any saved update or leave guards. With async setup, the</span>
</code></td></tr><tr><td id="L2372" class="css-a4x74f"><span>2372</span></td><td id="LC2372" class="css-1dcdqdg"><code>                  <span class="code-comment">// mounting component will mount before the matchedRoute changes,</span>
</code></td></tr><tr><td id="L2373" class="css-a4x74f"><span>2373</span></td><td id="LC2373" class="css-1dcdqdg"><code>                  <span class="code-comment">// making instance === oldInstance, so we check if guards have been</span>
</code></td></tr><tr><td id="L2374" class="css-a4x74f"><span>2374</span></td><td id="LC2374" class="css-1dcdqdg"><code>                  <span class="code-comment">// added before. This works because we remove guards when</span>
</code></td></tr><tr><td id="L2375" class="css-a4x74f"><span>2375</span></td><td id="LC2375" class="css-1dcdqdg"><code>                  <span class="code-comment">// unmounting/deactivating components</span>
</code></td></tr><tr><td id="L2376" class="css-a4x74f"><span>2376</span></td><td id="LC2376" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (<span class="code-keyword">from</span> &amp;&amp; <span class="code-keyword">from</span> !== to &amp;&amp; instance &amp;&amp; instance === oldInstance) {
</code></td></tr><tr><td id="L2377" class="css-a4x74f"><span>2377</span></td><td id="LC2377" class="css-1dcdqdg"><code>                      <span class="code-keyword">if</span> (!to.leaveGuards.size) {
</code></td></tr><tr><td id="L2378" class="css-a4x74f"><span>2378</span></td><td id="LC2378" class="css-1dcdqdg"><code>                          to.leaveGuards = <span class="code-keyword">from</span>.leaveGuards;
</code></td></tr><tr><td id="L2379" class="css-a4x74f"><span>2379</span></td><td id="LC2379" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L2380" class="css-a4x74f"><span>2380</span></td><td id="LC2380" class="css-1dcdqdg"><code>                      <span class="code-keyword">if</span> (!to.updateGuards.size) {
</code></td></tr><tr><td id="L2381" class="css-a4x74f"><span>2381</span></td><td id="LC2381" class="css-1dcdqdg"><code>                          to.updateGuards = <span class="code-keyword">from</span>.updateGuards;
</code></td></tr><tr><td id="L2382" class="css-a4x74f"><span>2382</span></td><td id="LC2382" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L2383" class="css-a4x74f"><span>2383</span></td><td id="LC2383" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2384" class="css-a4x74f"><span>2384</span></td><td id="LC2384" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2385" class="css-a4x74f"><span>2385</span></td><td id="LC2385" class="css-1dcdqdg"><code>              <span class="code-comment">// trigger beforeRouteEnter next callbacks</span>
</code></td></tr><tr><td id="L2386" class="css-a4x74f"><span>2386</span></td><td id="LC2386" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (instance &amp;&amp;
</code></td></tr><tr><td id="L2387" class="css-a4x74f"><span>2387</span></td><td id="LC2387" class="css-1dcdqdg"><code>                  to &amp;&amp;
</code></td></tr><tr><td id="L2388" class="css-a4x74f"><span>2388</span></td><td id="LC2388" class="css-1dcdqdg"><code>                  <span class="code-comment">// if there is no instance but to and from are the same this might be</span>
</code></td></tr><tr><td id="L2389" class="css-a4x74f"><span>2389</span></td><td id="LC2389" class="css-1dcdqdg"><code>                  <span class="code-comment">// the first visit</span>
</code></td></tr><tr><td id="L2390" class="css-a4x74f"><span>2390</span></td><td id="LC2390" class="css-1dcdqdg"><code>                  (!<span class="code-keyword">from</span> || !isSameRouteRecord(to, <span class="code-keyword">from</span>) || !oldInstance)) {
</code></td></tr><tr><td id="L2391" class="css-a4x74f"><span>2391</span></td><td id="LC2391" class="css-1dcdqdg"><code>                  (to.enterCallbacks[name] || []).forEach(<span class="code-function"><span class="code-params">callback</span> =&gt;</span> callback(instance));
</code></td></tr><tr><td id="L2392" class="css-a4x74f"><span>2392</span></td><td id="LC2392" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2393" class="css-a4x74f"><span>2393</span></td><td id="LC2393" class="css-1dcdqdg"><code>          }, { <span class="code-attr">flush</span>: <span class="code-string">'post'</span> });
</code></td></tr><tr><td id="L2394" class="css-a4x74f"><span>2394</span></td><td id="LC2394" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L2395" class="css-a4x74f"><span>2395</span></td><td id="LC2395" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> route = routeToDisplay.value;
</code></td></tr><tr><td id="L2396" class="css-a4x74f"><span>2396</span></td><td id="LC2396" class="css-1dcdqdg"><code>              <span class="code-comment">// we need the value at the time we render because when we unmount, we</span>
</code></td></tr><tr><td id="L2397" class="css-a4x74f"><span>2397</span></td><td id="LC2397" class="css-1dcdqdg"><code>              <span class="code-comment">// navigated to a different location so the value is different</span>
</code></td></tr><tr><td id="L2398" class="css-a4x74f"><span>2398</span></td><td id="LC2398" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> currentName = props.name;
</code></td></tr><tr><td id="L2399" class="css-a4x74f"><span>2399</span></td><td id="LC2399" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> matchedRoute = matchedRouteRef.value;
</code></td></tr><tr><td id="L2400" class="css-a4x74f"><span>2400</span></td><td id="LC2400" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> ViewComponent = matchedRoute &amp;&amp; matchedRoute.components[currentName];
</code></td></tr><tr><td id="L2401" class="css-a4x74f"><span>2401</span></td><td id="LC2401" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (!ViewComponent) {
</code></td></tr><tr><td id="L2402" class="css-a4x74f"><span>2402</span></td><td id="LC2402" class="css-1dcdqdg"><code>                  <span class="code-keyword">return</span> normalizeSlot(slots.default, { <span class="code-attr">Component</span>: ViewComponent, route });
</code></td></tr><tr><td id="L2403" class="css-a4x74f"><span>2403</span></td><td id="LC2403" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2404" class="css-a4x74f"><span>2404</span></td><td id="LC2404" class="css-1dcdqdg"><code>              <span class="code-comment">// props from route configuration</span>
</code></td></tr><tr><td id="L2405" class="css-a4x74f"><span>2405</span></td><td id="LC2405" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> routePropsOption = matchedRoute.props[currentName];
</code></td></tr><tr><td id="L2406" class="css-a4x74f"><span>2406</span></td><td id="LC2406" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> routeProps = routePropsOption
</code></td></tr><tr><td id="L2407" class="css-a4x74f"><span>2407</span></td><td id="LC2407" class="css-1dcdqdg"><code>                  ? routePropsOption === <span class="code-literal">true</span>
</code></td></tr><tr><td id="L2408" class="css-a4x74f"><span>2408</span></td><td id="LC2408" class="css-1dcdqdg"><code>                      ? route.params
</code></td></tr><tr><td id="L2409" class="css-a4x74f"><span>2409</span></td><td id="LC2409" class="css-1dcdqdg"><code>                      : <span class="code-keyword">typeof</span> routePropsOption === <span class="code-string">'function'</span>
</code></td></tr><tr><td id="L2410" class="css-a4x74f"><span>2410</span></td><td id="LC2410" class="css-1dcdqdg"><code>                          ? routePropsOption(route)
</code></td></tr><tr><td id="L2411" class="css-a4x74f"><span>2411</span></td><td id="LC2411" class="css-1dcdqdg"><code>                          : routePropsOption
</code></td></tr><tr><td id="L2412" class="css-a4x74f"><span>2412</span></td><td id="LC2412" class="css-1dcdqdg"><code>                  : <span class="code-literal">null</span>;
</code></td></tr><tr><td id="L2413" class="css-a4x74f"><span>2413</span></td><td id="LC2413" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> onVnodeUnmounted = <span class="code-function"><span class="code-params">vnode</span> =&gt;</span> {
</code></td></tr><tr><td id="L2414" class="css-a4x74f"><span>2414</span></td><td id="LC2414" class="css-1dcdqdg"><code>                  <span class="code-comment">// remove the instance reference to prevent leak</span>
</code></td></tr><tr><td id="L2415" class="css-a4x74f"><span>2415</span></td><td id="LC2415" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (vnode.component.isUnmounted) {
</code></td></tr><tr><td id="L2416" class="css-a4x74f"><span>2416</span></td><td id="LC2416" class="css-1dcdqdg"><code>                      matchedRoute.instances[currentName] = <span class="code-literal">null</span>;
</code></td></tr><tr><td id="L2417" class="css-a4x74f"><span>2417</span></td><td id="LC2417" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2418" class="css-a4x74f"><span>2418</span></td><td id="LC2418" class="css-1dcdqdg"><code>              };
</code></td></tr><tr><td id="L2419" class="css-a4x74f"><span>2419</span></td><td id="LC2419" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> component = vue.h(ViewComponent, assign({}, routeProps, attrs, {
</code></td></tr><tr><td id="L2420" class="css-a4x74f"><span>2420</span></td><td id="LC2420" class="css-1dcdqdg"><code>                  onVnodeUnmounted,
</code></td></tr><tr><td id="L2421" class="css-a4x74f"><span>2421</span></td><td id="LC2421" class="css-1dcdqdg"><code>                  ref: viewRef,
</code></td></tr><tr><td id="L2422" class="css-a4x74f"><span>2422</span></td><td id="LC2422" class="css-1dcdqdg"><code>              }));
</code></td></tr><tr><td id="L2423" class="css-a4x74f"><span>2423</span></td><td id="LC2423" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (isBrowser &amp;&amp;
</code></td></tr><tr><td id="L2424" class="css-a4x74f"><span>2424</span></td><td id="LC2424" class="css-1dcdqdg"><code>                  component.ref) {
</code></td></tr><tr><td id="L2425" class="css-a4x74f"><span>2425</span></td><td id="LC2425" class="css-1dcdqdg"><code>                  <span class="code-comment">// <span class="code-doctag">TODO:</span> can display if it's an alias, its props</span>
</code></td></tr><tr><td id="L2426" class="css-a4x74f"><span>2426</span></td><td id="LC2426" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> info = {
</code></td></tr><tr><td id="L2427" class="css-a4x74f"><span>2427</span></td><td id="LC2427" class="css-1dcdqdg"><code>                      depth: depth.value,
</code></td></tr><tr><td id="L2428" class="css-a4x74f"><span>2428</span></td><td id="LC2428" class="css-1dcdqdg"><code>                      name: matchedRoute.name,
</code></td></tr><tr><td id="L2429" class="css-a4x74f"><span>2429</span></td><td id="LC2429" class="css-1dcdqdg"><code>                      path: matchedRoute.path,
</code></td></tr><tr><td id="L2430" class="css-a4x74f"><span>2430</span></td><td id="LC2430" class="css-1dcdqdg"><code>                      meta: matchedRoute.meta,
</code></td></tr><tr><td id="L2431" class="css-a4x74f"><span>2431</span></td><td id="LC2431" class="css-1dcdqdg"><code>                  };
</code></td></tr><tr><td id="L2432" class="css-a4x74f"><span>2432</span></td><td id="LC2432" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> internalInstances = isArray(component.ref)
</code></td></tr><tr><td id="L2433" class="css-a4x74f"><span>2433</span></td><td id="LC2433" class="css-1dcdqdg"><code>                      ? component.ref.map(<span class="code-function"><span class="code-params">r</span> =&gt;</span> r.i)
</code></td></tr><tr><td id="L2434" class="css-a4x74f"><span>2434</span></td><td id="LC2434" class="css-1dcdqdg"><code>                      : [component.ref.i];
</code></td></tr><tr><td id="L2435" class="css-a4x74f"><span>2435</span></td><td id="LC2435" class="css-1dcdqdg"><code>                  internalInstances.forEach(<span class="code-function"><span class="code-params">instance</span> =&gt;</span> {
</code></td></tr><tr><td id="L2436" class="css-a4x74f"><span>2436</span></td><td id="LC2436" class="css-1dcdqdg"><code>                      <span class="code-comment">// @ts-expect-error</span>
</code></td></tr><tr><td id="L2437" class="css-a4x74f"><span>2437</span></td><td id="LC2437" class="css-1dcdqdg"><code>                      instance.__vrv_devtools = info;
</code></td></tr><tr><td id="L2438" class="css-a4x74f"><span>2438</span></td><td id="LC2438" class="css-1dcdqdg"><code>                  });
</code></td></tr><tr><td id="L2439" class="css-a4x74f"><span>2439</span></td><td id="LC2439" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2440" class="css-a4x74f"><span>2440</span></td><td id="LC2440" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> (
</code></td></tr><tr><td id="L2441" class="css-a4x74f"><span>2441</span></td><td id="LC2441" class="css-1dcdqdg"><code>              <span class="code-comment">// pass the vnode to the slot as a prop.</span>
</code></td></tr><tr><td id="L2442" class="css-a4x74f"><span>2442</span></td><td id="LC2442" class="css-1dcdqdg"><code>              <span class="code-comment">// h and &lt;component :is="..."&gt; both accept vnodes</span>
</code></td></tr><tr><td id="L2443" class="css-a4x74f"><span>2443</span></td><td id="LC2443" class="css-1dcdqdg"><code>              normalizeSlot(slots.default, { <span class="code-attr">Component</span>: component, route }) ||
</code></td></tr><tr><td id="L2444" class="css-a4x74f"><span>2444</span></td><td id="LC2444" class="css-1dcdqdg"><code>                  component);
</code></td></tr><tr><td id="L2445" class="css-a4x74f"><span>2445</span></td><td id="LC2445" class="css-1dcdqdg"><code>          };
</code></td></tr><tr><td id="L2446" class="css-a4x74f"><span>2446</span></td><td id="LC2446" class="css-1dcdqdg"><code>      },
</code></td></tr><tr><td id="L2447" class="css-a4x74f"><span>2447</span></td><td id="LC2447" class="css-1dcdqdg"><code>  });
</code></td></tr><tr><td id="L2448" class="css-a4x74f"><span>2448</span></td><td id="LC2448" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">normalizeSlot</span>(<span class="code-params">slot, data</span>) </span>{
</code></td></tr><tr><td id="L2449" class="css-a4x74f"><span>2449</span></td><td id="LC2449" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!slot)
</code></td></tr><tr><td id="L2450" class="css-a4x74f"><span>2450</span></td><td id="LC2450" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-literal">null</span>;
</code></td></tr><tr><td id="L2451" class="css-a4x74f"><span>2451</span></td><td id="LC2451" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> slotContent = slot(data);
</code></td></tr><tr><td id="L2452" class="css-a4x74f"><span>2452</span></td><td id="LC2452" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> slotContent.length === <span class="code-number">1</span> ? slotContent[<span class="code-number">0</span>] : slotContent;
</code></td></tr><tr><td id="L2453" class="css-a4x74f"><span>2453</span></td><td id="LC2453" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2454" class="css-a4x74f"><span>2454</span></td><td id="LC2454" class="css-1dcdqdg"><code>  <span class="code-comment">// export the public type for h/tsx inference</span>
</code></td></tr><tr><td id="L2455" class="css-a4x74f"><span>2455</span></td><td id="LC2455" class="css-1dcdqdg"><code>  <span class="code-comment">// also to avoid inline import() in generated d.ts files</span>
</code></td></tr><tr><td id="L2456" class="css-a4x74f"><span>2456</span></td><td id="LC2456" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2457" class="css-a4x74f"><span>2457</span></td><td id="LC2457" class="css-1dcdqdg"><code><span class="code-comment">   * Component to display the current route the user is at.
</span></code></td></tr><tr><td id="L2458" class="css-a4x74f"><span>2458</span></td><td id="LC2458" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L2459" class="css-a4x74f"><span>2459</span></td><td id="LC2459" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> RouterView = RouterViewImpl;
</code></td></tr><tr><td id="L2460" class="css-a4x74f"><span>2460</span></td><td id="LC2460" class="css-1dcdqdg"><code>  <span class="code-comment">// warn against deprecated usage with &lt;transition&gt; &amp; &lt;keep-alive&gt;</span>
</code></td></tr><tr><td id="L2461" class="css-a4x74f"><span>2461</span></td><td id="LC2461" class="css-1dcdqdg"><code>  <span class="code-comment">// due to functional component being no longer eager in Vue 3</span>
</code></td></tr><tr><td id="L2462" class="css-a4x74f"><span>2462</span></td><td id="LC2462" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">warnDeprecatedUsage</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L2463" class="css-a4x74f"><span>2463</span></td><td id="LC2463" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> instance = vue.getCurrentInstance();
</code></td></tr><tr><td id="L2464" class="css-a4x74f"><span>2464</span></td><td id="LC2464" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> parentName = instance.parent &amp;&amp; instance.parent.type.name;
</code></td></tr><tr><td id="L2465" class="css-a4x74f"><span>2465</span></td><td id="LC2465" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (parentName &amp;&amp;
</code></td></tr><tr><td id="L2466" class="css-a4x74f"><span>2466</span></td><td id="LC2466" class="css-1dcdqdg"><code>          (parentName === <span class="code-string">'KeepAlive'</span> || parentName.includes(<span class="code-string">'Transition'</span>))) {
</code></td></tr><tr><td id="L2467" class="css-a4x74f"><span>2467</span></td><td id="LC2467" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> comp = parentName === <span class="code-string">'KeepAlive'</span> ? <span class="code-string">'keep-alive'</span> : <span class="code-string">'transition'</span>;
</code></td></tr><tr><td id="L2468" class="css-a4x74f"><span>2468</span></td><td id="LC2468" class="css-1dcdqdg"><code>          warn(<span class="code-string">`&lt;router-view&gt; can no longer be used directly inside &lt;transition&gt; or &lt;keep-alive&gt;.\n`</span> +
</code></td></tr><tr><td id="L2469" class="css-a4x74f"><span>2469</span></td><td id="LC2469" class="css-1dcdqdg"><code>              <span class="code-string">`Use slot props instead:\n\n`</span> +
</code></td></tr><tr><td id="L2470" class="css-a4x74f"><span>2470</span></td><td id="LC2470" class="css-1dcdqdg"><code>              <span class="code-string">`&lt;router-view v-slot="{ Component }"&gt;\n`</span> +
</code></td></tr><tr><td id="L2471" class="css-a4x74f"><span>2471</span></td><td id="LC2471" class="css-1dcdqdg"><code>              <span class="code-string">`  &lt;<span class="code-subst">${comp}</span>&gt;\n`</span> +
</code></td></tr><tr><td id="L2472" class="css-a4x74f"><span>2472</span></td><td id="LC2472" class="css-1dcdqdg"><code>              <span class="code-string">`    &lt;component :is="Component" /&gt;\n`</span> +
</code></td></tr><tr><td id="L2473" class="css-a4x74f"><span>2473</span></td><td id="LC2473" class="css-1dcdqdg"><code>              <span class="code-string">`  &lt;/<span class="code-subst">${comp}</span>&gt;\n`</span> +
</code></td></tr><tr><td id="L2474" class="css-a4x74f"><span>2474</span></td><td id="LC2474" class="css-1dcdqdg"><code>              <span class="code-string">`&lt;/router-view&gt;`</span>);
</code></td></tr><tr><td id="L2475" class="css-a4x74f"><span>2475</span></td><td id="LC2475" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2476" class="css-a4x74f"><span>2476</span></td><td id="LC2476" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2477" class="css-a4x74f"><span>2477</span></td><td id="LC2477" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2478" class="css-a4x74f"><span>2478</span></td><td id="LC2478" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">getDevtoolsGlobalHook</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L2479" class="css-a4x74f"><span>2479</span></td><td id="LC2479" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__;
</code></td></tr><tr><td id="L2480" class="css-a4x74f"><span>2480</span></td><td id="LC2480" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2481" class="css-a4x74f"><span>2481</span></td><td id="LC2481" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">getTarget</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L2482" class="css-a4x74f"><span>2482</span></td><td id="LC2482" class="css-1dcdqdg"><code>      <span class="code-comment">// @ts-ignore</span>
</code></td></tr><tr><td id="L2483" class="css-a4x74f"><span>2483</span></td><td id="LC2483" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> (<span class="code-keyword">typeof</span> navigator !== <span class="code-string">'undefined'</span> &amp;&amp; <span class="code-keyword">typeof</span> <span class="code-built_in">window</span> !== <span class="code-string">'undefined'</span>)
</code></td></tr><tr><td id="L2484" class="css-a4x74f"><span>2484</span></td><td id="LC2484" class="css-1dcdqdg"><code>          ? <span class="code-built_in">window</span>
</code></td></tr><tr><td id="L2485" class="css-a4x74f"><span>2485</span></td><td id="LC2485" class="css-1dcdqdg"><code>          : <span class="code-keyword">typeof</span> global !== <span class="code-string">'undefined'</span>
</code></td></tr><tr><td id="L2486" class="css-a4x74f"><span>2486</span></td><td id="LC2486" class="css-1dcdqdg"><code>              ? global
</code></td></tr><tr><td id="L2487" class="css-a4x74f"><span>2487</span></td><td id="LC2487" class="css-1dcdqdg"><code>              : {};
</code></td></tr><tr><td id="L2488" class="css-a4x74f"><span>2488</span></td><td id="LC2488" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2489" class="css-a4x74f"><span>2489</span></td><td id="LC2489" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> isProxyAvailable = <span class="code-keyword">typeof</span> <span class="code-built_in">Proxy</span> === <span class="code-string">'function'</span>;
</code></td></tr><tr><td id="L2490" class="css-a4x74f"><span>2490</span></td><td id="LC2490" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2491" class="css-a4x74f"><span>2491</span></td><td id="LC2491" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> HOOK_SETUP = <span class="code-string">'devtools-plugin:setup'</span>;
</code></td></tr><tr><td id="L2492" class="css-a4x74f"><span>2492</span></td><td id="LC2492" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> HOOK_PLUGIN_SETTINGS_SET = <span class="code-string">'plugin:settings:set'</span>;
</code></td></tr><tr><td id="L2493" class="css-a4x74f"><span>2493</span></td><td id="LC2493" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2494" class="css-a4x74f"><span>2494</span></td><td id="LC2494" class="css-1dcdqdg"><code>  <span class="code-keyword">let</span> supported;
</code></td></tr><tr><td id="L2495" class="css-a4x74f"><span>2495</span></td><td id="LC2495" class="css-1dcdqdg"><code>  <span class="code-keyword">let</span> perf;
</code></td></tr><tr><td id="L2496" class="css-a4x74f"><span>2496</span></td><td id="LC2496" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isPerformanceSupported</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L2497" class="css-a4x74f"><span>2497</span></td><td id="LC2497" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> _a;
</code></td></tr><tr><td id="L2498" class="css-a4x74f"><span>2498</span></td><td id="LC2498" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (supported !== <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L2499" class="css-a4x74f"><span>2499</span></td><td id="LC2499" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> supported;
</code></td></tr><tr><td id="L2500" class="css-a4x74f"><span>2500</span></td><td id="LC2500" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2501" class="css-a4x74f"><span>2501</span></td><td id="LC2501" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (<span class="code-keyword">typeof</span> <span class="code-built_in">window</span> !== <span class="code-string">'undefined'</span> &amp;&amp; <span class="code-built_in">window</span>.performance) {
</code></td></tr><tr><td id="L2502" class="css-a4x74f"><span>2502</span></td><td id="LC2502" class="css-1dcdqdg"><code>          supported = <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L2503" class="css-a4x74f"><span>2503</span></td><td id="LC2503" class="css-1dcdqdg"><code>          perf = <span class="code-built_in">window</span>.performance;
</code></td></tr><tr><td id="L2504" class="css-a4x74f"><span>2504</span></td><td id="LC2504" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2505" class="css-a4x74f"><span>2505</span></td><td id="LC2505" class="css-1dcdqdg"><code>      <span class="code-keyword">else</span> <span class="code-keyword">if</span> (<span class="code-keyword">typeof</span> global !== <span class="code-string">'undefined'</span> &amp;&amp; ((_a = global.perf_hooks) === <span class="code-literal">null</span> || _a === <span class="code-keyword">void</span> <span class="code-number">0</span> ? <span class="code-keyword">void</span> <span class="code-number">0</span> : _a.performance)) {
</code></td></tr><tr><td id="L2506" class="css-a4x74f"><span>2506</span></td><td id="LC2506" class="css-1dcdqdg"><code>          supported = <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L2507" class="css-a4x74f"><span>2507</span></td><td id="LC2507" class="css-1dcdqdg"><code>          perf = global.perf_hooks.performance;
</code></td></tr><tr><td id="L2508" class="css-a4x74f"><span>2508</span></td><td id="LC2508" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2509" class="css-a4x74f"><span>2509</span></td><td id="LC2509" class="css-1dcdqdg"><code>      <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L2510" class="css-a4x74f"><span>2510</span></td><td id="LC2510" class="css-1dcdqdg"><code>          supported = <span class="code-literal">false</span>;
</code></td></tr><tr><td id="L2511" class="css-a4x74f"><span>2511</span></td><td id="LC2511" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2512" class="css-a4x74f"><span>2512</span></td><td id="LC2512" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> supported;
</code></td></tr><tr><td id="L2513" class="css-a4x74f"><span>2513</span></td><td id="LC2513" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2514" class="css-a4x74f"><span>2514</span></td><td id="LC2514" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">now</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L2515" class="css-a4x74f"><span>2515</span></td><td id="LC2515" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> isPerformanceSupported() ? perf.now() : <span class="code-built_in">Date</span>.now();
</code></td></tr><tr><td id="L2516" class="css-a4x74f"><span>2516</span></td><td id="LC2516" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2517" class="css-a4x74f"><span>2517</span></td><td id="LC2517" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2518" class="css-a4x74f"><span>2518</span></td><td id="LC2518" class="css-1dcdqdg"><code>  <span class="code-class"><span class="code-keyword">class</span> <span class="code-title">ApiProxy</span> </span>{
</code></td></tr><tr><td id="L2519" class="css-a4x74f"><span>2519</span></td><td id="LC2519" class="css-1dcdqdg"><code>      <span class="code-keyword">constructor</span>(plugin, hook) {
</code></td></tr><tr><td id="L2520" class="css-a4x74f"><span>2520</span></td><td id="LC2520" class="css-1dcdqdg"><code>          <span class="code-keyword">this</span>.target = <span class="code-literal">null</span>;
</code></td></tr><tr><td id="L2521" class="css-a4x74f"><span>2521</span></td><td id="LC2521" class="css-1dcdqdg"><code>          <span class="code-keyword">this</span>.targetQueue = [];
</code></td></tr><tr><td id="L2522" class="css-a4x74f"><span>2522</span></td><td id="LC2522" class="css-1dcdqdg"><code>          <span class="code-keyword">this</span>.onQueue = [];
</code></td></tr><tr><td id="L2523" class="css-a4x74f"><span>2523</span></td><td id="LC2523" class="css-1dcdqdg"><code>          <span class="code-keyword">this</span>.plugin = plugin;
</code></td></tr><tr><td id="L2524" class="css-a4x74f"><span>2524</span></td><td id="LC2524" class="css-1dcdqdg"><code>          <span class="code-keyword">this</span>.hook = hook;
</code></td></tr><tr><td id="L2525" class="css-a4x74f"><span>2525</span></td><td id="LC2525" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> defaultSettings = {};
</code></td></tr><tr><td id="L2526" class="css-a4x74f"><span>2526</span></td><td id="LC2526" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (plugin.settings) {
</code></td></tr><tr><td id="L2527" class="css-a4x74f"><span>2527</span></td><td id="LC2527" class="css-1dcdqdg"><code>              <span class="code-keyword">for</span> (<span class="code-keyword">const</span> id <span class="code-keyword">in</span> plugin.settings) {
</code></td></tr><tr><td id="L2528" class="css-a4x74f"><span>2528</span></td><td id="LC2528" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> item = plugin.settings[id];
</code></td></tr><tr><td id="L2529" class="css-a4x74f"><span>2529</span></td><td id="LC2529" class="css-1dcdqdg"><code>                  defaultSettings[id] = item.defaultValue;
</code></td></tr><tr><td id="L2530" class="css-a4x74f"><span>2530</span></td><td id="LC2530" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2531" class="css-a4x74f"><span>2531</span></td><td id="LC2531" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2532" class="css-a4x74f"><span>2532</span></td><td id="LC2532" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> localSettingsSaveId = <span class="code-string">`__vue-devtools-plugin-settings__<span class="code-subst">${plugin.id}</span>`</span>;
</code></td></tr><tr><td id="L2533" class="css-a4x74f"><span>2533</span></td><td id="LC2533" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> currentSettings = <span class="code-built_in">Object</span>.assign({}, defaultSettings);
</code></td></tr><tr><td id="L2534" class="css-a4x74f"><span>2534</span></td><td id="LC2534" class="css-1dcdqdg"><code>          <span class="code-keyword">try</span> {
</code></td></tr><tr><td id="L2535" class="css-a4x74f"><span>2535</span></td><td id="LC2535" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> raw = localStorage.getItem(localSettingsSaveId);
</code></td></tr><tr><td id="L2536" class="css-a4x74f"><span>2536</span></td><td id="LC2536" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> data = <span class="code-built_in">JSON</span>.parse(raw);
</code></td></tr><tr><td id="L2537" class="css-a4x74f"><span>2537</span></td><td id="LC2537" class="css-1dcdqdg"><code>              <span class="code-built_in">Object</span>.assign(currentSettings, data);
</code></td></tr><tr><td id="L2538" class="css-a4x74f"><span>2538</span></td><td id="LC2538" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2539" class="css-a4x74f"><span>2539</span></td><td id="LC2539" class="css-1dcdqdg"><code>          <span class="code-keyword">catch</span> (e) {
</code></td></tr><tr><td id="L2540" class="css-a4x74f"><span>2540</span></td><td id="LC2540" class="css-1dcdqdg"><code>              <span class="code-comment">// noop</span>
</code></td></tr><tr><td id="L2541" class="css-a4x74f"><span>2541</span></td><td id="LC2541" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2542" class="css-a4x74f"><span>2542</span></td><td id="LC2542" class="css-1dcdqdg"><code>          <span class="code-keyword">this</span>.fallbacks = {
</code></td></tr><tr><td id="L2543" class="css-a4x74f"><span>2543</span></td><td id="LC2543" class="css-1dcdqdg"><code>              getSettings() {
</code></td></tr><tr><td id="L2544" class="css-a4x74f"><span>2544</span></td><td id="LC2544" class="css-1dcdqdg"><code>                  <span class="code-keyword">return</span> currentSettings;
</code></td></tr><tr><td id="L2545" class="css-a4x74f"><span>2545</span></td><td id="LC2545" class="css-1dcdqdg"><code>              },
</code></td></tr><tr><td id="L2546" class="css-a4x74f"><span>2546</span></td><td id="LC2546" class="css-1dcdqdg"><code>              setSettings(value) {
</code></td></tr><tr><td id="L2547" class="css-a4x74f"><span>2547</span></td><td id="LC2547" class="css-1dcdqdg"><code>                  <span class="code-keyword">try</span> {
</code></td></tr><tr><td id="L2548" class="css-a4x74f"><span>2548</span></td><td id="LC2548" class="css-1dcdqdg"><code>                      localStorage.setItem(localSettingsSaveId, <span class="code-built_in">JSON</span>.stringify(value));
</code></td></tr><tr><td id="L2549" class="css-a4x74f"><span>2549</span></td><td id="LC2549" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2550" class="css-a4x74f"><span>2550</span></td><td id="LC2550" class="css-1dcdqdg"><code>                  <span class="code-keyword">catch</span> (e) {
</code></td></tr><tr><td id="L2551" class="css-a4x74f"><span>2551</span></td><td id="LC2551" class="css-1dcdqdg"><code>                      <span class="code-comment">// noop</span>
</code></td></tr><tr><td id="L2552" class="css-a4x74f"><span>2552</span></td><td id="LC2552" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2553" class="css-a4x74f"><span>2553</span></td><td id="LC2553" class="css-1dcdqdg"><code>                  currentSettings = value;
</code></td></tr><tr><td id="L2554" class="css-a4x74f"><span>2554</span></td><td id="LC2554" class="css-1dcdqdg"><code>              },
</code></td></tr><tr><td id="L2555" class="css-a4x74f"><span>2555</span></td><td id="LC2555" class="css-1dcdqdg"><code>              now() {
</code></td></tr><tr><td id="L2556" class="css-a4x74f"><span>2556</span></td><td id="LC2556" class="css-1dcdqdg"><code>                  <span class="code-keyword">return</span> now();
</code></td></tr><tr><td id="L2557" class="css-a4x74f"><span>2557</span></td><td id="LC2557" class="css-1dcdqdg"><code>              },
</code></td></tr><tr><td id="L2558" class="css-a4x74f"><span>2558</span></td><td id="LC2558" class="css-1dcdqdg"><code>          };
</code></td></tr><tr><td id="L2559" class="css-a4x74f"><span>2559</span></td><td id="LC2559" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (hook) {
</code></td></tr><tr><td id="L2560" class="css-a4x74f"><span>2560</span></td><td id="LC2560" class="css-1dcdqdg"><code>              hook.on(HOOK_PLUGIN_SETTINGS_SET, (pluginId, value) =&gt; {
</code></td></tr><tr><td id="L2561" class="css-a4x74f"><span>2561</span></td><td id="LC2561" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (pluginId === <span class="code-keyword">this</span>.plugin.id) {
</code></td></tr><tr><td id="L2562" class="css-a4x74f"><span>2562</span></td><td id="LC2562" class="css-1dcdqdg"><code>                      <span class="code-keyword">this</span>.fallbacks.setSettings(value);
</code></td></tr><tr><td id="L2563" class="css-a4x74f"><span>2563</span></td><td id="LC2563" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2564" class="css-a4x74f"><span>2564</span></td><td id="LC2564" class="css-1dcdqdg"><code>              });
</code></td></tr><tr><td id="L2565" class="css-a4x74f"><span>2565</span></td><td id="LC2565" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2566" class="css-a4x74f"><span>2566</span></td><td id="LC2566" class="css-1dcdqdg"><code>          <span class="code-keyword">this</span>.proxiedOn = <span class="code-keyword">new</span> <span class="code-built_in">Proxy</span>({}, {
</code></td></tr><tr><td id="L2567" class="css-a4x74f"><span>2567</span></td><td id="LC2567" class="css-1dcdqdg"><code>              <span class="code-keyword">get</span>: (_target, prop) =&gt; {
</code></td></tr><tr><td id="L2568" class="css-a4x74f"><span>2568</span></td><td id="LC2568" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.target) {
</code></td></tr><tr><td id="L2569" class="css-a4x74f"><span>2569</span></td><td id="LC2569" class="css-1dcdqdg"><code>                      <span class="code-keyword">return</span> <span class="code-keyword">this</span>.target.on[prop];
</code></td></tr><tr><td id="L2570" class="css-a4x74f"><span>2570</span></td><td id="LC2570" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2571" class="css-a4x74f"><span>2571</span></td><td id="LC2571" class="css-1dcdqdg"><code>                  <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L2572" class="css-a4x74f"><span>2572</span></td><td id="LC2572" class="css-1dcdqdg"><code>                      <span class="code-keyword">return</span> <span class="code-function">(<span class="code-params">...args</span>) =&gt;</span> {
</code></td></tr><tr><td id="L2573" class="css-a4x74f"><span>2573</span></td><td id="LC2573" class="css-1dcdqdg"><code>                          <span class="code-keyword">this</span>.onQueue.push({
</code></td></tr><tr><td id="L2574" class="css-a4x74f"><span>2574</span></td><td id="LC2574" class="css-1dcdqdg"><code>                              method: prop,
</code></td></tr><tr><td id="L2575" class="css-a4x74f"><span>2575</span></td><td id="LC2575" class="css-1dcdqdg"><code>                              args,
</code></td></tr><tr><td id="L2576" class="css-a4x74f"><span>2576</span></td><td id="LC2576" class="css-1dcdqdg"><code>                          });
</code></td></tr><tr><td id="L2577" class="css-a4x74f"><span>2577</span></td><td id="LC2577" class="css-1dcdqdg"><code>                      };
</code></td></tr><tr><td id="L2578" class="css-a4x74f"><span>2578</span></td><td id="LC2578" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2579" class="css-a4x74f"><span>2579</span></td><td id="LC2579" class="css-1dcdqdg"><code>              },
</code></td></tr><tr><td id="L2580" class="css-a4x74f"><span>2580</span></td><td id="LC2580" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2581" class="css-a4x74f"><span>2581</span></td><td id="LC2581" class="css-1dcdqdg"><code>          <span class="code-keyword">this</span>.proxiedTarget = <span class="code-keyword">new</span> <span class="code-built_in">Proxy</span>({}, {
</code></td></tr><tr><td id="L2582" class="css-a4x74f"><span>2582</span></td><td id="LC2582" class="css-1dcdqdg"><code>              <span class="code-keyword">get</span>: (_target, prop) =&gt; {
</code></td></tr><tr><td id="L2583" class="css-a4x74f"><span>2583</span></td><td id="LC2583" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.target) {
</code></td></tr><tr><td id="L2584" class="css-a4x74f"><span>2584</span></td><td id="LC2584" class="css-1dcdqdg"><code>                      <span class="code-keyword">return</span> <span class="code-keyword">this</span>.target[prop];
</code></td></tr><tr><td id="L2585" class="css-a4x74f"><span>2585</span></td><td id="LC2585" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2586" class="css-a4x74f"><span>2586</span></td><td id="LC2586" class="css-1dcdqdg"><code>                  <span class="code-keyword">else</span> <span class="code-keyword">if</span> (prop === <span class="code-string">'on'</span>) {
</code></td></tr><tr><td id="L2587" class="css-a4x74f"><span>2587</span></td><td id="LC2587" class="css-1dcdqdg"><code>                      <span class="code-keyword">return</span> <span class="code-keyword">this</span>.proxiedOn;
</code></td></tr><tr><td id="L2588" class="css-a4x74f"><span>2588</span></td><td id="LC2588" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2589" class="css-a4x74f"><span>2589</span></td><td id="LC2589" class="css-1dcdqdg"><code>                  <span class="code-keyword">else</span> <span class="code-keyword">if</span> (<span class="code-built_in">Object</span>.keys(<span class="code-keyword">this</span>.fallbacks).includes(prop)) {
</code></td></tr><tr><td id="L2590" class="css-a4x74f"><span>2590</span></td><td id="LC2590" class="css-1dcdqdg"><code>                      <span class="code-keyword">return</span> <span class="code-function">(<span class="code-params">...args</span>) =&gt;</span> {
</code></td></tr><tr><td id="L2591" class="css-a4x74f"><span>2591</span></td><td id="LC2591" class="css-1dcdqdg"><code>                          <span class="code-keyword">this</span>.targetQueue.push({
</code></td></tr><tr><td id="L2592" class="css-a4x74f"><span>2592</span></td><td id="LC2592" class="css-1dcdqdg"><code>                              method: prop,
</code></td></tr><tr><td id="L2593" class="css-a4x74f"><span>2593</span></td><td id="LC2593" class="css-1dcdqdg"><code>                              args,
</code></td></tr><tr><td id="L2594" class="css-a4x74f"><span>2594</span></td><td id="LC2594" class="css-1dcdqdg"><code>                              resolve: <span class="code-function"><span class="code-params">()</span> =&gt;</span> { },
</code></td></tr><tr><td id="L2595" class="css-a4x74f"><span>2595</span></td><td id="LC2595" class="css-1dcdqdg"><code>                          });
</code></td></tr><tr><td id="L2596" class="css-a4x74f"><span>2596</span></td><td id="LC2596" class="css-1dcdqdg"><code>                          <span class="code-keyword">return</span> <span class="code-keyword">this</span>.fallbacks[prop](...args);
</code></td></tr><tr><td id="L2597" class="css-a4x74f"><span>2597</span></td><td id="LC2597" class="css-1dcdqdg"><code>                      };
</code></td></tr><tr><td id="L2598" class="css-a4x74f"><span>2598</span></td><td id="LC2598" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2599" class="css-a4x74f"><span>2599</span></td><td id="LC2599" class="css-1dcdqdg"><code>                  <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L2600" class="css-a4x74f"><span>2600</span></td><td id="LC2600" class="css-1dcdqdg"><code>                      <span class="code-keyword">return</span> <span class="code-function">(<span class="code-params">...args</span>) =&gt;</span> {
</code></td></tr><tr><td id="L2601" class="css-a4x74f"><span>2601</span></td><td id="LC2601" class="css-1dcdqdg"><code>                          <span class="code-keyword">return</span> <span class="code-keyword">new</span> <span class="code-built_in">Promise</span>(<span class="code-function"><span class="code-params">resolve</span> =&gt;</span> {
</code></td></tr><tr><td id="L2602" class="css-a4x74f"><span>2602</span></td><td id="LC2602" class="css-1dcdqdg"><code>                              <span class="code-keyword">this</span>.targetQueue.push({
</code></td></tr><tr><td id="L2603" class="css-a4x74f"><span>2603</span></td><td id="LC2603" class="css-1dcdqdg"><code>                                  method: prop,
</code></td></tr><tr><td id="L2604" class="css-a4x74f"><span>2604</span></td><td id="LC2604" class="css-1dcdqdg"><code>                                  args,
</code></td></tr><tr><td id="L2605" class="css-a4x74f"><span>2605</span></td><td id="LC2605" class="css-1dcdqdg"><code>                                  resolve,
</code></td></tr><tr><td id="L2606" class="css-a4x74f"><span>2606</span></td><td id="LC2606" class="css-1dcdqdg"><code>                              });
</code></td></tr><tr><td id="L2607" class="css-a4x74f"><span>2607</span></td><td id="LC2607" class="css-1dcdqdg"><code>                          });
</code></td></tr><tr><td id="L2608" class="css-a4x74f"><span>2608</span></td><td id="LC2608" class="css-1dcdqdg"><code>                      };
</code></td></tr><tr><td id="L2609" class="css-a4x74f"><span>2609</span></td><td id="LC2609" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2610" class="css-a4x74f"><span>2610</span></td><td id="LC2610" class="css-1dcdqdg"><code>              },
</code></td></tr><tr><td id="L2611" class="css-a4x74f"><span>2611</span></td><td id="LC2611" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2612" class="css-a4x74f"><span>2612</span></td><td id="LC2612" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2613" class="css-a4x74f"><span>2613</span></td><td id="LC2613" class="css-1dcdqdg"><code>      <span class="code-keyword">async</span> setRealTarget(target) {
</code></td></tr><tr><td id="L2614" class="css-a4x74f"><span>2614</span></td><td id="LC2614" class="css-1dcdqdg"><code>          <span class="code-keyword">this</span>.target = target;
</code></td></tr><tr><td id="L2615" class="css-a4x74f"><span>2615</span></td><td id="LC2615" class="css-1dcdqdg"><code>          <span class="code-keyword">for</span> (<span class="code-keyword">const</span> item <span class="code-keyword">of</span> <span class="code-keyword">this</span>.onQueue) {
</code></td></tr><tr><td id="L2616" class="css-a4x74f"><span>2616</span></td><td id="LC2616" class="css-1dcdqdg"><code>              <span class="code-keyword">this</span>.target.on[item.method](...item.args);
</code></td></tr><tr><td id="L2617" class="css-a4x74f"><span>2617</span></td><td id="LC2617" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2618" class="css-a4x74f"><span>2618</span></td><td id="LC2618" class="css-1dcdqdg"><code>          <span class="code-keyword">for</span> (<span class="code-keyword">const</span> item <span class="code-keyword">of</span> <span class="code-keyword">this</span>.targetQueue) {
</code></td></tr><tr><td id="L2619" class="css-a4x74f"><span>2619</span></td><td id="LC2619" class="css-1dcdqdg"><code>              item.resolve(<span class="code-keyword">await</span> <span class="code-keyword">this</span>.target[item.method](...item.args));
</code></td></tr><tr><td id="L2620" class="css-a4x74f"><span>2620</span></td><td id="LC2620" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2621" class="css-a4x74f"><span>2621</span></td><td id="LC2621" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2622" class="css-a4x74f"><span>2622</span></td><td id="LC2622" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2623" class="css-a4x74f"><span>2623</span></td><td id="LC2623" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2624" class="css-a4x74f"><span>2624</span></td><td id="LC2624" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">setupDevtoolsPlugin</span>(<span class="code-params">pluginDescriptor, setupFn</span>) </span>{
</code></td></tr><tr><td id="L2625" class="css-a4x74f"><span>2625</span></td><td id="LC2625" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> descriptor = pluginDescriptor;
</code></td></tr><tr><td id="L2626" class="css-a4x74f"><span>2626</span></td><td id="LC2626" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> target = getTarget();
</code></td></tr><tr><td id="L2627" class="css-a4x74f"><span>2627</span></td><td id="LC2627" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> hook = getDevtoolsGlobalHook();
</code></td></tr><tr><td id="L2628" class="css-a4x74f"><span>2628</span></td><td id="LC2628" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> enableProxy = isProxyAvailable &amp;&amp; descriptor.enableEarlyProxy;
</code></td></tr><tr><td id="L2629" class="css-a4x74f"><span>2629</span></td><td id="LC2629" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (hook &amp;&amp; (target.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__ || !enableProxy)) {
</code></td></tr><tr><td id="L2630" class="css-a4x74f"><span>2630</span></td><td id="LC2630" class="css-1dcdqdg"><code>          hook.emit(HOOK_SETUP, pluginDescriptor, setupFn);
</code></td></tr><tr><td id="L2631" class="css-a4x74f"><span>2631</span></td><td id="LC2631" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2632" class="css-a4x74f"><span>2632</span></td><td id="LC2632" class="css-1dcdqdg"><code>      <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L2633" class="css-a4x74f"><span>2633</span></td><td id="LC2633" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> proxy = enableProxy ? <span class="code-keyword">new</span> ApiProxy(descriptor, hook) : <span class="code-literal">null</span>;
</code></td></tr><tr><td id="L2634" class="css-a4x74f"><span>2634</span></td><td id="LC2634" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> list = target.__VUE_DEVTOOLS_PLUGINS__ = target.__VUE_DEVTOOLS_PLUGINS__ || [];
</code></td></tr><tr><td id="L2635" class="css-a4x74f"><span>2635</span></td><td id="LC2635" class="css-1dcdqdg"><code>          list.push({
</code></td></tr><tr><td id="L2636" class="css-a4x74f"><span>2636</span></td><td id="LC2636" class="css-1dcdqdg"><code>              pluginDescriptor: descriptor,
</code></td></tr><tr><td id="L2637" class="css-a4x74f"><span>2637</span></td><td id="LC2637" class="css-1dcdqdg"><code>              setupFn,
</code></td></tr><tr><td id="L2638" class="css-a4x74f"><span>2638</span></td><td id="LC2638" class="css-1dcdqdg"><code>              proxy,
</code></td></tr><tr><td id="L2639" class="css-a4x74f"><span>2639</span></td><td id="LC2639" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2640" class="css-a4x74f"><span>2640</span></td><td id="LC2640" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (proxy)
</code></td></tr><tr><td id="L2641" class="css-a4x74f"><span>2641</span></td><td id="LC2641" class="css-1dcdqdg"><code>              setupFn(proxy.proxiedTarget);
</code></td></tr><tr><td id="L2642" class="css-a4x74f"><span>2642</span></td><td id="LC2642" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2643" class="css-a4x74f"><span>2643</span></td><td id="LC2643" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2644" class="css-a4x74f"><span>2644</span></td><td id="LC2644" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2645" class="css-a4x74f"><span>2645</span></td><td id="LC2645" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2646" class="css-a4x74f"><span>2646</span></td><td id="LC2646" class="css-1dcdqdg"><code><span class="code-comment">   * Copies a route location and removes any problematic properties that cannot be shown in devtools (e.g. Vue instances).
</span></code></td></tr><tr><td id="L2647" class="css-a4x74f"><span>2647</span></td><td id="LC2647" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L2648" class="css-a4x74f"><span>2648</span></td><td id="LC2648" class="css-1dcdqdg"><code><span class="code-comment">   * @param routeLocation - routeLocation to format
</span></code></td></tr><tr><td id="L2649" class="css-a4x74f"><span>2649</span></td><td id="LC2649" class="css-1dcdqdg"><code><span class="code-comment">   * @param tooltip - optional tooltip
</span></code></td></tr><tr><td id="L2650" class="css-a4x74f"><span>2650</span></td><td id="LC2650" class="css-1dcdqdg"><code><span class="code-comment">   * @returns a copy of the routeLocation
</span></code></td></tr><tr><td id="L2651" class="css-a4x74f"><span>2651</span></td><td id="LC2651" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L2652" class="css-a4x74f"><span>2652</span></td><td id="LC2652" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">formatRouteLocation</span>(<span class="code-params">routeLocation, tooltip</span>) </span>{
</code></td></tr><tr><td id="L2653" class="css-a4x74f"><span>2653</span></td><td id="LC2653" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> copy = assign({}, routeLocation, {
</code></td></tr><tr><td id="L2654" class="css-a4x74f"><span>2654</span></td><td id="LC2654" class="css-1dcdqdg"><code>          <span class="code-comment">// remove variables that can contain vue instances</span>
</code></td></tr><tr><td id="L2655" class="css-a4x74f"><span>2655</span></td><td id="LC2655" class="css-1dcdqdg"><code>          matched: routeLocation.matched.map(<span class="code-function"><span class="code-params">matched</span> =&gt;</span> omit(matched, [<span class="code-string">'instances'</span>, <span class="code-string">'children'</span>, <span class="code-string">'aliasOf'</span>])),
</code></td></tr><tr><td id="L2656" class="css-a4x74f"><span>2656</span></td><td id="LC2656" class="css-1dcdqdg"><code>      });
</code></td></tr><tr><td id="L2657" class="css-a4x74f"><span>2657</span></td><td id="LC2657" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> {
</code></td></tr><tr><td id="L2658" class="css-a4x74f"><span>2658</span></td><td id="LC2658" class="css-1dcdqdg"><code>          _custom: {
</code></td></tr><tr><td id="L2659" class="css-a4x74f"><span>2659</span></td><td id="LC2659" class="css-1dcdqdg"><code>              type: <span class="code-literal">null</span>,
</code></td></tr><tr><td id="L2660" class="css-a4x74f"><span>2660</span></td><td id="LC2660" class="css-1dcdqdg"><code>              readOnly: <span class="code-literal">true</span>,
</code></td></tr><tr><td id="L2661" class="css-a4x74f"><span>2661</span></td><td id="LC2661" class="css-1dcdqdg"><code>              display: routeLocation.fullPath,
</code></td></tr><tr><td id="L2662" class="css-a4x74f"><span>2662</span></td><td id="LC2662" class="css-1dcdqdg"><code>              tooltip,
</code></td></tr><tr><td id="L2663" class="css-a4x74f"><span>2663</span></td><td id="LC2663" class="css-1dcdqdg"><code>              value: copy,
</code></td></tr><tr><td id="L2664" class="css-a4x74f"><span>2664</span></td><td id="LC2664" class="css-1dcdqdg"><code>          },
</code></td></tr><tr><td id="L2665" class="css-a4x74f"><span>2665</span></td><td id="LC2665" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L2666" class="css-a4x74f"><span>2666</span></td><td id="LC2666" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2667" class="css-a4x74f"><span>2667</span></td><td id="LC2667" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">formatDisplay</span>(<span class="code-params">display</span>) </span>{
</code></td></tr><tr><td id="L2668" class="css-a4x74f"><span>2668</span></td><td id="LC2668" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> {
</code></td></tr><tr><td id="L2669" class="css-a4x74f"><span>2669</span></td><td id="LC2669" class="css-1dcdqdg"><code>          _custom: {
</code></td></tr><tr><td id="L2670" class="css-a4x74f"><span>2670</span></td><td id="LC2670" class="css-1dcdqdg"><code>              display,
</code></td></tr><tr><td id="L2671" class="css-a4x74f"><span>2671</span></td><td id="LC2671" class="css-1dcdqdg"><code>          },
</code></td></tr><tr><td id="L2672" class="css-a4x74f"><span>2672</span></td><td id="LC2672" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L2673" class="css-a4x74f"><span>2673</span></td><td id="LC2673" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2674" class="css-a4x74f"><span>2674</span></td><td id="LC2674" class="css-1dcdqdg"><code>  <span class="code-comment">// to support multiple router instances</span>
</code></td></tr><tr><td id="L2675" class="css-a4x74f"><span>2675</span></td><td id="LC2675" class="css-1dcdqdg"><code>  <span class="code-keyword">let</span> routerId = <span class="code-number">0</span>;
</code></td></tr><tr><td id="L2676" class="css-a4x74f"><span>2676</span></td><td id="LC2676" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">addDevtools</span>(<span class="code-params">app, router, matcher</span>) </span>{
</code></td></tr><tr><td id="L2677" class="css-a4x74f"><span>2677</span></td><td id="LC2677" class="css-1dcdqdg"><code>      <span class="code-comment">// Take over router.beforeEach and afterEach</span>
</code></td></tr><tr><td id="L2678" class="css-a4x74f"><span>2678</span></td><td id="LC2678" class="css-1dcdqdg"><code>      <span class="code-comment">// make sure we are not registering the devtool twice</span>
</code></td></tr><tr><td id="L2679" class="css-a4x74f"><span>2679</span></td><td id="LC2679" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (router.__hasDevtools)
</code></td></tr><tr><td id="L2680" class="css-a4x74f"><span>2680</span></td><td id="LC2680" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L2681" class="css-a4x74f"><span>2681</span></td><td id="LC2681" class="css-1dcdqdg"><code>      router.__hasDevtools = <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L2682" class="css-a4x74f"><span>2682</span></td><td id="LC2682" class="css-1dcdqdg"><code>      <span class="code-comment">// increment to support multiple router instances</span>
</code></td></tr><tr><td id="L2683" class="css-a4x74f"><span>2683</span></td><td id="LC2683" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> id = routerId++;
</code></td></tr><tr><td id="L2684" class="css-a4x74f"><span>2684</span></td><td id="LC2684" class="css-1dcdqdg"><code>      setupDevtoolsPlugin({
</code></td></tr><tr><td id="L2685" class="css-a4x74f"><span>2685</span></td><td id="LC2685" class="css-1dcdqdg"><code>          id: <span class="code-string">'org.vuejs.router'</span> + (id ? <span class="code-string">'.'</span> + id : <span class="code-string">''</span>),
</code></td></tr><tr><td id="L2686" class="css-a4x74f"><span>2686</span></td><td id="LC2686" class="css-1dcdqdg"><code>          label: <span class="code-string">'Vue Router'</span>,
</code></td></tr><tr><td id="L2687" class="css-a4x74f"><span>2687</span></td><td id="LC2687" class="css-1dcdqdg"><code>          packageName: <span class="code-string">'vue-router'</span>,
</code></td></tr><tr><td id="L2688" class="css-a4x74f"><span>2688</span></td><td id="LC2688" class="css-1dcdqdg"><code>          homepage: <span class="code-string">'https://router.vuejs.org'</span>,
</code></td></tr><tr><td id="L2689" class="css-a4x74f"><span>2689</span></td><td id="LC2689" class="css-1dcdqdg"><code>          logo: <span class="code-string">'https://router.vuejs.org/logo.png'</span>,
</code></td></tr><tr><td id="L2690" class="css-a4x74f"><span>2690</span></td><td id="LC2690" class="css-1dcdqdg"><code>          componentStateTypes: [<span class="code-string">'Routing'</span>],
</code></td></tr><tr><td id="L2691" class="css-a4x74f"><span>2691</span></td><td id="LC2691" class="css-1dcdqdg"><code>          app,
</code></td></tr><tr><td id="L2692" class="css-a4x74f"><span>2692</span></td><td id="LC2692" class="css-1dcdqdg"><code>      }, api =&gt; {
</code></td></tr><tr><td id="L2693" class="css-a4x74f"><span>2693</span></td><td id="LC2693" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (<span class="code-keyword">typeof</span> api.now !== <span class="code-string">'function'</span>) {
</code></td></tr><tr><td id="L2694" class="css-a4x74f"><span>2694</span></td><td id="LC2694" class="css-1dcdqdg"><code>              <span class="code-built_in">console</span>.warn(<span class="code-string">'[Vue Router]: You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.'</span>);
</code></td></tr><tr><td id="L2695" class="css-a4x74f"><span>2695</span></td><td id="LC2695" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2696" class="css-a4x74f"><span>2696</span></td><td id="LC2696" class="css-1dcdqdg"><code>          <span class="code-comment">// display state added by the router</span>
</code></td></tr><tr><td id="L2697" class="css-a4x74f"><span>2697</span></td><td id="LC2697" class="css-1dcdqdg"><code>          api.on.inspectComponent(<span class="code-function">(<span class="code-params">payload, ctx</span>) =&gt;</span> {
</code></td></tr><tr><td id="L2698" class="css-a4x74f"><span>2698</span></td><td id="LC2698" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (payload.instanceData) {
</code></td></tr><tr><td id="L2699" class="css-a4x74f"><span>2699</span></td><td id="LC2699" class="css-1dcdqdg"><code>                  payload.instanceData.state.push({
</code></td></tr><tr><td id="L2700" class="css-a4x74f"><span>2700</span></td><td id="LC2700" class="css-1dcdqdg"><code>                      type: <span class="code-string">'Routing'</span>,
</code></td></tr><tr><td id="L2701" class="css-a4x74f"><span>2701</span></td><td id="LC2701" class="css-1dcdqdg"><code>                      key: <span class="code-string">'$route'</span>,
</code></td></tr><tr><td id="L2702" class="css-a4x74f"><span>2702</span></td><td id="LC2702" class="css-1dcdqdg"><code>                      editable: <span class="code-literal">false</span>,
</code></td></tr><tr><td id="L2703" class="css-a4x74f"><span>2703</span></td><td id="LC2703" class="css-1dcdqdg"><code>                      value: formatRouteLocation(router.currentRoute.value, <span class="code-string">'Current Route'</span>),
</code></td></tr><tr><td id="L2704" class="css-a4x74f"><span>2704</span></td><td id="LC2704" class="css-1dcdqdg"><code>                  });
</code></td></tr><tr><td id="L2705" class="css-a4x74f"><span>2705</span></td><td id="LC2705" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2706" class="css-a4x74f"><span>2706</span></td><td id="LC2706" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2707" class="css-a4x74f"><span>2707</span></td><td id="LC2707" class="css-1dcdqdg"><code>          <span class="code-comment">// mark router-link as active and display tags on router views</span>
</code></td></tr><tr><td id="L2708" class="css-a4x74f"><span>2708</span></td><td id="LC2708" class="css-1dcdqdg"><code>          api.on.visitComponentTree(<span class="code-function">(<span class="code-params">{ treeNode: node, componentInstance }</span>) =&gt;</span> {
</code></td></tr><tr><td id="L2709" class="css-a4x74f"><span>2709</span></td><td id="LC2709" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (componentInstance.__vrv_devtools) {
</code></td></tr><tr><td id="L2710" class="css-a4x74f"><span>2710</span></td><td id="LC2710" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> info = componentInstance.__vrv_devtools;
</code></td></tr><tr><td id="L2711" class="css-a4x74f"><span>2711</span></td><td id="LC2711" class="css-1dcdqdg"><code>                  node.tags.push({
</code></td></tr><tr><td id="L2712" class="css-a4x74f"><span>2712</span></td><td id="LC2712" class="css-1dcdqdg"><code>                      label: (info.name ? <span class="code-string">`<span class="code-subst">${info.name.toString()}</span>: `</span> : <span class="code-string">''</span>) + info.path,
</code></td></tr><tr><td id="L2713" class="css-a4x74f"><span>2713</span></td><td id="LC2713" class="css-1dcdqdg"><code>                      textColor: <span class="code-number">0</span>,
</code></td></tr><tr><td id="L2714" class="css-a4x74f"><span>2714</span></td><td id="LC2714" class="css-1dcdqdg"><code>                      tooltip: <span class="code-string">'This component is rendered by &amp;lt;router-view&amp;gt;'</span>,
</code></td></tr><tr><td id="L2715" class="css-a4x74f"><span>2715</span></td><td id="LC2715" class="css-1dcdqdg"><code>                      backgroundColor: PINK_500,
</code></td></tr><tr><td id="L2716" class="css-a4x74f"><span>2716</span></td><td id="LC2716" class="css-1dcdqdg"><code>                  });
</code></td></tr><tr><td id="L2717" class="css-a4x74f"><span>2717</span></td><td id="LC2717" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2718" class="css-a4x74f"><span>2718</span></td><td id="LC2718" class="css-1dcdqdg"><code>              <span class="code-comment">// if multiple useLink are used</span>
</code></td></tr><tr><td id="L2719" class="css-a4x74f"><span>2719</span></td><td id="LC2719" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (isArray(componentInstance.__vrl_devtools)) {
</code></td></tr><tr><td id="L2720" class="css-a4x74f"><span>2720</span></td><td id="LC2720" class="css-1dcdqdg"><code>                  componentInstance.__devtoolsApi = api;
</code></td></tr><tr><td id="L2721" class="css-a4x74f"><span>2721</span></td><td id="LC2721" class="css-1dcdqdg"><code>                  componentInstance.__vrl_devtools.forEach(<span class="code-function"><span class="code-params">devtoolsData</span> =&gt;</span> {
</code></td></tr><tr><td id="L2722" class="css-a4x74f"><span>2722</span></td><td id="LC2722" class="css-1dcdqdg"><code>                      <span class="code-keyword">let</span> backgroundColor = ORANGE_400;
</code></td></tr><tr><td id="L2723" class="css-a4x74f"><span>2723</span></td><td id="LC2723" class="css-1dcdqdg"><code>                      <span class="code-keyword">let</span> tooltip = <span class="code-string">''</span>;
</code></td></tr><tr><td id="L2724" class="css-a4x74f"><span>2724</span></td><td id="LC2724" class="css-1dcdqdg"><code>                      <span class="code-keyword">if</span> (devtoolsData.isExactActive) {
</code></td></tr><tr><td id="L2725" class="css-a4x74f"><span>2725</span></td><td id="LC2725" class="css-1dcdqdg"><code>                          backgroundColor = LIME_500;
</code></td></tr><tr><td id="L2726" class="css-a4x74f"><span>2726</span></td><td id="LC2726" class="css-1dcdqdg"><code>                          tooltip = <span class="code-string">'This is exactly active'</span>;
</code></td></tr><tr><td id="L2727" class="css-a4x74f"><span>2727</span></td><td id="LC2727" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L2728" class="css-a4x74f"><span>2728</span></td><td id="LC2728" class="css-1dcdqdg"><code>                      <span class="code-keyword">else</span> <span class="code-keyword">if</span> (devtoolsData.isActive) {
</code></td></tr><tr><td id="L2729" class="css-a4x74f"><span>2729</span></td><td id="LC2729" class="css-1dcdqdg"><code>                          backgroundColor = BLUE_600;
</code></td></tr><tr><td id="L2730" class="css-a4x74f"><span>2730</span></td><td id="LC2730" class="css-1dcdqdg"><code>                          tooltip = <span class="code-string">'This link is active'</span>;
</code></td></tr><tr><td id="L2731" class="css-a4x74f"><span>2731</span></td><td id="LC2731" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L2732" class="css-a4x74f"><span>2732</span></td><td id="LC2732" class="css-1dcdqdg"><code>                      node.tags.push({
</code></td></tr><tr><td id="L2733" class="css-a4x74f"><span>2733</span></td><td id="LC2733" class="css-1dcdqdg"><code>                          label: devtoolsData.route.path,
</code></td></tr><tr><td id="L2734" class="css-a4x74f"><span>2734</span></td><td id="LC2734" class="css-1dcdqdg"><code>                          textColor: <span class="code-number">0</span>,
</code></td></tr><tr><td id="L2735" class="css-a4x74f"><span>2735</span></td><td id="LC2735" class="css-1dcdqdg"><code>                          tooltip,
</code></td></tr><tr><td id="L2736" class="css-a4x74f"><span>2736</span></td><td id="LC2736" class="css-1dcdqdg"><code>                          backgroundColor,
</code></td></tr><tr><td id="L2737" class="css-a4x74f"><span>2737</span></td><td id="LC2737" class="css-1dcdqdg"><code>                      });
</code></td></tr><tr><td id="L2738" class="css-a4x74f"><span>2738</span></td><td id="LC2738" class="css-1dcdqdg"><code>                  });
</code></td></tr><tr><td id="L2739" class="css-a4x74f"><span>2739</span></td><td id="LC2739" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2740" class="css-a4x74f"><span>2740</span></td><td id="LC2740" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2741" class="css-a4x74f"><span>2741</span></td><td id="LC2741" class="css-1dcdqdg"><code>          vue.watch(router.currentRoute, () =&gt; {
</code></td></tr><tr><td id="L2742" class="css-a4x74f"><span>2742</span></td><td id="LC2742" class="css-1dcdqdg"><code>              <span class="code-comment">// refresh active state</span>
</code></td></tr><tr><td id="L2743" class="css-a4x74f"><span>2743</span></td><td id="LC2743" class="css-1dcdqdg"><code>              refreshRoutesView();
</code></td></tr><tr><td id="L2744" class="css-a4x74f"><span>2744</span></td><td id="LC2744" class="css-1dcdqdg"><code>              api.notifyComponentUpdate();
</code></td></tr><tr><td id="L2745" class="css-a4x74f"><span>2745</span></td><td id="LC2745" class="css-1dcdqdg"><code>              api.sendInspectorTree(routerInspectorId);
</code></td></tr><tr><td id="L2746" class="css-a4x74f"><span>2746</span></td><td id="LC2746" class="css-1dcdqdg"><code>              api.sendInspectorState(routerInspectorId);
</code></td></tr><tr><td id="L2747" class="css-a4x74f"><span>2747</span></td><td id="LC2747" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2748" class="css-a4x74f"><span>2748</span></td><td id="LC2748" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> navigationsLayerId = <span class="code-string">'router:navigations:'</span> + id;
</code></td></tr><tr><td id="L2749" class="css-a4x74f"><span>2749</span></td><td id="LC2749" class="css-1dcdqdg"><code>          api.addTimelineLayer({
</code></td></tr><tr><td id="L2750" class="css-a4x74f"><span>2750</span></td><td id="LC2750" class="css-1dcdqdg"><code>              id: navigationsLayerId,
</code></td></tr><tr><td id="L2751" class="css-a4x74f"><span>2751</span></td><td id="LC2751" class="css-1dcdqdg"><code>              label: <span class="code-string">`Router<span class="code-subst">${id ? <span class="code-string">' '</span> + id : <span class="code-string">''</span>}</span> Navigations`</span>,
</code></td></tr><tr><td id="L2752" class="css-a4x74f"><span>2752</span></td><td id="LC2752" class="css-1dcdqdg"><code>              color: <span class="code-number">0x40a8c4</span>,
</code></td></tr><tr><td id="L2753" class="css-a4x74f"><span>2753</span></td><td id="LC2753" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2754" class="css-a4x74f"><span>2754</span></td><td id="LC2754" class="css-1dcdqdg"><code>          <span class="code-comment">// const errorsLayerId = 'router:errors'</span>
</code></td></tr><tr><td id="L2755" class="css-a4x74f"><span>2755</span></td><td id="LC2755" class="css-1dcdqdg"><code>          <span class="code-comment">// api.addTimelineLayer({</span>
</code></td></tr><tr><td id="L2756" class="css-a4x74f"><span>2756</span></td><td id="LC2756" class="css-1dcdqdg"><code>          <span class="code-comment">//   id: errorsLayerId,</span>
</code></td></tr><tr><td id="L2757" class="css-a4x74f"><span>2757</span></td><td id="LC2757" class="css-1dcdqdg"><code>          <span class="code-comment">//   label: 'Router Errors',</span>
</code></td></tr><tr><td id="L2758" class="css-a4x74f"><span>2758</span></td><td id="LC2758" class="css-1dcdqdg"><code>          <span class="code-comment">//   color: 0xea5455,</span>
</code></td></tr><tr><td id="L2759" class="css-a4x74f"><span>2759</span></td><td id="LC2759" class="css-1dcdqdg"><code>          <span class="code-comment">// })</span>
</code></td></tr><tr><td id="L2760" class="css-a4x74f"><span>2760</span></td><td id="LC2760" class="css-1dcdqdg"><code>          router.onError(<span class="code-function">(<span class="code-params">error, to</span>) =&gt;</span> {
</code></td></tr><tr><td id="L2761" class="css-a4x74f"><span>2761</span></td><td id="LC2761" class="css-1dcdqdg"><code>              api.addTimelineEvent({
</code></td></tr><tr><td id="L2762" class="css-a4x74f"><span>2762</span></td><td id="LC2762" class="css-1dcdqdg"><code>                  layerId: navigationsLayerId,
</code></td></tr><tr><td id="L2763" class="css-a4x74f"><span>2763</span></td><td id="LC2763" class="css-1dcdqdg"><code>                  event: {
</code></td></tr><tr><td id="L2764" class="css-a4x74f"><span>2764</span></td><td id="LC2764" class="css-1dcdqdg"><code>                      title: <span class="code-string">'Error during Navigation'</span>,
</code></td></tr><tr><td id="L2765" class="css-a4x74f"><span>2765</span></td><td id="LC2765" class="css-1dcdqdg"><code>                      subtitle: to.fullPath,
</code></td></tr><tr><td id="L2766" class="css-a4x74f"><span>2766</span></td><td id="LC2766" class="css-1dcdqdg"><code>                      logType: <span class="code-string">'error'</span>,
</code></td></tr><tr><td id="L2767" class="css-a4x74f"><span>2767</span></td><td id="LC2767" class="css-1dcdqdg"><code>                      time: api.now(),
</code></td></tr><tr><td id="L2768" class="css-a4x74f"><span>2768</span></td><td id="LC2768" class="css-1dcdqdg"><code>                      data: { error },
</code></td></tr><tr><td id="L2769" class="css-a4x74f"><span>2769</span></td><td id="LC2769" class="css-1dcdqdg"><code>                      groupId: to.meta.__navigationId,
</code></td></tr><tr><td id="L2770" class="css-a4x74f"><span>2770</span></td><td id="LC2770" class="css-1dcdqdg"><code>                  },
</code></td></tr><tr><td id="L2771" class="css-a4x74f"><span>2771</span></td><td id="LC2771" class="css-1dcdqdg"><code>              });
</code></td></tr><tr><td id="L2772" class="css-a4x74f"><span>2772</span></td><td id="LC2772" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2773" class="css-a4x74f"><span>2773</span></td><td id="LC2773" class="css-1dcdqdg"><code>          <span class="code-comment">// attached to `meta` and used to group events</span>
</code></td></tr><tr><td id="L2774" class="css-a4x74f"><span>2774</span></td><td id="LC2774" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> navigationId = <span class="code-number">0</span>;
</code></td></tr><tr><td id="L2775" class="css-a4x74f"><span>2775</span></td><td id="LC2775" class="css-1dcdqdg"><code>          router.beforeEach(<span class="code-function">(<span class="code-params">to, <span class="code-keyword">from</span></span>) =&gt;</span> {
</code></td></tr><tr><td id="L2776" class="css-a4x74f"><span>2776</span></td><td id="LC2776" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> data = {
</code></td></tr><tr><td id="L2777" class="css-a4x74f"><span>2777</span></td><td id="LC2777" class="css-1dcdqdg"><code>                  guard: formatDisplay(<span class="code-string">'beforeEach'</span>),
</code></td></tr><tr><td id="L2778" class="css-a4x74f"><span>2778</span></td><td id="LC2778" class="css-1dcdqdg"><code>                  <span class="code-keyword">from</span>: formatRouteLocation(<span class="code-keyword">from</span>, <span class="code-string">'Current Location during this navigation'</span>),
</code></td></tr><tr><td id="L2779" class="css-a4x74f"><span>2779</span></td><td id="LC2779" class="css-1dcdqdg"><code>                  to: formatRouteLocation(to, <span class="code-string">'Target location'</span>),
</code></td></tr><tr><td id="L2780" class="css-a4x74f"><span>2780</span></td><td id="LC2780" class="css-1dcdqdg"><code>              };
</code></td></tr><tr><td id="L2781" class="css-a4x74f"><span>2781</span></td><td id="LC2781" class="css-1dcdqdg"><code>              <span class="code-comment">// Used to group navigations together, hide from devtools</span>
</code></td></tr><tr><td id="L2782" class="css-a4x74f"><span>2782</span></td><td id="LC2782" class="css-1dcdqdg"><code>              <span class="code-built_in">Object</span>.defineProperty(to.meta, <span class="code-string">'__navigationId'</span>, {
</code></td></tr><tr><td id="L2783" class="css-a4x74f"><span>2783</span></td><td id="LC2783" class="css-1dcdqdg"><code>                  value: navigationId++,
</code></td></tr><tr><td id="L2784" class="css-a4x74f"><span>2784</span></td><td id="LC2784" class="css-1dcdqdg"><code>              });
</code></td></tr><tr><td id="L2785" class="css-a4x74f"><span>2785</span></td><td id="LC2785" class="css-1dcdqdg"><code>              api.addTimelineEvent({
</code></td></tr><tr><td id="L2786" class="css-a4x74f"><span>2786</span></td><td id="LC2786" class="css-1dcdqdg"><code>                  layerId: navigationsLayerId,
</code></td></tr><tr><td id="L2787" class="css-a4x74f"><span>2787</span></td><td id="LC2787" class="css-1dcdqdg"><code>                  event: {
</code></td></tr><tr><td id="L2788" class="css-a4x74f"><span>2788</span></td><td id="LC2788" class="css-1dcdqdg"><code>                      time: api.now(),
</code></td></tr><tr><td id="L2789" class="css-a4x74f"><span>2789</span></td><td id="LC2789" class="css-1dcdqdg"><code>                      title: <span class="code-string">'Start of navigation'</span>,
</code></td></tr><tr><td id="L2790" class="css-a4x74f"><span>2790</span></td><td id="LC2790" class="css-1dcdqdg"><code>                      subtitle: to.fullPath,
</code></td></tr><tr><td id="L2791" class="css-a4x74f"><span>2791</span></td><td id="LC2791" class="css-1dcdqdg"><code>                      data,
</code></td></tr><tr><td id="L2792" class="css-a4x74f"><span>2792</span></td><td id="LC2792" class="css-1dcdqdg"><code>                      groupId: to.meta.__navigationId,
</code></td></tr><tr><td id="L2793" class="css-a4x74f"><span>2793</span></td><td id="LC2793" class="css-1dcdqdg"><code>                  },
</code></td></tr><tr><td id="L2794" class="css-a4x74f"><span>2794</span></td><td id="LC2794" class="css-1dcdqdg"><code>              });
</code></td></tr><tr><td id="L2795" class="css-a4x74f"><span>2795</span></td><td id="LC2795" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2796" class="css-a4x74f"><span>2796</span></td><td id="LC2796" class="css-1dcdqdg"><code>          router.afterEach(<span class="code-function">(<span class="code-params">to, <span class="code-keyword">from</span>, failure</span>) =&gt;</span> {
</code></td></tr><tr><td id="L2797" class="css-a4x74f"><span>2797</span></td><td id="LC2797" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> data = {
</code></td></tr><tr><td id="L2798" class="css-a4x74f"><span>2798</span></td><td id="LC2798" class="css-1dcdqdg"><code>                  guard: formatDisplay(<span class="code-string">'afterEach'</span>),
</code></td></tr><tr><td id="L2799" class="css-a4x74f"><span>2799</span></td><td id="LC2799" class="css-1dcdqdg"><code>              };
</code></td></tr><tr><td id="L2800" class="css-a4x74f"><span>2800</span></td><td id="LC2800" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (failure) {
</code></td></tr><tr><td id="L2801" class="css-a4x74f"><span>2801</span></td><td id="LC2801" class="css-1dcdqdg"><code>                  data.failure = {
</code></td></tr><tr><td id="L2802" class="css-a4x74f"><span>2802</span></td><td id="LC2802" class="css-1dcdqdg"><code>                      _custom: {
</code></td></tr><tr><td id="L2803" class="css-a4x74f"><span>2803</span></td><td id="LC2803" class="css-1dcdqdg"><code>                          type: <span class="code-built_in">Error</span>,
</code></td></tr><tr><td id="L2804" class="css-a4x74f"><span>2804</span></td><td id="LC2804" class="css-1dcdqdg"><code>                          readOnly: <span class="code-literal">true</span>,
</code></td></tr><tr><td id="L2805" class="css-a4x74f"><span>2805</span></td><td id="LC2805" class="css-1dcdqdg"><code>                          display: failure ? failure.message : <span class="code-string">''</span>,
</code></td></tr><tr><td id="L2806" class="css-a4x74f"><span>2806</span></td><td id="LC2806" class="css-1dcdqdg"><code>                          tooltip: <span class="code-string">'Navigation Failure'</span>,
</code></td></tr><tr><td id="L2807" class="css-a4x74f"><span>2807</span></td><td id="LC2807" class="css-1dcdqdg"><code>                          value: failure,
</code></td></tr><tr><td id="L2808" class="css-a4x74f"><span>2808</span></td><td id="LC2808" class="css-1dcdqdg"><code>                      },
</code></td></tr><tr><td id="L2809" class="css-a4x74f"><span>2809</span></td><td id="LC2809" class="css-1dcdqdg"><code>                  };
</code></td></tr><tr><td id="L2810" class="css-a4x74f"><span>2810</span></td><td id="LC2810" class="css-1dcdqdg"><code>                  data.status = formatDisplay(<span class="code-string">''</span>);
</code></td></tr><tr><td id="L2811" class="css-a4x74f"><span>2811</span></td><td id="LC2811" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2812" class="css-a4x74f"><span>2812</span></td><td id="LC2812" class="css-1dcdqdg"><code>              <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L2813" class="css-a4x74f"><span>2813</span></td><td id="LC2813" class="css-1dcdqdg"><code>                  data.status = formatDisplay(<span class="code-string">''</span>);
</code></td></tr><tr><td id="L2814" class="css-a4x74f"><span>2814</span></td><td id="LC2814" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2815" class="css-a4x74f"><span>2815</span></td><td id="LC2815" class="css-1dcdqdg"><code>              <span class="code-comment">// we set here to have the right order</span>
</code></td></tr><tr><td id="L2816" class="css-a4x74f"><span>2816</span></td><td id="LC2816" class="css-1dcdqdg"><code>              data.from = formatRouteLocation(<span class="code-keyword">from</span>, <span class="code-string">'Current Location during this navigation'</span>);
</code></td></tr><tr><td id="L2817" class="css-a4x74f"><span>2817</span></td><td id="LC2817" class="css-1dcdqdg"><code>              data.to = formatRouteLocation(to, <span class="code-string">'Target location'</span>);
</code></td></tr><tr><td id="L2818" class="css-a4x74f"><span>2818</span></td><td id="LC2818" class="css-1dcdqdg"><code>              api.addTimelineEvent({
</code></td></tr><tr><td id="L2819" class="css-a4x74f"><span>2819</span></td><td id="LC2819" class="css-1dcdqdg"><code>                  layerId: navigationsLayerId,
</code></td></tr><tr><td id="L2820" class="css-a4x74f"><span>2820</span></td><td id="LC2820" class="css-1dcdqdg"><code>                  event: {
</code></td></tr><tr><td id="L2821" class="css-a4x74f"><span>2821</span></td><td id="LC2821" class="css-1dcdqdg"><code>                      title: <span class="code-string">'End of navigation'</span>,
</code></td></tr><tr><td id="L2822" class="css-a4x74f"><span>2822</span></td><td id="LC2822" class="css-1dcdqdg"><code>                      subtitle: to.fullPath,
</code></td></tr><tr><td id="L2823" class="css-a4x74f"><span>2823</span></td><td id="LC2823" class="css-1dcdqdg"><code>                      time: api.now(),
</code></td></tr><tr><td id="L2824" class="css-a4x74f"><span>2824</span></td><td id="LC2824" class="css-1dcdqdg"><code>                      data,
</code></td></tr><tr><td id="L2825" class="css-a4x74f"><span>2825</span></td><td id="LC2825" class="css-1dcdqdg"><code>                      logType: failure ? <span class="code-string">'warning'</span> : <span class="code-string">'default'</span>,
</code></td></tr><tr><td id="L2826" class="css-a4x74f"><span>2826</span></td><td id="LC2826" class="css-1dcdqdg"><code>                      groupId: to.meta.__navigationId,
</code></td></tr><tr><td id="L2827" class="css-a4x74f"><span>2827</span></td><td id="LC2827" class="css-1dcdqdg"><code>                  },
</code></td></tr><tr><td id="L2828" class="css-a4x74f"><span>2828</span></td><td id="LC2828" class="css-1dcdqdg"><code>              });
</code></td></tr><tr><td id="L2829" class="css-a4x74f"><span>2829</span></td><td id="LC2829" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2830" class="css-a4x74f"><span>2830</span></td><td id="LC2830" class="css-1dcdqdg"><code>          <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2831" class="css-a4x74f"><span>2831</span></td><td id="LC2831" class="css-1dcdqdg"><code><span class="code-comment">           * Inspector of Existing routes
</span></code></td></tr><tr><td id="L2832" class="css-a4x74f"><span>2832</span></td><td id="LC2832" class="css-1dcdqdg"><code><span class="code-comment">           */</span>
</code></td></tr><tr><td id="L2833" class="css-a4x74f"><span>2833</span></td><td id="LC2833" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> routerInspectorId = <span class="code-string">'router-inspector:'</span> + id;
</code></td></tr><tr><td id="L2834" class="css-a4x74f"><span>2834</span></td><td id="LC2834" class="css-1dcdqdg"><code>          api.addInspector({
</code></td></tr><tr><td id="L2835" class="css-a4x74f"><span>2835</span></td><td id="LC2835" class="css-1dcdqdg"><code>              id: routerInspectorId,
</code></td></tr><tr><td id="L2836" class="css-a4x74f"><span>2836</span></td><td id="LC2836" class="css-1dcdqdg"><code>              label: <span class="code-string">'Routes'</span> + (id ? <span class="code-string">' '</span> + id : <span class="code-string">''</span>),
</code></td></tr><tr><td id="L2837" class="css-a4x74f"><span>2837</span></td><td id="LC2837" class="css-1dcdqdg"><code>              icon: <span class="code-string">'book'</span>,
</code></td></tr><tr><td id="L2838" class="css-a4x74f"><span>2838</span></td><td id="LC2838" class="css-1dcdqdg"><code>              treeFilterPlaceholder: <span class="code-string">'Search routes'</span>,
</code></td></tr><tr><td id="L2839" class="css-a4x74f"><span>2839</span></td><td id="LC2839" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2840" class="css-a4x74f"><span>2840</span></td><td id="LC2840" class="css-1dcdqdg"><code>          <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">refreshRoutesView</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L2841" class="css-a4x74f"><span>2841</span></td><td id="LC2841" class="css-1dcdqdg"><code>              <span class="code-comment">// the routes view isn't active</span>
</code></td></tr><tr><td id="L2842" class="css-a4x74f"><span>2842</span></td><td id="LC2842" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (!activeRoutesPayload)
</code></td></tr><tr><td id="L2843" class="css-a4x74f"><span>2843</span></td><td id="LC2843" class="css-1dcdqdg"><code>                  <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L2844" class="css-a4x74f"><span>2844</span></td><td id="LC2844" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> payload = activeRoutesPayload;
</code></td></tr><tr><td id="L2845" class="css-a4x74f"><span>2845</span></td><td id="LC2845" class="css-1dcdqdg"><code>              <span class="code-comment">// children routes will appear as nested</span>
</code></td></tr><tr><td id="L2846" class="css-a4x74f"><span>2846</span></td><td id="LC2846" class="css-1dcdqdg"><code>              <span class="code-keyword">let</span> routes = matcher.getRoutes().filter(<span class="code-function"><span class="code-params">route</span> =&gt;</span> !route.parent);
</code></td></tr><tr><td id="L2847" class="css-a4x74f"><span>2847</span></td><td id="LC2847" class="css-1dcdqdg"><code>              <span class="code-comment">// reset match state to false</span>
</code></td></tr><tr><td id="L2848" class="css-a4x74f"><span>2848</span></td><td id="LC2848" class="css-1dcdqdg"><code>              routes.forEach(resetMatchStateOnRouteRecord);
</code></td></tr><tr><td id="L2849" class="css-a4x74f"><span>2849</span></td><td id="LC2849" class="css-1dcdqdg"><code>              <span class="code-comment">// apply a match state if there is a payload</span>
</code></td></tr><tr><td id="L2850" class="css-a4x74f"><span>2850</span></td><td id="LC2850" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (payload.filter) {
</code></td></tr><tr><td id="L2851" class="css-a4x74f"><span>2851</span></td><td id="LC2851" class="css-1dcdqdg"><code>                  routes = routes.filter(<span class="code-function"><span class="code-params">route</span> =&gt;</span> 
</code></td></tr><tr><td id="L2852" class="css-a4x74f"><span>2852</span></td><td id="LC2852" class="css-1dcdqdg"><code>                  <span class="code-comment">// save matches state based on the payload</span>
</code></td></tr><tr><td id="L2853" class="css-a4x74f"><span>2853</span></td><td id="LC2853" class="css-1dcdqdg"><code>                  isRouteMatching(route, payload.filter.toLowerCase()));
</code></td></tr><tr><td id="L2854" class="css-a4x74f"><span>2854</span></td><td id="LC2854" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2855" class="css-a4x74f"><span>2855</span></td><td id="LC2855" class="css-1dcdqdg"><code>              <span class="code-comment">// mark active routes</span>
</code></td></tr><tr><td id="L2856" class="css-a4x74f"><span>2856</span></td><td id="LC2856" class="css-1dcdqdg"><code>              routes.forEach(<span class="code-function"><span class="code-params">route</span> =&gt;</span> markRouteRecordActive(route, router.currentRoute.value));
</code></td></tr><tr><td id="L2857" class="css-a4x74f"><span>2857</span></td><td id="LC2857" class="css-1dcdqdg"><code>              payload.rootNodes = routes.map(formatRouteRecordForInspector);
</code></td></tr><tr><td id="L2858" class="css-a4x74f"><span>2858</span></td><td id="LC2858" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2859" class="css-a4x74f"><span>2859</span></td><td id="LC2859" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> activeRoutesPayload;
</code></td></tr><tr><td id="L2860" class="css-a4x74f"><span>2860</span></td><td id="LC2860" class="css-1dcdqdg"><code>          api.on.getInspectorTree(<span class="code-function"><span class="code-params">payload</span> =&gt;</span> {
</code></td></tr><tr><td id="L2861" class="css-a4x74f"><span>2861</span></td><td id="LC2861" class="css-1dcdqdg"><code>              activeRoutesPayload = payload;
</code></td></tr><tr><td id="L2862" class="css-a4x74f"><span>2862</span></td><td id="LC2862" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (payload.app === app &amp;&amp; payload.inspectorId === routerInspectorId) {
</code></td></tr><tr><td id="L2863" class="css-a4x74f"><span>2863</span></td><td id="LC2863" class="css-1dcdqdg"><code>                  refreshRoutesView();
</code></td></tr><tr><td id="L2864" class="css-a4x74f"><span>2864</span></td><td id="LC2864" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2865" class="css-a4x74f"><span>2865</span></td><td id="LC2865" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2866" class="css-a4x74f"><span>2866</span></td><td id="LC2866" class="css-1dcdqdg"><code>          <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2867" class="css-a4x74f"><span>2867</span></td><td id="LC2867" class="css-1dcdqdg"><code><span class="code-comment">           * Display information about the currently selected route record
</span></code></td></tr><tr><td id="L2868" class="css-a4x74f"><span>2868</span></td><td id="LC2868" class="css-1dcdqdg"><code><span class="code-comment">           */</span>
</code></td></tr><tr><td id="L2869" class="css-a4x74f"><span>2869</span></td><td id="LC2869" class="css-1dcdqdg"><code>          api.on.getInspectorState(<span class="code-function"><span class="code-params">payload</span> =&gt;</span> {
</code></td></tr><tr><td id="L2870" class="css-a4x74f"><span>2870</span></td><td id="LC2870" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (payload.app === app &amp;&amp; payload.inspectorId === routerInspectorId) {
</code></td></tr><tr><td id="L2871" class="css-a4x74f"><span>2871</span></td><td id="LC2871" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> routes = matcher.getRoutes();
</code></td></tr><tr><td id="L2872" class="css-a4x74f"><span>2872</span></td><td id="LC2872" class="css-1dcdqdg"><code>                  <span class="code-keyword">const</span> route = routes.find(<span class="code-function"><span class="code-params">route</span> =&gt;</span> route.record.__vd_id === payload.nodeId);
</code></td></tr><tr><td id="L2873" class="css-a4x74f"><span>2873</span></td><td id="LC2873" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (route) {
</code></td></tr><tr><td id="L2874" class="css-a4x74f"><span>2874</span></td><td id="LC2874" class="css-1dcdqdg"><code>                      payload.state = {
</code></td></tr><tr><td id="L2875" class="css-a4x74f"><span>2875</span></td><td id="LC2875" class="css-1dcdqdg"><code>                          options: formatRouteRecordMatcherForStateInspector(route),
</code></td></tr><tr><td id="L2876" class="css-a4x74f"><span>2876</span></td><td id="LC2876" class="css-1dcdqdg"><code>                      };
</code></td></tr><tr><td id="L2877" class="css-a4x74f"><span>2877</span></td><td id="LC2877" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L2878" class="css-a4x74f"><span>2878</span></td><td id="LC2878" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L2879" class="css-a4x74f"><span>2879</span></td><td id="LC2879" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2880" class="css-a4x74f"><span>2880</span></td><td id="LC2880" class="css-1dcdqdg"><code>          api.sendInspectorTree(routerInspectorId);
</code></td></tr><tr><td id="L2881" class="css-a4x74f"><span>2881</span></td><td id="LC2881" class="css-1dcdqdg"><code>          api.sendInspectorState(routerInspectorId);
</code></td></tr><tr><td id="L2882" class="css-a4x74f"><span>2882</span></td><td id="LC2882" class="css-1dcdqdg"><code>      });
</code></td></tr><tr><td id="L2883" class="css-a4x74f"><span>2883</span></td><td id="LC2883" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2884" class="css-a4x74f"><span>2884</span></td><td id="LC2884" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">modifierForKey</span>(<span class="code-params">key</span>) </span>{
</code></td></tr><tr><td id="L2885" class="css-a4x74f"><span>2885</span></td><td id="LC2885" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (key.optional) {
</code></td></tr><tr><td id="L2886" class="css-a4x74f"><span>2886</span></td><td id="LC2886" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> key.repeatable ? <span class="code-string">'*'</span> : <span class="code-string">'?'</span>;
</code></td></tr><tr><td id="L2887" class="css-a4x74f"><span>2887</span></td><td id="LC2887" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2888" class="css-a4x74f"><span>2888</span></td><td id="LC2888" class="css-1dcdqdg"><code>      <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L2889" class="css-a4x74f"><span>2889</span></td><td id="LC2889" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> key.repeatable ? <span class="code-string">'+'</span> : <span class="code-string">''</span>;
</code></td></tr><tr><td id="L2890" class="css-a4x74f"><span>2890</span></td><td id="LC2890" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2891" class="css-a4x74f"><span>2891</span></td><td id="LC2891" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2892" class="css-a4x74f"><span>2892</span></td><td id="LC2892" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">formatRouteRecordMatcherForStateInspector</span>(<span class="code-params">route</span>) </span>{
</code></td></tr><tr><td id="L2893" class="css-a4x74f"><span>2893</span></td><td id="LC2893" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> { record } = route;
</code></td></tr><tr><td id="L2894" class="css-a4x74f"><span>2894</span></td><td id="LC2894" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> fields = [
</code></td></tr><tr><td id="L2895" class="css-a4x74f"><span>2895</span></td><td id="LC2895" class="css-1dcdqdg"><code>          { <span class="code-attr">editable</span>: <span class="code-literal">false</span>, <span class="code-attr">key</span>: <span class="code-string">'path'</span>, <span class="code-attr">value</span>: record.path },
</code></td></tr><tr><td id="L2896" class="css-a4x74f"><span>2896</span></td><td id="LC2896" class="css-1dcdqdg"><code>      ];
</code></td></tr><tr><td id="L2897" class="css-a4x74f"><span>2897</span></td><td id="LC2897" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (record.name != <span class="code-literal">null</span>) {
</code></td></tr><tr><td id="L2898" class="css-a4x74f"><span>2898</span></td><td id="LC2898" class="css-1dcdqdg"><code>          fields.push({
</code></td></tr><tr><td id="L2899" class="css-a4x74f"><span>2899</span></td><td id="LC2899" class="css-1dcdqdg"><code>              editable: <span class="code-literal">false</span>,
</code></td></tr><tr><td id="L2900" class="css-a4x74f"><span>2900</span></td><td id="LC2900" class="css-1dcdqdg"><code>              key: <span class="code-string">'name'</span>,
</code></td></tr><tr><td id="L2901" class="css-a4x74f"><span>2901</span></td><td id="LC2901" class="css-1dcdqdg"><code>              value: record.name,
</code></td></tr><tr><td id="L2902" class="css-a4x74f"><span>2902</span></td><td id="LC2902" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2903" class="css-a4x74f"><span>2903</span></td><td id="LC2903" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2904" class="css-a4x74f"><span>2904</span></td><td id="LC2904" class="css-1dcdqdg"><code>      fields.push({ <span class="code-attr">editable</span>: <span class="code-literal">false</span>, <span class="code-attr">key</span>: <span class="code-string">'regexp'</span>, <span class="code-attr">value</span>: route.re });
</code></td></tr><tr><td id="L2905" class="css-a4x74f"><span>2905</span></td><td id="LC2905" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (route.keys.length) {
</code></td></tr><tr><td id="L2906" class="css-a4x74f"><span>2906</span></td><td id="LC2906" class="css-1dcdqdg"><code>          fields.push({
</code></td></tr><tr><td id="L2907" class="css-a4x74f"><span>2907</span></td><td id="LC2907" class="css-1dcdqdg"><code>              editable: <span class="code-literal">false</span>,
</code></td></tr><tr><td id="L2908" class="css-a4x74f"><span>2908</span></td><td id="LC2908" class="css-1dcdqdg"><code>              key: <span class="code-string">'keys'</span>,
</code></td></tr><tr><td id="L2909" class="css-a4x74f"><span>2909</span></td><td id="LC2909" class="css-1dcdqdg"><code>              value: {
</code></td></tr><tr><td id="L2910" class="css-a4x74f"><span>2910</span></td><td id="LC2910" class="css-1dcdqdg"><code>                  _custom: {
</code></td></tr><tr><td id="L2911" class="css-a4x74f"><span>2911</span></td><td id="LC2911" class="css-1dcdqdg"><code>                      type: <span class="code-literal">null</span>,
</code></td></tr><tr><td id="L2912" class="css-a4x74f"><span>2912</span></td><td id="LC2912" class="css-1dcdqdg"><code>                      readOnly: <span class="code-literal">true</span>,
</code></td></tr><tr><td id="L2913" class="css-a4x74f"><span>2913</span></td><td id="LC2913" class="css-1dcdqdg"><code>                      display: route.keys
</code></td></tr><tr><td id="L2914" class="css-a4x74f"><span>2914</span></td><td id="LC2914" class="css-1dcdqdg"><code>                          .map(<span class="code-function"><span class="code-params">key</span> =&gt;</span> <span class="code-string">`<span class="code-subst">${key.name}</span><span class="code-subst">${modifierForKey(key)}</span>`</span>)
</code></td></tr><tr><td id="L2915" class="css-a4x74f"><span>2915</span></td><td id="LC2915" class="css-1dcdqdg"><code>                          .join(<span class="code-string">' '</span>),
</code></td></tr><tr><td id="L2916" class="css-a4x74f"><span>2916</span></td><td id="LC2916" class="css-1dcdqdg"><code>                      tooltip: <span class="code-string">'Param keys'</span>,
</code></td></tr><tr><td id="L2917" class="css-a4x74f"><span>2917</span></td><td id="LC2917" class="css-1dcdqdg"><code>                      value: route.keys,
</code></td></tr><tr><td id="L2918" class="css-a4x74f"><span>2918</span></td><td id="LC2918" class="css-1dcdqdg"><code>                  },
</code></td></tr><tr><td id="L2919" class="css-a4x74f"><span>2919</span></td><td id="LC2919" class="css-1dcdqdg"><code>              },
</code></td></tr><tr><td id="L2920" class="css-a4x74f"><span>2920</span></td><td id="LC2920" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2921" class="css-a4x74f"><span>2921</span></td><td id="LC2921" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2922" class="css-a4x74f"><span>2922</span></td><td id="LC2922" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (record.redirect != <span class="code-literal">null</span>) {
</code></td></tr><tr><td id="L2923" class="css-a4x74f"><span>2923</span></td><td id="LC2923" class="css-1dcdqdg"><code>          fields.push({
</code></td></tr><tr><td id="L2924" class="css-a4x74f"><span>2924</span></td><td id="LC2924" class="css-1dcdqdg"><code>              editable: <span class="code-literal">false</span>,
</code></td></tr><tr><td id="L2925" class="css-a4x74f"><span>2925</span></td><td id="LC2925" class="css-1dcdqdg"><code>              key: <span class="code-string">'redirect'</span>,
</code></td></tr><tr><td id="L2926" class="css-a4x74f"><span>2926</span></td><td id="LC2926" class="css-1dcdqdg"><code>              value: record.redirect,
</code></td></tr><tr><td id="L2927" class="css-a4x74f"><span>2927</span></td><td id="LC2927" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2928" class="css-a4x74f"><span>2928</span></td><td id="LC2928" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2929" class="css-a4x74f"><span>2929</span></td><td id="LC2929" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (route.alias.length) {
</code></td></tr><tr><td id="L2930" class="css-a4x74f"><span>2930</span></td><td id="LC2930" class="css-1dcdqdg"><code>          fields.push({
</code></td></tr><tr><td id="L2931" class="css-a4x74f"><span>2931</span></td><td id="LC2931" class="css-1dcdqdg"><code>              editable: <span class="code-literal">false</span>,
</code></td></tr><tr><td id="L2932" class="css-a4x74f"><span>2932</span></td><td id="LC2932" class="css-1dcdqdg"><code>              key: <span class="code-string">'aliases'</span>,
</code></td></tr><tr><td id="L2933" class="css-a4x74f"><span>2933</span></td><td id="LC2933" class="css-1dcdqdg"><code>              value: route.alias.map(<span class="code-function"><span class="code-params">alias</span> =&gt;</span> alias.record.path),
</code></td></tr><tr><td id="L2934" class="css-a4x74f"><span>2934</span></td><td id="LC2934" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2935" class="css-a4x74f"><span>2935</span></td><td id="LC2935" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2936" class="css-a4x74f"><span>2936</span></td><td id="LC2936" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (<span class="code-built_in">Object</span>.keys(route.record.meta).length) {
</code></td></tr><tr><td id="L2937" class="css-a4x74f"><span>2937</span></td><td id="LC2937" class="css-1dcdqdg"><code>          fields.push({
</code></td></tr><tr><td id="L2938" class="css-a4x74f"><span>2938</span></td><td id="LC2938" class="css-1dcdqdg"><code>              editable: <span class="code-literal">false</span>,
</code></td></tr><tr><td id="L2939" class="css-a4x74f"><span>2939</span></td><td id="LC2939" class="css-1dcdqdg"><code>              key: <span class="code-string">'meta'</span>,
</code></td></tr><tr><td id="L2940" class="css-a4x74f"><span>2940</span></td><td id="LC2940" class="css-1dcdqdg"><code>              value: route.record.meta,
</code></td></tr><tr><td id="L2941" class="css-a4x74f"><span>2941</span></td><td id="LC2941" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2942" class="css-a4x74f"><span>2942</span></td><td id="LC2942" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2943" class="css-a4x74f"><span>2943</span></td><td id="LC2943" class="css-1dcdqdg"><code>      fields.push({
</code></td></tr><tr><td id="L2944" class="css-a4x74f"><span>2944</span></td><td id="LC2944" class="css-1dcdqdg"><code>          key: <span class="code-string">'score'</span>,
</code></td></tr><tr><td id="L2945" class="css-a4x74f"><span>2945</span></td><td id="LC2945" class="css-1dcdqdg"><code>          editable: <span class="code-literal">false</span>,
</code></td></tr><tr><td id="L2946" class="css-a4x74f"><span>2946</span></td><td id="LC2946" class="css-1dcdqdg"><code>          value: {
</code></td></tr><tr><td id="L2947" class="css-a4x74f"><span>2947</span></td><td id="LC2947" class="css-1dcdqdg"><code>              _custom: {
</code></td></tr><tr><td id="L2948" class="css-a4x74f"><span>2948</span></td><td id="LC2948" class="css-1dcdqdg"><code>                  type: <span class="code-literal">null</span>,
</code></td></tr><tr><td id="L2949" class="css-a4x74f"><span>2949</span></td><td id="LC2949" class="css-1dcdqdg"><code>                  readOnly: <span class="code-literal">true</span>,
</code></td></tr><tr><td id="L2950" class="css-a4x74f"><span>2950</span></td><td id="LC2950" class="css-1dcdqdg"><code>                  display: route.score.map(<span class="code-function"><span class="code-params">score</span> =&gt;</span> score.join(<span class="code-string">', '</span>)).join(<span class="code-string">' | '</span>),
</code></td></tr><tr><td id="L2951" class="css-a4x74f"><span>2951</span></td><td id="LC2951" class="css-1dcdqdg"><code>                  tooltip: <span class="code-string">'Score used to sort routes'</span>,
</code></td></tr><tr><td id="L2952" class="css-a4x74f"><span>2952</span></td><td id="LC2952" class="css-1dcdqdg"><code>                  value: route.score,
</code></td></tr><tr><td id="L2953" class="css-a4x74f"><span>2953</span></td><td id="LC2953" class="css-1dcdqdg"><code>              },
</code></td></tr><tr><td id="L2954" class="css-a4x74f"><span>2954</span></td><td id="LC2954" class="css-1dcdqdg"><code>          },
</code></td></tr><tr><td id="L2955" class="css-a4x74f"><span>2955</span></td><td id="LC2955" class="css-1dcdqdg"><code>      });
</code></td></tr><tr><td id="L2956" class="css-a4x74f"><span>2956</span></td><td id="LC2956" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> fields;
</code></td></tr><tr><td id="L2957" class="css-a4x74f"><span>2957</span></td><td id="LC2957" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2958" class="css-a4x74f"><span>2958</span></td><td id="LC2958" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2959" class="css-a4x74f"><span>2959</span></td><td id="LC2959" class="css-1dcdqdg"><code><span class="code-comment">   * Extracted from tailwind palette
</span></code></td></tr><tr><td id="L2960" class="css-a4x74f"><span>2960</span></td><td id="LC2960" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L2961" class="css-a4x74f"><span>2961</span></td><td id="LC2961" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> PINK_500 = <span class="code-number">0xec4899</span>;
</code></td></tr><tr><td id="L2962" class="css-a4x74f"><span>2962</span></td><td id="LC2962" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> BLUE_600 = <span class="code-number">0x2563eb</span>;
</code></td></tr><tr><td id="L2963" class="css-a4x74f"><span>2963</span></td><td id="LC2963" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> LIME_500 = <span class="code-number">0x84cc16</span>;
</code></td></tr><tr><td id="L2964" class="css-a4x74f"><span>2964</span></td><td id="LC2964" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> CYAN_400 = <span class="code-number">0x22d3ee</span>;
</code></td></tr><tr><td id="L2965" class="css-a4x74f"><span>2965</span></td><td id="LC2965" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> ORANGE_400 = <span class="code-number">0xfb923c</span>;
</code></td></tr><tr><td id="L2966" class="css-a4x74f"><span>2966</span></td><td id="LC2966" class="css-1dcdqdg"><code>  <span class="code-comment">// const GRAY_100 = 0xf4f4f5</span>
</code></td></tr><tr><td id="L2967" class="css-a4x74f"><span>2967</span></td><td id="LC2967" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> DARK = <span class="code-number">0x666666</span>;
</code></td></tr><tr><td id="L2968" class="css-a4x74f"><span>2968</span></td><td id="LC2968" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">formatRouteRecordForInspector</span>(<span class="code-params">route</span>) </span>{
</code></td></tr><tr><td id="L2969" class="css-a4x74f"><span>2969</span></td><td id="LC2969" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> tags = [];
</code></td></tr><tr><td id="L2970" class="css-a4x74f"><span>2970</span></td><td id="LC2970" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> { record } = route;
</code></td></tr><tr><td id="L2971" class="css-a4x74f"><span>2971</span></td><td id="LC2971" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (record.name != <span class="code-literal">null</span>) {
</code></td></tr><tr><td id="L2972" class="css-a4x74f"><span>2972</span></td><td id="LC2972" class="css-1dcdqdg"><code>          tags.push({
</code></td></tr><tr><td id="L2973" class="css-a4x74f"><span>2973</span></td><td id="LC2973" class="css-1dcdqdg"><code>              label: <span class="code-built_in">String</span>(record.name),
</code></td></tr><tr><td id="L2974" class="css-a4x74f"><span>2974</span></td><td id="LC2974" class="css-1dcdqdg"><code>              textColor: <span class="code-number">0</span>,
</code></td></tr><tr><td id="L2975" class="css-a4x74f"><span>2975</span></td><td id="LC2975" class="css-1dcdqdg"><code>              backgroundColor: CYAN_400,
</code></td></tr><tr><td id="L2976" class="css-a4x74f"><span>2976</span></td><td id="LC2976" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2977" class="css-a4x74f"><span>2977</span></td><td id="LC2977" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2978" class="css-a4x74f"><span>2978</span></td><td id="LC2978" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (record.aliasOf) {
</code></td></tr><tr><td id="L2979" class="css-a4x74f"><span>2979</span></td><td id="LC2979" class="css-1dcdqdg"><code>          tags.push({
</code></td></tr><tr><td id="L2980" class="css-a4x74f"><span>2980</span></td><td id="LC2980" class="css-1dcdqdg"><code>              label: <span class="code-string">'alias'</span>,
</code></td></tr><tr><td id="L2981" class="css-a4x74f"><span>2981</span></td><td id="LC2981" class="css-1dcdqdg"><code>              textColor: <span class="code-number">0</span>,
</code></td></tr><tr><td id="L2982" class="css-a4x74f"><span>2982</span></td><td id="LC2982" class="css-1dcdqdg"><code>              backgroundColor: ORANGE_400,
</code></td></tr><tr><td id="L2983" class="css-a4x74f"><span>2983</span></td><td id="LC2983" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2984" class="css-a4x74f"><span>2984</span></td><td id="LC2984" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2985" class="css-a4x74f"><span>2985</span></td><td id="LC2985" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (route.__vd_match) {
</code></td></tr><tr><td id="L2986" class="css-a4x74f"><span>2986</span></td><td id="LC2986" class="css-1dcdqdg"><code>          tags.push({
</code></td></tr><tr><td id="L2987" class="css-a4x74f"><span>2987</span></td><td id="LC2987" class="css-1dcdqdg"><code>              label: <span class="code-string">'matches'</span>,
</code></td></tr><tr><td id="L2988" class="css-a4x74f"><span>2988</span></td><td id="LC2988" class="css-1dcdqdg"><code>              textColor: <span class="code-number">0</span>,
</code></td></tr><tr><td id="L2989" class="css-a4x74f"><span>2989</span></td><td id="LC2989" class="css-1dcdqdg"><code>              backgroundColor: PINK_500,
</code></td></tr><tr><td id="L2990" class="css-a4x74f"><span>2990</span></td><td id="LC2990" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2991" class="css-a4x74f"><span>2991</span></td><td id="LC2991" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2992" class="css-a4x74f"><span>2992</span></td><td id="LC2992" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (route.__vd_exactActive) {
</code></td></tr><tr><td id="L2993" class="css-a4x74f"><span>2993</span></td><td id="LC2993" class="css-1dcdqdg"><code>          tags.push({
</code></td></tr><tr><td id="L2994" class="css-a4x74f"><span>2994</span></td><td id="LC2994" class="css-1dcdqdg"><code>              label: <span class="code-string">'exact'</span>,
</code></td></tr><tr><td id="L2995" class="css-a4x74f"><span>2995</span></td><td id="LC2995" class="css-1dcdqdg"><code>              textColor: <span class="code-number">0</span>,
</code></td></tr><tr><td id="L2996" class="css-a4x74f"><span>2996</span></td><td id="LC2996" class="css-1dcdqdg"><code>              backgroundColor: LIME_500,
</code></td></tr><tr><td id="L2997" class="css-a4x74f"><span>2997</span></td><td id="LC2997" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L2998" class="css-a4x74f"><span>2998</span></td><td id="LC2998" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2999" class="css-a4x74f"><span>2999</span></td><td id="LC2999" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (route.__vd_active) {
</code></td></tr><tr><td id="L3000" class="css-a4x74f"><span>3000</span></td><td id="LC3000" class="css-1dcdqdg"><code>          tags.push({
</code></td></tr><tr><td id="L3001" class="css-a4x74f"><span>3001</span></td><td id="LC3001" class="css-1dcdqdg"><code>              label: <span class="code-string">'active'</span>,
</code></td></tr><tr><td id="L3002" class="css-a4x74f"><span>3002</span></td><td id="LC3002" class="css-1dcdqdg"><code>              textColor: <span class="code-number">0</span>,
</code></td></tr><tr><td id="L3003" class="css-a4x74f"><span>3003</span></td><td id="LC3003" class="css-1dcdqdg"><code>              backgroundColor: BLUE_600,
</code></td></tr><tr><td id="L3004" class="css-a4x74f"><span>3004</span></td><td id="LC3004" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L3005" class="css-a4x74f"><span>3005</span></td><td id="LC3005" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3006" class="css-a4x74f"><span>3006</span></td><td id="LC3006" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (record.redirect) {
</code></td></tr><tr><td id="L3007" class="css-a4x74f"><span>3007</span></td><td id="LC3007" class="css-1dcdqdg"><code>          tags.push({
</code></td></tr><tr><td id="L3008" class="css-a4x74f"><span>3008</span></td><td id="LC3008" class="css-1dcdqdg"><code>              label: <span class="code-keyword">typeof</span> record.redirect === <span class="code-string">'string'</span>
</code></td></tr><tr><td id="L3009" class="css-a4x74f"><span>3009</span></td><td id="LC3009" class="css-1dcdqdg"><code>                  ? <span class="code-string">`redirect: <span class="code-subst">${record.redirect}</span>`</span>
</code></td></tr><tr><td id="L3010" class="css-a4x74f"><span>3010</span></td><td id="LC3010" class="css-1dcdqdg"><code>                  : <span class="code-string">'redirects'</span>,
</code></td></tr><tr><td id="L3011" class="css-a4x74f"><span>3011</span></td><td id="LC3011" class="css-1dcdqdg"><code>              textColor: <span class="code-number">0xffffff</span>,
</code></td></tr><tr><td id="L3012" class="css-a4x74f"><span>3012</span></td><td id="LC3012" class="css-1dcdqdg"><code>              backgroundColor: DARK,
</code></td></tr><tr><td id="L3013" class="css-a4x74f"><span>3013</span></td><td id="LC3013" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L3014" class="css-a4x74f"><span>3014</span></td><td id="LC3014" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3015" class="css-a4x74f"><span>3015</span></td><td id="LC3015" class="css-1dcdqdg"><code>      <span class="code-comment">// add an id to be able to select it. Using the `path` is not possible because</span>
</code></td></tr><tr><td id="L3016" class="css-a4x74f"><span>3016</span></td><td id="LC3016" class="css-1dcdqdg"><code>      <span class="code-comment">// empty path children would collide with their parents</span>
</code></td></tr><tr><td id="L3017" class="css-a4x74f"><span>3017</span></td><td id="LC3017" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> id = record.__vd_id;
</code></td></tr><tr><td id="L3018" class="css-a4x74f"><span>3018</span></td><td id="LC3018" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (id == <span class="code-literal">null</span>) {
</code></td></tr><tr><td id="L3019" class="css-a4x74f"><span>3019</span></td><td id="LC3019" class="css-1dcdqdg"><code>          id = <span class="code-built_in">String</span>(routeRecordId++);
</code></td></tr><tr><td id="L3020" class="css-a4x74f"><span>3020</span></td><td id="LC3020" class="css-1dcdqdg"><code>          record.__vd_id = id;
</code></td></tr><tr><td id="L3021" class="css-a4x74f"><span>3021</span></td><td id="LC3021" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3022" class="css-a4x74f"><span>3022</span></td><td id="LC3022" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> {
</code></td></tr><tr><td id="L3023" class="css-a4x74f"><span>3023</span></td><td id="LC3023" class="css-1dcdqdg"><code>          id,
</code></td></tr><tr><td id="L3024" class="css-a4x74f"><span>3024</span></td><td id="LC3024" class="css-1dcdqdg"><code>          label: record.path,
</code></td></tr><tr><td id="L3025" class="css-a4x74f"><span>3025</span></td><td id="LC3025" class="css-1dcdqdg"><code>          tags,
</code></td></tr><tr><td id="L3026" class="css-a4x74f"><span>3026</span></td><td id="LC3026" class="css-1dcdqdg"><code>          children: route.children.map(formatRouteRecordForInspector),
</code></td></tr><tr><td id="L3027" class="css-a4x74f"><span>3027</span></td><td id="LC3027" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L3028" class="css-a4x74f"><span>3028</span></td><td id="LC3028" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3029" class="css-a4x74f"><span>3029</span></td><td id="LC3029" class="css-1dcdqdg"><code>  <span class="code-comment">//  incremental id for route records and inspector state</span>
</code></td></tr><tr><td id="L3030" class="css-a4x74f"><span>3030</span></td><td id="LC3030" class="css-1dcdqdg"><code>  <span class="code-keyword">let</span> routeRecordId = <span class="code-number">0</span>;
</code></td></tr><tr><td id="L3031" class="css-a4x74f"><span>3031</span></td><td id="LC3031" class="css-1dcdqdg"><code>  <span class="code-keyword">const</span> EXTRACT_REGEXP_RE = <span class="code-regexp">/^\/(.*)\/([a-z]*)$/</span>;
</code></td></tr><tr><td id="L3032" class="css-a4x74f"><span>3032</span></td><td id="LC3032" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">markRouteRecordActive</span>(<span class="code-params">route, currentRoute</span>) </span>{
</code></td></tr><tr><td id="L3033" class="css-a4x74f"><span>3033</span></td><td id="LC3033" class="css-1dcdqdg"><code>      <span class="code-comment">// no route will be active if matched is empty</span>
</code></td></tr><tr><td id="L3034" class="css-a4x74f"><span>3034</span></td><td id="LC3034" class="css-1dcdqdg"><code>      <span class="code-comment">// reset the matching state</span>
</code></td></tr><tr><td id="L3035" class="css-a4x74f"><span>3035</span></td><td id="LC3035" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> isExactActive = currentRoute.matched.length &amp;&amp;
</code></td></tr><tr><td id="L3036" class="css-a4x74f"><span>3036</span></td><td id="LC3036" class="css-1dcdqdg"><code>          isSameRouteRecord(currentRoute.matched[currentRoute.matched.length - <span class="code-number">1</span>], route.record);
</code></td></tr><tr><td id="L3037" class="css-a4x74f"><span>3037</span></td><td id="LC3037" class="css-1dcdqdg"><code>      route.__vd_exactActive = route.__vd_active = isExactActive;
</code></td></tr><tr><td id="L3038" class="css-a4x74f"><span>3038</span></td><td id="LC3038" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!isExactActive) {
</code></td></tr><tr><td id="L3039" class="css-a4x74f"><span>3039</span></td><td id="LC3039" class="css-1dcdqdg"><code>          route.__vd_active = currentRoute.matched.some(<span class="code-function"><span class="code-params">match</span> =&gt;</span> isSameRouteRecord(match, route.record));
</code></td></tr><tr><td id="L3040" class="css-a4x74f"><span>3040</span></td><td id="LC3040" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3041" class="css-a4x74f"><span>3041</span></td><td id="LC3041" class="css-1dcdqdg"><code>      route.children.forEach(<span class="code-function"><span class="code-params">childRoute</span> =&gt;</span> markRouteRecordActive(childRoute, currentRoute));
</code></td></tr><tr><td id="L3042" class="css-a4x74f"><span>3042</span></td><td id="LC3042" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3043" class="css-a4x74f"><span>3043</span></td><td id="LC3043" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">resetMatchStateOnRouteRecord</span>(<span class="code-params">route</span>) </span>{
</code></td></tr><tr><td id="L3044" class="css-a4x74f"><span>3044</span></td><td id="LC3044" class="css-1dcdqdg"><code>      route.__vd_match = <span class="code-literal">false</span>;
</code></td></tr><tr><td id="L3045" class="css-a4x74f"><span>3045</span></td><td id="LC3045" class="css-1dcdqdg"><code>      route.children.forEach(resetMatchStateOnRouteRecord);
</code></td></tr><tr><td id="L3046" class="css-a4x74f"><span>3046</span></td><td id="LC3046" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3047" class="css-a4x74f"><span>3047</span></td><td id="LC3047" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isRouteMatching</span>(<span class="code-params">route, filter</span>) </span>{
</code></td></tr><tr><td id="L3048" class="css-a4x74f"><span>3048</span></td><td id="LC3048" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> found = <span class="code-built_in">String</span>(route.re).match(EXTRACT_REGEXP_RE);
</code></td></tr><tr><td id="L3049" class="css-a4x74f"><span>3049</span></td><td id="LC3049" class="css-1dcdqdg"><code>      route.__vd_match = <span class="code-literal">false</span>;
</code></td></tr><tr><td id="L3050" class="css-a4x74f"><span>3050</span></td><td id="LC3050" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!found || found.length &lt; <span class="code-number">3</span>) {
</code></td></tr><tr><td id="L3051" class="css-a4x74f"><span>3051</span></td><td id="LC3051" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-literal">false</span>;
</code></td></tr><tr><td id="L3052" class="css-a4x74f"><span>3052</span></td><td id="LC3052" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3053" class="css-a4x74f"><span>3053</span></td><td id="LC3053" class="css-1dcdqdg"><code>      <span class="code-comment">// use a regexp without $ at the end to match nested routes better</span>
</code></td></tr><tr><td id="L3054" class="css-a4x74f"><span>3054</span></td><td id="LC3054" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> nonEndingRE = <span class="code-keyword">new</span> <span class="code-built_in">RegExp</span>(found[<span class="code-number">1</span>].replace(<span class="code-regexp">/\$$/</span>, <span class="code-string">''</span>), found[<span class="code-number">2</span>]);
</code></td></tr><tr><td id="L3055" class="css-a4x74f"><span>3055</span></td><td id="LC3055" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (nonEndingRE.test(filter)) {
</code></td></tr><tr><td id="L3056" class="css-a4x74f"><span>3056</span></td><td id="LC3056" class="css-1dcdqdg"><code>          <span class="code-comment">// mark children as matches</span>
</code></td></tr><tr><td id="L3057" class="css-a4x74f"><span>3057</span></td><td id="LC3057" class="css-1dcdqdg"><code>          route.children.forEach(<span class="code-function"><span class="code-params">child</span> =&gt;</span> isRouteMatching(child, filter));
</code></td></tr><tr><td id="L3058" class="css-a4x74f"><span>3058</span></td><td id="LC3058" class="css-1dcdqdg"><code>          <span class="code-comment">// exception case: `/`</span>
</code></td></tr><tr><td id="L3059" class="css-a4x74f"><span>3059</span></td><td id="LC3059" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (route.record.path !== <span class="code-string">'/'</span> || filter === <span class="code-string">'/'</span>) {
</code></td></tr><tr><td id="L3060" class="css-a4x74f"><span>3060</span></td><td id="LC3060" class="css-1dcdqdg"><code>              route.__vd_match = route.re.test(filter);
</code></td></tr><tr><td id="L3061" class="css-a4x74f"><span>3061</span></td><td id="LC3061" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L3062" class="css-a4x74f"><span>3062</span></td><td id="LC3062" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3063" class="css-a4x74f"><span>3063</span></td><td id="LC3063" class="css-1dcdqdg"><code>          <span class="code-comment">// hide the / route</span>
</code></td></tr><tr><td id="L3064" class="css-a4x74f"><span>3064</span></td><td id="LC3064" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-literal">false</span>;
</code></td></tr><tr><td id="L3065" class="css-a4x74f"><span>3065</span></td><td id="LC3065" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3066" class="css-a4x74f"><span>3066</span></td><td id="LC3066" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> path = route.record.path.toLowerCase();
</code></td></tr><tr><td id="L3067" class="css-a4x74f"><span>3067</span></td><td id="LC3067" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> decodedPath = decode(path);
</code></td></tr><tr><td id="L3068" class="css-a4x74f"><span>3068</span></td><td id="LC3068" class="css-1dcdqdg"><code>      <span class="code-comment">// also allow partial matching on the path</span>
</code></td></tr><tr><td id="L3069" class="css-a4x74f"><span>3069</span></td><td id="LC3069" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!filter.startsWith(<span class="code-string">'/'</span>) &amp;&amp;
</code></td></tr><tr><td id="L3070" class="css-a4x74f"><span>3070</span></td><td id="LC3070" class="css-1dcdqdg"><code>          (decodedPath.includes(filter) || path.includes(filter)))
</code></td></tr><tr><td id="L3071" class="css-a4x74f"><span>3071</span></td><td id="LC3071" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L3072" class="css-a4x74f"><span>3072</span></td><td id="LC3072" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (decodedPath.startsWith(filter) || path.startsWith(filter))
</code></td></tr><tr><td id="L3073" class="css-a4x74f"><span>3073</span></td><td id="LC3073" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L3074" class="css-a4x74f"><span>3074</span></td><td id="LC3074" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (route.record.name &amp;&amp; <span class="code-built_in">String</span>(route.record.name).includes(filter))
</code></td></tr><tr><td id="L3075" class="css-a4x74f"><span>3075</span></td><td id="LC3075" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L3076" class="css-a4x74f"><span>3076</span></td><td id="LC3076" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> route.children.some(<span class="code-function"><span class="code-params">child</span> =&gt;</span> isRouteMatching(child, filter));
</code></td></tr><tr><td id="L3077" class="css-a4x74f"><span>3077</span></td><td id="LC3077" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3078" class="css-a4x74f"><span>3078</span></td><td id="LC3078" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">omit</span>(<span class="code-params">obj, keys</span>) </span>{
</code></td></tr><tr><td id="L3079" class="css-a4x74f"><span>3079</span></td><td id="LC3079" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> ret = {};
</code></td></tr><tr><td id="L3080" class="css-a4x74f"><span>3080</span></td><td id="LC3080" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">const</span> key <span class="code-keyword">in</span> obj) {
</code></td></tr><tr><td id="L3081" class="css-a4x74f"><span>3081</span></td><td id="LC3081" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!keys.includes(key)) {
</code></td></tr><tr><td id="L3082" class="css-a4x74f"><span>3082</span></td><td id="LC3082" class="css-1dcdqdg"><code>              <span class="code-comment">// @ts-expect-error</span>
</code></td></tr><tr><td id="L3083" class="css-a4x74f"><span>3083</span></td><td id="LC3083" class="css-1dcdqdg"><code>              ret[key] = obj[key];
</code></td></tr><tr><td id="L3084" class="css-a4x74f"><span>3084</span></td><td id="LC3084" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3085" class="css-a4x74f"><span>3085</span></td><td id="LC3085" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3086" class="css-a4x74f"><span>3086</span></td><td id="LC3086" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> ret;
</code></td></tr><tr><td id="L3087" class="css-a4x74f"><span>3087</span></td><td id="LC3087" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3088" class="css-a4x74f"><span>3088</span></td><td id="LC3088" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3089" class="css-a4x74f"><span>3089</span></td><td id="LC3089" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L3090" class="css-a4x74f"><span>3090</span></td><td id="LC3090" class="css-1dcdqdg"><code><span class="code-comment">   * Creates a Router instance that can be used by a Vue app.
</span></code></td></tr><tr><td id="L3091" class="css-a4x74f"><span>3091</span></td><td id="LC3091" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L3092" class="css-a4x74f"><span>3092</span></td><td id="LC3092" class="css-1dcdqdg"><code><span class="code-comment">   * @param options - {@link RouterOptions}
</span></code></td></tr><tr><td id="L3093" class="css-a4x74f"><span>3093</span></td><td id="LC3093" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L3094" class="css-a4x74f"><span>3094</span></td><td id="LC3094" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">createRouter</span>(<span class="code-params">options</span>) </span>{
</code></td></tr><tr><td id="L3095" class="css-a4x74f"><span>3095</span></td><td id="LC3095" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> matcher = createRouterMatcher(options.routes, options);
</code></td></tr><tr><td id="L3096" class="css-a4x74f"><span>3096</span></td><td id="LC3096" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> parseQuery$<span class="code-number">1</span> = options.parseQuery || parseQuery;
</code></td></tr><tr><td id="L3097" class="css-a4x74f"><span>3097</span></td><td id="LC3097" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> stringifyQuery$<span class="code-number">1</span> = options.stringifyQuery || stringifyQuery;
</code></td></tr><tr><td id="L3098" class="css-a4x74f"><span>3098</span></td><td id="LC3098" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> routerHistory = options.history;
</code></td></tr><tr><td id="L3099" class="css-a4x74f"><span>3099</span></td><td id="LC3099" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (!routerHistory)
</code></td></tr><tr><td id="L3100" class="css-a4x74f"><span>3100</span></td><td id="LC3100" class="css-1dcdqdg"><code>          <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">'Provide the "history" option when calling "createRouter()":'</span> +
</code></td></tr><tr><td id="L3101" class="css-a4x74f"><span>3101</span></td><td id="LC3101" class="css-1dcdqdg"><code>              <span class="code-string">' https://next.router.vuejs.org/api/#history.'</span>);
</code></td></tr><tr><td id="L3102" class="css-a4x74f"><span>3102</span></td><td id="LC3102" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> beforeGuards = useCallbacks();
</code></td></tr><tr><td id="L3103" class="css-a4x74f"><span>3103</span></td><td id="LC3103" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> beforeResolveGuards = useCallbacks();
</code></td></tr><tr><td id="L3104" class="css-a4x74f"><span>3104</span></td><td id="LC3104" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> afterGuards = useCallbacks();
</code></td></tr><tr><td id="L3105" class="css-a4x74f"><span>3105</span></td><td id="LC3105" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> currentRoute = vue.shallowRef(START_LOCATION_NORMALIZED);
</code></td></tr><tr><td id="L3106" class="css-a4x74f"><span>3106</span></td><td id="LC3106" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> pendingLocation = START_LOCATION_NORMALIZED;
</code></td></tr><tr><td id="L3107" class="css-a4x74f"><span>3107</span></td><td id="LC3107" class="css-1dcdqdg"><code>      <span class="code-comment">// leave the scrollRestoration if no scrollBehavior is provided</span>
</code></td></tr><tr><td id="L3108" class="css-a4x74f"><span>3108</span></td><td id="LC3108" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (isBrowser &amp;&amp; options.scrollBehavior &amp;&amp; <span class="code-string">'scrollRestoration'</span> <span class="code-keyword">in</span> history) {
</code></td></tr><tr><td id="L3109" class="css-a4x74f"><span>3109</span></td><td id="LC3109" class="css-1dcdqdg"><code>          history.scrollRestoration = <span class="code-string">'manual'</span>;
</code></td></tr><tr><td id="L3110" class="css-a4x74f"><span>3110</span></td><td id="LC3110" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3111" class="css-a4x74f"><span>3111</span></td><td id="LC3111" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> normalizeParams = applyToParams.bind(<span class="code-literal">null</span>, paramValue =&gt; <span class="code-string">''</span> + paramValue);
</code></td></tr><tr><td id="L3112" class="css-a4x74f"><span>3112</span></td><td id="LC3112" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> encodeParams = applyToParams.bind(<span class="code-literal">null</span>, encodeParam);
</code></td></tr><tr><td id="L3113" class="css-a4x74f"><span>3113</span></td><td id="LC3113" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> decodeParams = 
</code></td></tr><tr><td id="L3114" class="css-a4x74f"><span>3114</span></td><td id="LC3114" class="css-1dcdqdg"><code>      <span class="code-comment">// @ts-expect-error: intentionally avoid the type check</span>
</code></td></tr><tr><td id="L3115" class="css-a4x74f"><span>3115</span></td><td id="LC3115" class="css-1dcdqdg"><code>      applyToParams.bind(<span class="code-literal">null</span>, decode);
</code></td></tr><tr><td id="L3116" class="css-a4x74f"><span>3116</span></td><td id="LC3116" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">addRoute</span>(<span class="code-params">parentOrRoute, route</span>) </span>{
</code></td></tr><tr><td id="L3117" class="css-a4x74f"><span>3117</span></td><td id="LC3117" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> parent;
</code></td></tr><tr><td id="L3118" class="css-a4x74f"><span>3118</span></td><td id="LC3118" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> record;
</code></td></tr><tr><td id="L3119" class="css-a4x74f"><span>3119</span></td><td id="LC3119" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (isRouteName(parentOrRoute)) {
</code></td></tr><tr><td id="L3120" class="css-a4x74f"><span>3120</span></td><td id="LC3120" class="css-1dcdqdg"><code>              parent = matcher.getRecordMatcher(parentOrRoute);
</code></td></tr><tr><td id="L3121" class="css-a4x74f"><span>3121</span></td><td id="LC3121" class="css-1dcdqdg"><code>              record = route;
</code></td></tr><tr><td id="L3122" class="css-a4x74f"><span>3122</span></td><td id="LC3122" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3123" class="css-a4x74f"><span>3123</span></td><td id="LC3123" class="css-1dcdqdg"><code>          <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L3124" class="css-a4x74f"><span>3124</span></td><td id="LC3124" class="css-1dcdqdg"><code>              record = parentOrRoute;
</code></td></tr><tr><td id="L3125" class="css-a4x74f"><span>3125</span></td><td id="LC3125" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3126" class="css-a4x74f"><span>3126</span></td><td id="LC3126" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> matcher.addRoute(record, parent);
</code></td></tr><tr><td id="L3127" class="css-a4x74f"><span>3127</span></td><td id="LC3127" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3128" class="css-a4x74f"><span>3128</span></td><td id="LC3128" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">removeRoute</span>(<span class="code-params">name</span>) </span>{
</code></td></tr><tr><td id="L3129" class="css-a4x74f"><span>3129</span></td><td id="LC3129" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> recordMatcher = matcher.getRecordMatcher(name);
</code></td></tr><tr><td id="L3130" class="css-a4x74f"><span>3130</span></td><td id="LC3130" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (recordMatcher) {
</code></td></tr><tr><td id="L3131" class="css-a4x74f"><span>3131</span></td><td id="LC3131" class="css-1dcdqdg"><code>              matcher.removeRoute(recordMatcher);
</code></td></tr><tr><td id="L3132" class="css-a4x74f"><span>3132</span></td><td id="LC3132" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3133" class="css-a4x74f"><span>3133</span></td><td id="LC3133" class="css-1dcdqdg"><code>          <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L3134" class="css-a4x74f"><span>3134</span></td><td id="LC3134" class="css-1dcdqdg"><code>              warn(<span class="code-string">`Cannot remove non-existent route "<span class="code-subst">${<span class="code-built_in">String</span>(name)}</span>"`</span>);
</code></td></tr><tr><td id="L3135" class="css-a4x74f"><span>3135</span></td><td id="LC3135" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3136" class="css-a4x74f"><span>3136</span></td><td id="LC3136" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3137" class="css-a4x74f"><span>3137</span></td><td id="LC3137" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">getRoutes</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3138" class="css-a4x74f"><span>3138</span></td><td id="LC3138" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> matcher.getRoutes().map(<span class="code-function"><span class="code-params">routeMatcher</span> =&gt;</span> routeMatcher.record);
</code></td></tr><tr><td id="L3139" class="css-a4x74f"><span>3139</span></td><td id="LC3139" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3140" class="css-a4x74f"><span>3140</span></td><td id="LC3140" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">hasRoute</span>(<span class="code-params">name</span>) </span>{
</code></td></tr><tr><td id="L3141" class="css-a4x74f"><span>3141</span></td><td id="LC3141" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> !!matcher.getRecordMatcher(name);
</code></td></tr><tr><td id="L3142" class="css-a4x74f"><span>3142</span></td><td id="LC3142" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3143" class="css-a4x74f"><span>3143</span></td><td id="LC3143" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">resolve</span>(<span class="code-params">rawLocation, currentLocation</span>) </span>{
</code></td></tr><tr><td id="L3144" class="css-a4x74f"><span>3144</span></td><td id="LC3144" class="css-1dcdqdg"><code>          <span class="code-comment">// const objectLocation = routerLocationAsObject(rawLocation)</span>
</code></td></tr><tr><td id="L3145" class="css-a4x74f"><span>3145</span></td><td id="LC3145" class="css-1dcdqdg"><code>          <span class="code-comment">// we create a copy to modify it later</span>
</code></td></tr><tr><td id="L3146" class="css-a4x74f"><span>3146</span></td><td id="LC3146" class="css-1dcdqdg"><code>          currentLocation = assign({}, currentLocation || currentRoute.value);
</code></td></tr><tr><td id="L3147" class="css-a4x74f"><span>3147</span></td><td id="LC3147" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (<span class="code-keyword">typeof</span> rawLocation === <span class="code-string">'string'</span>) {
</code></td></tr><tr><td id="L3148" class="css-a4x74f"><span>3148</span></td><td id="LC3148" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> locationNormalized = parseURL(parseQuery$<span class="code-number">1</span>, rawLocation, currentLocation.path);
</code></td></tr><tr><td id="L3149" class="css-a4x74f"><span>3149</span></td><td id="LC3149" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> matchedRoute = matcher.resolve({ <span class="code-attr">path</span>: locationNormalized.path }, currentLocation);
</code></td></tr><tr><td id="L3150" class="css-a4x74f"><span>3150</span></td><td id="LC3150" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> href = routerHistory.createHref(locationNormalized.fullPath);
</code></td></tr><tr><td id="L3151" class="css-a4x74f"><span>3151</span></td><td id="LC3151" class="css-1dcdqdg"><code>              {
</code></td></tr><tr><td id="L3152" class="css-a4x74f"><span>3152</span></td><td id="LC3152" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (href.startsWith(<span class="code-string">'//'</span>))
</code></td></tr><tr><td id="L3153" class="css-a4x74f"><span>3153</span></td><td id="LC3153" class="css-1dcdqdg"><code>                      warn(<span class="code-string">`Location "<span class="code-subst">${rawLocation}</span>" resolved to "<span class="code-subst">${href}</span>". A resolved location cannot start with multiple slashes.`</span>);
</code></td></tr><tr><td id="L3154" class="css-a4x74f"><span>3154</span></td><td id="LC3154" class="css-1dcdqdg"><code>                  <span class="code-keyword">else</span> <span class="code-keyword">if</span> (!matchedRoute.matched.length) {
</code></td></tr><tr><td id="L3155" class="css-a4x74f"><span>3155</span></td><td id="LC3155" class="css-1dcdqdg"><code>                      warn(<span class="code-string">`No match found for location with path "<span class="code-subst">${rawLocation}</span>"`</span>);
</code></td></tr><tr><td id="L3156" class="css-a4x74f"><span>3156</span></td><td id="LC3156" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L3157" class="css-a4x74f"><span>3157</span></td><td id="LC3157" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3158" class="css-a4x74f"><span>3158</span></td><td id="LC3158" class="css-1dcdqdg"><code>              <span class="code-comment">// locationNormalized is always a new object</span>
</code></td></tr><tr><td id="L3159" class="css-a4x74f"><span>3159</span></td><td id="LC3159" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> assign(locationNormalized, matchedRoute, {
</code></td></tr><tr><td id="L3160" class="css-a4x74f"><span>3160</span></td><td id="LC3160" class="css-1dcdqdg"><code>                  params: decodeParams(matchedRoute.params),
</code></td></tr><tr><td id="L3161" class="css-a4x74f"><span>3161</span></td><td id="LC3161" class="css-1dcdqdg"><code>                  hash: decode(locationNormalized.hash),
</code></td></tr><tr><td id="L3162" class="css-a4x74f"><span>3162</span></td><td id="LC3162" class="css-1dcdqdg"><code>                  redirectedFrom: <span class="code-literal">undefined</span>,
</code></td></tr><tr><td id="L3163" class="css-a4x74f"><span>3163</span></td><td id="LC3163" class="css-1dcdqdg"><code>                  href,
</code></td></tr><tr><td id="L3164" class="css-a4x74f"><span>3164</span></td><td id="LC3164" class="css-1dcdqdg"><code>              });
</code></td></tr><tr><td id="L3165" class="css-a4x74f"><span>3165</span></td><td id="LC3165" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3166" class="css-a4x74f"><span>3166</span></td><td id="LC3166" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> matcherLocation;
</code></td></tr><tr><td id="L3167" class="css-a4x74f"><span>3167</span></td><td id="LC3167" class="css-1dcdqdg"><code>          <span class="code-comment">// path could be relative in object as well</span>
</code></td></tr><tr><td id="L3168" class="css-a4x74f"><span>3168</span></td><td id="LC3168" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (<span class="code-string">'path'</span> <span class="code-keyword">in</span> rawLocation) {
</code></td></tr><tr><td id="L3169" class="css-a4x74f"><span>3169</span></td><td id="LC3169" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (<span class="code-string">'params'</span> <span class="code-keyword">in</span> rawLocation &amp;&amp;
</code></td></tr><tr><td id="L3170" class="css-a4x74f"><span>3170</span></td><td id="LC3170" class="css-1dcdqdg"><code>                  !(<span class="code-string">'name'</span> <span class="code-keyword">in</span> rawLocation) &amp;&amp;
</code></td></tr><tr><td id="L3171" class="css-a4x74f"><span>3171</span></td><td id="LC3171" class="css-1dcdqdg"><code>                  <span class="code-comment">// @ts-expect-error: the type is never</span>
</code></td></tr><tr><td id="L3172" class="css-a4x74f"><span>3172</span></td><td id="LC3172" class="css-1dcdqdg"><code>                  <span class="code-built_in">Object</span>.keys(rawLocation.params).length) {
</code></td></tr><tr><td id="L3173" class="css-a4x74f"><span>3173</span></td><td id="LC3173" class="css-1dcdqdg"><code>                  warn(<span class="code-string">`Path "<span class="code-subst">${
</span></span></code></td></tr><tr><td id="L3174" class="css-a4x74f"><span>3174</span></td><td id="LC3174" class="css-1dcdqdg"><code><span class="code-string"><span class="code-subst">                <span class="code-regexp">//</span> @ts-expect-error: the type is never
</span></span></code></td></tr><tr><td id="L3175" class="css-a4x74f"><span>3175</span></td><td id="LC3175" class="css-1dcdqdg"><code><span class="code-string"><span class="code-subst">                rawLocation.path}</span>" was passed with params but they will be ignored. Use a named route alongside params instead.`</span>);
</code></td></tr><tr><td id="L3176" class="css-a4x74f"><span>3176</span></td><td id="LC3176" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3177" class="css-a4x74f"><span>3177</span></td><td id="LC3177" class="css-1dcdqdg"><code>              matcherLocation = assign({}, rawLocation, {
</code></td></tr><tr><td id="L3178" class="css-a4x74f"><span>3178</span></td><td id="LC3178" class="css-1dcdqdg"><code>                  path: parseURL(parseQuery$<span class="code-number">1</span>, rawLocation.path, currentLocation.path).path,
</code></td></tr><tr><td id="L3179" class="css-a4x74f"><span>3179</span></td><td id="LC3179" class="css-1dcdqdg"><code>              });
</code></td></tr><tr><td id="L3180" class="css-a4x74f"><span>3180</span></td><td id="LC3180" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3181" class="css-a4x74f"><span>3181</span></td><td id="LC3181" class="css-1dcdqdg"><code>          <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L3182" class="css-a4x74f"><span>3182</span></td><td id="LC3182" class="css-1dcdqdg"><code>              <span class="code-comment">// remove any nullish param</span>
</code></td></tr><tr><td id="L3183" class="css-a4x74f"><span>3183</span></td><td id="LC3183" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> targetParams = assign({}, rawLocation.params);
</code></td></tr><tr><td id="L3184" class="css-a4x74f"><span>3184</span></td><td id="LC3184" class="css-1dcdqdg"><code>              <span class="code-keyword">for</span> (<span class="code-keyword">const</span> key <span class="code-keyword">in</span> targetParams) {
</code></td></tr><tr><td id="L3185" class="css-a4x74f"><span>3185</span></td><td id="LC3185" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (targetParams[key] == <span class="code-literal">null</span>) {
</code></td></tr><tr><td id="L3186" class="css-a4x74f"><span>3186</span></td><td id="LC3186" class="css-1dcdqdg"><code>                      <span class="code-keyword">delete</span> targetParams[key];
</code></td></tr><tr><td id="L3187" class="css-a4x74f"><span>3187</span></td><td id="LC3187" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L3188" class="css-a4x74f"><span>3188</span></td><td id="LC3188" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3189" class="css-a4x74f"><span>3189</span></td><td id="LC3189" class="css-1dcdqdg"><code>              <span class="code-comment">// pass encoded values to the matcher, so it can produce encoded path and fullPath</span>
</code></td></tr><tr><td id="L3190" class="css-a4x74f"><span>3190</span></td><td id="LC3190" class="css-1dcdqdg"><code>              matcherLocation = assign({}, rawLocation, {
</code></td></tr><tr><td id="L3191" class="css-a4x74f"><span>3191</span></td><td id="LC3191" class="css-1dcdqdg"><code>                  params: encodeParams(rawLocation.params),
</code></td></tr><tr><td id="L3192" class="css-a4x74f"><span>3192</span></td><td id="LC3192" class="css-1dcdqdg"><code>              });
</code></td></tr><tr><td id="L3193" class="css-a4x74f"><span>3193</span></td><td id="LC3193" class="css-1dcdqdg"><code>              <span class="code-comment">// current location params are decoded, we need to encode them in case the</span>
</code></td></tr><tr><td id="L3194" class="css-a4x74f"><span>3194</span></td><td id="LC3194" class="css-1dcdqdg"><code>              <span class="code-comment">// matcher merges the params</span>
</code></td></tr><tr><td id="L3195" class="css-a4x74f"><span>3195</span></td><td id="LC3195" class="css-1dcdqdg"><code>              currentLocation.params = encodeParams(currentLocation.params);
</code></td></tr><tr><td id="L3196" class="css-a4x74f"><span>3196</span></td><td id="LC3196" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3197" class="css-a4x74f"><span>3197</span></td><td id="LC3197" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> matchedRoute = matcher.resolve(matcherLocation, currentLocation);
</code></td></tr><tr><td id="L3198" class="css-a4x74f"><span>3198</span></td><td id="LC3198" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> hash = rawLocation.hash || <span class="code-string">''</span>;
</code></td></tr><tr><td id="L3199" class="css-a4x74f"><span>3199</span></td><td id="LC3199" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (hash &amp;&amp; !hash.startsWith(<span class="code-string">'#'</span>)) {
</code></td></tr><tr><td id="L3200" class="css-a4x74f"><span>3200</span></td><td id="LC3200" class="css-1dcdqdg"><code>              warn(<span class="code-string">`A \`hash\` should always start with the character "#". Replace "<span class="code-subst">${hash}</span>" with "#<span class="code-subst">${hash}</span>".`</span>);
</code></td></tr><tr><td id="L3201" class="css-a4x74f"><span>3201</span></td><td id="LC3201" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3202" class="css-a4x74f"><span>3202</span></td><td id="LC3202" class="css-1dcdqdg"><code>          <span class="code-comment">// the matcher might have merged current location params, so</span>
</code></td></tr><tr><td id="L3203" class="css-a4x74f"><span>3203</span></td><td id="LC3203" class="css-1dcdqdg"><code>          <span class="code-comment">// we need to run the decoding again</span>
</code></td></tr><tr><td id="L3204" class="css-a4x74f"><span>3204</span></td><td id="LC3204" class="css-1dcdqdg"><code>          matchedRoute.params = normalizeParams(decodeParams(matchedRoute.params));
</code></td></tr><tr><td id="L3205" class="css-a4x74f"><span>3205</span></td><td id="LC3205" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> fullPath = stringifyURL(stringifyQuery$<span class="code-number">1</span>, assign({}, rawLocation, {
</code></td></tr><tr><td id="L3206" class="css-a4x74f"><span>3206</span></td><td id="LC3206" class="css-1dcdqdg"><code>              hash: encodeHash(hash),
</code></td></tr><tr><td id="L3207" class="css-a4x74f"><span>3207</span></td><td id="LC3207" class="css-1dcdqdg"><code>              path: matchedRoute.path,
</code></td></tr><tr><td id="L3208" class="css-a4x74f"><span>3208</span></td><td id="LC3208" class="css-1dcdqdg"><code>          }));
</code></td></tr><tr><td id="L3209" class="css-a4x74f"><span>3209</span></td><td id="LC3209" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> href = routerHistory.createHref(fullPath);
</code></td></tr><tr><td id="L3210" class="css-a4x74f"><span>3210</span></td><td id="LC3210" class="css-1dcdqdg"><code>          {
</code></td></tr><tr><td id="L3211" class="css-a4x74f"><span>3211</span></td><td id="LC3211" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (href.startsWith(<span class="code-string">'//'</span>)) {
</code></td></tr><tr><td id="L3212" class="css-a4x74f"><span>3212</span></td><td id="LC3212" class="css-1dcdqdg"><code>                  warn(<span class="code-string">`Location "<span class="code-subst">${rawLocation}</span>" resolved to "<span class="code-subst">${href}</span>". A resolved location cannot start with multiple slashes.`</span>);
</code></td></tr><tr><td id="L3213" class="css-a4x74f"><span>3213</span></td><td id="LC3213" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3214" class="css-a4x74f"><span>3214</span></td><td id="LC3214" class="css-1dcdqdg"><code>              <span class="code-keyword">else</span> <span class="code-keyword">if</span> (!matchedRoute.matched.length) {
</code></td></tr><tr><td id="L3215" class="css-a4x74f"><span>3215</span></td><td id="LC3215" class="css-1dcdqdg"><code>                  warn(<span class="code-string">`No match found for location with path "<span class="code-subst">${<span class="code-string">'path'</span> <span class="code-keyword">in</span> rawLocation ? rawLocation.path : rawLocation}</span>"`</span>);
</code></td></tr><tr><td id="L3216" class="css-a4x74f"><span>3216</span></td><td id="LC3216" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3217" class="css-a4x74f"><span>3217</span></td><td id="LC3217" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3218" class="css-a4x74f"><span>3218</span></td><td id="LC3218" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> assign({
</code></td></tr><tr><td id="L3219" class="css-a4x74f"><span>3219</span></td><td id="LC3219" class="css-1dcdqdg"><code>              fullPath,
</code></td></tr><tr><td id="L3220" class="css-a4x74f"><span>3220</span></td><td id="LC3220" class="css-1dcdqdg"><code>              <span class="code-comment">// keep the hash encoded so fullPath is effectively path + encodedQuery +</span>
</code></td></tr><tr><td id="L3221" class="css-a4x74f"><span>3221</span></td><td id="LC3221" class="css-1dcdqdg"><code>              <span class="code-comment">// hash</span>
</code></td></tr><tr><td id="L3222" class="css-a4x74f"><span>3222</span></td><td id="LC3222" class="css-1dcdqdg"><code>              hash,
</code></td></tr><tr><td id="L3223" class="css-a4x74f"><span>3223</span></td><td id="LC3223" class="css-1dcdqdg"><code>              query: 
</code></td></tr><tr><td id="L3224" class="css-a4x74f"><span>3224</span></td><td id="LC3224" class="css-1dcdqdg"><code>              <span class="code-comment">// if the user is using a custom query lib like qs, we might have</span>
</code></td></tr><tr><td id="L3225" class="css-a4x74f"><span>3225</span></td><td id="LC3225" class="css-1dcdqdg"><code>              <span class="code-comment">// nested objects, so we keep the query as is, meaning it can contain</span>
</code></td></tr><tr><td id="L3226" class="css-a4x74f"><span>3226</span></td><td id="LC3226" class="css-1dcdqdg"><code>              <span class="code-comment">// numbers at `$route.query`, but at the point, the user will have to</span>
</code></td></tr><tr><td id="L3227" class="css-a4x74f"><span>3227</span></td><td id="LC3227" class="css-1dcdqdg"><code>              <span class="code-comment">// use their own type anyway.</span>
</code></td></tr><tr><td id="L3228" class="css-a4x74f"><span>3228</span></td><td id="LC3228" class="css-1dcdqdg"><code>              <span class="code-comment">// https://github.com/vuejs/router/issues/328#issuecomment-649481567</span>
</code></td></tr><tr><td id="L3229" class="css-a4x74f"><span>3229</span></td><td id="LC3229" class="css-1dcdqdg"><code>              stringifyQuery$<span class="code-number">1</span> === stringifyQuery
</code></td></tr><tr><td id="L3230" class="css-a4x74f"><span>3230</span></td><td id="LC3230" class="css-1dcdqdg"><code>                  ? normalizeQuery(rawLocation.query)
</code></td></tr><tr><td id="L3231" class="css-a4x74f"><span>3231</span></td><td id="LC3231" class="css-1dcdqdg"><code>                  : (rawLocation.query || {}),
</code></td></tr><tr><td id="L3232" class="css-a4x74f"><span>3232</span></td><td id="LC3232" class="css-1dcdqdg"><code>          }, matchedRoute, {
</code></td></tr><tr><td id="L3233" class="css-a4x74f"><span>3233</span></td><td id="LC3233" class="css-1dcdqdg"><code>              redirectedFrom: <span class="code-literal">undefined</span>,
</code></td></tr><tr><td id="L3234" class="css-a4x74f"><span>3234</span></td><td id="LC3234" class="css-1dcdqdg"><code>              href,
</code></td></tr><tr><td id="L3235" class="css-a4x74f"><span>3235</span></td><td id="LC3235" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L3236" class="css-a4x74f"><span>3236</span></td><td id="LC3236" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3237" class="css-a4x74f"><span>3237</span></td><td id="LC3237" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">locationAsObject</span>(<span class="code-params">to</span>) </span>{
</code></td></tr><tr><td id="L3238" class="css-a4x74f"><span>3238</span></td><td id="LC3238" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-keyword">typeof</span> to === <span class="code-string">'string'</span>
</code></td></tr><tr><td id="L3239" class="css-a4x74f"><span>3239</span></td><td id="LC3239" class="css-1dcdqdg"><code>              ? parseURL(parseQuery$<span class="code-number">1</span>, to, currentRoute.value.path)
</code></td></tr><tr><td id="L3240" class="css-a4x74f"><span>3240</span></td><td id="LC3240" class="css-1dcdqdg"><code>              : assign({}, to);
</code></td></tr><tr><td id="L3241" class="css-a4x74f"><span>3241</span></td><td id="LC3241" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3242" class="css-a4x74f"><span>3242</span></td><td id="LC3242" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">checkCanceledNavigation</span>(<span class="code-params">to, from</span>) </span>{
</code></td></tr><tr><td id="L3243" class="css-a4x74f"><span>3243</span></td><td id="LC3243" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (pendingLocation !== to) {
</code></td></tr><tr><td id="L3244" class="css-a4x74f"><span>3244</span></td><td id="LC3244" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> createRouterError(<span class="code-number">8</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_CANCELLED */</span>, {
</code></td></tr><tr><td id="L3245" class="css-a4x74f"><span>3245</span></td><td id="LC3245" class="css-1dcdqdg"><code>                  <span class="code-keyword">from</span>,
</code></td></tr><tr><td id="L3246" class="css-a4x74f"><span>3246</span></td><td id="LC3246" class="css-1dcdqdg"><code>                  to,
</code></td></tr><tr><td id="L3247" class="css-a4x74f"><span>3247</span></td><td id="LC3247" class="css-1dcdqdg"><code>              });
</code></td></tr><tr><td id="L3248" class="css-a4x74f"><span>3248</span></td><td id="LC3248" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3249" class="css-a4x74f"><span>3249</span></td><td id="LC3249" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3250" class="css-a4x74f"><span>3250</span></td><td id="LC3250" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">push</span>(<span class="code-params">to</span>) </span>{
</code></td></tr><tr><td id="L3251" class="css-a4x74f"><span>3251</span></td><td id="LC3251" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> pushWithRedirect(to);
</code></td></tr><tr><td id="L3252" class="css-a4x74f"><span>3252</span></td><td id="LC3252" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3253" class="css-a4x74f"><span>3253</span></td><td id="LC3253" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">replace</span>(<span class="code-params">to</span>) </span>{
</code></td></tr><tr><td id="L3254" class="css-a4x74f"><span>3254</span></td><td id="LC3254" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> push(assign(locationAsObject(to), { <span class="code-attr">replace</span>: <span class="code-literal">true</span> }));
</code></td></tr><tr><td id="L3255" class="css-a4x74f"><span>3255</span></td><td id="LC3255" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3256" class="css-a4x74f"><span>3256</span></td><td id="LC3256" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">handleRedirectRecord</span>(<span class="code-params">to</span>) </span>{
</code></td></tr><tr><td id="L3257" class="css-a4x74f"><span>3257</span></td><td id="LC3257" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> lastMatched = to.matched[to.matched.length - <span class="code-number">1</span>];
</code></td></tr><tr><td id="L3258" class="css-a4x74f"><span>3258</span></td><td id="LC3258" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (lastMatched &amp;&amp; lastMatched.redirect) {
</code></td></tr><tr><td id="L3259" class="css-a4x74f"><span>3259</span></td><td id="LC3259" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> { redirect } = lastMatched;
</code></td></tr><tr><td id="L3260" class="css-a4x74f"><span>3260</span></td><td id="LC3260" class="css-1dcdqdg"><code>              <span class="code-keyword">let</span> newTargetLocation = <span class="code-keyword">typeof</span> redirect === <span class="code-string">'function'</span> ? redirect(to) : redirect;
</code></td></tr><tr><td id="L3261" class="css-a4x74f"><span>3261</span></td><td id="LC3261" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (<span class="code-keyword">typeof</span> newTargetLocation === <span class="code-string">'string'</span>) {
</code></td></tr><tr><td id="L3262" class="css-a4x74f"><span>3262</span></td><td id="LC3262" class="css-1dcdqdg"><code>                  newTargetLocation =
</code></td></tr><tr><td id="L3263" class="css-a4x74f"><span>3263</span></td><td id="LC3263" class="css-1dcdqdg"><code>                      newTargetLocation.includes(<span class="code-string">'?'</span>) || newTargetLocation.includes(<span class="code-string">'#'</span>)
</code></td></tr><tr><td id="L3264" class="css-a4x74f"><span>3264</span></td><td id="LC3264" class="css-1dcdqdg"><code>                          ? (newTargetLocation = locationAsObject(newTargetLocation))
</code></td></tr><tr><td id="L3265" class="css-a4x74f"><span>3265</span></td><td id="LC3265" class="css-1dcdqdg"><code>                          : <span class="code-comment">// force empty params</span>
</code></td></tr><tr><td id="L3266" class="css-a4x74f"><span>3266</span></td><td id="LC3266" class="css-1dcdqdg"><code>                              { <span class="code-attr">path</span>: newTargetLocation };
</code></td></tr><tr><td id="L3267" class="css-a4x74f"><span>3267</span></td><td id="LC3267" class="css-1dcdqdg"><code>                  <span class="code-comment">// @ts-expect-error: force empty params when a string is passed to let</span>
</code></td></tr><tr><td id="L3268" class="css-a4x74f"><span>3268</span></td><td id="LC3268" class="css-1dcdqdg"><code>                  <span class="code-comment">// the router parse them again</span>
</code></td></tr><tr><td id="L3269" class="css-a4x74f"><span>3269</span></td><td id="LC3269" class="css-1dcdqdg"><code>                  newTargetLocation.params = {};
</code></td></tr><tr><td id="L3270" class="css-a4x74f"><span>3270</span></td><td id="LC3270" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3271" class="css-a4x74f"><span>3271</span></td><td id="LC3271" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (!(<span class="code-string">'path'</span> <span class="code-keyword">in</span> newTargetLocation) &amp;&amp;
</code></td></tr><tr><td id="L3272" class="css-a4x74f"><span>3272</span></td><td id="LC3272" class="css-1dcdqdg"><code>                  !(<span class="code-string">'name'</span> <span class="code-keyword">in</span> newTargetLocation)) {
</code></td></tr><tr><td id="L3273" class="css-a4x74f"><span>3273</span></td><td id="LC3273" class="css-1dcdqdg"><code>                  warn(<span class="code-string">`Invalid redirect found:\n<span class="code-subst">${<span class="code-built_in">JSON</span>.stringify(newTargetLocation, <span class="code-literal">null</span>, <span class="code-number">2</span>)}</span>\n when navigating to "<span class="code-subst">${to.fullPath}</span>". A redirect must contain a name or path. This will break in production.`</span>);
</code></td></tr><tr><td id="L3274" class="css-a4x74f"><span>3274</span></td><td id="LC3274" class="css-1dcdqdg"><code>                  <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">'Invalid redirect'</span>);
</code></td></tr><tr><td id="L3275" class="css-a4x74f"><span>3275</span></td><td id="LC3275" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3276" class="css-a4x74f"><span>3276</span></td><td id="LC3276" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> assign({
</code></td></tr><tr><td id="L3277" class="css-a4x74f"><span>3277</span></td><td id="LC3277" class="css-1dcdqdg"><code>                  query: to.query,
</code></td></tr><tr><td id="L3278" class="css-a4x74f"><span>3278</span></td><td id="LC3278" class="css-1dcdqdg"><code>                  hash: to.hash,
</code></td></tr><tr><td id="L3279" class="css-a4x74f"><span>3279</span></td><td id="LC3279" class="css-1dcdqdg"><code>                  <span class="code-comment">// avoid transferring params if the redirect has a path</span>
</code></td></tr><tr><td id="L3280" class="css-a4x74f"><span>3280</span></td><td id="LC3280" class="css-1dcdqdg"><code>                  params: <span class="code-string">'path'</span> <span class="code-keyword">in</span> newTargetLocation ? {} : to.params,
</code></td></tr><tr><td id="L3281" class="css-a4x74f"><span>3281</span></td><td id="LC3281" class="css-1dcdqdg"><code>              }, newTargetLocation);
</code></td></tr><tr><td id="L3282" class="css-a4x74f"><span>3282</span></td><td id="LC3282" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3283" class="css-a4x74f"><span>3283</span></td><td id="LC3283" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3284" class="css-a4x74f"><span>3284</span></td><td id="LC3284" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">pushWithRedirect</span>(<span class="code-params">to, redirectedFrom</span>) </span>{
</code></td></tr><tr><td id="L3285" class="css-a4x74f"><span>3285</span></td><td id="LC3285" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> targetLocation = (pendingLocation = resolve(to));
</code></td></tr><tr><td id="L3286" class="css-a4x74f"><span>3286</span></td><td id="LC3286" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> <span class="code-keyword">from</span> = currentRoute.value;
</code></td></tr><tr><td id="L3287" class="css-a4x74f"><span>3287</span></td><td id="LC3287" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> data = to.state;
</code></td></tr><tr><td id="L3288" class="css-a4x74f"><span>3288</span></td><td id="LC3288" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> force = to.force;
</code></td></tr><tr><td id="L3289" class="css-a4x74f"><span>3289</span></td><td id="LC3289" class="css-1dcdqdg"><code>          <span class="code-comment">// to could be a string where `replace` is a function</span>
</code></td></tr><tr><td id="L3290" class="css-a4x74f"><span>3290</span></td><td id="LC3290" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> replace = to.replace === <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L3291" class="css-a4x74f"><span>3291</span></td><td id="LC3291" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> shouldRedirect = handleRedirectRecord(targetLocation);
</code></td></tr><tr><td id="L3292" class="css-a4x74f"><span>3292</span></td><td id="LC3292" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (shouldRedirect)
</code></td></tr><tr><td id="L3293" class="css-a4x74f"><span>3293</span></td><td id="LC3293" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> pushWithRedirect(assign(locationAsObject(shouldRedirect), {
</code></td></tr><tr><td id="L3294" class="css-a4x74f"><span>3294</span></td><td id="LC3294" class="css-1dcdqdg"><code>                  state: <span class="code-keyword">typeof</span> shouldRedirect === <span class="code-string">'object'</span>
</code></td></tr><tr><td id="L3295" class="css-a4x74f"><span>3295</span></td><td id="LC3295" class="css-1dcdqdg"><code>                      ? assign({}, data, shouldRedirect.state)
</code></td></tr><tr><td id="L3296" class="css-a4x74f"><span>3296</span></td><td id="LC3296" class="css-1dcdqdg"><code>                      : data,
</code></td></tr><tr><td id="L3297" class="css-a4x74f"><span>3297</span></td><td id="LC3297" class="css-1dcdqdg"><code>                  force,
</code></td></tr><tr><td id="L3298" class="css-a4x74f"><span>3298</span></td><td id="LC3298" class="css-1dcdqdg"><code>                  replace,
</code></td></tr><tr><td id="L3299" class="css-a4x74f"><span>3299</span></td><td id="LC3299" class="css-1dcdqdg"><code>              }), 
</code></td></tr><tr><td id="L3300" class="css-a4x74f"><span>3300</span></td><td id="LC3300" class="css-1dcdqdg"><code>              <span class="code-comment">// keep original redirectedFrom if it exists</span>
</code></td></tr><tr><td id="L3301" class="css-a4x74f"><span>3301</span></td><td id="LC3301" class="css-1dcdqdg"><code>              redirectedFrom || targetLocation);
</code></td></tr><tr><td id="L3302" class="css-a4x74f"><span>3302</span></td><td id="LC3302" class="css-1dcdqdg"><code>          <span class="code-comment">// if it was a redirect we already called `pushWithRedirect` above</span>
</code></td></tr><tr><td id="L3303" class="css-a4x74f"><span>3303</span></td><td id="LC3303" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> toLocation = targetLocation;
</code></td></tr><tr><td id="L3304" class="css-a4x74f"><span>3304</span></td><td id="LC3304" class="css-1dcdqdg"><code>          toLocation.redirectedFrom = redirectedFrom;
</code></td></tr><tr><td id="L3305" class="css-a4x74f"><span>3305</span></td><td id="LC3305" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> failure;
</code></td></tr><tr><td id="L3306" class="css-a4x74f"><span>3306</span></td><td id="LC3306" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!force &amp;&amp; isSameRouteLocation(stringifyQuery$<span class="code-number">1</span>, <span class="code-keyword">from</span>, targetLocation)) {
</code></td></tr><tr><td id="L3307" class="css-a4x74f"><span>3307</span></td><td id="LC3307" class="css-1dcdqdg"><code>              failure = createRouterError(<span class="code-number">16</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_DUPLICATED */</span>, { <span class="code-attr">to</span>: toLocation, <span class="code-keyword">from</span> });
</code></td></tr><tr><td id="L3308" class="css-a4x74f"><span>3308</span></td><td id="LC3308" class="css-1dcdqdg"><code>              <span class="code-comment">// trigger scroll to allow scrolling to the same anchor</span>
</code></td></tr><tr><td id="L3309" class="css-a4x74f"><span>3309</span></td><td id="LC3309" class="css-1dcdqdg"><code>              handleScroll(<span class="code-keyword">from</span>, <span class="code-keyword">from</span>, 
</code></td></tr><tr><td id="L3310" class="css-a4x74f"><span>3310</span></td><td id="LC3310" class="css-1dcdqdg"><code>              <span class="code-comment">// this is a push, the only way for it to be triggered from a</span>
</code></td></tr><tr><td id="L3311" class="css-a4x74f"><span>3311</span></td><td id="LC3311" class="css-1dcdqdg"><code>              <span class="code-comment">// history.listen is with a redirect, which makes it become a push</span>
</code></td></tr><tr><td id="L3312" class="css-a4x74f"><span>3312</span></td><td id="LC3312" class="css-1dcdqdg"><code>              <span class="code-literal">true</span>, 
</code></td></tr><tr><td id="L3313" class="css-a4x74f"><span>3313</span></td><td id="LC3313" class="css-1dcdqdg"><code>              <span class="code-comment">// This cannot be the first navigation because the initial location</span>
</code></td></tr><tr><td id="L3314" class="css-a4x74f"><span>3314</span></td><td id="LC3314" class="css-1dcdqdg"><code>              <span class="code-comment">// cannot be manually navigated to</span>
</code></td></tr><tr><td id="L3315" class="css-a4x74f"><span>3315</span></td><td id="LC3315" class="css-1dcdqdg"><code>              <span class="code-literal">false</span>);
</code></td></tr><tr><td id="L3316" class="css-a4x74f"><span>3316</span></td><td id="LC3316" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3317" class="css-a4x74f"><span>3317</span></td><td id="LC3317" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> (failure ? <span class="code-built_in">Promise</span>.resolve(failure) : navigate(toLocation, <span class="code-keyword">from</span>))
</code></td></tr><tr><td id="L3318" class="css-a4x74f"><span>3318</span></td><td id="LC3318" class="css-1dcdqdg"><code>              .catch(<span class="code-function">(<span class="code-params">error</span>) =&gt;</span> isNavigationFailure(error)
</code></td></tr><tr><td id="L3319" class="css-a4x74f"><span>3319</span></td><td id="LC3319" class="css-1dcdqdg"><code>              ? <span class="code-comment">// navigation redirects still mark the router as ready</span>
</code></td></tr><tr><td id="L3320" class="css-a4x74f"><span>3320</span></td><td id="LC3320" class="css-1dcdqdg"><code>                  isNavigationFailure(error, <span class="code-number">2</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_GUARD_REDIRECT */</span>)
</code></td></tr><tr><td id="L3321" class="css-a4x74f"><span>3321</span></td><td id="LC3321" class="css-1dcdqdg"><code>                      ? error
</code></td></tr><tr><td id="L3322" class="css-a4x74f"><span>3322</span></td><td id="LC3322" class="css-1dcdqdg"><code>                      : markAsReady(error) <span class="code-comment">// also returns the error</span>
</code></td></tr><tr><td id="L3323" class="css-a4x74f"><span>3323</span></td><td id="LC3323" class="css-1dcdqdg"><code>              : <span class="code-comment">// reject any unknown error</span>
</code></td></tr><tr><td id="L3324" class="css-a4x74f"><span>3324</span></td><td id="LC3324" class="css-1dcdqdg"><code>                  triggerError(error, toLocation, <span class="code-keyword">from</span>))
</code></td></tr><tr><td id="L3325" class="css-a4x74f"><span>3325</span></td><td id="LC3325" class="css-1dcdqdg"><code>              .then(<span class="code-function">(<span class="code-params">failure</span>) =&gt;</span> {
</code></td></tr><tr><td id="L3326" class="css-a4x74f"><span>3326</span></td><td id="LC3326" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (failure) {
</code></td></tr><tr><td id="L3327" class="css-a4x74f"><span>3327</span></td><td id="LC3327" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (isNavigationFailure(failure, <span class="code-number">2</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_GUARD_REDIRECT */</span>)) {
</code></td></tr><tr><td id="L3328" class="css-a4x74f"><span>3328</span></td><td id="LC3328" class="css-1dcdqdg"><code>                      <span class="code-keyword">if</span> (<span class="code-comment">// we are redirecting to the same location we were already at</span>
</code></td></tr><tr><td id="L3329" class="css-a4x74f"><span>3329</span></td><td id="LC3329" class="css-1dcdqdg"><code>                          isSameRouteLocation(stringifyQuery$<span class="code-number">1</span>, resolve(failure.to), toLocation) &amp;&amp;
</code></td></tr><tr><td id="L3330" class="css-a4x74f"><span>3330</span></td><td id="LC3330" class="css-1dcdqdg"><code>                          <span class="code-comment">// and we have done it a couple of times</span>
</code></td></tr><tr><td id="L3331" class="css-a4x74f"><span>3331</span></td><td id="LC3331" class="css-1dcdqdg"><code>                          redirectedFrom &amp;&amp;
</code></td></tr><tr><td id="L3332" class="css-a4x74f"><span>3332</span></td><td id="LC3332" class="css-1dcdqdg"><code>                          <span class="code-comment">// @ts-expect-error: added only in dev</span>
</code></td></tr><tr><td id="L3333" class="css-a4x74f"><span>3333</span></td><td id="LC3333" class="css-1dcdqdg"><code>                          (redirectedFrom._count = redirectedFrom._count
</code></td></tr><tr><td id="L3334" class="css-a4x74f"><span>3334</span></td><td id="LC3334" class="css-1dcdqdg"><code>                              ? <span class="code-comment">// @ts-expect-error</span>
</code></td></tr><tr><td id="L3335" class="css-a4x74f"><span>3335</span></td><td id="LC3335" class="css-1dcdqdg"><code>                                  redirectedFrom._count + <span class="code-number">1</span>
</code></td></tr><tr><td id="L3336" class="css-a4x74f"><span>3336</span></td><td id="LC3336" class="css-1dcdqdg"><code>                              : <span class="code-number">1</span>) &gt; <span class="code-number">10</span>) {
</code></td></tr><tr><td id="L3337" class="css-a4x74f"><span>3337</span></td><td id="LC3337" class="css-1dcdqdg"><code>                          warn(<span class="code-string">`Detected an infinite redirection in a navigation guard when going from "<span class="code-subst">${<span class="code-keyword">from</span>.fullPath}</span>" to "<span class="code-subst">${toLocation.fullPath}</span>". Aborting to avoid a Stack Overflow. This will break in production if not fixed.`</span>);
</code></td></tr><tr><td id="L3338" class="css-a4x74f"><span>3338</span></td><td id="LC3338" class="css-1dcdqdg"><code>                          <span class="code-keyword">return</span> <span class="code-built_in">Promise</span>.reject(<span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">'Infinite redirect in navigation guard'</span>));
</code></td></tr><tr><td id="L3339" class="css-a4x74f"><span>3339</span></td><td id="LC3339" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L3340" class="css-a4x74f"><span>3340</span></td><td id="LC3340" class="css-1dcdqdg"><code>                      <span class="code-keyword">return</span> pushWithRedirect(
</code></td></tr><tr><td id="L3341" class="css-a4x74f"><span>3341</span></td><td id="LC3341" class="css-1dcdqdg"><code>                      <span class="code-comment">// keep options</span>
</code></td></tr><tr><td id="L3342" class="css-a4x74f"><span>3342</span></td><td id="LC3342" class="css-1dcdqdg"><code>                      assign({
</code></td></tr><tr><td id="L3343" class="css-a4x74f"><span>3343</span></td><td id="LC3343" class="css-1dcdqdg"><code>                          <span class="code-comment">// preserve an existing replacement but allow the redirect to override it</span>
</code></td></tr><tr><td id="L3344" class="css-a4x74f"><span>3344</span></td><td id="LC3344" class="css-1dcdqdg"><code>                          replace,
</code></td></tr><tr><td id="L3345" class="css-a4x74f"><span>3345</span></td><td id="LC3345" class="css-1dcdqdg"><code>                      }, locationAsObject(failure.to), {
</code></td></tr><tr><td id="L3346" class="css-a4x74f"><span>3346</span></td><td id="LC3346" class="css-1dcdqdg"><code>                          state: <span class="code-keyword">typeof</span> failure.to === <span class="code-string">'object'</span>
</code></td></tr><tr><td id="L3347" class="css-a4x74f"><span>3347</span></td><td id="LC3347" class="css-1dcdqdg"><code>                              ? assign({}, data, failure.to.state)
</code></td></tr><tr><td id="L3348" class="css-a4x74f"><span>3348</span></td><td id="LC3348" class="css-1dcdqdg"><code>                              : data,
</code></td></tr><tr><td id="L3349" class="css-a4x74f"><span>3349</span></td><td id="LC3349" class="css-1dcdqdg"><code>                          force,
</code></td></tr><tr><td id="L3350" class="css-a4x74f"><span>3350</span></td><td id="LC3350" class="css-1dcdqdg"><code>                      }), 
</code></td></tr><tr><td id="L3351" class="css-a4x74f"><span>3351</span></td><td id="LC3351" class="css-1dcdqdg"><code>                      <span class="code-comment">// preserve the original redirectedFrom if any</span>
</code></td></tr><tr><td id="L3352" class="css-a4x74f"><span>3352</span></td><td id="LC3352" class="css-1dcdqdg"><code>                      redirectedFrom || toLocation);
</code></td></tr><tr><td id="L3353" class="css-a4x74f"><span>3353</span></td><td id="LC3353" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L3354" class="css-a4x74f"><span>3354</span></td><td id="LC3354" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3355" class="css-a4x74f"><span>3355</span></td><td id="LC3355" class="css-1dcdqdg"><code>              <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L3356" class="css-a4x74f"><span>3356</span></td><td id="LC3356" class="css-1dcdqdg"><code>                  <span class="code-comment">// if we fail we don't finalize the navigation</span>
</code></td></tr><tr><td id="L3357" class="css-a4x74f"><span>3357</span></td><td id="LC3357" class="css-1dcdqdg"><code>                  failure = finalizeNavigation(toLocation, <span class="code-keyword">from</span>, <span class="code-literal">true</span>, replace, data);
</code></td></tr><tr><td id="L3358" class="css-a4x74f"><span>3358</span></td><td id="LC3358" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3359" class="css-a4x74f"><span>3359</span></td><td id="LC3359" class="css-1dcdqdg"><code>              triggerAfterEach(toLocation, <span class="code-keyword">from</span>, failure);
</code></td></tr><tr><td id="L3360" class="css-a4x74f"><span>3360</span></td><td id="LC3360" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> failure;
</code></td></tr><tr><td id="L3361" class="css-a4x74f"><span>3361</span></td><td id="LC3361" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L3362" class="css-a4x74f"><span>3362</span></td><td id="LC3362" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3363" class="css-a4x74f"><span>3363</span></td><td id="LC3363" class="css-1dcdqdg"><code>      <span class="code-comment">/**
</span></code></td></tr><tr><td id="L3364" class="css-a4x74f"><span>3364</span></td><td id="LC3364" class="css-1dcdqdg"><code><span class="code-comment">       * Helper to reject and skip all navigation guards if a new navigation happened
</span></code></td></tr><tr><td id="L3365" class="css-a4x74f"><span>3365</span></td><td id="LC3365" class="css-1dcdqdg"><code><span class="code-comment">       * @param to
</span></code></td></tr><tr><td id="L3366" class="css-a4x74f"><span>3366</span></td><td id="LC3366" class="css-1dcdqdg"><code><span class="code-comment">       * @param from
</span></code></td></tr><tr><td id="L3367" class="css-a4x74f"><span>3367</span></td><td id="LC3367" class="css-1dcdqdg"><code><span class="code-comment">       */</span>
</code></td></tr><tr><td id="L3368" class="css-a4x74f"><span>3368</span></td><td id="LC3368" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">checkCanceledNavigationAndReject</span>(<span class="code-params">to, from</span>) </span>{
</code></td></tr><tr><td id="L3369" class="css-a4x74f"><span>3369</span></td><td id="LC3369" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> error = checkCanceledNavigation(to, <span class="code-keyword">from</span>);
</code></td></tr><tr><td id="L3370" class="css-a4x74f"><span>3370</span></td><td id="LC3370" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> error ? <span class="code-built_in">Promise</span>.reject(error) : <span class="code-built_in">Promise</span>.resolve();
</code></td></tr><tr><td id="L3371" class="css-a4x74f"><span>3371</span></td><td id="LC3371" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3372" class="css-a4x74f"><span>3372</span></td><td id="LC3372" class="css-1dcdqdg"><code>      <span class="code-comment">// <span class="code-doctag">TODO:</span> refactor the whole before guards by internally using router.beforeEach</span>
</code></td></tr><tr><td id="L3373" class="css-a4x74f"><span>3373</span></td><td id="LC3373" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">navigate</span>(<span class="code-params">to, from</span>) </span>{
</code></td></tr><tr><td id="L3374" class="css-a4x74f"><span>3374</span></td><td id="LC3374" class="css-1dcdqdg"><code>          <span class="code-keyword">let</span> guards;
</code></td></tr><tr><td id="L3375" class="css-a4x74f"><span>3375</span></td><td id="LC3375" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> [leavingRecords, updatingRecords, enteringRecords] = extractChangingRecords(to, <span class="code-keyword">from</span>);
</code></td></tr><tr><td id="L3376" class="css-a4x74f"><span>3376</span></td><td id="LC3376" class="css-1dcdqdg"><code>          <span class="code-comment">// all components here have been resolved once because we are leaving</span>
</code></td></tr><tr><td id="L3377" class="css-a4x74f"><span>3377</span></td><td id="LC3377" class="css-1dcdqdg"><code>          guards = extractComponentsGuards(leavingRecords.reverse(), <span class="code-string">'beforeRouteLeave'</span>, to, <span class="code-keyword">from</span>);
</code></td></tr><tr><td id="L3378" class="css-a4x74f"><span>3378</span></td><td id="LC3378" class="css-1dcdqdg"><code>          <span class="code-comment">// leavingRecords is already reversed</span>
</code></td></tr><tr><td id="L3379" class="css-a4x74f"><span>3379</span></td><td id="LC3379" class="css-1dcdqdg"><code>          <span class="code-keyword">for</span> (<span class="code-keyword">const</span> record <span class="code-keyword">of</span> leavingRecords) {
</code></td></tr><tr><td id="L3380" class="css-a4x74f"><span>3380</span></td><td id="LC3380" class="css-1dcdqdg"><code>              record.leaveGuards.forEach(<span class="code-function"><span class="code-params">guard</span> =&gt;</span> {
</code></td></tr><tr><td id="L3381" class="css-a4x74f"><span>3381</span></td><td id="LC3381" class="css-1dcdqdg"><code>                  guards.push(guardToPromiseFn(guard, to, <span class="code-keyword">from</span>));
</code></td></tr><tr><td id="L3382" class="css-a4x74f"><span>3382</span></td><td id="LC3382" class="css-1dcdqdg"><code>              });
</code></td></tr><tr><td id="L3383" class="css-a4x74f"><span>3383</span></td><td id="LC3383" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3384" class="css-a4x74f"><span>3384</span></td><td id="LC3384" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> canceledNavigationCheck = checkCanceledNavigationAndReject.bind(<span class="code-literal">null</span>, to, <span class="code-keyword">from</span>);
</code></td></tr><tr><td id="L3385" class="css-a4x74f"><span>3385</span></td><td id="LC3385" class="css-1dcdqdg"><code>          guards.push(canceledNavigationCheck);
</code></td></tr><tr><td id="L3386" class="css-a4x74f"><span>3386</span></td><td id="LC3386" class="css-1dcdqdg"><code>          <span class="code-comment">// run the queue of per route beforeRouteLeave guards</span>
</code></td></tr><tr><td id="L3387" class="css-a4x74f"><span>3387</span></td><td id="LC3387" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> (runGuardQueue(guards)
</code></td></tr><tr><td id="L3388" class="css-a4x74f"><span>3388</span></td><td id="LC3388" class="css-1dcdqdg"><code>              .then(<span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L3389" class="css-a4x74f"><span>3389</span></td><td id="LC3389" class="css-1dcdqdg"><code>              <span class="code-comment">// check global guards beforeEach</span>
</code></td></tr><tr><td id="L3390" class="css-a4x74f"><span>3390</span></td><td id="LC3390" class="css-1dcdqdg"><code>              guards = [];
</code></td></tr><tr><td id="L3391" class="css-a4x74f"><span>3391</span></td><td id="LC3391" class="css-1dcdqdg"><code>              <span class="code-keyword">for</span> (<span class="code-keyword">const</span> guard <span class="code-keyword">of</span> beforeGuards.list()) {
</code></td></tr><tr><td id="L3392" class="css-a4x74f"><span>3392</span></td><td id="LC3392" class="css-1dcdqdg"><code>                  guards.push(guardToPromiseFn(guard, to, <span class="code-keyword">from</span>));
</code></td></tr><tr><td id="L3393" class="css-a4x74f"><span>3393</span></td><td id="LC3393" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3394" class="css-a4x74f"><span>3394</span></td><td id="LC3394" class="css-1dcdqdg"><code>              guards.push(canceledNavigationCheck);
</code></td></tr><tr><td id="L3395" class="css-a4x74f"><span>3395</span></td><td id="LC3395" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> runGuardQueue(guards);
</code></td></tr><tr><td id="L3396" class="css-a4x74f"><span>3396</span></td><td id="LC3396" class="css-1dcdqdg"><code>          })
</code></td></tr><tr><td id="L3397" class="css-a4x74f"><span>3397</span></td><td id="LC3397" class="css-1dcdqdg"><code>              .then(<span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L3398" class="css-a4x74f"><span>3398</span></td><td id="LC3398" class="css-1dcdqdg"><code>              <span class="code-comment">// check in components beforeRouteUpdate</span>
</code></td></tr><tr><td id="L3399" class="css-a4x74f"><span>3399</span></td><td id="LC3399" class="css-1dcdqdg"><code>              guards = extractComponentsGuards(updatingRecords, <span class="code-string">'beforeRouteUpdate'</span>, to, <span class="code-keyword">from</span>);
</code></td></tr><tr><td id="L3400" class="css-a4x74f"><span>3400</span></td><td id="LC3400" class="css-1dcdqdg"><code>              <span class="code-keyword">for</span> (<span class="code-keyword">const</span> record <span class="code-keyword">of</span> updatingRecords) {
</code></td></tr><tr><td id="L3401" class="css-a4x74f"><span>3401</span></td><td id="LC3401" class="css-1dcdqdg"><code>                  record.updateGuards.forEach(<span class="code-function"><span class="code-params">guard</span> =&gt;</span> {
</code></td></tr><tr><td id="L3402" class="css-a4x74f"><span>3402</span></td><td id="LC3402" class="css-1dcdqdg"><code>                      guards.push(guardToPromiseFn(guard, to, <span class="code-keyword">from</span>));
</code></td></tr><tr><td id="L3403" class="css-a4x74f"><span>3403</span></td><td id="LC3403" class="css-1dcdqdg"><code>                  });
</code></td></tr><tr><td id="L3404" class="css-a4x74f"><span>3404</span></td><td id="LC3404" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3405" class="css-a4x74f"><span>3405</span></td><td id="LC3405" class="css-1dcdqdg"><code>              guards.push(canceledNavigationCheck);
</code></td></tr><tr><td id="L3406" class="css-a4x74f"><span>3406</span></td><td id="LC3406" class="css-1dcdqdg"><code>              <span class="code-comment">// run the queue of per route beforeEnter guards</span>
</code></td></tr><tr><td id="L3407" class="css-a4x74f"><span>3407</span></td><td id="LC3407" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> runGuardQueue(guards);
</code></td></tr><tr><td id="L3408" class="css-a4x74f"><span>3408</span></td><td id="LC3408" class="css-1dcdqdg"><code>          })
</code></td></tr><tr><td id="L3409" class="css-a4x74f"><span>3409</span></td><td id="LC3409" class="css-1dcdqdg"><code>              .then(<span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L3410" class="css-a4x74f"><span>3410</span></td><td id="LC3410" class="css-1dcdqdg"><code>              <span class="code-comment">// check the route beforeEnter</span>
</code></td></tr><tr><td id="L3411" class="css-a4x74f"><span>3411</span></td><td id="LC3411" class="css-1dcdqdg"><code>              guards = [];
</code></td></tr><tr><td id="L3412" class="css-a4x74f"><span>3412</span></td><td id="LC3412" class="css-1dcdqdg"><code>              <span class="code-keyword">for</span> (<span class="code-keyword">const</span> record <span class="code-keyword">of</span> to.matched) {
</code></td></tr><tr><td id="L3413" class="css-a4x74f"><span>3413</span></td><td id="LC3413" class="css-1dcdqdg"><code>                  <span class="code-comment">// do not trigger beforeEnter on reused views</span>
</code></td></tr><tr><td id="L3414" class="css-a4x74f"><span>3414</span></td><td id="LC3414" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (record.beforeEnter &amp;&amp; !<span class="code-keyword">from</span>.matched.includes(record)) {
</code></td></tr><tr><td id="L3415" class="css-a4x74f"><span>3415</span></td><td id="LC3415" class="css-1dcdqdg"><code>                      <span class="code-keyword">if</span> (isArray(record.beforeEnter)) {
</code></td></tr><tr><td id="L3416" class="css-a4x74f"><span>3416</span></td><td id="LC3416" class="css-1dcdqdg"><code>                          <span class="code-keyword">for</span> (<span class="code-keyword">const</span> beforeEnter <span class="code-keyword">of</span> record.beforeEnter)
</code></td></tr><tr><td id="L3417" class="css-a4x74f"><span>3417</span></td><td id="LC3417" class="css-1dcdqdg"><code>                              guards.push(guardToPromiseFn(beforeEnter, to, <span class="code-keyword">from</span>));
</code></td></tr><tr><td id="L3418" class="css-a4x74f"><span>3418</span></td><td id="LC3418" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L3419" class="css-a4x74f"><span>3419</span></td><td id="LC3419" class="css-1dcdqdg"><code>                      <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L3420" class="css-a4x74f"><span>3420</span></td><td id="LC3420" class="css-1dcdqdg"><code>                          guards.push(guardToPromiseFn(record.beforeEnter, to, <span class="code-keyword">from</span>));
</code></td></tr><tr><td id="L3421" class="css-a4x74f"><span>3421</span></td><td id="LC3421" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L3422" class="css-a4x74f"><span>3422</span></td><td id="LC3422" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L3423" class="css-a4x74f"><span>3423</span></td><td id="LC3423" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3424" class="css-a4x74f"><span>3424</span></td><td id="LC3424" class="css-1dcdqdg"><code>              guards.push(canceledNavigationCheck);
</code></td></tr><tr><td id="L3425" class="css-a4x74f"><span>3425</span></td><td id="LC3425" class="css-1dcdqdg"><code>              <span class="code-comment">// run the queue of per route beforeEnter guards</span>
</code></td></tr><tr><td id="L3426" class="css-a4x74f"><span>3426</span></td><td id="LC3426" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> runGuardQueue(guards);
</code></td></tr><tr><td id="L3427" class="css-a4x74f"><span>3427</span></td><td id="LC3427" class="css-1dcdqdg"><code>          })
</code></td></tr><tr><td id="L3428" class="css-a4x74f"><span>3428</span></td><td id="LC3428" class="css-1dcdqdg"><code>              .then(<span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L3429" class="css-a4x74f"><span>3429</span></td><td id="LC3429" class="css-1dcdqdg"><code>              <span class="code-comment">// <span class="code-doctag">NOTE:</span> at this point to.matched is normalized and does not contain any () =&gt; Promise&lt;Component&gt;</span>
</code></td></tr><tr><td id="L3430" class="css-a4x74f"><span>3430</span></td><td id="LC3430" class="css-1dcdqdg"><code>              <span class="code-comment">// clear existing enterCallbacks, these are added by extractComponentsGuards</span>
</code></td></tr><tr><td id="L3431" class="css-a4x74f"><span>3431</span></td><td id="LC3431" class="css-1dcdqdg"><code>              to.matched.forEach(<span class="code-function"><span class="code-params">record</span> =&gt;</span> (record.enterCallbacks = {}));
</code></td></tr><tr><td id="L3432" class="css-a4x74f"><span>3432</span></td><td id="LC3432" class="css-1dcdqdg"><code>              <span class="code-comment">// check in-component beforeRouteEnter</span>
</code></td></tr><tr><td id="L3433" class="css-a4x74f"><span>3433</span></td><td id="LC3433" class="css-1dcdqdg"><code>              guards = extractComponentsGuards(enteringRecords, <span class="code-string">'beforeRouteEnter'</span>, to, <span class="code-keyword">from</span>);
</code></td></tr><tr><td id="L3434" class="css-a4x74f"><span>3434</span></td><td id="LC3434" class="css-1dcdqdg"><code>              guards.push(canceledNavigationCheck);
</code></td></tr><tr><td id="L3435" class="css-a4x74f"><span>3435</span></td><td id="LC3435" class="css-1dcdqdg"><code>              <span class="code-comment">// run the queue of per route beforeEnter guards</span>
</code></td></tr><tr><td id="L3436" class="css-a4x74f"><span>3436</span></td><td id="LC3436" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> runGuardQueue(guards);
</code></td></tr><tr><td id="L3437" class="css-a4x74f"><span>3437</span></td><td id="LC3437" class="css-1dcdqdg"><code>          })
</code></td></tr><tr><td id="L3438" class="css-a4x74f"><span>3438</span></td><td id="LC3438" class="css-1dcdqdg"><code>              .then(<span class="code-function"><span class="code-params">()</span> =&gt;</span> {
</code></td></tr><tr><td id="L3439" class="css-a4x74f"><span>3439</span></td><td id="LC3439" class="css-1dcdqdg"><code>              <span class="code-comment">// check global guards beforeResolve</span>
</code></td></tr><tr><td id="L3440" class="css-a4x74f"><span>3440</span></td><td id="LC3440" class="css-1dcdqdg"><code>              guards = [];
</code></td></tr><tr><td id="L3441" class="css-a4x74f"><span>3441</span></td><td id="LC3441" class="css-1dcdqdg"><code>              <span class="code-keyword">for</span> (<span class="code-keyword">const</span> guard <span class="code-keyword">of</span> beforeResolveGuards.list()) {
</code></td></tr><tr><td id="L3442" class="css-a4x74f"><span>3442</span></td><td id="LC3442" class="css-1dcdqdg"><code>                  guards.push(guardToPromiseFn(guard, to, <span class="code-keyword">from</span>));
</code></td></tr><tr><td id="L3443" class="css-a4x74f"><span>3443</span></td><td id="LC3443" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3444" class="css-a4x74f"><span>3444</span></td><td id="LC3444" class="css-1dcdqdg"><code>              guards.push(canceledNavigationCheck);
</code></td></tr><tr><td id="L3445" class="css-a4x74f"><span>3445</span></td><td id="LC3445" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> runGuardQueue(guards);
</code></td></tr><tr><td id="L3446" class="css-a4x74f"><span>3446</span></td><td id="LC3446" class="css-1dcdqdg"><code>          })
</code></td></tr><tr><td id="L3447" class="css-a4x74f"><span>3447</span></td><td id="LC3447" class="css-1dcdqdg"><code>              <span class="code-comment">// catch any navigation canceled</span>
</code></td></tr><tr><td id="L3448" class="css-a4x74f"><span>3448</span></td><td id="LC3448" class="css-1dcdqdg"><code>              .catch(<span class="code-function"><span class="code-params">err</span> =&gt;</span> isNavigationFailure(err, <span class="code-number">8</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_CANCELLED */</span>)
</code></td></tr><tr><td id="L3449" class="css-a4x74f"><span>3449</span></td><td id="LC3449" class="css-1dcdqdg"><code>              ? err
</code></td></tr><tr><td id="L3450" class="css-a4x74f"><span>3450</span></td><td id="LC3450" class="css-1dcdqdg"><code>              : <span class="code-built_in">Promise</span>.reject(err)));
</code></td></tr><tr><td id="L3451" class="css-a4x74f"><span>3451</span></td><td id="LC3451" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3452" class="css-a4x74f"><span>3452</span></td><td id="LC3452" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">triggerAfterEach</span>(<span class="code-params">to, from, failure</span>) </span>{
</code></td></tr><tr><td id="L3453" class="css-a4x74f"><span>3453</span></td><td id="LC3453" class="css-1dcdqdg"><code>          <span class="code-comment">// navigation is confirmed, call afterGuards</span>
</code></td></tr><tr><td id="L3454" class="css-a4x74f"><span>3454</span></td><td id="LC3454" class="css-1dcdqdg"><code>          <span class="code-comment">// <span class="code-doctag">TODO:</span> wrap with error handlers</span>
</code></td></tr><tr><td id="L3455" class="css-a4x74f"><span>3455</span></td><td id="LC3455" class="css-1dcdqdg"><code>          <span class="code-keyword">for</span> (<span class="code-keyword">const</span> guard <span class="code-keyword">of</span> afterGuards.list())
</code></td></tr><tr><td id="L3456" class="css-a4x74f"><span>3456</span></td><td id="LC3456" class="css-1dcdqdg"><code>              guard(to, <span class="code-keyword">from</span>, failure);
</code></td></tr><tr><td id="L3457" class="css-a4x74f"><span>3457</span></td><td id="LC3457" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3458" class="css-a4x74f"><span>3458</span></td><td id="LC3458" class="css-1dcdqdg"><code>      <span class="code-comment">/**
</span></code></td></tr><tr><td id="L3459" class="css-a4x74f"><span>3459</span></td><td id="LC3459" class="css-1dcdqdg"><code><span class="code-comment">       * - Cleans up any navigation guards
</span></code></td></tr><tr><td id="L3460" class="css-a4x74f"><span>3460</span></td><td id="LC3460" class="css-1dcdqdg"><code><span class="code-comment">       * - Changes the url if necessary
</span></code></td></tr><tr><td id="L3461" class="css-a4x74f"><span>3461</span></td><td id="LC3461" class="css-1dcdqdg"><code><span class="code-comment">       * - Calls the scrollBehavior
</span></code></td></tr><tr><td id="L3462" class="css-a4x74f"><span>3462</span></td><td id="LC3462" class="css-1dcdqdg"><code><span class="code-comment">       */</span>
</code></td></tr><tr><td id="L3463" class="css-a4x74f"><span>3463</span></td><td id="LC3463" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">finalizeNavigation</span>(<span class="code-params">toLocation, from, isPush, replace, data</span>) </span>{
</code></td></tr><tr><td id="L3464" class="css-a4x74f"><span>3464</span></td><td id="LC3464" class="css-1dcdqdg"><code>          <span class="code-comment">// a more recent navigation took place</span>
</code></td></tr><tr><td id="L3465" class="css-a4x74f"><span>3465</span></td><td id="LC3465" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> error = checkCanceledNavigation(toLocation, <span class="code-keyword">from</span>);
</code></td></tr><tr><td id="L3466" class="css-a4x74f"><span>3466</span></td><td id="LC3466" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (error)
</code></td></tr><tr><td id="L3467" class="css-a4x74f"><span>3467</span></td><td id="LC3467" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> error;
</code></td></tr><tr><td id="L3468" class="css-a4x74f"><span>3468</span></td><td id="LC3468" class="css-1dcdqdg"><code>          <span class="code-comment">// only consider as push if it's not the first navigation</span>
</code></td></tr><tr><td id="L3469" class="css-a4x74f"><span>3469</span></td><td id="LC3469" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> isFirstNavigation = <span class="code-keyword">from</span> === START_LOCATION_NORMALIZED;
</code></td></tr><tr><td id="L3470" class="css-a4x74f"><span>3470</span></td><td id="LC3470" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> state = !isBrowser ? {} : history.state;
</code></td></tr><tr><td id="L3471" class="css-a4x74f"><span>3471</span></td><td id="LC3471" class="css-1dcdqdg"><code>          <span class="code-comment">// change URL only if the user did a push/replace and if it's not the initial navigation because</span>
</code></td></tr><tr><td id="L3472" class="css-a4x74f"><span>3472</span></td><td id="LC3472" class="css-1dcdqdg"><code>          <span class="code-comment">// it's just reflecting the url</span>
</code></td></tr><tr><td id="L3473" class="css-a4x74f"><span>3473</span></td><td id="LC3473" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (isPush) {
</code></td></tr><tr><td id="L3474" class="css-a4x74f"><span>3474</span></td><td id="LC3474" class="css-1dcdqdg"><code>              <span class="code-comment">// on the initial navigation, we want to reuse the scroll position from</span>
</code></td></tr><tr><td id="L3475" class="css-a4x74f"><span>3475</span></td><td id="LC3475" class="css-1dcdqdg"><code>              <span class="code-comment">// history state if it exists</span>
</code></td></tr><tr><td id="L3476" class="css-a4x74f"><span>3476</span></td><td id="LC3476" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (replace || isFirstNavigation)
</code></td></tr><tr><td id="L3477" class="css-a4x74f"><span>3477</span></td><td id="LC3477" class="css-1dcdqdg"><code>                  routerHistory.replace(toLocation.fullPath, assign({
</code></td></tr><tr><td id="L3478" class="css-a4x74f"><span>3478</span></td><td id="LC3478" class="css-1dcdqdg"><code>                      scroll: isFirstNavigation &amp;&amp; state &amp;&amp; state.scroll,
</code></td></tr><tr><td id="L3479" class="css-a4x74f"><span>3479</span></td><td id="LC3479" class="css-1dcdqdg"><code>                  }, data));
</code></td></tr><tr><td id="L3480" class="css-a4x74f"><span>3480</span></td><td id="LC3480" class="css-1dcdqdg"><code>              <span class="code-keyword">else</span>
</code></td></tr><tr><td id="L3481" class="css-a4x74f"><span>3481</span></td><td id="LC3481" class="css-1dcdqdg"><code>                  routerHistory.push(toLocation.fullPath, data);
</code></td></tr><tr><td id="L3482" class="css-a4x74f"><span>3482</span></td><td id="LC3482" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3483" class="css-a4x74f"><span>3483</span></td><td id="LC3483" class="css-1dcdqdg"><code>          <span class="code-comment">// accept current navigation</span>
</code></td></tr><tr><td id="L3484" class="css-a4x74f"><span>3484</span></td><td id="LC3484" class="css-1dcdqdg"><code>          currentRoute.value = toLocation;
</code></td></tr><tr><td id="L3485" class="css-a4x74f"><span>3485</span></td><td id="LC3485" class="css-1dcdqdg"><code>          handleScroll(toLocation, <span class="code-keyword">from</span>, isPush, isFirstNavigation);
</code></td></tr><tr><td id="L3486" class="css-a4x74f"><span>3486</span></td><td id="LC3486" class="css-1dcdqdg"><code>          markAsReady();
</code></td></tr><tr><td id="L3487" class="css-a4x74f"><span>3487</span></td><td id="LC3487" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3488" class="css-a4x74f"><span>3488</span></td><td id="LC3488" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> removeHistoryListener;
</code></td></tr><tr><td id="L3489" class="css-a4x74f"><span>3489</span></td><td id="LC3489" class="css-1dcdqdg"><code>      <span class="code-comment">// attach listener to history to trigger navigations</span>
</code></td></tr><tr><td id="L3490" class="css-a4x74f"><span>3490</span></td><td id="LC3490" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">setupListeners</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3491" class="css-a4x74f"><span>3491</span></td><td id="LC3491" class="css-1dcdqdg"><code>          <span class="code-comment">// avoid setting up listeners twice due to an invalid first navigation</span>
</code></td></tr><tr><td id="L3492" class="css-a4x74f"><span>3492</span></td><td id="LC3492" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (removeHistoryListener)
</code></td></tr><tr><td id="L3493" class="css-a4x74f"><span>3493</span></td><td id="LC3493" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L3494" class="css-a4x74f"><span>3494</span></td><td id="LC3494" class="css-1dcdqdg"><code>          removeHistoryListener = routerHistory.listen(<span class="code-function">(<span class="code-params">to, _from, info</span>) =&gt;</span> {
</code></td></tr><tr><td id="L3495" class="css-a4x74f"><span>3495</span></td><td id="LC3495" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (!router.listening)
</code></td></tr><tr><td id="L3496" class="css-a4x74f"><span>3496</span></td><td id="LC3496" class="css-1dcdqdg"><code>                  <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L3497" class="css-a4x74f"><span>3497</span></td><td id="LC3497" class="css-1dcdqdg"><code>              <span class="code-comment">// cannot be a redirect route because it was in history</span>
</code></td></tr><tr><td id="L3498" class="css-a4x74f"><span>3498</span></td><td id="LC3498" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> toLocation = resolve(to);
</code></td></tr><tr><td id="L3499" class="css-a4x74f"><span>3499</span></td><td id="LC3499" class="css-1dcdqdg"><code>              <span class="code-comment">// due to dynamic routing, and to hash history with manual navigation</span>
</code></td></tr><tr><td id="L3500" class="css-a4x74f"><span>3500</span></td><td id="LC3500" class="css-1dcdqdg"><code>              <span class="code-comment">// (manually changing the url or calling history.hash = '#/somewhere'),</span>
</code></td></tr><tr><td id="L3501" class="css-a4x74f"><span>3501</span></td><td id="LC3501" class="css-1dcdqdg"><code>              <span class="code-comment">// there could be a redirect record in history</span>
</code></td></tr><tr><td id="L3502" class="css-a4x74f"><span>3502</span></td><td id="LC3502" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> shouldRedirect = handleRedirectRecord(toLocation);
</code></td></tr><tr><td id="L3503" class="css-a4x74f"><span>3503</span></td><td id="LC3503" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (shouldRedirect) {
</code></td></tr><tr><td id="L3504" class="css-a4x74f"><span>3504</span></td><td id="LC3504" class="css-1dcdqdg"><code>                  pushWithRedirect(assign(shouldRedirect, { <span class="code-attr">replace</span>: <span class="code-literal">true</span> }), toLocation).catch(noop);
</code></td></tr><tr><td id="L3505" class="css-a4x74f"><span>3505</span></td><td id="LC3505" class="css-1dcdqdg"><code>                  <span class="code-keyword">return</span>;
</code></td></tr><tr><td id="L3506" class="css-a4x74f"><span>3506</span></td><td id="LC3506" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3507" class="css-a4x74f"><span>3507</span></td><td id="LC3507" class="css-1dcdqdg"><code>              pendingLocation = toLocation;
</code></td></tr><tr><td id="L3508" class="css-a4x74f"><span>3508</span></td><td id="LC3508" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> <span class="code-keyword">from</span> = currentRoute.value;
</code></td></tr><tr><td id="L3509" class="css-a4x74f"><span>3509</span></td><td id="LC3509" class="css-1dcdqdg"><code>              <span class="code-comment">// <span class="code-doctag">TODO:</span> should be moved to web history?</span>
</code></td></tr><tr><td id="L3510" class="css-a4x74f"><span>3510</span></td><td id="LC3510" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (isBrowser) {
</code></td></tr><tr><td id="L3511" class="css-a4x74f"><span>3511</span></td><td id="LC3511" class="css-1dcdqdg"><code>                  saveScrollPosition(getScrollKey(<span class="code-keyword">from</span>.fullPath, info.delta), computeScrollPosition());
</code></td></tr><tr><td id="L3512" class="css-a4x74f"><span>3512</span></td><td id="LC3512" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3513" class="css-a4x74f"><span>3513</span></td><td id="LC3513" class="css-1dcdqdg"><code>              navigate(toLocation, <span class="code-keyword">from</span>)
</code></td></tr><tr><td id="L3514" class="css-a4x74f"><span>3514</span></td><td id="LC3514" class="css-1dcdqdg"><code>                  .catch(<span class="code-function">(<span class="code-params">error</span>) =&gt;</span> {
</code></td></tr><tr><td id="L3515" class="css-a4x74f"><span>3515</span></td><td id="LC3515" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (isNavigationFailure(error, <span class="code-number">4</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_ABORTED */</span> | <span class="code-number">8</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_CANCELLED */</span>)) {
</code></td></tr><tr><td id="L3516" class="css-a4x74f"><span>3516</span></td><td id="LC3516" class="css-1dcdqdg"><code>                      <span class="code-keyword">return</span> error;
</code></td></tr><tr><td id="L3517" class="css-a4x74f"><span>3517</span></td><td id="LC3517" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L3518" class="css-a4x74f"><span>3518</span></td><td id="LC3518" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (isNavigationFailure(error, <span class="code-number">2</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_GUARD_REDIRECT */</span>)) {
</code></td></tr><tr><td id="L3519" class="css-a4x74f"><span>3519</span></td><td id="LC3519" class="css-1dcdqdg"><code>                      <span class="code-comment">// Here we could call if (info.delta) routerHistory.go(-info.delta,</span>
</code></td></tr><tr><td id="L3520" class="css-a4x74f"><span>3520</span></td><td id="LC3520" class="css-1dcdqdg"><code>                      <span class="code-comment">// false) but this is bug prone as we have no way to wait the</span>
</code></td></tr><tr><td id="L3521" class="css-a4x74f"><span>3521</span></td><td id="LC3521" class="css-1dcdqdg"><code>                      <span class="code-comment">// navigation to be finished before calling pushWithRedirect. Using</span>
</code></td></tr><tr><td id="L3522" class="css-a4x74f"><span>3522</span></td><td id="LC3522" class="css-1dcdqdg"><code>                      <span class="code-comment">// a setTimeout of 16ms seems to work but there is no guarantee for</span>
</code></td></tr><tr><td id="L3523" class="css-a4x74f"><span>3523</span></td><td id="LC3523" class="css-1dcdqdg"><code>                      <span class="code-comment">// it to work on every browser. So instead we do not restore the</span>
</code></td></tr><tr><td id="L3524" class="css-a4x74f"><span>3524</span></td><td id="LC3524" class="css-1dcdqdg"><code>                      <span class="code-comment">// history entry and trigger a new navigation as requested by the</span>
</code></td></tr><tr><td id="L3525" class="css-a4x74f"><span>3525</span></td><td id="LC3525" class="css-1dcdqdg"><code>                      <span class="code-comment">// navigation guard.</span>
</code></td></tr><tr><td id="L3526" class="css-a4x74f"><span>3526</span></td><td id="LC3526" class="css-1dcdqdg"><code>                      <span class="code-comment">// the error is already handled by router.push we just want to avoid</span>
</code></td></tr><tr><td id="L3527" class="css-a4x74f"><span>3527</span></td><td id="LC3527" class="css-1dcdqdg"><code>                      <span class="code-comment">// logging the error</span>
</code></td></tr><tr><td id="L3528" class="css-a4x74f"><span>3528</span></td><td id="LC3528" class="css-1dcdqdg"><code>                      pushWithRedirect(error.to, toLocation
</code></td></tr><tr><td id="L3529" class="css-a4x74f"><span>3529</span></td><td id="LC3529" class="css-1dcdqdg"><code>                      <span class="code-comment">// avoid an uncaught rejection, let push call triggerError</span>
</code></td></tr><tr><td id="L3530" class="css-a4x74f"><span>3530</span></td><td id="LC3530" class="css-1dcdqdg"><code>                      )
</code></td></tr><tr><td id="L3531" class="css-a4x74f"><span>3531</span></td><td id="LC3531" class="css-1dcdqdg"><code>                          .then(<span class="code-function"><span class="code-params">failure</span> =&gt;</span> {
</code></td></tr><tr><td id="L3532" class="css-a4x74f"><span>3532</span></td><td id="LC3532" class="css-1dcdqdg"><code>                          <span class="code-comment">// manual change in hash history #916 ending up in the URL not</span>
</code></td></tr><tr><td id="L3533" class="css-a4x74f"><span>3533</span></td><td id="LC3533" class="css-1dcdqdg"><code>                          <span class="code-comment">// changing, but it was changed by the manual url change, so we</span>
</code></td></tr><tr><td id="L3534" class="css-a4x74f"><span>3534</span></td><td id="LC3534" class="css-1dcdqdg"><code>                          <span class="code-comment">// need to manually change it ourselves</span>
</code></td></tr><tr><td id="L3535" class="css-a4x74f"><span>3535</span></td><td id="LC3535" class="css-1dcdqdg"><code>                          <span class="code-keyword">if</span> (isNavigationFailure(failure, <span class="code-number">4</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_ABORTED */</span> |
</code></td></tr><tr><td id="L3536" class="css-a4x74f"><span>3536</span></td><td id="LC3536" class="css-1dcdqdg"><code>                              <span class="code-number">16</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_DUPLICATED */</span>) &amp;&amp;
</code></td></tr><tr><td id="L3537" class="css-a4x74f"><span>3537</span></td><td id="LC3537" class="css-1dcdqdg"><code>                              !info.delta &amp;&amp;
</code></td></tr><tr><td id="L3538" class="css-a4x74f"><span>3538</span></td><td id="LC3538" class="css-1dcdqdg"><code>                              info.type === NavigationType.pop) {
</code></td></tr><tr><td id="L3539" class="css-a4x74f"><span>3539</span></td><td id="LC3539" class="css-1dcdqdg"><code>                              routerHistory.go(<span class="code-number">-1</span>, <span class="code-literal">false</span>);
</code></td></tr><tr><td id="L3540" class="css-a4x74f"><span>3540</span></td><td id="LC3540" class="css-1dcdqdg"><code>                          }
</code></td></tr><tr><td id="L3541" class="css-a4x74f"><span>3541</span></td><td id="LC3541" class="css-1dcdqdg"><code>                      })
</code></td></tr><tr><td id="L3542" class="css-a4x74f"><span>3542</span></td><td id="LC3542" class="css-1dcdqdg"><code>                          .catch(noop);
</code></td></tr><tr><td id="L3543" class="css-a4x74f"><span>3543</span></td><td id="LC3543" class="css-1dcdqdg"><code>                      <span class="code-comment">// avoid the then branch</span>
</code></td></tr><tr><td id="L3544" class="css-a4x74f"><span>3544</span></td><td id="LC3544" class="css-1dcdqdg"><code>                      <span class="code-keyword">return</span> <span class="code-built_in">Promise</span>.reject();
</code></td></tr><tr><td id="L3545" class="css-a4x74f"><span>3545</span></td><td id="LC3545" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L3546" class="css-a4x74f"><span>3546</span></td><td id="LC3546" class="css-1dcdqdg"><code>                  <span class="code-comment">// do not restore history on unknown direction</span>
</code></td></tr><tr><td id="L3547" class="css-a4x74f"><span>3547</span></td><td id="LC3547" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (info.delta) {
</code></td></tr><tr><td id="L3548" class="css-a4x74f"><span>3548</span></td><td id="LC3548" class="css-1dcdqdg"><code>                      routerHistory.go(-info.delta, <span class="code-literal">false</span>);
</code></td></tr><tr><td id="L3549" class="css-a4x74f"><span>3549</span></td><td id="LC3549" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L3550" class="css-a4x74f"><span>3550</span></td><td id="LC3550" class="css-1dcdqdg"><code>                  <span class="code-comment">// unrecognized error, transfer to the global handler</span>
</code></td></tr><tr><td id="L3551" class="css-a4x74f"><span>3551</span></td><td id="LC3551" class="css-1dcdqdg"><code>                  <span class="code-keyword">return</span> triggerError(error, toLocation, <span class="code-keyword">from</span>);
</code></td></tr><tr><td id="L3552" class="css-a4x74f"><span>3552</span></td><td id="LC3552" class="css-1dcdqdg"><code>              })
</code></td></tr><tr><td id="L3553" class="css-a4x74f"><span>3553</span></td><td id="LC3553" class="css-1dcdqdg"><code>                  .then(<span class="code-function">(<span class="code-params">failure</span>) =&gt;</span> {
</code></td></tr><tr><td id="L3554" class="css-a4x74f"><span>3554</span></td><td id="LC3554" class="css-1dcdqdg"><code>                  failure =
</code></td></tr><tr><td id="L3555" class="css-a4x74f"><span>3555</span></td><td id="LC3555" class="css-1dcdqdg"><code>                      failure ||
</code></td></tr><tr><td id="L3556" class="css-a4x74f"><span>3556</span></td><td id="LC3556" class="css-1dcdqdg"><code>                          finalizeNavigation(
</code></td></tr><tr><td id="L3557" class="css-a4x74f"><span>3557</span></td><td id="LC3557" class="css-1dcdqdg"><code>                          <span class="code-comment">// after navigation, all matched components are resolved</span>
</code></td></tr><tr><td id="L3558" class="css-a4x74f"><span>3558</span></td><td id="LC3558" class="css-1dcdqdg"><code>                          toLocation, <span class="code-keyword">from</span>, <span class="code-literal">false</span>);
</code></td></tr><tr><td id="L3559" class="css-a4x74f"><span>3559</span></td><td id="LC3559" class="css-1dcdqdg"><code>                  <span class="code-comment">// revert the navigation</span>
</code></td></tr><tr><td id="L3560" class="css-a4x74f"><span>3560</span></td><td id="LC3560" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (failure) {
</code></td></tr><tr><td id="L3561" class="css-a4x74f"><span>3561</span></td><td id="LC3561" class="css-1dcdqdg"><code>                      <span class="code-keyword">if</span> (info.delta &amp;&amp;
</code></td></tr><tr><td id="L3562" class="css-a4x74f"><span>3562</span></td><td id="LC3562" class="css-1dcdqdg"><code>                          <span class="code-comment">// a new navigation has been triggered, so we do not want to revert, that will change the current history</span>
</code></td></tr><tr><td id="L3563" class="css-a4x74f"><span>3563</span></td><td id="LC3563" class="css-1dcdqdg"><code>                          <span class="code-comment">// entry while a different route is displayed</span>
</code></td></tr><tr><td id="L3564" class="css-a4x74f"><span>3564</span></td><td id="LC3564" class="css-1dcdqdg"><code>                          !isNavigationFailure(failure, <span class="code-number">8</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_CANCELLED */</span>)) {
</code></td></tr><tr><td id="L3565" class="css-a4x74f"><span>3565</span></td><td id="LC3565" class="css-1dcdqdg"><code>                          routerHistory.go(-info.delta, <span class="code-literal">false</span>);
</code></td></tr><tr><td id="L3566" class="css-a4x74f"><span>3566</span></td><td id="LC3566" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L3567" class="css-a4x74f"><span>3567</span></td><td id="LC3567" class="css-1dcdqdg"><code>                      <span class="code-keyword">else</span> <span class="code-keyword">if</span> (info.type === NavigationType.pop &amp;&amp;
</code></td></tr><tr><td id="L3568" class="css-a4x74f"><span>3568</span></td><td id="LC3568" class="css-1dcdqdg"><code>                          isNavigationFailure(failure, <span class="code-number">4</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_ABORTED */</span> | <span class="code-number">16</span> <span class="code-comment">/* ErrorTypes.NAVIGATION_DUPLICATED */</span>)) {
</code></td></tr><tr><td id="L3569" class="css-a4x74f"><span>3569</span></td><td id="LC3569" class="css-1dcdqdg"><code>                          <span class="code-comment">// manual change in hash history #916</span>
</code></td></tr><tr><td id="L3570" class="css-a4x74f"><span>3570</span></td><td id="LC3570" class="css-1dcdqdg"><code>                          <span class="code-comment">// it's like a push but lacks the information of the direction</span>
</code></td></tr><tr><td id="L3571" class="css-a4x74f"><span>3571</span></td><td id="LC3571" class="css-1dcdqdg"><code>                          routerHistory.go(<span class="code-number">-1</span>, <span class="code-literal">false</span>);
</code></td></tr><tr><td id="L3572" class="css-a4x74f"><span>3572</span></td><td id="LC3572" class="css-1dcdqdg"><code>                      }
</code></td></tr><tr><td id="L3573" class="css-a4x74f"><span>3573</span></td><td id="LC3573" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L3574" class="css-a4x74f"><span>3574</span></td><td id="LC3574" class="css-1dcdqdg"><code>                  triggerAfterEach(toLocation, <span class="code-keyword">from</span>, failure);
</code></td></tr><tr><td id="L3575" class="css-a4x74f"><span>3575</span></td><td id="LC3575" class="css-1dcdqdg"><code>              })
</code></td></tr><tr><td id="L3576" class="css-a4x74f"><span>3576</span></td><td id="LC3576" class="css-1dcdqdg"><code>                  .catch(noop);
</code></td></tr><tr><td id="L3577" class="css-a4x74f"><span>3577</span></td><td id="LC3577" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L3578" class="css-a4x74f"><span>3578</span></td><td id="LC3578" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3579" class="css-a4x74f"><span>3579</span></td><td id="LC3579" class="css-1dcdqdg"><code>      <span class="code-comment">// Initialization and Errors</span>
</code></td></tr><tr><td id="L3580" class="css-a4x74f"><span>3580</span></td><td id="LC3580" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> readyHandlers = useCallbacks();
</code></td></tr><tr><td id="L3581" class="css-a4x74f"><span>3581</span></td><td id="LC3581" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> errorHandlers = useCallbacks();
</code></td></tr><tr><td id="L3582" class="css-a4x74f"><span>3582</span></td><td id="LC3582" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> ready;
</code></td></tr><tr><td id="L3583" class="css-a4x74f"><span>3583</span></td><td id="LC3583" class="css-1dcdqdg"><code>      <span class="code-comment">/**
</span></code></td></tr><tr><td id="L3584" class="css-a4x74f"><span>3584</span></td><td id="LC3584" class="css-1dcdqdg"><code><span class="code-comment">       * Trigger errorHandlers added via onError and throws the error as well
</span></code></td></tr><tr><td id="L3585" class="css-a4x74f"><span>3585</span></td><td id="LC3585" class="css-1dcdqdg"><code><span class="code-comment">       *
</span></code></td></tr><tr><td id="L3586" class="css-a4x74f"><span>3586</span></td><td id="LC3586" class="css-1dcdqdg"><code><span class="code-comment">       * @param error - error to throw
</span></code></td></tr><tr><td id="L3587" class="css-a4x74f"><span>3587</span></td><td id="LC3587" class="css-1dcdqdg"><code><span class="code-comment">       * @param to - location we were navigating to when the error happened
</span></code></td></tr><tr><td id="L3588" class="css-a4x74f"><span>3588</span></td><td id="LC3588" class="css-1dcdqdg"><code><span class="code-comment">       * @param from - location we were navigating from when the error happened
</span></code></td></tr><tr><td id="L3589" class="css-a4x74f"><span>3589</span></td><td id="LC3589" class="css-1dcdqdg"><code><span class="code-comment">       * @returns the error as a rejected promise
</span></code></td></tr><tr><td id="L3590" class="css-a4x74f"><span>3590</span></td><td id="LC3590" class="css-1dcdqdg"><code><span class="code-comment">       */</span>
</code></td></tr><tr><td id="L3591" class="css-a4x74f"><span>3591</span></td><td id="LC3591" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">triggerError</span>(<span class="code-params">error, to, from</span>) </span>{
</code></td></tr><tr><td id="L3592" class="css-a4x74f"><span>3592</span></td><td id="LC3592" class="css-1dcdqdg"><code>          markAsReady(error);
</code></td></tr><tr><td id="L3593" class="css-a4x74f"><span>3593</span></td><td id="LC3593" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> list = errorHandlers.list();
</code></td></tr><tr><td id="L3594" class="css-a4x74f"><span>3594</span></td><td id="LC3594" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (list.length) {
</code></td></tr><tr><td id="L3595" class="css-a4x74f"><span>3595</span></td><td id="LC3595" class="css-1dcdqdg"><code>              list.forEach(<span class="code-function"><span class="code-params">handler</span> =&gt;</span> handler(error, to, <span class="code-keyword">from</span>));
</code></td></tr><tr><td id="L3596" class="css-a4x74f"><span>3596</span></td><td id="LC3596" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3597" class="css-a4x74f"><span>3597</span></td><td id="LC3597" class="css-1dcdqdg"><code>          <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L3598" class="css-a4x74f"><span>3598</span></td><td id="LC3598" class="css-1dcdqdg"><code>              {
</code></td></tr><tr><td id="L3599" class="css-a4x74f"><span>3599</span></td><td id="LC3599" class="css-1dcdqdg"><code>                  warn(<span class="code-string">'uncaught error during route navigation:'</span>);
</code></td></tr><tr><td id="L3600" class="css-a4x74f"><span>3600</span></td><td id="LC3600" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3601" class="css-a4x74f"><span>3601</span></td><td id="LC3601" class="css-1dcdqdg"><code>              <span class="code-built_in">console</span>.error(error);
</code></td></tr><tr><td id="L3602" class="css-a4x74f"><span>3602</span></td><td id="LC3602" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3603" class="css-a4x74f"><span>3603</span></td><td id="LC3603" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-built_in">Promise</span>.reject(error);
</code></td></tr><tr><td id="L3604" class="css-a4x74f"><span>3604</span></td><td id="LC3604" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3605" class="css-a4x74f"><span>3605</span></td><td id="LC3605" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">isReady</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3606" class="css-a4x74f"><span>3606</span></td><td id="LC3606" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (ready &amp;&amp; currentRoute.value !== START_LOCATION_NORMALIZED)
</code></td></tr><tr><td id="L3607" class="css-a4x74f"><span>3607</span></td><td id="LC3607" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> <span class="code-built_in">Promise</span>.resolve();
</code></td></tr><tr><td id="L3608" class="css-a4x74f"><span>3608</span></td><td id="LC3608" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> <span class="code-keyword">new</span> <span class="code-built_in">Promise</span>(<span class="code-function">(<span class="code-params">resolve, reject</span>) =&gt;</span> {
</code></td></tr><tr><td id="L3609" class="css-a4x74f"><span>3609</span></td><td id="LC3609" class="css-1dcdqdg"><code>              readyHandlers.add([resolve, reject]);
</code></td></tr><tr><td id="L3610" class="css-a4x74f"><span>3610</span></td><td id="LC3610" class="css-1dcdqdg"><code>          });
</code></td></tr><tr><td id="L3611" class="css-a4x74f"><span>3611</span></td><td id="LC3611" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3612" class="css-a4x74f"><span>3612</span></td><td id="LC3612" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">markAsReady</span>(<span class="code-params">err</span>) </span>{
</code></td></tr><tr><td id="L3613" class="css-a4x74f"><span>3613</span></td><td id="LC3613" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!ready) {
</code></td></tr><tr><td id="L3614" class="css-a4x74f"><span>3614</span></td><td id="LC3614" class="css-1dcdqdg"><code>              <span class="code-comment">// still not ready if an error happened</span>
</code></td></tr><tr><td id="L3615" class="css-a4x74f"><span>3615</span></td><td id="LC3615" class="css-1dcdqdg"><code>              ready = !err;
</code></td></tr><tr><td id="L3616" class="css-a4x74f"><span>3616</span></td><td id="LC3616" class="css-1dcdqdg"><code>              setupListeners();
</code></td></tr><tr><td id="L3617" class="css-a4x74f"><span>3617</span></td><td id="LC3617" class="css-1dcdqdg"><code>              readyHandlers
</code></td></tr><tr><td id="L3618" class="css-a4x74f"><span>3618</span></td><td id="LC3618" class="css-1dcdqdg"><code>                  .list()
</code></td></tr><tr><td id="L3619" class="css-a4x74f"><span>3619</span></td><td id="LC3619" class="css-1dcdqdg"><code>                  .forEach(<span class="code-function">(<span class="code-params">[resolve, reject]</span>) =&gt;</span> (err ? reject(err) : resolve()));
</code></td></tr><tr><td id="L3620" class="css-a4x74f"><span>3620</span></td><td id="LC3620" class="css-1dcdqdg"><code>              readyHandlers.reset();
</code></td></tr><tr><td id="L3621" class="css-a4x74f"><span>3621</span></td><td id="LC3621" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3622" class="css-a4x74f"><span>3622</span></td><td id="LC3622" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> err;
</code></td></tr><tr><td id="L3623" class="css-a4x74f"><span>3623</span></td><td id="LC3623" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3624" class="css-a4x74f"><span>3624</span></td><td id="LC3624" class="css-1dcdqdg"><code>      <span class="code-comment">// Scroll behavior</span>
</code></td></tr><tr><td id="L3625" class="css-a4x74f"><span>3625</span></td><td id="LC3625" class="css-1dcdqdg"><code>      <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">handleScroll</span>(<span class="code-params">to, from, isPush, isFirstNavigation</span>) </span>{
</code></td></tr><tr><td id="L3626" class="css-a4x74f"><span>3626</span></td><td id="LC3626" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> { scrollBehavior } = options;
</code></td></tr><tr><td id="L3627" class="css-a4x74f"><span>3627</span></td><td id="LC3627" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (!isBrowser || !scrollBehavior)
</code></td></tr><tr><td id="L3628" class="css-a4x74f"><span>3628</span></td><td id="LC3628" class="css-1dcdqdg"><code>              <span class="code-keyword">return</span> <span class="code-built_in">Promise</span>.resolve();
</code></td></tr><tr><td id="L3629" class="css-a4x74f"><span>3629</span></td><td id="LC3629" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> scrollPosition = (!isPush &amp;&amp; getSavedScrollPosition(getScrollKey(to.fullPath, <span class="code-number">0</span>))) ||
</code></td></tr><tr><td id="L3630" class="css-a4x74f"><span>3630</span></td><td id="LC3630" class="css-1dcdqdg"><code>              ((isFirstNavigation || !isPush) &amp;&amp;
</code></td></tr><tr><td id="L3631" class="css-a4x74f"><span>3631</span></td><td id="LC3631" class="css-1dcdqdg"><code>                  history.state &amp;&amp;
</code></td></tr><tr><td id="L3632" class="css-a4x74f"><span>3632</span></td><td id="LC3632" class="css-1dcdqdg"><code>                  history.state.scroll) ||
</code></td></tr><tr><td id="L3633" class="css-a4x74f"><span>3633</span></td><td id="LC3633" class="css-1dcdqdg"><code>              <span class="code-literal">null</span>;
</code></td></tr><tr><td id="L3634" class="css-a4x74f"><span>3634</span></td><td id="LC3634" class="css-1dcdqdg"><code>          <span class="code-keyword">return</span> vue.nextTick()
</code></td></tr><tr><td id="L3635" class="css-a4x74f"><span>3635</span></td><td id="LC3635" class="css-1dcdqdg"><code>              .then(<span class="code-function"><span class="code-params">()</span> =&gt;</span> scrollBehavior(to, <span class="code-keyword">from</span>, scrollPosition))
</code></td></tr><tr><td id="L3636" class="css-a4x74f"><span>3636</span></td><td id="LC3636" class="css-1dcdqdg"><code>              .then(<span class="code-function"><span class="code-params">position</span> =&gt;</span> position &amp;&amp; scrollToPosition(position))
</code></td></tr><tr><td id="L3637" class="css-a4x74f"><span>3637</span></td><td id="LC3637" class="css-1dcdqdg"><code>              .catch(<span class="code-function"><span class="code-params">err</span> =&gt;</span> triggerError(err, to, <span class="code-keyword">from</span>));
</code></td></tr><tr><td id="L3638" class="css-a4x74f"><span>3638</span></td><td id="LC3638" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3639" class="css-a4x74f"><span>3639</span></td><td id="LC3639" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> go = <span class="code-function">(<span class="code-params">delta</span>) =&gt;</span> routerHistory.go(delta);
</code></td></tr><tr><td id="L3640" class="css-a4x74f"><span>3640</span></td><td id="LC3640" class="css-1dcdqdg"><code>      <span class="code-keyword">let</span> started;
</code></td></tr><tr><td id="L3641" class="css-a4x74f"><span>3641</span></td><td id="LC3641" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> installedApps = <span class="code-keyword">new</span> <span class="code-built_in">Set</span>();
</code></td></tr><tr><td id="L3642" class="css-a4x74f"><span>3642</span></td><td id="LC3642" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> router = {
</code></td></tr><tr><td id="L3643" class="css-a4x74f"><span>3643</span></td><td id="LC3643" class="css-1dcdqdg"><code>          currentRoute,
</code></td></tr><tr><td id="L3644" class="css-a4x74f"><span>3644</span></td><td id="LC3644" class="css-1dcdqdg"><code>          listening: <span class="code-literal">true</span>,
</code></td></tr><tr><td id="L3645" class="css-a4x74f"><span>3645</span></td><td id="LC3645" class="css-1dcdqdg"><code>          addRoute,
</code></td></tr><tr><td id="L3646" class="css-a4x74f"><span>3646</span></td><td id="LC3646" class="css-1dcdqdg"><code>          removeRoute,
</code></td></tr><tr><td id="L3647" class="css-a4x74f"><span>3647</span></td><td id="LC3647" class="css-1dcdqdg"><code>          hasRoute,
</code></td></tr><tr><td id="L3648" class="css-a4x74f"><span>3648</span></td><td id="LC3648" class="css-1dcdqdg"><code>          getRoutes,
</code></td></tr><tr><td id="L3649" class="css-a4x74f"><span>3649</span></td><td id="LC3649" class="css-1dcdqdg"><code>          resolve,
</code></td></tr><tr><td id="L3650" class="css-a4x74f"><span>3650</span></td><td id="LC3650" class="css-1dcdqdg"><code>          options,
</code></td></tr><tr><td id="L3651" class="css-a4x74f"><span>3651</span></td><td id="LC3651" class="css-1dcdqdg"><code>          push,
</code></td></tr><tr><td id="L3652" class="css-a4x74f"><span>3652</span></td><td id="LC3652" class="css-1dcdqdg"><code>          replace,
</code></td></tr><tr><td id="L3653" class="css-a4x74f"><span>3653</span></td><td id="LC3653" class="css-1dcdqdg"><code>          go,
</code></td></tr><tr><td id="L3654" class="css-a4x74f"><span>3654</span></td><td id="LC3654" class="css-1dcdqdg"><code>          back: <span class="code-function"><span class="code-params">()</span> =&gt;</span> go(<span class="code-number">-1</span>),
</code></td></tr><tr><td id="L3655" class="css-a4x74f"><span>3655</span></td><td id="LC3655" class="css-1dcdqdg"><code>          forward: <span class="code-function"><span class="code-params">()</span> =&gt;</span> go(<span class="code-number">1</span>),
</code></td></tr><tr><td id="L3656" class="css-a4x74f"><span>3656</span></td><td id="LC3656" class="css-1dcdqdg"><code>          beforeEach: beforeGuards.add,
</code></td></tr><tr><td id="L3657" class="css-a4x74f"><span>3657</span></td><td id="LC3657" class="css-1dcdqdg"><code>          beforeResolve: beforeResolveGuards.add,
</code></td></tr><tr><td id="L3658" class="css-a4x74f"><span>3658</span></td><td id="LC3658" class="css-1dcdqdg"><code>          afterEach: afterGuards.add,
</code></td></tr><tr><td id="L3659" class="css-a4x74f"><span>3659</span></td><td id="LC3659" class="css-1dcdqdg"><code>          onError: errorHandlers.add,
</code></td></tr><tr><td id="L3660" class="css-a4x74f"><span>3660</span></td><td id="LC3660" class="css-1dcdqdg"><code>          isReady,
</code></td></tr><tr><td id="L3661" class="css-a4x74f"><span>3661</span></td><td id="LC3661" class="css-1dcdqdg"><code>          install(app) {
</code></td></tr><tr><td id="L3662" class="css-a4x74f"><span>3662</span></td><td id="LC3662" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> router = <span class="code-keyword">this</span>;
</code></td></tr><tr><td id="L3663" class="css-a4x74f"><span>3663</span></td><td id="LC3663" class="css-1dcdqdg"><code>              app.component(<span class="code-string">'RouterLink'</span>, RouterLink);
</code></td></tr><tr><td id="L3664" class="css-a4x74f"><span>3664</span></td><td id="LC3664" class="css-1dcdqdg"><code>              app.component(<span class="code-string">'RouterView'</span>, RouterView);
</code></td></tr><tr><td id="L3665" class="css-a4x74f"><span>3665</span></td><td id="LC3665" class="css-1dcdqdg"><code>              app.config.globalProperties.$router = router;
</code></td></tr><tr><td id="L3666" class="css-a4x74f"><span>3666</span></td><td id="LC3666" class="css-1dcdqdg"><code>              <span class="code-built_in">Object</span>.defineProperty(app.config.globalProperties, <span class="code-string">'$route'</span>, {
</code></td></tr><tr><td id="L3667" class="css-a4x74f"><span>3667</span></td><td id="LC3667" class="css-1dcdqdg"><code>                  enumerable: <span class="code-literal">true</span>,
</code></td></tr><tr><td id="L3668" class="css-a4x74f"><span>3668</span></td><td id="LC3668" class="css-1dcdqdg"><code>                  <span class="code-keyword">get</span>: () =&gt; vue.unref(currentRoute),
</code></td></tr><tr><td id="L3669" class="css-a4x74f"><span>3669</span></td><td id="LC3669" class="css-1dcdqdg"><code>              });
</code></td></tr><tr><td id="L3670" class="css-a4x74f"><span>3670</span></td><td id="LC3670" class="css-1dcdqdg"><code>              // this initial navigation is only necessary on client, on server it doesn't
</code></td></tr><tr><td id="L3671" class="css-a4x74f"><span>3671</span></td><td id="LC3671" class="css-1dcdqdg"><code>              // make sense because it will create an extra unnecessary navigation and could
</code></td></tr><tr><td id="L3672" class="css-a4x74f"><span>3672</span></td><td id="LC3672" class="css-1dcdqdg"><code>              // lead to problems
</code></td></tr><tr><td id="L3673" class="css-a4x74f"><span>3673</span></td><td id="LC3673" class="css-1dcdqdg"><code>              if (isBrowser &amp;&amp;
</code></td></tr><tr><td id="L3674" class="css-a4x74f"><span>3674</span></td><td id="LC3674" class="css-1dcdqdg"><code>                  // used for the initial navigation client side to avoid pushing
</code></td></tr><tr><td id="L3675" class="css-a4x74f"><span>3675</span></td><td id="LC3675" class="css-1dcdqdg"><code>                  // multiple times when the router is used in multiple apps
</code></td></tr><tr><td id="L3676" class="css-a4x74f"><span>3676</span></td><td id="LC3676" class="css-1dcdqdg"><code>                  !started &amp;&amp;
</code></td></tr><tr><td id="L3677" class="css-a4x74f"><span>3677</span></td><td id="LC3677" class="css-1dcdqdg"><code>                  currentRoute.value === START_LOCATION_NORMALIZED) {
</code></td></tr><tr><td id="L3678" class="css-a4x74f"><span>3678</span></td><td id="LC3678" class="css-1dcdqdg"><code>                  <span class="code-comment">// see above</span>
</code></td></tr><tr><td id="L3679" class="css-a4x74f"><span>3679</span></td><td id="LC3679" class="css-1dcdqdg"><code>                  started = <span class="code-literal">true</span>;
</code></td></tr><tr><td id="L3680" class="css-a4x74f"><span>3680</span></td><td id="LC3680" class="css-1dcdqdg"><code>                  push(routerHistory.location).catch(<span class="code-function"><span class="code-params">err</span> =&gt;</span> {
</code></td></tr><tr><td id="L3681" class="css-a4x74f"><span>3681</span></td><td id="LC3681" class="css-1dcdqdg"><code>                      warn(<span class="code-string">'Unexpected error when starting the router:'</span>, err);
</code></td></tr><tr><td id="L3682" class="css-a4x74f"><span>3682</span></td><td id="LC3682" class="css-1dcdqdg"><code>                  });
</code></td></tr><tr><td id="L3683" class="css-a4x74f"><span>3683</span></td><td id="LC3683" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3684" class="css-a4x74f"><span>3684</span></td><td id="LC3684" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> reactiveRoute = {};
</code></td></tr><tr><td id="L3685" class="css-a4x74f"><span>3685</span></td><td id="LC3685" class="css-1dcdqdg"><code>              <span class="code-keyword">for</span> (<span class="code-keyword">const</span> key <span class="code-keyword">in</span> START_LOCATION_NORMALIZED) {
</code></td></tr><tr><td id="L3686" class="css-a4x74f"><span>3686</span></td><td id="LC3686" class="css-1dcdqdg"><code>                  <span class="code-comment">// @ts-expect-error: the key matches</span>
</code></td></tr><tr><td id="L3687" class="css-a4x74f"><span>3687</span></td><td id="LC3687" class="css-1dcdqdg"><code>                  reactiveRoute[key] = vue.computed(<span class="code-function"><span class="code-params">()</span> =&gt;</span> currentRoute.value[key]);
</code></td></tr><tr><td id="L3688" class="css-a4x74f"><span>3688</span></td><td id="LC3688" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3689" class="css-a4x74f"><span>3689</span></td><td id="LC3689" class="css-1dcdqdg"><code>              app.provide(routerKey, router);
</code></td></tr><tr><td id="L3690" class="css-a4x74f"><span>3690</span></td><td id="LC3690" class="css-1dcdqdg"><code>              app.provide(routeLocationKey, vue.reactive(reactiveRoute));
</code></td></tr><tr><td id="L3691" class="css-a4x74f"><span>3691</span></td><td id="LC3691" class="css-1dcdqdg"><code>              app.provide(routerViewLocationKey, currentRoute);
</code></td></tr><tr><td id="L3692" class="css-a4x74f"><span>3692</span></td><td id="LC3692" class="css-1dcdqdg"><code>              <span class="code-keyword">const</span> unmountApp = app.unmount;
</code></td></tr><tr><td id="L3693" class="css-a4x74f"><span>3693</span></td><td id="LC3693" class="css-1dcdqdg"><code>              installedApps.add(app);
</code></td></tr><tr><td id="L3694" class="css-a4x74f"><span>3694</span></td><td id="LC3694" class="css-1dcdqdg"><code>              app.unmount = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3695" class="css-a4x74f"><span>3695</span></td><td id="LC3695" class="css-1dcdqdg"><code>                  installedApps.delete(app);
</code></td></tr><tr><td id="L3696" class="css-a4x74f"><span>3696</span></td><td id="LC3696" class="css-1dcdqdg"><code>                  <span class="code-comment">// the router is not attached to an app anymore</span>
</code></td></tr><tr><td id="L3697" class="css-a4x74f"><span>3697</span></td><td id="LC3697" class="css-1dcdqdg"><code>                  <span class="code-keyword">if</span> (installedApps.size &lt; <span class="code-number">1</span>) {
</code></td></tr><tr><td id="L3698" class="css-a4x74f"><span>3698</span></td><td id="LC3698" class="css-1dcdqdg"><code>                      <span class="code-comment">// invalidate the current navigation</span>
</code></td></tr><tr><td id="L3699" class="css-a4x74f"><span>3699</span></td><td id="LC3699" class="css-1dcdqdg"><code>                      pendingLocation = START_LOCATION_NORMALIZED;
</code></td></tr><tr><td id="L3700" class="css-a4x74f"><span>3700</span></td><td id="LC3700" class="css-1dcdqdg"><code>                      removeHistoryListener &amp;&amp; removeHistoryListener();
</code></td></tr><tr><td id="L3701" class="css-a4x74f"><span>3701</span></td><td id="LC3701" class="css-1dcdqdg"><code>                      removeHistoryListener = <span class="code-literal">null</span>;
</code></td></tr><tr><td id="L3702" class="css-a4x74f"><span>3702</span></td><td id="LC3702" class="css-1dcdqdg"><code>                      currentRoute.value = START_LOCATION_NORMALIZED;
</code></td></tr><tr><td id="L3703" class="css-a4x74f"><span>3703</span></td><td id="LC3703" class="css-1dcdqdg"><code>                      started = <span class="code-literal">false</span>;
</code></td></tr><tr><td id="L3704" class="css-a4x74f"><span>3704</span></td><td id="LC3704" class="css-1dcdqdg"><code>                      ready = <span class="code-literal">false</span>;
</code></td></tr><tr><td id="L3705" class="css-a4x74f"><span>3705</span></td><td id="LC3705" class="css-1dcdqdg"><code>                  }
</code></td></tr><tr><td id="L3706" class="css-a4x74f"><span>3706</span></td><td id="LC3706" class="css-1dcdqdg"><code>                  unmountApp();
</code></td></tr><tr><td id="L3707" class="css-a4x74f"><span>3707</span></td><td id="LC3707" class="css-1dcdqdg"><code>              };
</code></td></tr><tr><td id="L3708" class="css-a4x74f"><span>3708</span></td><td id="LC3708" class="css-1dcdqdg"><code>              <span class="code-comment">// <span class="code-doctag">TODO:</span> this probably needs to be updated so it can be used by vue-termui</span>
</code></td></tr><tr><td id="L3709" class="css-a4x74f"><span>3709</span></td><td id="LC3709" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (isBrowser) {
</code></td></tr><tr><td id="L3710" class="css-a4x74f"><span>3710</span></td><td id="LC3710" class="css-1dcdqdg"><code>                  addDevtools(app, router, matcher);
</code></td></tr><tr><td id="L3711" class="css-a4x74f"><span>3711</span></td><td id="LC3711" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3712" class="css-a4x74f"><span>3712</span></td><td id="LC3712" class="css-1dcdqdg"><code>          },
</code></td></tr><tr><td id="L3713" class="css-a4x74f"><span>3713</span></td><td id="LC3713" class="css-1dcdqdg"><code>      };
</code></td></tr><tr><td id="L3714" class="css-a4x74f"><span>3714</span></td><td id="LC3714" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> router;
</code></td></tr><tr><td id="L3715" class="css-a4x74f"><span>3715</span></td><td id="LC3715" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3716" class="css-a4x74f"><span>3716</span></td><td id="LC3716" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">runGuardQueue</span>(<span class="code-params">guards</span>) </span>{
</code></td></tr><tr><td id="L3717" class="css-a4x74f"><span>3717</span></td><td id="LC3717" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> guards.reduce(<span class="code-function">(<span class="code-params">promise, guard</span>) =&gt;</span> promise.then(<span class="code-function"><span class="code-params">()</span> =&gt;</span> guard()), <span class="code-built_in">Promise</span>.resolve());
</code></td></tr><tr><td id="L3718" class="css-a4x74f"><span>3718</span></td><td id="LC3718" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3719" class="css-a4x74f"><span>3719</span></td><td id="LC3719" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">extractChangingRecords</span>(<span class="code-params">to, from</span>) </span>{
</code></td></tr><tr><td id="L3720" class="css-a4x74f"><span>3720</span></td><td id="LC3720" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> leavingRecords = [];
</code></td></tr><tr><td id="L3721" class="css-a4x74f"><span>3721</span></td><td id="LC3721" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> updatingRecords = [];
</code></td></tr><tr><td id="L3722" class="css-a4x74f"><span>3722</span></td><td id="LC3722" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> enteringRecords = [];
</code></td></tr><tr><td id="L3723" class="css-a4x74f"><span>3723</span></td><td id="LC3723" class="css-1dcdqdg"><code>      <span class="code-keyword">const</span> len = <span class="code-built_in">Math</span>.max(<span class="code-keyword">from</span>.matched.length, to.matched.length);
</code></td></tr><tr><td id="L3724" class="css-a4x74f"><span>3724</span></td><td id="LC3724" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">let</span> i = <span class="code-number">0</span>; i &lt; len; i++) {
</code></td></tr><tr><td id="L3725" class="css-a4x74f"><span>3725</span></td><td id="LC3725" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> recordFrom = <span class="code-keyword">from</span>.matched[i];
</code></td></tr><tr><td id="L3726" class="css-a4x74f"><span>3726</span></td><td id="LC3726" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (recordFrom) {
</code></td></tr><tr><td id="L3727" class="css-a4x74f"><span>3727</span></td><td id="LC3727" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (to.matched.find(<span class="code-function"><span class="code-params">record</span> =&gt;</span> isSameRouteRecord(record, recordFrom)))
</code></td></tr><tr><td id="L3728" class="css-a4x74f"><span>3728</span></td><td id="LC3728" class="css-1dcdqdg"><code>                  updatingRecords.push(recordFrom);
</code></td></tr><tr><td id="L3729" class="css-a4x74f"><span>3729</span></td><td id="LC3729" class="css-1dcdqdg"><code>              <span class="code-keyword">else</span>
</code></td></tr><tr><td id="L3730" class="css-a4x74f"><span>3730</span></td><td id="LC3730" class="css-1dcdqdg"><code>                  leavingRecords.push(recordFrom);
</code></td></tr><tr><td id="L3731" class="css-a4x74f"><span>3731</span></td><td id="LC3731" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3732" class="css-a4x74f"><span>3732</span></td><td id="LC3732" class="css-1dcdqdg"><code>          <span class="code-keyword">const</span> recordTo = to.matched[i];
</code></td></tr><tr><td id="L3733" class="css-a4x74f"><span>3733</span></td><td id="LC3733" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (recordTo) {
</code></td></tr><tr><td id="L3734" class="css-a4x74f"><span>3734</span></td><td id="LC3734" class="css-1dcdqdg"><code>              <span class="code-comment">// the type doesn't matter because we are comparing per reference</span>
</code></td></tr><tr><td id="L3735" class="css-a4x74f"><span>3735</span></td><td id="LC3735" class="css-1dcdqdg"><code>              <span class="code-keyword">if</span> (!<span class="code-keyword">from</span>.matched.find(<span class="code-function"><span class="code-params">record</span> =&gt;</span> isSameRouteRecord(record, recordTo))) {
</code></td></tr><tr><td id="L3736" class="css-a4x74f"><span>3736</span></td><td id="LC3736" class="css-1dcdqdg"><code>                  enteringRecords.push(recordTo);
</code></td></tr><tr><td id="L3737" class="css-a4x74f"><span>3737</span></td><td id="LC3737" class="css-1dcdqdg"><code>              }
</code></td></tr><tr><td id="L3738" class="css-a4x74f"><span>3738</span></td><td id="LC3738" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L3739" class="css-a4x74f"><span>3739</span></td><td id="LC3739" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3740" class="css-a4x74f"><span>3740</span></td><td id="LC3740" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> [leavingRecords, updatingRecords, enteringRecords];
</code></td></tr><tr><td id="L3741" class="css-a4x74f"><span>3741</span></td><td id="LC3741" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3742" class="css-a4x74f"><span>3742</span></td><td id="LC3742" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3743" class="css-a4x74f"><span>3743</span></td><td id="LC3743" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L3744" class="css-a4x74f"><span>3744</span></td><td id="LC3744" class="css-1dcdqdg"><code><span class="code-comment">   * Returns the router instance. Equivalent to using `$router` inside
</span></code></td></tr><tr><td id="L3745" class="css-a4x74f"><span>3745</span></td><td id="LC3745" class="css-1dcdqdg"><code><span class="code-comment">   * templates.
</span></code></td></tr><tr><td id="L3746" class="css-a4x74f"><span>3746</span></td><td id="LC3746" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L3747" class="css-a4x74f"><span>3747</span></td><td id="LC3747" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">useRouter</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3748" class="css-a4x74f"><span>3748</span></td><td id="LC3748" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> vue.inject(routerKey);
</code></td></tr><tr><td id="L3749" class="css-a4x74f"><span>3749</span></td><td id="LC3749" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3750" class="css-a4x74f"><span>3750</span></td><td id="LC3750" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L3751" class="css-a4x74f"><span>3751</span></td><td id="LC3751" class="css-1dcdqdg"><code><span class="code-comment">   * Returns the current route location. Equivalent to using `$route` inside
</span></code></td></tr><tr><td id="L3752" class="css-a4x74f"><span>3752</span></td><td id="LC3752" class="css-1dcdqdg"><code><span class="code-comment">   * templates.
</span></code></td></tr><tr><td id="L3753" class="css-a4x74f"><span>3753</span></td><td id="LC3753" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L3754" class="css-a4x74f"><span>3754</span></td><td id="LC3754" class="css-1dcdqdg"><code>  <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">useRoute</span>(<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3755" class="css-a4x74f"><span>3755</span></td><td id="LC3755" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> vue.inject(routeLocationKey);
</code></td></tr><tr><td id="L3756" class="css-a4x74f"><span>3756</span></td><td id="LC3756" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3757" class="css-a4x74f"><span>3757</span></td><td id="LC3757" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3758" class="css-a4x74f"><span>3758</span></td><td id="LC3758" class="css-1dcdqdg"><code>  exports.RouterLink = RouterLink;
</code></td></tr><tr><td id="L3759" class="css-a4x74f"><span>3759</span></td><td id="LC3759" class="css-1dcdqdg"><code>  exports.RouterView = RouterView;
</code></td></tr><tr><td id="L3760" class="css-a4x74f"><span>3760</span></td><td id="LC3760" class="css-1dcdqdg"><code>  exports.START_LOCATION = START_LOCATION_NORMALIZED;
</code></td></tr><tr><td id="L3761" class="css-a4x74f"><span>3761</span></td><td id="LC3761" class="css-1dcdqdg"><code>  exports.createMemoryHistory = createMemoryHistory;
</code></td></tr><tr><td id="L3762" class="css-a4x74f"><span>3762</span></td><td id="LC3762" class="css-1dcdqdg"><code>  exports.createRouter = createRouter;
</code></td></tr><tr><td id="L3763" class="css-a4x74f"><span>3763</span></td><td id="LC3763" class="css-1dcdqdg"><code>  exports.createRouterMatcher = createRouterMatcher;
</code></td></tr><tr><td id="L3764" class="css-a4x74f"><span>3764</span></td><td id="LC3764" class="css-1dcdqdg"><code>  exports.createWebHashHistory = createWebHashHistory;
</code></td></tr><tr><td id="L3765" class="css-a4x74f"><span>3765</span></td><td id="LC3765" class="css-1dcdqdg"><code>  exports.createWebHistory = createWebHistory;
</code></td></tr><tr><td id="L3766" class="css-a4x74f"><span>3766</span></td><td id="LC3766" class="css-1dcdqdg"><code>  exports.isNavigationFailure = isNavigationFailure;
</code></td></tr><tr><td id="L3767" class="css-a4x74f"><span>3767</span></td><td id="LC3767" class="css-1dcdqdg"><code>  exports.loadRouteLocation = loadRouteLocation;
</code></td></tr><tr><td id="L3768" class="css-a4x74f"><span>3768</span></td><td id="LC3768" class="css-1dcdqdg"><code>  exports.matchedRouteKey = matchedRouteKey;
</code></td></tr><tr><td id="L3769" class="css-a4x74f"><span>3769</span></td><td id="LC3769" class="css-1dcdqdg"><code>  exports.onBeforeRouteLeave = onBeforeRouteLeave;
</code></td></tr><tr><td id="L3770" class="css-a4x74f"><span>3770</span></td><td id="LC3770" class="css-1dcdqdg"><code>  exports.onBeforeRouteUpdate = onBeforeRouteUpdate;
</code></td></tr><tr><td id="L3771" class="css-a4x74f"><span>3771</span></td><td id="LC3771" class="css-1dcdqdg"><code>  exports.parseQuery = parseQuery;
</code></td></tr><tr><td id="L3772" class="css-a4x74f"><span>3772</span></td><td id="LC3772" class="css-1dcdqdg"><code>  exports.routeLocationKey = routeLocationKey;
</code></td></tr><tr><td id="L3773" class="css-a4x74f"><span>3773</span></td><td id="LC3773" class="css-1dcdqdg"><code>  exports.routerKey = routerKey;
</code></td></tr><tr><td id="L3774" class="css-a4x74f"><span>3774</span></td><td id="LC3774" class="css-1dcdqdg"><code>  exports.routerViewLocationKey = routerViewLocationKey;
</code></td></tr><tr><td id="L3775" class="css-a4x74f"><span>3775</span></td><td id="LC3775" class="css-1dcdqdg"><code>  exports.stringifyQuery = stringifyQuery;
</code></td></tr><tr><td id="L3776" class="css-a4x74f"><span>3776</span></td><td id="LC3776" class="css-1dcdqdg"><code>  exports.useLink = useLink;
</code></td></tr><tr><td id="L3777" class="css-a4x74f"><span>3777</span></td><td id="LC3777" class="css-1dcdqdg"><code>  exports.useRoute = useRoute;
</code></td></tr><tr><td id="L3778" class="css-a4x74f"><span>3778</span></td><td id="LC3778" class="css-1dcdqdg"><code>  exports.useRouter = useRouter;
</code></td></tr><tr><td id="L3779" class="css-a4x74f"><span>3779</span></td><td id="LC3779" class="css-1dcdqdg"><code>  exports.viewDepthKey = viewDepthKey;
</code></td></tr><tr><td id="L3780" class="css-a4x74f"><span>3780</span></td><td id="LC3780" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3781" class="css-a4x74f"><span>3781</span></td><td id="LC3781" class="css-1dcdqdg"><code>  <span class="code-built_in">Object</span>.defineProperty(exports, <span class="code-string">'__esModule'</span>, { <span class="code-attr">value</span>: <span class="code-literal">true</span> });
</code></td></tr><tr><td id="L3782" class="css-a4x74f"><span>3782</span></td><td id="LC3782" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3783" class="css-a4x74f"><span>3783</span></td><td id="LC3783" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> exports;
</code></td></tr><tr><td id="L3784" class="css-a4x74f"><span>3784</span></td><td id="LC3784" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3785" class="css-a4x74f"><span>3785</span></td><td id="LC3785" class="css-1dcdqdg"><code>})({}, Vue);
</code></td></tr></tbody></table></div></div></div></div><style data-emotion-css="1teho9j">.css-1teho9j{margin-top:5rem;background:black;color:#aaa;}</style><footer class="css-1teho9j"><style data-emotion-css="1ui8put">.css-1ui8put{max-width:940px;padding:10px 20px;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><div class="css-1ui8put"><p><span>Build: <!-- -->a7ebffa</span></p><p><span> <!-- -->2023<!-- --> UNPKG</span></p><style data-emotion-css="la3nd4">.css-la3nd4{font-size:1.5rem;}</style><p class="css-la3nd4"><style data-emotion-css="bogekj">.css-bogekj{color:#aaa;display:inline-block;}.css-bogekj:hover{color:white;}</style><a href="https://twitter.com/unpkg" class="css-bogekj"><style data-emotion-css="i6dzq1">.css-i6dzq1{vertical-align:text-bottom;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="css-i6dzq1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><style data-emotion-css="3czw03">.css-3czw03{color:#aaa;display:inline-block;margin-left:1rem;}.css-3czw03:hover{color:white;}</style><a href="https://github.com/mjackson/unpkg" class="css-3czw03"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="css-i6dzq1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></p></div></footer></div><script src="/react@16.8.6/umd/react.production.min.js"></script><script src="/react-dom@16.8.6/umd/react-dom.production.min.js"></script><script src="/@emotion/core@10.0.6/dist/core.umd.min.js"></script><script>'use strict';(function(t,A,c){function w(){w=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var e=arguments[b],c;for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(a[c]=e[c])}return a};return w.apply(this,arguments)}function P(a,b){if(null==a)return{};var e={},c=Object.keys(a),d;for(d=0;d<c.length;d++){var h=c[d];0<=b.indexOf(h)||(e[h]=a[h])}return e}function Q(a,b){b||(b=a.slice(0));a.raw=b;return a}function R(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,
"default")?a["default"]:a}function D(a,b){return b={exports:{}},a(b,b.exports),b.exports}function J(a,b,e,c,d){for(var g in a)if(ua(a,g)){try{if("function"!==typeof a[g]){var r=Error((c||"React class")+": "+e+" type `"+g+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof a[g]+"`.");r.name="Invariant Violation";throw r;}var k=a[g](b,g,c,e,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(q){k=q}!k||k instanceof Error||K((c||"React class")+": type specification of "+
e+" `"+g+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof k+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).");if(k instanceof Error&&!(k.message in L)){L[k.message]=!0;var B=d?d():"";K("Failed "+e+" type: "+k.message+(null!=B?B:""))}}}function G(){return null}function S(a){var b,e=a.children;a=a.css;return c.jsx("div",{css:w((b={border:"1px solid #dfe2e5",
borderRadius:3},b["@media (max-width: 700px)"]={borderRightWidth:0,borderLeftWidth:0},b),a)},e)}function T(a){var b,e=a.children;a=a.css;return c.jsx("div",{css:w((b={padding:10,background:"#f6f8fa",color:"#424242",border:"1px solid #d1d5da",borderTopLeftRadius:3,borderTopRightRadius:3,margin:"-1px -1px 0",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},b["@media (max-width: 700px)"]={paddingRight:20,paddingLeft:20},b),a)},e)}function U(a){return a&&a.map(function(a,
c){return t.createElement(a.tag,z({key:c},a.attr),U(a.child))})}function E(a){return function(b){return t.createElement(va,z({attr:z({},a.attr)},b),U(a.child))}}function va(a){var b=function(b){var c=a.size||b.size||"1em";if(b.className)var e=b.className;a.className&&(e=(e?e+" ":"")+a.className);var h=a.attr,r=a.title,k=["attr","title"],B={},q;for(q in a)Object.prototype.hasOwnProperty.call(a,q)&&0>k.indexOf(q)&&(B[q]=a[q]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var p=0;for(q=
Object.getOwnPropertySymbols(a);p<q.length;p++)0>k.indexOf(q[p])&&(B[q[p]]=a[q[p]])}return t.createElement("svg",z({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},b.attr,h,B,{className:e,style:z({color:a.color||b.color},b.style,a.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),r&&t.createElement("title",null,r),a.children)};return void 0!==V?t.createElement(V.Consumer,null,function(a){return b(a)}):b(W)}function F(a,b){var e=b.css;b=P(b,["css"]);return c.jsx(a,w({css:w({},
e,{verticalAlign:"text-bottom"})},b))}function wa(a){return F(X,a)}function xa(a){return F(Y,a)}function ya(a){return F(Z,a)}function za(a){return F(aa,a)}function Aa(a){return F(ba,a)}function ca(a){var b=a.path,e=a.details,g=Object.keys(e).reduce(function(a,b){var c=a.subdirs,g=a.files;b=e[b];"directory"===b.type?c.push(b):"file"===b.type&&g.push(b);return a},{subdirs:[],files:[]});a=g.subdirs;g=g.files;a.sort(da("path"));g.sort(da("path"));var d=[];"/"!==b&&d.push(c.jsx("tr",{key:".."},c.jsx("td",
{css:M}),c.jsx("td",{css:y},c.jsx("a",{title:"Parent directory",href:"../",css:N},"..")),c.jsx("td",{css:y}),c.jsx("td",{css:O})));a.forEach(function(a){a=a.path.substr(1<b.length?b.length+1:1);var e=a+"/";d.push(c.jsx("tr",{key:a},c.jsx("td",{css:M},c.jsx(ya,null)),c.jsx("td",{css:y},c.jsx("a",{title:a,href:e,css:N},a)),c.jsx("td",{css:y},"-"),c.jsx("td",{css:O},"-")))});g.forEach(function(a){var e=a.size,g=a.contentType;a=a.path.substr(1<b.length?b.length+1:1);d.push(c.jsx("tr",{key:a},c.jsx("td",
{css:M},"text/plain"===g||"text/markdown"===g?c.jsx(wa,null):c.jsx(xa,null)),c.jsx("td",{css:y},c.jsx("a",{title:a,href:a,css:N},a)),c.jsx("td",{css:y},ea(e)),c.jsx("td",{css:O},g)))});var h=[];0<g.length&&h.push(g.length+" file"+(1===g.length?"":"s"));0<a.length&&h.push(a.length+" folder"+(1===a.length?"":"s"));return c.jsx(S,null,c.jsx(T,null,c.jsx("span",null,h.join(", "))),c.jsx("table",{css:{width:"100%",borderCollapse:"collapse",borderRadius:2,background:"#fff","@media (max-width: 700px)":{"& th + th + th + th, & td + td + td + td":{display:"none"}},
"& tr:first-of-type td":{borderTop:0}}},c.jsx("thead",null,c.jsx("tr",null,c.jsx("th",null,c.jsx(H,null,"Icon")),c.jsx("th",null,c.jsx(H,null,"Name")),c.jsx("th",null,c.jsx(H,null,"Size")),c.jsx("th",null,c.jsx(H,null,"Content Type")))),c.jsx("tbody",null,d)))}function Ba(a){a=a.split("/");return a[a.length-1]}function Ca(a){var b=a.uri;return c.jsx("div",{css:{padding:20,textAlign:"center"}},c.jsx("img",{alt:Ba(a.path),src:b}))}function Da(a){a=a.highlights.slice(0);var b=a.length&&""===a[a.length-
1];b&&a.pop();return c.jsx("div",{className:"code-listing",css:{overflowX:"auto",overflowY:"hidden",paddingTop:5,paddingBottom:5}},c.jsx("table",{css:{border:"none",borderCollapse:"collapse",borderSpacing:0}},c.jsx("tbody",null,a.map(function(a,b){var e=b+1;return c.jsx("tr",{key:b},c.jsx("td",{id:"L"+e,css:{paddingLeft:10,paddingRight:10,color:"rgba(27,31,35,.3)",textAlign:"right",verticalAlign:"top",width:"1%",minWidth:50,userSelect:"none"}},c.jsx("span",null,e)),c.jsx("td",{id:"LC"+e,css:{paddingLeft:10,
paddingRight:10,color:"#24292e",whiteSpace:"pre"}},c.jsx("code",{dangerouslySetInnerHTML:{__html:a}})))}),!b&&c.jsx("tr",{key:"no-newline"},c.jsx("td",{css:{paddingLeft:10,paddingRight:10,color:"rgba(27,31,35,.3)",textAlign:"right",verticalAlign:"top",width:"1%",minWidth:50,userSelect:"none"}},"\\"),c.jsx("td",{css:{paddingLeft:10,color:"rgba(27,31,35,.3)",userSelect:"none"}},"No newline at end of file")))))}function Ea(){return c.jsx("div",{css:{padding:20}},c.jsx("p",{css:{textAlign:"center"}},
"No preview available."))}function fa(a){var b=a.packageName,e=a.packageVersion,g=a.path;a=a.details;var d=a.highlights,h=a.uri,r=a.language;return c.jsx(S,null,c.jsx(T,null,c.jsx("span",null,ea(a.size)),c.jsx("span",null,r),c.jsx("span",null,c.jsx("a",{href:"/"+b+"@"+e+g,css:{display:"inline-block",marginLeft:8,padding:"2px 8px",textDecoration:"none",fontWeight:600,fontSize:"0.9rem",color:"#24292e",backgroundColor:"#eff3f6",border:"1px solid rgba(27,31,35,.2)",borderRadius:3,":hover":{backgroundColor:"#e6ebf1",
borderColor:"rgba(27,31,35,.35)"},":active":{backgroundColor:"#e9ecef",borderColor:"rgba(27,31,35,.35)",boxShadow:"inset 0 0.15em 0.3em rgba(27,31,35,.15)"}}},"View Raw"))),d?c.jsx(Da,{highlights:d}):h?c.jsx(Ca,{path:g,uri:h}):c.jsx(Ea,null))}function ha(){var a=Q(["\n  .code-listing {\n    background: #fbfdff;\n    color: #383a42;\n  }\n  .code-comment,\n  .code-quote {\n    color: #a0a1a7;\n    font-style: italic;\n  }\n  .code-doctag,\n  .code-keyword,\n  .code-link,\n  .code-formula {\n    color: #a626a4;\n  }\n  .code-section,\n  .code-name,\n  .code-selector-tag,\n  .code-deletion,\n  .code-subst {\n    color: #e45649;\n  }\n  .code-literal {\n    color: #0184bb;\n  }\n  .code-string,\n  .code-regexp,\n  .code-addition,\n  .code-attribute,\n  .code-meta-string {\n    color: #50a14f;\n  }\n  .code-built_in,\n  .code-class .code-title {\n    color: #c18401;\n  }\n  .code-attr,\n  .code-variable,\n  .code-template-variable,\n  .code-type,\n  .code-selector-class,\n  .code-selector-attr,\n  .code-selector-pseudo,\n  .code-number {\n    color: #986801;\n  }\n  .code-symbol,\n  .code-bullet,\n  .code-meta,\n  .code-selector-id,\n  .code-title {\n    color: #4078f2;\n  }\n  .code-emphasis {\n    font-style: italic;\n  }\n  .code-strong {\n    font-weight: bold;\n  }\n"]);
ha=function(){return a};return a}function ia(){var a=Q(["\n  html {\n    box-sizing: border-box;\n  }\n  *,\n  *:before,\n  *:after {\n    box-sizing: inherit;\n  }\n\n  html,\n  body,\n  #root {\n    height: 100%;\n    margin: 0;\n  }\n\n  body {\n    ","\n    font-size: 16px;\n    line-height: 1.5;\n    overflow-wrap: break-word;\n    background: white;\n    color: black;\n  }\n\n  code {\n    ","\n  }\n\n  th,\n  td {\n    padding: 0;\n  }\n\n  select {\n    font-size: inherit;\n  }\n\n  #root {\n    display: flex;\n    flex-direction: column;\n  }\n"]);
ia=function(){return a};return a}function ja(a){var b=a.css;a=P(a,["css"]);return c.jsx("a",w({},a,{css:w({color:"#0076ff",textDecoration:"none",":hover":{textDecoration:"underline"}},b)}))}function Fa(){return c.jsx("header",{css:{marginTop:"2rem"}},c.jsx("h1",{css:{textAlign:"center",fontSize:"3rem",letterSpacing:"0.05em"}},c.jsx("a",{href:"/",css:{color:"#000",textDecoration:"none"}},"UNPKG")))}function Ga(a){var b=a.packageName,e=a.packageVersion,g=a.availableVersions;a=a.filename;var d=[];if("/"===
a)d.push(b);else{var h="/browse/"+b+"@"+e;d.push(c.jsx(ja,{href:h+"/"},b));b=a.replace(/^\/+/,"").replace(/\/+$/,"").split("/");a=b.pop();b.forEach(function(a){h+="/"+a;d.push(c.jsx(ja,{href:h+"/"},a))});d.push(a)}return c.jsx("header",{css:{display:"flex",flexDirection:"row",alignItems:"center","@media (max-width: 700px)":{flexDirection:"column-reverse",alignItems:"flex-start"}}},c.jsx("h1",{css:{fontSize:"1.5rem",fontWeight:"normal",flex:1,wordBreak:"break-all"}},c.jsx("nav",null,d.map(function(a,
b,e){return c.jsx(t.Fragment,{key:b},0!==b&&c.jsx("span",{css:{paddingLeft:5,paddingRight:5}},"/"),b===e.length-1?c.jsx("strong",null,a):a)}))),c.jsx(Ha,{packageVersion:e,availableVersions:g,onChange:function(a){window.location.href=window.location.href.replace("@"+e,"@"+a)}}))}function Ha(a){var b=a.onChange;return c.jsx("p",{css:{marginLeft:20,"@media (max-width: 700px)":{marginLeft:0,marginBottom:0}}},c.jsx("label",null,"Version:"," ",c.jsx("select",{name:"version",defaultValue:a.packageVersion,
onChange:function(a){b&&b(a.target.value)},css:{appearance:"none",cursor:"pointer",padding:"4px 24px 4px 8px",fontWeight:600,fontSize:"0.9em",color:"#24292e",border:"1px solid rgba(27,31,35,.2)",borderRadius:3,backgroundColor:"#eff3f6",backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAAAXNSR0IArs4c6QAAARFJREFUKBVjZAACNS39RhBNKrh17WI9o4quoT3Dn78HSNUMUs/CzOTI/O7Vi4dCYpJ3/jP+92BkYGAlyiBGhm8MjIxJt65e3MQM0vDu9YvLYmISILYZELOBxHABRkaGr0yMzF23r12YDFIDNgDEePv65SEhEXENBkYGFSAXuyGMjF8Z/jOsvX3tYiFIDwgwQSgIaaijnvj/P8M5IO8HsjiY/f//D4b//88A1SQhywG9jQr09PS4v/1mPAeUUPzP8B8cJowMjL+Bqu6xMQmaXL164AuyDgwDQJLa2qYSP//9vARkCoMVMzK8YeVkNbh+9uxzMB+JwGoASF5Vx0jz/98/18BqmZi171w9D2EjaaYKEwAEK00XQLdJuwAAAABJRU5ErkJggg==)",
backgroundPosition:"right 8px center",backgroundRepeat:"no-repeat",backgroundSize:"auto 25%",":hover":{backgroundColor:"#e6ebf1",borderColor:"rgba(27,31,35,.35)"},":active":{backgroundColor:"#e9ecef",borderColor:"rgba(27,31,35,.35)",boxShadow:"inset 0 0.15em 0.3em rgba(27,31,35,.15)"}}},a.availableVersions.map(function(a){return c.jsx("option",{key:a,value:a},a)}))))}function Ia(a){var b=a.packageName,e=a.packageVersion;a=a.target;return"directory"===a.type?c.jsx(ca,{path:a.path,details:a.details}):
"file"===a.type?c.jsx(fa,{packageName:b,packageVersion:e,path:a.path,details:a.details}):null}function ka(a){var b=a.packageName,e=a.packageVersion,g=a.availableVersions;g=void 0===g?[]:g;var d=a.filename;a=a.target;return c.jsx(t.Fragment,null,c.jsx(c.Global,{styles:Ja}),c.jsx(c.Global,{styles:Ka}),c.jsx("div",{css:{flex:"1 0 auto"}},c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto"}},c.jsx(Fa,null)),c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto"}},c.jsx(Ga,{packageName:b,
packageVersion:e,availableVersions:g,filename:d})),c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto","@media (max-width: 700px)":{padding:0,margin:0}}},c.jsx(Ia,{packageName:b,packageVersion:e,target:a}))),c.jsx("footer",{css:{marginTop:"5rem",background:"black",color:"#aaa"}},c.jsx("div",{css:{maxWidth:940,padding:"10px 20px",margin:"0 auto",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},c.jsx("p",null,c.jsx("span",null,"Build: ","a7ebffa")),
c.jsx("p",null,c.jsx("span",null,"\u00a9 ",(new Date).getFullYear()," UNPKG")),c.jsx("p",{css:{fontSize:"1.5rem"}},c.jsx("a",{href:"https://twitter.com/unpkg",css:{color:"#aaa",display:"inline-block",":hover":{color:"white"}}},c.jsx(za,null)),c.jsx("a",{href:"https://github.com/mjackson/unpkg",css:{color:"#aaa",display:"inline-block",":hover":{color:"white"},marginLeft:"1rem"}},c.jsx(Aa,null))))))}var la="default"in t?t["default"]:t;A=A&&A.hasOwnProperty("default")?A["default"]:A;var La="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},m=D(function(a,b){function c(a){if("object"===typeof a&&null!==a){var b=a.$$typeof;switch(b){case d:switch(a=a.type,a){case l:case f:case r:case m:case k:case v:return a;default:switch(a=a&&a.$$typeof,a){case p:case n:case q:return a;default:return b}}case x:case u:case h:return b}}}function g(a){return c(a)===f}Object.defineProperty(b,"__esModule",{value:!0});var d=
(a="function"===typeof Symbol&&Symbol.for)?Symbol.for("react.element"):60103,h=a?Symbol.for("react.portal"):60106,r=a?Symbol.for("react.fragment"):60107,k=a?Symbol.for("react.strict_mode"):60108,m=a?Symbol.for("react.profiler"):60114,q=a?Symbol.for("react.provider"):60109,p=a?Symbol.for("react.context"):60110,l=a?Symbol.for("react.async_mode"):60111,f=a?Symbol.for("react.concurrent_mode"):60111,n=a?Symbol.for("react.forward_ref"):60112,v=a?Symbol.for("react.suspense"):60113,u=a?Symbol.for("react.memo"):
60115,x=a?Symbol.for("react.lazy"):60116;b.typeOf=c;b.AsyncMode=l;b.ConcurrentMode=f;b.ContextConsumer=p;b.ContextProvider=q;b.Element=d;b.ForwardRef=n;b.Fragment=r;b.Lazy=x;b.Memo=u;b.Portal=h;b.Profiler=m;b.StrictMode=k;b.Suspense=v;b.isValidElementType=function(a){return"string"===typeof a||"function"===typeof a||a===r||a===f||a===m||a===k||a===v||"object"===typeof a&&null!==a&&(a.$$typeof===x||a.$$typeof===u||a.$$typeof===q||a.$$typeof===p||a.$$typeof===n)};b.isAsyncMode=function(a){return g(a)||
c(a)===l};b.isConcurrentMode=g;b.isContextConsumer=function(a){return c(a)===p};b.isContextProvider=function(a){return c(a)===q};b.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===d};b.isForwardRef=function(a){return c(a)===n};b.isFragment=function(a){return c(a)===r};b.isLazy=function(a){return c(a)===x};b.isMemo=function(a){return c(a)===u};b.isPortal=function(a){return c(a)===h};b.isProfiler=function(a){return c(a)===m};b.isStrictMode=function(a){return c(a)===k};b.isSuspense=
function(a){return c(a)===v}});R(m);var na=D(function(a,b){(function(){function a(a){if("object"===typeof a&&null!==a){var b=a.$$typeof;switch(b){case h:switch(a=a.type,a){case f:case n:case k:case q:case m:case u:return a;default:switch(a=a&&a.$$typeof,a){case l:case v:case p:return a;default:return b}}case I:case x:case r:return b}}}function c(b){return a(b)===n}Object.defineProperty(b,"__esModule",{value:!0});var d="function"===typeof Symbol&&Symbol.for,h=d?Symbol.for("react.element"):60103,r=
d?Symbol.for("react.portal"):60106,k=d?Symbol.for("react.fragment"):60107,m=d?Symbol.for("react.strict_mode"):60108,q=d?Symbol.for("react.profiler"):60114,p=d?Symbol.for("react.provider"):60109,l=d?Symbol.for("react.context"):60110,f=d?Symbol.for("react.async_mode"):60111,n=d?Symbol.for("react.concurrent_mode"):60111,v=d?Symbol.for("react.forward_ref"):60112,u=d?Symbol.for("react.suspense"):60113,x=d?Symbol.for("react.memo"):60115,I=d?Symbol.for("react.lazy"):60116;d=function(){};var Ma=function(a){for(var b=
arguments.length,f=Array(1<b?b-1:0),c=1;c<b;c++)f[c-1]=arguments[c];var n=0;b="Warning: "+a.replace(/%s/g,function(){return f[n++]});"undefined"!==typeof console&&console.warn(b);try{throw Error(b);}catch(Xa){}},Na=d=function(a,b){if(void 0===b)throw Error("`lowPriorityWarning(condition, format, ...args)` requires a warning message argument");if(!a){for(var f=arguments.length,c=Array(2<f?f-2:0),n=2;n<f;n++)c[n-2]=arguments[n];Ma.apply(void 0,[b].concat(c))}},ma=!1;b.typeOf=a;b.AsyncMode=f;b.ConcurrentMode=
n;b.ContextConsumer=l;b.ContextProvider=p;b.Element=h;b.ForwardRef=v;b.Fragment=k;b.Lazy=I;b.Memo=x;b.Portal=r;b.Profiler=q;b.StrictMode=m;b.Suspense=u;b.isValidElementType=function(a){return"string"===typeof a||"function"===typeof a||a===k||a===n||a===q||a===m||a===u||"object"===typeof a&&null!==a&&(a.$$typeof===I||a.$$typeof===x||a.$$typeof===p||a.$$typeof===l||a.$$typeof===v)};b.isAsyncMode=function(b){ma||(ma=!0,Na(!1,"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API."));
return c(b)||a(b)===f};b.isConcurrentMode=c;b.isContextConsumer=function(b){return a(b)===l};b.isContextProvider=function(b){return a(b)===p};b.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===h};b.isForwardRef=function(b){return a(b)===v};b.isFragment=function(b){return a(b)===k};b.isLazy=function(b){return a(b)===I};b.isMemo=function(b){return a(b)===x};b.isPortal=function(b){return a(b)===r};b.isProfiler=function(b){return a(b)===q};b.isStrictMode=function(b){return a(b)===
m};b.isSuspense=function(b){return a(b)===u}})()});R(na);var oa=D(function(a){a.exports=na}),pa=Object.getOwnPropertySymbols,Oa=Object.prototype.hasOwnProperty,Pa=Object.prototype.propertyIsEnumerable,Qa=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=
a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var c=Object(a);for(var g,d=1;d<arguments.length;d++){var h=Object(arguments[d]);for(var r in h)Oa.call(h,r)&&(c[r]=h[r]);if(pa){g=pa(h);for(var k=0;k<g.length;k++)Pa.call(h,g[k])&&(c[g[k]]=h[g[k]])}}return c},K=function(){},L={},ua=Function.call.bind(Object.prototype.hasOwnProperty);
K=function(a){a="Warning: "+a;"undefined"!==typeof console&&console.error(a);try{throw Error(a);}catch(b){}};J.resetWarningCache=function(){L={}};var Ra=Function.call.bind(Object.prototype.hasOwnProperty),C=function(){};C=function(a){a="Warning: "+a;"undefined"!==typeof console&&console.error(a);try{throw Error(a);}catch(b){}};var Sa=function(a,b){function c(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}function g(a){this.message=a;this.stack=""}function d(a){function c(c,n,v,d,e,u,h){d=d||"<<anonymous>>";
u=u||v;if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==h){if(b)throw c=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types"),c.name="Invariant Violation",c;"undefined"!==typeof console&&(h=d+":"+v,!f[h]&&3>l&&(C("You are manually calling a React.PropTypes validation function for the `"+u+"` prop on `"+d+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),
f[h]=!0,l++))}return null==n[v]?c?null===n[v]?new g("The "+e+" `"+u+"` is marked as required "+("in `"+d+"`, but its value is `null`.")):new g("The "+e+" `"+u+"` is marked as required in "+("`"+d+"`, but its value is `undefined`.")):null:a(n,v,d,e,u)}var f={},l=0,d=c.bind(null,!1);d.isRequired=c.bind(null,!0);return d}function h(a){return d(function(b,c,f,d,l,e){b=b[c];return k(b)!==a?(b=m(b),new g("Invalid "+d+" `"+l+"` of type "+("`"+b+"` supplied to `"+f+"`, expected ")+("`"+a+"`."))):null})}function r(b){switch(typeof b){case "number":case "string":case "undefined":return!0;
case "boolean":return!b;case "object":if(Array.isArray(b))return b.every(r);if(null===b||a(b))return!0;var c=b&&(p&&b[p]||b["@@iterator"]);var f="function"===typeof c?c:void 0;if(f)if(c=f.call(b),f!==b.entries)for(;!(b=c.next()).done;){if(!r(b.value))return!1}else for(;!(b=c.next()).done;){if((b=b.value)&&!r(b[1]))return!1}else return!1;return!0;default:return!1}}function k(a){var b=typeof a;return Array.isArray(a)?"array":a instanceof RegExp?"object":"symbol"===b||a&&("Symbol"===a["@@toStringTag"]||
"function"===typeof Symbol&&a instanceof Symbol)?"symbol":b}function m(a){if("undefined"===typeof a||null===a)return""+a;var b=k(a);if("object"===b){if(a instanceof Date)return"date";if(a instanceof RegExp)return"regexp"}return b}function q(a){a=m(a);switch(a){case "array":case "object":return"an "+a;case "boolean":case "date":case "regexp":return"a "+a;default:return a}}var p="function"===typeof Symbol&&Symbol.iterator,l={array:h("array"),bool:h("boolean"),func:h("function"),number:h("number"),object:h("object"),
string:h("string"),symbol:h("symbol"),any:d(G),arrayOf:function(a){return d(function(b,c,f,d,l){if("function"!==typeof a)return new g("Property `"+l+"` of component `"+f+"` has invalid PropType notation inside arrayOf.");b=b[c];if(!Array.isArray(b))return b=k(b),new g("Invalid "+d+" `"+l+"` of type "+("`"+b+"` supplied to `"+f+"`, expected an array."));for(c=0;c<b.length;c++){var n=a(b,c,f,d,l+"["+c+"]","SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(n instanceof Error)return n}return null})},
element:function(){return d(function(b,c,d,l,e){b=b[c];return a(b)?null:(b=k(b),new g("Invalid "+l+" `"+e+"` of type "+("`"+b+"` supplied to `"+d+"`, expected a single ReactElement.")))})}(),elementType:function(){return d(function(a,b,c,d,l){a=a[b];return oa.isValidElementType(a)?null:(a=k(a),new g("Invalid "+d+" `"+l+"` of type "+("`"+a+"` supplied to `"+c+"`, expected a single ReactElement type.")))})}(),instanceOf:function(a){return d(function(b,c,f,d,l){if(!(b[c]instanceof a)){var n=a.name||
"<<anonymous>>";b=b[c];b=b.constructor&&b.constructor.name?b.constructor.name:"<<anonymous>>";return new g("Invalid "+d+" `"+l+"` of type "+("`"+b+"` supplied to `"+f+"`, expected ")+("instance of `"+n+"`."))}return null})},node:function(){return d(function(a,b,c,d,l){return r(a[b])?null:new g("Invalid "+d+" `"+l+"` supplied to "+("`"+c+"`, expected a ReactNode."))})}(),objectOf:function(a){return d(function(b,c,f,d,l){if("function"!==typeof a)return new g("Property `"+l+"` of component `"+f+"` has invalid PropType notation inside objectOf.");
b=b[c];c=k(b);if("object"!==c)return new g("Invalid "+d+" `"+l+"` of type "+("`"+c+"` supplied to `"+f+"`, expected an object."));for(var n in b)if(Ra(b,n)&&(c=a(b,n,f,d,l+"."+n,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"),c instanceof Error))return c;return null})},oneOf:function(a){return Array.isArray(a)?d(function(b,f,d,l,e){b=b[f];for(f=0;f<a.length;f++)if(c(b,a[f]))return null;f=JSON.stringify(a,function(a,b){return"symbol"===m(b)?String(b):b});return new g("Invalid "+l+" `"+e+"` of value `"+
String(b)+"` "+("supplied to `"+d+"`, expected one of "+f+"."))}):(1<arguments.length?C("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):C("Invalid argument supplied to oneOf, expected an array."),G)},oneOfType:function(a){if(!Array.isArray(a))return C("Invalid argument supplied to oneOfType, expected an instance of array."),G;for(var b=0;b<a.length;b++){var c=a[b];if("function"!==
typeof c)return C("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+q(c)+" at index "+b+"."),G}return d(function(b,c,f,d,l){for(var e=0;e<a.length;e++)if(null==(0,a[e])(b,c,f,d,l,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"))return null;return new g("Invalid "+d+" `"+l+"` supplied to "+("`"+f+"`."))})},shape:function(a){return d(function(b,c,d,l,f){b=b[c];c=k(b);if("object"!==c)return new g("Invalid "+l+" `"+f+"` of type `"+c+"` "+("supplied to `"+d+"`, expected `object`."));
for(var e in a)if(c=a[e])if(c=c(b,e,d,l,f+"."+e,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"))return c;return null})},exact:function(a){return d(function(b,c,d,l,f){var e=b[c],n=k(e);if("object"!==n)return new g("Invalid "+l+" `"+f+"` of type `"+n+"` "+("supplied to `"+d+"`, expected `object`."));n=Qa({},b[c],a);for(var h in n){n=a[h];if(!n)return new g("Invalid "+l+" `"+f+"` key `"+h+"` supplied to `"+d+"`.\nBad object: "+JSON.stringify(b[c],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(a),
null,"  "));if(n=n(e,h,d,l,f+"."+h,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"))return n}return null})}};g.prototype=Error.prototype;l.checkPropTypes=J;l.resetWarningCache=J.resetWarningCache;return l.PropTypes=l};m=D(function(a){a.exports=Sa(oa.isElement,!0)});var Ta=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],g;for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&(a[g]=c[g])}return a},Ua={border:0,clip:"rect(0 0 0 0)",height:"1px",width:"1px",margin:"-1px",
padding:0,overflow:"hidden",position:"absolute"},H=function(a){return la.createElement("div",Ta({style:Ua},a))},qa=D(function(a){(function(b,c){a.exports=c()})(La,function(){function a(a){if(!a)return!0;if(!d(a)||0!==a.length)for(var b in a)if(q.call(a,b))return!1;return!0}function c(a){return"number"===typeof a||"[object Number]"===t.call(a)}function g(a){return"string"===typeof a||"[object String]"===t.call(a)}function d(a){return"object"===typeof a&&"number"===typeof a.length&&"[object Array]"===
t.call(a)}function h(a){var b=parseInt(a);return b.toString()===a?b:a}function m(b,d,e,k){c(d)&&(d=[d]);if(a(d))return b;if(g(d))return m(b,d.split("."),e,k);var f=h(d[0]);if(1===d.length)return d=b[f],void 0!==d&&k||(b[f]=e),d;void 0===b[f]&&(c(f)?b[f]=[]:b[f]={});return m(b[f],d.slice(1),e,k)}function k(b,f){c(f)&&(f=[f]);if(!a(b)){if(a(f))return b;if(g(f))return k(b,f.split("."));var e=h(f[0]),l=b[e];if(1===f.length)void 0!==l&&(d(b)?b.splice(e,1):delete b[e]);else if(void 0!==b[e])return k(b[e],
f.slice(1));return b}}var t=Object.prototype.toString,q=Object.prototype.hasOwnProperty,p={ensureExists:function(a,b,c){return m(a,b,c,!0)},set:function(a,b,c,d){return m(a,b,c,d)},insert:function(a,b,c,e){var f=p.get(a,b);e=~~e;d(f)||(f=[],p.set(a,b,f));f.splice(e,0,c)},empty:function(b,f){if(a(f))return b;if(!a(b)){var e,h;if(!(e=p.get(b,f)))return b;if(g(e))return p.set(b,f,"");if("boolean"===typeof e||"[object Boolean]"===t.call(e))return p.set(b,f,!1);if(c(e))return p.set(b,f,0);if(d(e))e.length=
0;else if("object"===typeof e&&"[object Object]"===t.call(e))for(h in e)q.call(e,h)&&delete e[h];else return p.set(b,f,null)}},push:function(a,b){var c=p.get(a,b);d(c)||(c=[],p.set(a,b,c));c.push.apply(c,Array.prototype.slice.call(arguments,2))},coalesce:function(a,b,c){for(var d,e=0,f=b.length;e<f;e++)if(void 0!==(d=p.get(a,b[e])))return d;return c},get:function(b,d,e){c(d)&&(d=[d]);if(a(d))return b;if(a(b))return e;if(g(d))return p.get(b,d.split("."),e);var f=h(d[0]);return 1===d.length?void 0===
b[f]?e:b[f]:p.get(b[f],d.slice(1),e)},del:function(a,b){return k(a,b)}};return p})});var ra=function(a){return function(b){return typeof b===a}};var Va=function(a,b){var c=1,g=b||function(a,b){return b};"-"===a[0]&&(c=-1,a=a.substr(1));return function(b,e){var d;b=g(a,qa.get(b,a));e=g(a,qa.get(e,a));b<e&&(d=-1);b>e&&(d=1);b===e&&(d=0);return d*c}};var da=function(){var a=Array.prototype.slice.call(arguments),b=a.filter(ra("string")),c=a.filter(ra("function"))[0];return function(a,d){for(var e=b.length,
g=0,k=0;0===g&&k<e;)g=Va(b[k],c)(a,d),k++;return g}};let sa="B kB MB GB TB PB EB ZB YB".split(" "),ta=(a,b)=>{let c=a;"string"===typeof b?c=a.toLocaleString(b):!0===b&&(c=a.toLocaleString());return c};var ea=(a,b)=>{if(!Number.isFinite(a))throw new TypeError(`Expected a finite number, got ${typeof a}: ${a}`);b=Object.assign({},b);if(b.signed&&0===a)return" 0 B";var c=0>a;let g=c?"-":b.signed?"+":"";c&&(a=-a);if(1>a)return a=ta(a,b.locale),g+a+" B";c=Math.min(Math.floor(Math.log10(a)/3),sa.length-
1);a=Number((a/Math.pow(1E3,c)).toPrecision(3));a=ta(a,b.locale);return g+a+" "+sa[c]},W={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},V=t.createContext&&t.createContext(W),z=function(){z=Object.assign||function(a){for(var b,c=1,g=arguments.length;c<g;c++){b=arguments[c];for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d])}return a};return z.apply(this,arguments)},Y=function(a){return E({tag:"svg",attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",
d:"M8.5 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h10c.55 0 1-.45 1-1V4.5L8.5 1zM11 14H1V2h7l3 3v9zM5 6.98L3.5 8.5 5 10l-.5 1L2 8.5 4.5 6l.5.98zM7.5 6L10 8.5 7.5 11l-.5-.98L8.5 8.5 7 7l.5-1z"}}]})(a)};Y.displayName="GoFileCode";var Z=function(a){return E({tag:"svg",attr:{viewBox:"0 0 14 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z"}}]})(a)};Z.displayName="GoFileDirectory";var X=function(a){return E({tag:"svg",
attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"}}]})(a)};X.displayName="GoFile";var ba=function(a){return E({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}}]})(a)};
ba.displayName="FaGithub";var aa=function(a){return E({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"}}]})(a)};
aa.displayName="FaTwitter";var N={color:"#0076ff",textDecoration:"none",":hover":{textDecoration:"underline"}},y={paddingTop:6,paddingRight:3,paddingBottom:6,paddingLeft:3,borderTop:"1px solid #eaecef"},M=w({},y,{color:"#424242",width:17,paddingRight:2,paddingLeft:10,"@media (max-width: 700px)":{paddingLeft:20}}),O=w({},y,{textAlign:"right",paddingRight:10,"@media (max-width: 700px)":{paddingRight:20}});ca.propTypes={path:m.string.isRequired,details:m.objectOf(m.shape({path:m.string.isRequired,type:m.oneOf(["directory",
"file"]).isRequired,contentType:m.string,integrity:m.string,size:m.number})).isRequired};fa.propTypes={path:m.string.isRequired,details:m.shape({contentType:m.string.isRequired,highlights:m.arrayOf(m.string),uri:m.string,integrity:m.string.isRequired,language:m.string.isRequired,size:m.number.isRequired}).isRequired};var Ja=c.css(ia(),'\nfont-family: -apple-system,\n  BlinkMacSystemFont,\n  "Segoe UI",\n  "Roboto",\n  "Oxygen",\n  "Ubuntu",\n  "Cantarell",\n  "Fira Sans",\n  "Droid Sans",\n  "Helvetica Neue",\n  sans-serif;\n',
"\nfont-family: Menlo,\n  Monaco,\n  Lucida Console,\n  Liberation Mono,\n  DejaVu Sans Mono,\n  Bitstream Vera Sans Mono,\n  Courier New,\n  monospace;\n"),Ka=c.css(ha()),Wa=m.shape({path:m.string.isRequired,type:m.oneOf(["directory","file"]).isRequired,details:m.object.isRequired});ka.propTypes={packageName:m.string.isRequired,packageVersion:m.string.isRequired,availableVersions:m.arrayOf(m.string),filename:m.string.isRequired,target:Wa.isRequired};A.hydrate(la.createElement(ka,window.__DATA__||
{}),document.getElementById("root"))})(React,ReactDOM,emotionCore);
</script></body></html>